(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function et(){}const Qa=e=>e;function Cl(e){return e()}function Jo(){return Object.create(null)}function Cr(e){e.forEach(Cl)}function Rs(e){return typeof e=="function"}function Lt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Mf(e){return Object.keys(e).length===0}function Pf(e,...t){if(e==null)return et;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function Xe(e,t,r){e.$$.on_destroy.push(Pf(t,r))}function Qo(e){return e==null?"":e}function Ff(e,t,r){return e.set(r),t}const El=typeof window<"u";let Sl=El?()=>window.performance.now():()=>Date.now(),Ya=El?e=>requestAnimationFrame(e):et;const Ln=new Set;function _l(e){Ln.forEach(t=>{t.c(e)||(Ln.delete(t),t.f())}),Ln.size!==0&&Ya(_l)}function wl(e){let t;return Ln.size===0&&Ya(_l),{promise:new Promise(r=>{Ln.add(t={c:e,f:r})}),abort(){Ln.delete(t)}}}function se(e,t){e.appendChild(t)}function Tl(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Vf(e){const t=oe("style");return Hf(Tl(e),t),t.sheet}function Hf(e,t){return se(e.head||e,t),t.sheet}function ye(e,t,r){e.insertBefore(t,r||null)}function me(e){e.parentNode&&e.parentNode.removeChild(e)}function dn(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function oe(e){return document.createElement(e)}function ft(e){return document.createTextNode(e)}function it(){return ft(" ")}function Ii(){return ft("")}function Dt(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function ce(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function Kf(e){return Array.from(e.childNodes)}function Gt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function kn(e,t){e.value=t==null?"":t}function Fr(e,t,r){e.classList[r?"add":"remove"](t)}function qf(e,t,{bubbles:r=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,r,n,t),i}const rs=new Map;let ns=0;function $f(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}function Gf(e,t){const r={stylesheet:Vf(t),rules:{}};return rs.set(e,r),r}function xl(e,t,r,n,i,s,a,o=0){const u=16.666/n;let l=`{
`;for(let T=0;T<=1;T+=u){const x=t+(r-t)*s(T);l+=T*100+`%{${a(x,1-x)}}
`}const c=l+`100% {${a(r,1-r)}}
}`,f=`__svelte_${$f(c)}_${o}`,d=Tl(e),{stylesheet:p,rules:g}=rs.get(d)||Gf(d,e);g[f]||(g[f]=!0,p.insertRule(`@keyframes ${f} ${c}`,p.cssRules.length));const y=e.style.animation||"";return e.style.animation=`${y?`${y}, `:""}${f} ${n}ms linear ${i}ms 1 both`,ns+=1,f}function va(e,t){const r=(e.style.animation||"").split(", "),n=r.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=r.length-n.length;i&&(e.style.animation=n.join(", "),ns-=i,ns||jf())}function jf(){Ya(()=>{ns||(rs.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&me(t)}),rs.clear())})}let Xa;function hi(e){Xa=e}const ui=[],Yo=[],zi=[],Xo=[],zf=Promise.resolve();let ba=!1;function Wf(){ba||(ba=!0,zf.then(Al))}function Qr(e){zi.push(e)}const Zs=new Set;let Pi=0;function Al(){const e=Xa;do{for(;Pi<ui.length;){const t=ui[Pi];Pi++,hi(t),Jf(t.$$)}for(hi(null),ui.length=0,Pi=0;Yo.length;)Yo.pop()();for(let t=0;t<zi.length;t+=1){const r=zi[t];Zs.has(r)||(Zs.add(r),r())}zi.length=0}while(ui.length);for(;Xo.length;)Xo.pop()();ba=!1,Zs.clear(),hi(e)}function Jf(e){if(e.fragment!==null){e.update(),Cr(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Qr)}}let ii;function Il(){return ii||(ii=Promise.resolve(),ii.then(()=>{ii=null})),ii}function is(e,t,r){e.dispatchEvent(qf(`${t?"intro":"outro"}${r}`))}const Wi=new Set;let Kr;function Dr(){Kr={r:0,c:[],p:Kr}}function Lr(){Kr.r||Cr(Kr.c),Kr=Kr.p}function Se(e,t){e&&e.i&&(Wi.delete(e),e.i(t))}function Ie(e,t,r,n){if(e&&e.o){if(Wi.has(e))return;Wi.add(e),Kr.c.push(()=>{Wi.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}else n&&n()}const Bl={duration:0};function Za(e,t,r){let n=t(e,r),i=!1,s,a,o=0;function u(){s&&va(e,s)}function l(){const{delay:f=0,duration:d=300,easing:p=Qa,tick:g=et,css:y}=n||Bl;y&&(s=xl(e,0,1,d,f,p,y,o++)),g(0,1);const T=Sl()+f,x=T+d;a&&a.abort(),i=!0,Qr(()=>is(e,!0,"start")),a=wl(k=>{if(i){if(k>=x)return g(1,0),is(e,!0,"end"),u(),i=!1;if(k>=T){const v=p((k-T)/d);g(v,1-v)}}return i})}let c=!1;return{start(){c||(c=!0,va(e),Rs(n)?(n=n(),Il().then(l)):l())},invalidate(){c=!1},end(){i&&(u(),i=!1)}}}function eo(e,t,r){let n=t(e,r),i=!0,s;const a=Kr;a.r+=1;function o(){const{delay:u=0,duration:l=300,easing:c=Qa,tick:f=et,css:d}=n||Bl;d&&(s=xl(e,1,0,l,u,c,d));const p=Sl()+u,g=p+l;Qr(()=>is(e,!1,"start")),wl(y=>{if(i){if(y>=g)return f(0,1),is(e,!1,"end"),--a.r||Cr(a.c),!1;if(y>=p){const T=c((y-p)/l);f(1-T,T)}}return i})}return Rs(n)?Il().then(()=>{n=n(),o()}):o(),{end(u){u&&n.tick&&n.tick(1,0),i&&(s&&va(e,s),i=!1)}}}function _t(e){e&&e.c()}function pt(e,t,r,n){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,r),n||Qr(()=>{const a=e.$$.on_mount.map(Cl).filter(Rs);e.$$.on_destroy?e.$$.on_destroy.push(...a):Cr(a),e.$$.on_mount=[]}),s.forEach(Qr)}function gt(e,t){const r=e.$$;r.fragment!==null&&(Cr(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Qf(e,t){e.$$.dirty[0]===-1&&(ui.push(e),Wf(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Er(e,t,r,n,i,s,a,o=[-1]){const u=Xa;hi(e);const l=e.$$={fragment:null,ctx:[],props:s,update:et,not_equal:i,bound:Jo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Jo(),dirty:o,skip_bound:!1,root:t.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=r?r(e,t.props||{},(f,d,...p)=>{const g=p.length?p[0]:d;return l.ctx&&i(l.ctx[f],l.ctx[f]=g)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](g),c&&Qf(e,f)),d}):[],l.update(),c=!0,Cr(l.before_update),l.fragment=n?n(l.ctx):!1,t.target){if(t.hydrate){const f=Kf(t.target);l.fragment&&l.fragment.l(f),f.forEach(me)}else l.fragment&&l.fragment.c();t.intro&&Se(e.$$.fragment),pt(e,t.target,t.anchor,t.customElement),Al()}hi(u)}class Sr{$destroy(){gt(this,1),this.$destroy=et}$on(t,r){if(!Rs(r))return et;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!Mf(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Yf(e){let t,r;return{c(){t=oe("span"),r=ft(e[0]),ce(t,"class","material-symbols-outlined")},m(n,i){ye(n,t,i),se(t,r)},p(n,[i]){i&1&&Gt(r,n[0])},i:et,o:et,d(n){n&&me(t)}}}function Xf(e,t,r){let{id:n}=t;return e.$$set=i=>{"id"in i&&r(0,n=i.id)},[n]}class hr extends Sr{constructor(t){super(),Er(this,t,Xf,Yf,Lt,{id:0})}}const An=[];function kl(e,t){return{subscribe:Wn(e,t).subscribe}}function Wn(e,t=et){let r;const n=new Set;function i(o){if(Lt(e,o)&&(e=o,r)){const u=!An.length;for(const l of n)l[1](),An.push(l,e);if(u){for(let l=0;l<An.length;l+=2)An[l][0](An[l+1]);An.length=0}}}function s(o){i(o(e))}function a(o,u=et){const l=[o,u];return n.add(l),n.size===1&&(r=t(i)||et),o(e),()=>{n.delete(l),n.size===0&&(r(),r=null)}}return{set:i,update:s,subscribe:a}}const Rl=["la","en","es","fr","lv"],Zf=e=>[[["1"],"",["prayer"]],[["2"],"",[e.period,"dialogue"]],[["3"],"",[e.period,"prayer"]]],eh="Alma Redemptoris Mater",th={name:eh},rh={description:["Period"],options:{before:"Up through the day before Christmas Eve",after:"From Christmas Eve on"}},nh={period:rh},ih="O Loving Mother of our Redeemer",sh=["Prayer","O loving Mother of our Redeemer, gate of heaven, star of the sea,","Hasten to aid thy fallen people who strive to rise once more.","Thou who brought forth thy holy Creator, all creation wond'ring,","Yet remainest ever Virgin, taking from Gabriel's lips",'that joyful "Hail!": be merciful to us sinners.'],ah={dialogue:["Dialogue","V. The Angel of the Lord declared unto Mary.","R. And she conceived by the Holy Spirit."],prayer:["Prayer","Let us pray. Pour forth, we beseech Thee, O Lord, Thy grace into our hearts, that we, to whom the incarnation of Christ, Thy Son, was made known by the message of an angel, may by His passion and cross be brought to the glory of His resurrection, through the same Christ our Lord. Amen."]},oh={dialogue:["Dialogue","V. Thou gavest birth without loss of thy virginity:","R. Intercede for us, O holy Mother of God."],prayer:["Prayer","Let us pray. O God, Who by the fruitful virginity of blessed Mary hast offered unto the human race the rewards of eternal salvation, grant, we beseech thee, that we may know the effects of her intercession, through whom we have deserved to receive the author of life, our Lord Jesus Christ, Thy Son. Amen."]},uh={_name:ih,prayer:sh,before:ah,after:oh},lh="Alma Redemptoris Mater",ch=["Oratio","Alma Redemptoris Mater, quae pervia caeli","Porta manes, et stella maris, sucurre cadenti,","Surgere qui curat populo: tu quae genuisti,","Natura mirante, tuum sanctum Genitorem,","Virgo prius ac posterius, Gabrielis ab ore","Sumens illud Ave, peccatorum miserere."],fh={dialogue:["Dialogus","V. Angelus Domini nuntiavit Mariae.","R. Et concepit de Spiritu Sancto."],prayer:["Oratio","Oremus. Gratiam tuam, quaesumus, Domine, mentibus nostris infunde; ut, qui, angelo nuntiante, Christi Filii tui incarnationem cognovimus, per passionem ejus et crucem, ad resurrectionis gloriam perducamur. Per eumdem Christum Dominum nostrum. Amen."]},hh={dialogue:["Dialogus","V. Post partum, Virgo, inviolata permansisti.","R. Dei Genitrix, intercede pro nobis."],prayer:["Oratio","Oremus. Deus, qui salutis aeternae, beatae Mariae virginitate fecudna, humano generi praemia praestitisti: tribue, quaesumus, ut ipsam pro nobis intercedere sentiamus, per quam meruimus auctorem vitae suscipere, Dominum nostrum Iesum Christum, Filium tuum. Amen."]},dh={_name:lh,prayer:ch,before:fh,after:hh},ph={generate:Zf,meta:th,params:nh,languages:{en:uh,la:dh}},gh=e=>e.period=="regular"?[[["1"],"",["regular","dialogue-1"]],[["2"],"hail-mary",["formula"]],[["3"],"",["regular","dialogue-2"]],[["4"],"hail-mary",["formula"]],[["5"],"",["regular","dialogue-3"]],[["6"],"hail-mary",["formula"]],[["7"],"",["regular","dialogue-4"]],[["8"],"",["regular","prayer"]]]:[[["1"],"",["pascal-season","initial-prayer"]],[["2"],"",["pascal-season","dialogue"]],[["3"],"",["pascal-season","prayer"]]],mh="Angelus",yh={name:mh},vh={description:["Period"],options:{regular:"Outside the Pascal Season","pascal-season":"Pascal Season"}},bh={period:vh},Ch="The Angelus",Eh={"dialogue-1":["Dialogue","V. The angel of the Lord declared unto Mary;","R. And she conceived of the Holy Spirit."],"dialogue-2":["Dialogue","V. Behold the handmaid of the Lord:","R. Be it done unto me according to Thy word."],"dialogue-3":["Dialogue","V. And the Word was made flesh:","R. And dwelt among us."],"dialogue-4":["Dialogue","V. Pray for us, O Holy Mother of God.","R. That we may be made worthy of the promises of Christ."],prayer:["Prayer","Let us pray. Pour forth, we beseech Thee, O Lord, Thy grace into our hearts, that we, to whom the incarnation of Christ, Thy Son, was made known by the message of an angel, may by His passion and cross be brought to the glory of His resurrection, through the same Christ our Lord.","R. Amen."]},Sh={_name:Ch,regular:Eh,"pascal-season":{"initial-prayer":["Prayer","Queen of Heaven rejoice, alleluia:","For He whom you merited to bear, alleluia,","Has risen as He said, alleluia.","Pray for us to God, alleluia."],dialogue:["Dialogue","V. Rejoice and be glad, O Virgin Mary, alleluia.","R. Because the Lord is truly risen, alleluia."],prayer:["Prayer","Let us pray. O God, who by the Resurrection of Thy Son, our Lord Jesus Christ, granted joy to the whole world: grant we beg Thee, that through the intercession of the Virgin Mary, His Mother, we may lay hold of the joys of eternal life. Through the same Christ our Lord.","R. Amen."]}},_h="Angelus",wh={"dialogue-1":["Dialogus","V. Angelus Domini nuntiavit Mariae;","R. Et concepit de Spiritu Sancto."],"dialogue-2":["Dialogus","V. Ecce ancilla Domini.","R. Fiat mihi secundum verbum tuum."],"dialogue-3":["Dialogus","V. Et Verbum caro factum est.","R. Et habitavit in nobis."],"dialogue-4":["Dialogus","V. Ora pro nobis, sancta Dei Genetrix.","R. Ut digni efficiamur promissionibus Christi."],prayer:["Oratio","Oremus. Gratiam tuam, quaesumus, Domine, mentibus nostris infunde; ut qui, Angelo nuntiante, Christi Filii tui incarnationem cognovimus, per passionem eius et crucem, ad resurrectionis gloriam perducamur. Per eundem Christum Dominum nostrum.","R. Amen."]},Th={_name:_h,regular:wh,"pascal-season":{"initial-prayer":["Oratio","Regina caeli, laetare, alleluia:","Quia quem meruisti portare, alleluia.","Resurrexit sicut dixit, alleluia.","Ora pro nobis Deum, alleluia."],dialogue:["Dialogus","V. Gaude et laetare, Virgo Maria, Alleluia,","R. Quia surrexit Dominus vere, alleluia."],prayer:["Oratio","Oremus. Deus qui per resurrectionem Filii tui, Domini nostri Iesu Christi, mundum laetificare dignatus es: praesta, quaesumus, ut per eius Genetricem Virginem Mariam, perpetuae capiamus gaudia vitae. Per eundem Christum Dominum nostrum.","R. Amen."]}},xh={generate:gh,meta:yh,params:bh,languages:{en:Sh,la:Th}},Ah=e=>[[["formula"],"",["formula"]]],Ih="Apostles' Creed",Bh={name:Ih},kh={},Rh="The Apostles' Creed",Nh=["The Apostles' Creed","I believe in God the Father Almighty, Creator of heaven and earth; and in Jesus Christ, His only Son, our Lord; Who was conceived by the Holy Spirit, born of the Virgin Mary, suffered under Pontius Pilate, was crucified, died and was buried. He descended into hell; the third day He rose again from the dead; He ascended into heaven and sits at the right hand of God, the Father Almighty; from thence He shall come to judge the living and the dead.","I believe the Holy Spirit, the holy Catholic Church, the communion of saints, the forgiveness of sins, the resurrection of the body, and life everlasting. Amen."],Dh={_name:Rh,formula:Nh},Lh="El Credo de los Ap\xF3stoles",Uh=["El Credo de los Ap\xF3stoles","Creo en Dios Padre, Todopoderoso, Creador del cielo y de la tierra. Y en Jesucristo, su \xFAnico Hijo, Nuestro Se\xF1or, que fue concebido por obra y gracia del Esp\xEDritu Santo, naci\xF3 de Santa Mar\xEDa Virgen, padeci\xF3 bajo el poder de Poncio Pilato, fue crucificado, muerto y sepultado, descendi\xF3 a los infiernos, al tercer d\xEDa resucit\xF3 entre los muertos, subi\xF3 a los cielos y est\xE1 sentado a la derecha de Dios Padre, Todopoderoso. Desde all\xED vendr\xE1 a juzgar a vivos y a muertos.","Creo en el Esp\xEDritu Santo, la Santa Iglesia Cat\xF3lica, la comuni\xF3n de los santos, el perd\xF3n de los pecados, la resurrecci\xF3n de la carne y la vida perdurable. Am\xE9n."],Oh={_name:Lh,formula:Uh},Mh="Symbole des Ap\xF4tres",Ph=["Symbole des Ap\xF4tres","Je crois en Dieu, le P\xE8re tout-puissant, Cr\xE9ateur du ciel et de la terre. Et en J\xE9sus Christ, son Fils unique, notre Seigneur ; qui a \xE9t\xE9 con\xE7u du Saint Esprit, est n\xE9 de la Vierge Marie, a souffert sous Ponce Pilate, a \xE9t\xE9 crucifi\xE9, est mort et a \xE9t\xE9 enseveli, est descendu aux enfers ; le troisi\xE8me jour est ressuscit\xE9 des morts, est mont\xE9 aux cieux, est assis \xE0 la droite de Dieu le P\xE8re tout-puissant, d\u2019o\xF9 il viendra juger les vivants et les morts.","Je crois en l\u2019Esprit Saint, \xE0 la sainte \xC9glise catholique, \xE0 la communion des saints, \xE0 la r\xE9mission des p\xE9ch\xE9s, \xE0 la r\xE9surrection de la chair, \xE0 la vie \xE9ternelle. Amen."],Fh={_name:Mh,formula:Ph},Vh="Symbolum Apostolicum",Hh=["Symbolum Apostolicum","Credo in Deum, Patrem omnipotentem, creatorem caeli et terrae. Et in Iesum Christum, Filium eius unicum, Dominum nostrum, qui conceptus est de Spiritu Sancto, natus ex Maria Virgine, passus sub Pontio Pilato, crucifixus, mortuus et sepultus. Descendit ad inferos, tertia die resurrexit a mortuis. Ascendit ad caelos, sedet ad dextram Dei Patris omnipotentis. Inde venturus est iudicare vivos et mortuos.","Credo in Spiritum Sanctum, sanctam Ecclesiam catholicam, sanctorum communionem, remissionem peccatorum, carnis resurrectionem, vitam aeternam. Amen."],Kh={_name:Vh,formula:Hh},qh="Tic\u012Bbas apliecin\u0101jums",$h=["Tic\u012Bbas apliecin\u0101jums","Es ticu uz Dievu, visvareno T\u0113vu, debesu un zemes Rad\u012Bt\u0101ju, un uz J\u0113zu Kristu, Vi\u0146a vienpiedzimu\u0161o D\u0113lu, m\u016Bsu Kungu, kas ir ie\u0146emts no Sv\u0113t\u0101 Gara, piedzimis no Jaunavas Marijas, cietis zem Poncija Pil\u0101ta, krust\u0101 sists, nomiris un apbed\u012Bts, nok\u0101pis ell\u0113, tre\u0161aj\u0101 dien\u0101 aug\u0161\u0101mc\u0113lies no miru\u0161ajiem, uzk\u0101pis debes\u012Bs, s\u0113\u017E pie Dieva, visvaren\u0101 T\u0113va, lab\u0101s rokas, no kurienes Vi\u0146\u0161 atn\u0101ks ties\u0101t dz\u012Bvos un miru\u0161os.","Es ticu uz Sv\u0113to Garu, sv\u0113to katolisko Bazn\u012Bcu, sv\u0113to sadraudz\u012Bbu, gr\u0113ku piedo\u0161anu, miesas aug\u0161\u0101mcel\u0161anos un m\u016B\u017E\u012Bgo dz\u012Bvo\u0161anu. Amen."],Gh={_name:qh,formula:$h},jh={generate:Ah,meta:Bh,params:kh,languages:{en:Dh,es:Oh,fr:Fh,la:Kh,lv:Gh}},zh=e=>[[["1"],"",["prayer-1"]],[["2"],"",["prayer-2"]],[["3"],"",["dialogue"]],[["4"],"",["prayer"]]],Wh="Ave Regina caelorum",Jh={name:Wh},Qh={},Yh="Hail, O Queen of Heaven",Xh=["Dialogus","V. Allow me to praise thee, O sacred Virgin.","R. Against thy enemies give me strength."],Zh=["Oratio","Let us pray. Grant unto us, O merciful God, a defense against our weakness, that we who remember the holy Mother of God, by the help of her intercession, may rise from our iniquities, through the same Christ our Lord. Amen."],ed={_name:Yh,"prayer-1":["Prayer","Welcome, O Queen of Heaven.","Welcome, O Lady of Angels","Hail! thou root, hail! thou gate","From whom unto the world, a light has arisen:"],"prayer-2":["Prayer","Rejoice, O glorious Virgin,","Lovely beyond all others,","Farewell, most beautiful maiden,","And pray for us to Christ."],dialogue:Xh,prayer:Zh},td="Ave Regina caelorum",rd=["Dialogus","V. Dignare me laudare te, Virgo sacrata.","R. Da mihi virtutem contra hostes tuos."],nd=["Oratio","Oremus. Concede, misericors Deus, fragilitati nostrae praesidium: ut, qui sanctae Dei Genitricis memoriam agimus; intercessionis eius auxilio, a nostris iniquitatibus resurgamus. Per eundem Christum Dominum nostrum. Amen."],id={_name:td,"prayer-1":["Oratio","Ave, Regina caelorum,","Ave, Domina Angelorum:","Salve, radix, salve, porta","Ex qua mundo lux est orta:"],"prayer-2":["Oratio","Gaude, Virgo gloriosa,","Super omnes speciosa,","Vale, o valde decora,","Et pro nobis Christum exora."],dialogue:rd,prayer:nd},sd={generate:zh,meta:Jh,params:Qh,languages:{en:ed,la:id}},ad=e=>{let t=[[["1"],"",["prayer"]]];return e.time!="morning"&&t.push([["2"],"",[e.time]]),t},od="Blessing before meals",ud={name:od},ld={description:["Time of day"],options:{morning:"Morning",midday:"Midday",evening:"Evening"}},cd={time:ld},fd="Blessing before meals",hd=["Prayer","Bless us, O Lord, and these Thy gifts which we are about to receive from Thy bounty, through Christ our Lord. Amen."],dd=["Prayer","May the King of everlasting glory make us partakers of the heavenly table. Amen."],pd=["Prayer","May the King of ever-lasting glory lead us to the banquet of life eternal. Amen."],gd={_name:fd,prayer:hd,midday:dd,evening:pd},md="Benedictio ante mensam",yd=["Oratio","Benedic, Domine, nos et haec tua dona quae de tua largitate sumus sumpturi. Per Christum Dominum nostrum. Amen."],vd=["Oratio","Mensae caelestis participes faciat nos, Rex aeternae gloriae. Amen."],bd=["Oratio","Ad cenam vitae aeternae perducat nos, Rex aeternae gloriae. Amen."],Cd={_name:md,prayer:yd,midday:vd,evening:bd},Ed={generate:ad,meta:ud,params:cd,languages:{en:gd,la:Cd}},Sd=e=>[[["1"],"",["prayer"]],[["2"],"",["dialogue"]]],_d="Blessing after meals",wd={name:_d},Td={},xd="Blessing after meals",Ad=["Prayer","We give Thee thanks, almighty God, for all Thy benefits, who livest and reignest for ever and ever. Amen."],Id=["Dialogue","V. May the Lord grant us His peace.","R. And life everlasting.","Amen."],Bd={_name:xd,prayer:Ad,dialogue:Id},kd="Benedictio post mensam",Rd=["Oratio","Agimus tibi gratias, omnipotens Deus, pro universis beneficiis tuis, qui vivis et regnas in saecula saeculorum. Amen."],Nd=["Dialogus","V. Deus det nobis suam pacem.","R. Et vitam aeternam.","Amen."],Dd={_name:kd,prayer:Rd,dialogue:Nd},Ld={generate:Sd,meta:wd,params:Td,languages:{en:Bd,la:Dd}},Ud=e=>{let t=[[["initial","1"],"lords-prayer",["formula"]],[["initial","2"],"hail-mary",["formula"]],[["initial","3"],"apostles-creed",["formula"]]];for(let r=0;r<5;r++){t.push([["decades",[r,5],"our-father-bead"],"",["our-father-bead"],"On the Our Father bead, say this prayer"]);for(let n=0;n<10;n++)t.push([["decades",[r,5],"hail-mary-bead",[n,10]],"",["hail-mary-bead"],"On the Hail Mary bead, say this prayer"])}for(let r=0;r<3;r++)t.push([["concluding",[r,3]],"",["concluding-prayer"]]);return t},Od="Chaplet of Divine Mercy",Md={name:Od},Pd={},Fd="The Chaplet of Divine Mercy",Vd={_name:Fd,"our-father-bead":["Prayer","Eternal Father, I offer you the Body and Blood, Soul and Divinity of Your Dearly Beloved Son, Our Lord, Jesus Christ, in atonement for our sins and those of the whole world."],"hail-mary-bead":["Prayer","For the sake of His sorrowful Passion, have mercy on us and on the whole world."],"concluding-prayer":["Prayer","Holy God, Holy Mighty One, Holy Immortal One, have mercy on us and on the whole world."]},Hd="Corona Divinae Misericordiae",Kd={_name:Hd,"our-father-bead":["Oratio","Pater aeterne, offero tibi Corpus et Sanguinem, animam et divinitatem dilectissimi Filii Tui, Domini nostri, Iesu Christi, in propitiatione pro peccatis nostris et totius mundi."],"hail-mary-bead":["Oratio","Pro dolorosa Eius passione, miserere nobis et totius mundi."],"concluding-prayer":["Oratio","Sanctus Deus, Sanctus Fortis, Sanctus Immortalis, miserere nobis et totius mundi."]},qd={generate:Ud,meta:Md,params:Pd,languages:{en:Vd,la:Kd}},$d=e=>[[["formula"],"",["formula"]]],Gd="Confiteor",jd={name:Gd},zd={},Wd="I Confess",Jd=["I Confess","I confess to almighty God, to blessed Mary ever Virgin, to blessed Michael the Archangel, to blessed John the Baptist, to the holy apostles Peter and Paul, and to all the saints that I have sinned exceedingly in thought, word, and deed, through my fault, through my fault, through my most grievous fault. Therefore, I beseech blessed Mary ever Virgin, blessed Michael the Archangel, blessed John the Baptist, the holy apostles Peter and Paul, and all the saints, to pray for me to the Lord our God. Amen."],Qd={_name:Wd,formula:Jd},Yd="Confiteor",Xd=["Confiteor","Confiteor Deo omnipotenti, beatae Mariae semper Virgini, beato Michaeli Archangelo, beato Ioanni Baptistae, sanctis Apostolis Petro et Paulo, et omnibus Sanctis, quia peccavi nimis cogitatione, verbo et opere: mea culpa, mea culpa, mea maxima culpa. Ideo precor beatam Mariam semper Virginem, beatum Michaelem Archangelum, beatum Ioannem Baptistam, sanctos Apostolos Petrum et Paulum, et omnes Sanctos, orare pro me ad Dominum Deum nostrum. Amen."],Zd={_name:Yd,formula:Xd},e0={generate:$d,meta:jd,params:zd,languages:{en:Qd,la:Zd}},t0=e=>[[["formula"],"",["formula"]]],r0="Fatima Prayer",n0={name:r0},i0={},s0="Fatima Prayer",a0=["Fatima Prayer","O my Jesus, forgive us our sins, save us from the fires of hell, and lead all souls to heaven, especially those most in need of Thy mercy."],o0={_name:s0,formula:a0},u0="Oraci\xF3n de F\xE1tima",l0=["Oraci\xF3n de F\xE1tima","\xA1Oh! Jes\xFAs m\xEDo, perdona nuestros pecados, l\xEDbranos del fuego del infierno, lleva al cielo a todas las almas, especialmente a las m\xE1s necesitadas de Tu misericordia."],c0={_name:u0,formula:l0},f0="Pri\xE8re de Fatima",h0=["Pri\xE8re de Fatima","\xD4 mon J\xE9sus, pardonnez-nous nos p\xE9ch\xE9s, pr\xE9servez-nous du feu de l'enfer, et conduisez au Ciel toutes les \xE2mes, sp\xE9cialement celles qui ont le plus besoin de votre mis\xE9ricorde."],d0={_name:f0,formula:h0},p0="Oratio Fatima",g0=["Oratio Fatima","Domine Iesu, dimitte nobis debita nostra, salva nos ab igne inferiori, perduc in caelum omnes animas, praesertim eas quae misericordiae tuae maximae indigent."],m0={_name:p0,formula:g0},y0="Fatimas l\u016Bg\u0161ana",v0=["Fatimas l\u016Bg\u0161ana","Mans J\u0113zu, piedod mums m\u016Bsu vainas, pasargi m\u016Bs no elles uguns un aizved visas dv\u0113seles uz debes\u012Bm, it sevi\u0161\u0137i t\u0101s, kur\u0101m visvair\u0101k vajadz\u012Bga Tava \u017E\u0113lsird\u012Bba."],b0={_name:y0,formula:v0},C0={generate:t0,meta:n0,params:i0,languages:{en:o0,es:c0,fr:d0,la:m0,lv:b0}},E0=e=>[[["formula"],"",["formula"]]],S0="Glory Be",_0={name:S0},w0={},T0="Glory be to the Father",x0=["Glory be to the Father","Glory be to the Father, and to the Son, and to the Holy Spirit.","As it was in the beginning, is now, and ever shall be, world without end. Amen."],A0={_name:T0,formula:x0},I0="Gloria al Padre",B0=["Gloria al Padre","Gloria al Padre y al Hijo y al Esp\xEDritu Santo.","Como era en el principio, ahora y siempre, por los siglos de los siglos. Am\xE9n."],k0={_name:I0,formula:B0},R0="Gloire au P\xE8re",N0=["Gloire au P\xE8re","Gloire au P\xE8re et au Fils at au Saint-Esprit.","Comme il \xE9tait au commencement, maintenant et toujours, et dans les si\xE8cles des si\xE8cles. Amen."],D0={_name:R0,formula:N0},L0="Gloria Patri",U0=["Gloria Patri","Gloria Patri, et Filio, et Spiritui Sancto.","Sicut erat in principio, et nunc, et semper, et in saecula saeculorum. Amen."],O0={_name:L0,formula:U0},M0="Gods lai ir T\u0113vam",P0=["Gods lai ir T\u0113vam","Gods lai ir T\u0113vam un D\u0113lam, un Sv\u0113tajam Garam.","K\u0101 tas no ies\u0101kuma bijis, t\u0101 tagad un vienm\u0113r, un m\u016B\u017E\u012Bgi m\u016B\u017Eam. Amen."],F0={_name:M0,formula:P0},V0={generate:E0,meta:_0,params:w0,languages:{en:A0,es:k0,fr:D0,la:O0,lv:F0}},H0=e=>[[["formula"],"",["formula"]]],K0="Hail Mary",q0={name:K0},$0={},G0="Hail Mary",j0=["Hail Mary","Hail, Mary, full of grace; the Lord is with thee; blessed art thou among women, and blessed is the fruit of thy womb, Jesus.","Holy Mary, Mother of God, pray for us sinners, now and at the hour of our death. Amen."],z0={_name:G0,formula:j0},W0="Ave Mar\xEDa",J0=["Ave Mar\xEDa","Dios te salve, Mar\xEDa; llena eres de gracia; el Se\xF1or es contigo; bendita t\xFA eres entre todas las mujeres, y bendito es el fruto de tu vientre, Jes\xFAs.","Santa Mar\xEDa, Madre de Dios, ruega por nosotros, pecadores, ahora y en la hora de nuestra muerte. Am\xE9n."],Q0={_name:W0,formula:J0},Y0="Je vous salue Marie",X0=["Je vous salue Marie","Je vous salue, Marie, pleine de gr\xE2ces, le Seigneur est avec vous, vous \xEAtes b\xE9nie entre toutes les femmes, et J\xE9sus, le fruit de vos entrailles, est b\xE9ni.","Sainte Marie, M\xE8re de Dieu, priez pour nous, pauvres p\xE9cheurs, maintenant, et \xE0 l'heure de notre mort. Amen."],Z0={_name:Y0,formula:X0},ep="Ave Maria",tp=["Ave Maria","Ave Maria, gratia plena: Dominus tecum, benedicta tu in mulieribus, et benedictus fructus ventris tui, Iesus.","Sancta Maria, Mater Dei, ora pro nobis peccatoribus, nunc et in hora mortis nostrae. Amen."],rp={_name:ep,formula:tp},np="Esi sveicin\u0101ta, Marija",ip=["Esi sveicin\u0101ta, Marija","Esi sveicin\u0101ta, Marija, \u017E\u0113last\u012Bbas piln\u0101, Kungs ir ar Tevi; Tu esi sv\u0113t\u012Bta starp sieviet\u0113m, un sv\u0113t\u012Bts ir Tavas miesas auglis J\u0113zus.","Sv\u0113t\u0101 Marija, Dieva M\u0101te, l\u016Bdz par mums, gr\u0113ciniekiem, tagad un m\u016Bsu n\u0101ves stund\u0101. Amen."],sp={_name:np,formula:ip},ap={generate:H0,meta:q0,params:$0,languages:{en:z0,es:Q0,fr:Z0,la:rp,lv:sp}},op=e=>[[["formula"],"",["formula"]]],up="Lord's Prayer",lp={name:up},cp={},fp="Lord's Prayer",hp=["Lord's Prayer","Our Father, Who art in heaven, hallowed by Thy name, Thy kingdom come; Thy will be done on earth as it is in heaven.","Give us this day our daily bread; and forgive us our trespasses, as we forgive those who trespass against us. And lead us not into temptation; but deliver us from evil. Amen."],dp={_name:fp,formula:hp},pp="Padrenuestro",gp=["Padrenuestro","Padre Nuestro, que est\xE1s en el cielo, santificado sea tu nombre venga a nosotros tu reino; h\xE1gase tu voluntad, en la tierra como en el cielo.","Danos hoy nuestro pan de cada d\xEDa; perdona nuestras ofensas, como tambi\xE9n nosotros perdonamos a los que nos ofenden; no nos dejes caer en la tentaci\xF3n, y l\xEDbranos del mal. Am\xE9n."],mp={_name:pp,formula:gp},yp="Notre P\xE8re",vp=["Notre P\xE8re","Notre P\xE8re, qui es aux cieux, que ton nom soit sanctifi\xE9, que ton r\xE8gne vienne, que ta volont\xE9 soit faite sur la terre comme au ciel.","Donne-nous aujourd'hui notre pain de ce jour, pardonne-nous nos offenses, comme nous pardonnons aussi \xE0 ceux qui nous ont offens\xE9s, et ne nous laisse pas entrer en tentation, mais d\xE9livre-nous du mal. Amen."],bp={_name:yp,formula:vp},Cp="Dominica oratio",Ep=["Dominica oratio","Pater noster, qui es in caelis: Sanctificetur nomen tuum: Adveniat regnum tuum: Fiat voluntas tua, sicut in caelo, et in terra.","Panem nostrum quotidianum da nobis hodie: Et dimitte nobis debita nostra, sicut et nos dimittimus debitoribus nostris. Et ne nos inducas in tentationem, sed libera nos a malo. Amen."],Sp={_name:Cp,formula:Ep},_p="Kunga J\u0113zus l\u016Bg\u0161ana",wp=["Kunga J\u0113zus l\u016Bg\u0161ana","T\u0113vs m\u016Bsu, kas esi debes\u012Bs, sv\u0113t\u012Bts lai top Tavs v\u0101rds, lai atn\u0101k Tava valst\u012Bba, Tavs pr\u0101ts lai notiek k\u0101 debes\u012Bs, t\u0101 ar\u012B virs zemes.","M\u016Bsu dieni\u0161\u0137o maizi dod mums \u0161odien un piedod mums m\u016Bsu par\u0101dus, k\u0101 ar\u012B m\u0113s piedodam saviem par\u0101dniekiem, un neieved m\u016Bs k\u0101rdin\u0101\u0161an\u0101, bet atpest\u012B m\u016Bs no \u013Cauna. Amen."],Tp={_name:_p,formula:wp},xp={generate:op,meta:lp,params:cp,languages:{en:dp,es:mp,fr:bp,la:Sp,lv:Tp}},Ap=e=>[[["formula"],"",["formula"]]],Ip="Prayer to Your Guardian Angel",Bp={name:Ip},kp={},Rp="Angel of God",Np=["Angel of God","Angel of God,","my guardian dear,","To whom his love commits me here;","Ever this (day, night) be at my side,","To light and guard, to rule and guide.","Amen."],Dp={_name:Rp,formula:Np},Lp="Angele Dei",Up=["Angele Dei","Angele Dei,","qui custos es mei,","To whom his love commits me here;","Me tibi commissum pietate superna;","(Hodie, Hac nocte) illumina, custodi, rege, et guberna.","Amen."],Op={_name:Lp,formula:Up},Mp={generate:Ap,meta:Bp,params:kp,languages:{en:Dp,la:Op}},Pp=e=>[[["1"],"",["dialogue"]],[["2"],"",["prayer"]]],Fp="Regina caeli",Vp={name:Fp},Hp={},Kp="Queen of Heaven",qp=["Dialogue","V. Queen of Heaven, rejoice, alleluia.","R. For He whom you did merit to bear, alleluia.","V. Has risen, as he said, alleluia.","R. Pray for us to God, alleluia.","V. Rejoice and be glad, O Virgin Mary, alleluia.","R. For the Lord has truly risen, alleluia."],$p=["Prayer","Let us pray. O God, who gave joy to the world through the resurrection of Thy Son, our Lord Jesus Christ, grant we beseech Thee, that through the intercession of the Virgin Mary, His Mother, we may obtain the joys of everlasting life. Through the same Christ our Lord. Amen."],Gp={_name:Kp,dialogue:qp,prayer:$p},jp="Regina caeli",zp=["Dialogus","V. Regina caeli, laetare, alleluia.","R. Quia quem meruisti portare, alleluia.","V. Resurrexit, sicut dixit, alleluia.","R. Ora pro nobis Deum, alleluia.","V. Gaude et laetare, Virgo Maria, alleluia.","R. Quia surrexit Dominus vere, alleluia."],Wp=["Oratio","Oremus. Deus, qui per resurrectionem Filii tui, Domini nostri Iesu Christi, mundum laetificare dignatus es: praesta, quaesumus; ut per eius Genetricem Virginem Mariam, perpetuae capiamus gaudia vitae. Per eundem Christum Dominum nostrum. Amen."],Jp={_name:jp,dialogue:zp,prayer:Wp},Qp={generate:Pp,meta:Vp,params:Hp,languages:{en:Gp,la:Jp}},Yp=e=>{let t;e["glory-be"]=="good-friday"?t=["",["good-friday"]]:e["glory-be"]=="holy-saturday"?t=["",["holy-saturday"]]:t=["glory-be",["formula"]];let r;const n=e.weekday;n=="mon"||n=="sat"||n=="sun-advent-christmas"?r="joyful-mysteries":n=="tue"||n=="fri"||n=="sun-lent"?r="sorrowful-mysteries":n=="wed"||n=="sun"?r="glorious-mysteries":r="luminous-mysteries";let i=[[["initial","1"],"",[r,"introduction"]],[["initial","2"],"sign-of-the-cross",["formula"]],[["initial","3"],"apostles-creed",["formula"],"Holding the Crucifix, say the Apostles' Creed"],[["initial","4"],"lords-prayer",["formula"],"On the first bead, say an Our Father"]];for(let s=0;s<3;s++)i.push([["initial","5",[s,3]],"hail-mary",["formula"],"Say one Hail Mary on each of the next three beads"]);i.push([["initial","6"]].concat(t));for(let s=0;s<5;s++){i=i.concat([[["decades",[s,5],"introduction"],"",[r,(s+1).toString(),"introduction"],"Announce the Mystery"],[["decades",[s,5],"scripture"],"",[r,(s+1).toString(),"scripture"],"Optionally, have a brief reading from the Scripture"],[["decades",[s,5],"lords-prayer"],"lords-prayer",["formula"]]]);for(let a=0;a<10;a++)i.push([["decades",[s,5],"hail-mary",[a,10]],"hail-mary",["formula"],"Say ten Hail Marys while meditating on the Mystery"]);i=i.concat([[["decades",[s,5],"glory-be"]].concat(t),[["decades",[s,5],"fatima-prayer"],"fatima-prayer",["formula"],"Optionally, say the Fatima Prayer"]])}return i=i.concat([[["concluding","salve-regina","prayer"],"salve-regina",["prayer"]],[["concluding","salve-regina","dialogue"],"salve-regina",["dialogue"]],[["concluding","salve-regina","concluding-prayer"],"",["salve-regina-concluding-prayer"]],[["concluding","prayer-to-st-joseph"],"",["prayer-to-st-joseph"],"Optionally, say the prayer to St Joseph"],[["concluding","sign-of-the-cross"],"sign-of-the-cross",["formula"]]]),i},Xp="Rosary",Zp={name:Xp},eg={description:["Day of the week"],options:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday","sun-advent-christmas":"Sunday of Advent or Christmas","sun-lent":"Sunday of Lent"}},tg={weekday:eg,"glory-be":{description:["Glory Be"],options:{regular:"Regular","good-friday":"Good Friday","holy-saturday":"Holy Saturday"}}},rg="The Rosary",ng={_name:rg,"salve-regina-concluding-prayer":["Prayer","Let us pray. O God, Whose Only-Begotten Son, by His life, death and resurrection, has purchased for us the rewards of eternal life: grant, we beseech Thee, that by meditating upon these mysteries of the most holy Rosary of the Blessed Virgin Mary, we may imitate what they contain, and obtain what they promise, through the same Christ our Lord. Amen."],"prayer-to-st-joseph":["Prayer to Saint Joseph","To you, O blessed Joseph, do we come in our tribulation, and having implored the help of your most holy Spouse, we confidently invoke your patronage also.","Through that charity which bound you to the Immaculate Virgin Mother of God and through the paternal love with which you embraced the Child Jesus, we humbly beg you graciously to regard the inheritance which Jesus Christ has purchased by his Blood, and with your power and strength to aid us in our necessities.","O most watchful guardian of the Holy Family, defend the chosen children of Jesus Christ; O most loving father, ward off from us every contagion of error and corrupting influence; O our most mighty protector, be kind to us and from heaven assist us in our struggle with the power of darkness.","As once you rescued the Child Jesus from deadly peril, so now protect God's Holy Church from the snares of the enemy and from all adversity; shield, too, each one of us by your constant protection, so that, supported by your example and your aid, we may be able to live piously, to die in holiness, and to obtain eternal happiness in heaven.","Amen."],"good-friday":["Dialogue","V. Christ became obedient for us unto death.","R. Even unto death on the Cross."],"holy-saturday":["Dialogue","V. Christ became obedient for us unto death, even unto death on the Cross.","R. For which God hath exalted Him and hath given Him a name which is above all names."],"joyful-mysteries":{1:{introduction:["The Annunciation","First Joyful Mystery","Him Whom thou didst conceive.","Fruit of the mystery: Humility"],scripture:["[Mt 1:18, Lk 1:26-38]"]},2:{introduction:["The Visitation","Second Joyful Mystery","Him Whom thou didst carry while visiting Elizabeth.","Fruit of the mystery: Love of Neighbor"],scripture:["[Lk 1:39-45]"]},3:{introduction:["The Nativity","Third Joyful Mystery","Him Whom thou didst give birth to.","Fruit of the mystery: Poverty"],scripture:["[Lk 2:6-12]"]},4:{introduction:["The Presentation in the Temple","Fourth Joyful Mystery","Him Whom thou didst present in the temple.","Fruit of the mystery: Purity of Heart and Body"],scripture:["[Lk 2:25-32]"]},5:{introduction:["The Finding in the Temple","Fifth Joyful Mystery","Him Whom thou didst find in the temple.","Fruit of the mystery: Devotion to Jesus"],scripture:["[Lk 2:41-50]"]},introduction:["Joyful Mysteries"]},"luminous-mysteries":{1:{introduction:["The Baptism of Christ in the Jordan","First Luminous Mystery","He Who was baptized in the Jordan.","Fruit of the mystery: Openness to the Holy Spirit"],scripture:["[Mt 3:13, Mk 1:9, Jn 1:29]"]},2:{introduction:["The Wedding Feast at Cana","Second Luminous Mystery","He Who revealed Himself at the wedding feast of Cana.","Fruit of the mystery: To Jesus through Mary"],scripture:["[Jn 2:1-11]"]},3:{introduction:["Jesus' Proclamation of the Coming of the Kingdom of God","Third Luminous Mystery","He who announced the Kingdom of God.","Fruit of the mystery: Conversion"],scripture:["[Mk 1:15, Lk 10:8-11]"]},4:{introduction:["The Transfiguration","Fourth Luminous Mystery","He Who was transfigured.","Fruit of the mystery: Desire for holiness"],scripture:["[Mt 17:1-8, Mk 9:2-9]"]},5:{introduction:["The Institution of the Eucharist","Fifth Luminous Mystery","He Who instituted the Eucharist.","Fruit of the mystery: Adoration"],scripture:["[Jn 6:27-59, Mt 26:26-29, Mk 14:22-24, Lk 22:15-20]"]},introduction:["Luminous Mysteries"]},"sorrowful-mysteries":{1:{introduction:["The Agony in the Garden","First Sorrowful Mystery","He Who sweated blood for us.","Fruit of the mystery: Obedience to God\u2019s Will"],scripture:["[Lc 22:39-46]"]},2:{introduction:["The Scourging at the Pillar","Second Sorrowful Mystery","He Who was scourged for us.","Fruit of the mystery: Mortification"],scripture:["[Mt 27:26, Mk 15:6-15, Jn 19:1]"]},3:{introduction:["The Crowning with Thorns","Third Sorrowful Mystery","He Who was crowned with thorns for us.","Fruit of the mystery: Courage"],scripture:["[Jn 19:1-8]"]},4:{introduction:["The Carrying of the Cross","Fourth Sorrowful Mystery","He Who carried the Cross for us.","Fruit of the mystery: Patience"],scripture:["[Jn 19:16-22]"]},5:{introduction:["The Crucifixion and Death","Fifth Sorrowful Mystery","He Who was crucified for us.","Fruit of the mystery: Sorrow for our Sins"],scripture:["[Jn 19:25-30]"]},introduction:["Sorrowful Mysteries"]},"glorious-mysteries":{1:{introduction:["The Resurrection","First Glorious Mystery","He Who arose from the dead.","Fruit of the mystery: Faith"],scripture:["[Mk 16:1-7]"]},2:{introduction:["The Ascension","Second Glorious Mystery","He Who ascended into heaven.","Fruit of the mystery: Hope"],scripture:["[Lk 24:46-53]"]},3:{introduction:["The Descent of the Holy Spirit","Third Glorious Mystery","He Who sent the Holy Spirit.","Fruit of the mystery: Wisdom"],scripture:["[Act 2:1-7]"]},4:{introduction:["The Assumption","Fourth Glorious Mystery","He Who assumed thee into heaven.","Fruit of the mystery: Devotion to Mary"],scripture:["[Ps 16:10]"]},5:{introduction:["The Coronation of Mary","Fifth Glorious Mystery","He Who crowned thee Queen of Heaven.","Fruit of the mystery: Grace of a happy death"],scripture:["[Rev 12:1]"]},introduction:["Glorious Mysteries"]}},ig="El Rosario",sg={_name:ig,"salve-regina-concluding-prayer":["Oraci\xF3n","Oremos. Te pedimos, Se\xF1or, nos concedas a nosotros tus siervos, gozar de perpetua salud de alma y cuerpo, y por la gloriosa intercesi\xF3n de la bienaventurada siempre Virgen Mar\xEDa, seamos librados de las tristezas presentes y gocemos de la eterna alegr\xEDa. Por Jesucristo, nuestro Se\xF1or. Am\xE9n."],"prayer-to-st-joseph":["Oraci\xF3n a San Jos\xE9","A ti, bienaventurado san Jos\xE9, acudimos en nuestra tribulaci\xF3n, y despu\xE9s de implorar el auxilio de tu sant\xEDsima esposa, solicitamos tambi\xE9n confiadamente tu patrocinio.","Con aquella caridad que te tuvo unido con la Inmaculada Virgen Mar\xEDa, Madre de Dios, y por el paterno amor con que abrazaste al Ni\xF1o Jes\xFAs, humildemente te suplicamos que vuelvas benigno los ojos a la herencia que con su Sangre adquiri\xF3 Jesucristo, y con tu poder y auxilio socorras nuestras necesidades.","Protege, oh provident\xEDsimo Custodio de la divina Familia, la escogida descendencia de Jesucristo; aleja de nosotros, oh padre amant\xEDsimo, este flagelo de errores y vicios.","As\xEDstenos propicio desde el cielo, en esta lucha contra el poder de las tinieblas; y como en otro tiempo libraste de la muerte la vida amenazada del Ni\xF1o Jes\xFAs, as\xED ahora defiende a la santa Iglesia de Dios de las hostiles insidias y de toda adversidad. Y a cada uno de nosotros prot\xE9genos con tu constante patrocinio, para que, a ejemplo tuyo, y sostenidos por tu auxilio, podamos vivir y morir santamente y alcanzar en los cielos la eterna bienaventuranza.","Am\xE9n."],"good-friday":["Di\xE1logo","V. Christ became obedient for us unto death.","R. Even unto death on the Cross."],"holy-saturday":["Di\xE1logo","V. Christ became obedient for us unto death, even unto death on the Cross.","R. For which God hath exalted Him and hath given Him a name which is above all names."],"joyful-mysteries":{1:{introduction:["La Encarnaci\xF3n del Hijo de Dios","Primer Misterio Gozoso","Him Whom thou didst conceive.","Fruit of the mystery: Humility"],scripture:["[Lc 1,26-27]"]},2:{introduction:["La Visitaci\xF3 de Nuestra Se\xF1ora a su prima Santa Isabel","Segundo Misterio Gozoso","Him Whom thou didst carry while visiting Elizabeth.","Fruit of the mystery: Love of Neighbor"],scripture:["[Lc 1, 39-42]"]},3:{introduction:["El Nacimiento del Hijo de Dios en el portal de Bel\xE9n","Tercer Misterio Gozoso","Him Whom thou didst give birth to.","Fruit of the mystery: Poverty"],scripture:["[Lc 2,1-7]"]},4:{introduction:["La presentaci\xF3n de Jes\xFAs en el Templo","Cuarto Misterio Gozoso","Him Whom thou didst present in the temple.","Fruit of the mystery: Purity of Heart and Body"],scripture:["[Lc 2, 21-24]"]},5:{introduction:["El Ni\xF1o Jes\xFAs perdido y hallado en el Templo","Quinto Misterio Gozoso","Him Whom thou didst find in the temple.","Fruit of the mystery: Devotion to Jesus"],scripture:["[Lc 2, 41-47]"]},introduction:["Misterios Gozosos"]},"luminous-mysteries":{1:{introduction:["El Bautismo en el Jord\xE1n","Primer Misterio Luminoso","He Who was baptized in the Jordan.","Fruit of the mystery: Openness to the Holy Spirit"],scripture:["[Mt 3,16-17]"]},2:{introduction:["Las bodas de Can\xE1","Segundo Misterio Luminoso","He Who revealed Himself at the wedding feast of Cana.","Fruit of the mystery: To Jesus through Mary"],scripture:["[Jn 2, 1-5]"]},3:{introduction:["El anuncio del Reino de Dios","Tercer Misterio Luminoso","He who announced the Kingdom of God.","Fruit of the mystery: Conversion"],scripture:["[Mc 1, 15]"]},4:{introduction:["La Transfiguraci\xF3n","Cuarto Misterio Luminoso","He Who was transfigured.","Fruit of the mystery: Desire for holiness"],scripture:["[Mt 17, 1-2]"]},5:{introduction:["La instituci\xF3n de la Eucarist\xEDa","Quinto Misterio Luminoso","He Who instituted the Eucharist.","Fruit of the mystery: Adoration"],scripture:["[Mt 26, 26]"]},introduction:["Misterios Luminosos"]},"sorrowful-mysteries":{1:{introduction:["La oraci\xF3n en el Huerto","Primer Misterio Doloroso","He Who sweated blood for us.","Fruit of the mystery: Obedience to God\u2019s Will"],scripture:["[Mt 26, 36-39]"]},2:{introduction:["La flagelaci\xF3n de Jes\xFAs atado a la columna","Segundo Misterio Doloroso","He Who was scourged for us.","Fruit of the mystery: Mortification"],scripture:["[Mt 27, 26]"]},3:{introduction:["La coronaci\xF3n de espinas","Tercer Misterio Doloroso","He Who was crowned with thorns for us.","Fruit of the mystery: Courage"],scripture:["[Mt 27, 27-29]"]},4:{introduction:["Jes\xFAs con la Cruz a cuestas camino del Calvario","Cuarto Misterio Doloroso","He Who carried the Cross for us.","Fruit of the mystery: Patience"],scripture:["[Mc 15, 21-22]"]},5:{introduction:["La crucifixi\xF3n y muerte de Jes\xFAs","Quinto Misterio Doloroso","He Who was crucified for us.","Fruit of the mystery: Sorrow for our Sins"],scripture:["[Lc  23, 33-46]"]},introduction:["Misterios Dolorosos"]},"glorious-mysteries":{1:{introduction:["La resurrecci\xF3n del Hijo de Dios","Primer Misterio Glorioso","He Who arose from the dead.","Fruit of the mystery: Faith"],scripture:["[Lc 24, 1-6]"]},2:{introduction:["La Ascensi\xF3n del Se\xF1or al cielo","Segundo Misterio Glorioso","He Who ascended into heaven.","Fruit of the mystery: Hope"],scripture:["[Mc 16, 19]"]},3:{introduction:["La venida del Esp\xEDritu Santo","Tercer Misterio Glorioso","He Who sent the Holy Spirit.","Fruit of the mystery: Wisdom"],scripture:["[Hch 2, 1-4]"]},4:{introduction:["La Asunci\xF3n de Mar\xEDa al cielo","Cuarto Misterio Glorioso","He Who assumed thee into heaven.","Fruit of the mystery: Devotion to Mary"],scripture:["[Lc 1, 48-49]"]},5:{introduction:["La coronaci\xF3n de Mar\xEDa como Reina y Se\xF1ora de todo lo creado","Quinto Misterio Glorioso","He Who crowned thee Queen of Heaven.","Fruit of the mystery: Grace of a happy death"],scripture:["[Ap 12, 1]"]},introduction:["Misterios Gloriosos"]}},ag="Le Rosaire",og={_name:ag,"salve-regina-concluding-prayer":["Pri\xE8re","Prions: O Dieu dont le Fils unique, par sa vie, sa mort et sa r\xE9surrection, nous a m\xE9rit\xE9, les r\xE9compenses du salut \xE9ternel, faites que, m\xE9ditant ses myst\xE8res dans le tr\xE8s saint Rosaire de la bienheureuse Vierge Marie, nous mettions \xE0 profit les le\xE7ons qu'ils contiennent afin d'obtenir ce qu'ils nous font esp\xE9rer. Par la m\xE9me J\xE9sus-Christ, votre Fils notre Seigneur. Amen."],"prayer-to-st-joseph":["Prayer to Saint Joseph","\xD4 bienheureux Joseph, nous recourons \xE0 vous dans notre tribulation et, apr\xE8s avoir implor\xE9 le secours de votre tr\xE8s sainte Epouse, nous sollicitons aussi avec confiance votre protection.","Par l'affection qui vous a uni \xE0 la Vierge Immacul\xE9e M\xE8re de Dieu, par l'amour paternel dont vous avez entour\xE9 l'Enfant J\xE9sus, nous vous supplions de regarder avec bont\xE9 l'h\xE9ritage que J\xE9sus Christ s'est acquis au prix de son sang, et de nous assister de votre puissance et de votre secours dans nos besoins.","Prot\xE9gez, \xF4 Gardien vigilant de la divine Famille, la race \xE9lue de J\xE9sus Christ; pr\xE9servez-nous , \xF4 P\xE8re tr\xE8s aimant, de l'erreur et de la corruption; assistez-nous du haut du ciel, \xF4 protecteur tr\xE8s puissant, dans le combat contre la puissance des t\xE9n\xE8bres.","Et de m\xEAme qu'autrefois vous avez arrach\xE9 l'Enfant J\xE9sus au p\xE9ril de la mort, d\xE9fendez aujourd'hui la sainte \xC9glise de Dieu des emb\xFBches de l'ennemi et de toute adversit\xE9. Couvrez chacun de nous de votre constante protection, afin qu'\xE0 votre exemple et par votre secours nous puissions vivre saintement, mourir pieusement et obtenir la b\xE9atitude \xE9ternelle du ciel.","Amen."],"good-friday":["Dialogue","V. Christ became obedient for us unto death.","R. Even unto death on the Cross."],"holy-saturday":["Dialogue","V. Christ became obedient for us unto death, even unto death on the Cross.","R. For which God hath exalted Him and hath given Him a name which is above all names."],"joyful-mysteries":{1:{introduction:["L'Annonciation de l'Ange Gabriel \xE0 la Vierge Marie","1er Myst\xE8re Joyeux","Him Whom thou didst conceive.","Fruit of the mystery: Humility"],scripture:["[Lc 1,26-27]"]},2:{introduction:["Visite de la Vierge Marie \xE0 sa cousine \xC9lisabeth","2e Myst\xE8re Joyeux","Him Whom thou didst carry while visiting Elizabeth.","Fruit of the mystery: Love of Neighbor"],scripture:["[Lc 1, 39-42]"]},3:{introduction:["La naissance de J\xE9sus dans la grotte de Bethl\xE9em","3e Myst\xE8re Joyeux","Him Whom thou didst give birth to.","Fruit of the mystery: Poverty"],scripture:["[Lc 2,1-7]"]},4:{introduction:["J\xE9sus est pr\xE9sent\xE9 au temple par Marie et Joseph","4e Myst\xE8re Joyeux","Him Whom thou didst present in the temple.","Fruit of the mystery: Purity of Heart and Body"],scripture:["[Lc 2, 21-24]"]},5:{introduction:["J\xE9sus retrouv\xE9 dans le temple","5e Myst\xE8re Joyeux","Him Whom thou didst find in the temple.","Fruit of the mystery: Devotion to Jesus"],scripture:["[Lc 2, 41-47]"]},introduction:["Myst\xE8res joyeux"]},"luminous-mysteries":{1:{introduction:["Le Bapt\xEAme dans le Jourdain","1er Myst\xE8re Lumineux","He Who was baptized in the Jordan.","Fruit of the mystery: Openness to the Holy Spirit"],scripture:["[Mt 3,16-17]"]},2:{introduction:["Les noces de Cana","2e Myst\xE8re Lumineux","He Who revealed Himself at the wedding feast of Cana.","Fruit of the mystery: To Jesus through Mary"],scripture:["[Jn 2, 1-5]"]},3:{introduction:["L'annonce du Royaume de Dieu et l'invitation \xE0 la conversion","3e Myst\xE8re Lumineux","He who announced the Kingdom of God.","Fruit of the mystery: Conversion"],scripture:["[Mc 1, 15]"]},4:{introduction:["La transfiguration","4e Myst\xE8re Lumineux","He Who was transfigured.","Fruit of the mystery: Desire for holiness"],scripture:["[Mt 17, 1-2]"]},5:{introduction:["L'institution de l'Eucharistie","5e Myst\xE8re Lumineux","He Who instituted the Eucharist.","Fruit of the mystery: Adoration"],scripture:["[Mt 26, 26]"]},introduction:["Myst\xE8res lumineux"]},"sorrowful-mysteries":{1:{introduction:["L'agonie de J\xE9sus \xE0 Geths\xE9mani","1er Myst\xE8re Douloureux","He Who sweated blood for us.","Fruit of the mystery: Obedience to God\u2019s Will"],scripture:["[Mt 26, 36-39]"]},2:{introduction:["La flagellation de J\xE9sus","2e Myst\xE8re Douloureux","He Who was scourged for us.","Fruit of the mystery: Mortification"],scripture:["[Mt 27, 26]"]},3:{introduction:["Le couronnement d'\xE9pines","3e Myst\xE8re Douloureux","He Who was crowned with thorns for us.","Fruit of the mystery: Courage"],scripture:["[Mt 27, 27-29]"]},4:{introduction:["Le portement de la Croix","4e Myst\xE8re Douloureux","He Who carried the Cross for us.","Fruit of the mystery: Patience"],scripture:["[Mc 15, 21-22]"]},5:{introduction:["J\xE9sus est crucifi\xE9 et meurt sur la Croix","5e Myst\xE8re Douloureux","He Who was crucified for us.","Fruit of the mystery: Sorrow for our Sins"],scripture:["[Lc 23, 32-33, 44-46]"]},introduction:["Myst\xE8res douloureux"]},"glorious-mysteries":{1:{introduction:["La R\xE9surrection de J\xE9sus","1er Myst\xE8re Glorieux","He Who arose from the dead.","Fruit of the mystery: Faith"],scripture:["[Lc 24, 1-6]"]},2:{introduction:["L'Ascension du Seigneur au ciel","2e Myst\xE8re Glorieux","He Who ascended into heaven.","Fruit of the mystery: Hope"],scripture:["[Mc 16, 19]"]},3:{introduction:["La descente du Saint-Esprit au C\xE9nacle","3e Myst\xE8re Glorieux","He Who sent the Holy Spirit.","Fruit of the mystery: Wisdom"],scripture:["[Ac 2, 1-4]"]},4:{introduction:["L'Assomption de Marie au Ciel","4e Myst\xE8re Glorieux","He Who assumed thee into heaven.","Fruit of the mystery: Devotion to Mary"],scripture:["[Lc 1, 48-49]"]},5:{introduction:["Marie est couronn\xE9e Reine du ciel et de la terre","5e Myst\xE8re Glorieux","He Who crowned thee Queen of Heaven.","Fruit of the mystery: Grace of a happy death"],scripture:["[Ap 12, 1]"]},introduction:["Myst\xE8res glorieux"]}},ug="Rosarium",lg={_name:ug,"salve-regina-concluding-prayer":["Oratio","Oremus. Deus, cuius Unigenitus per vitam, mortem et resurrectionem suam nobis salutis aeternae praemia comparavit: concede, quaesumus; ut, haec mysteria sacratissimo beatae Mariae Virginis Rosario recolentes. et imitemur quod continent, et quod promittunt, assequamur. Per eundem Christum Dominum nostrum. Amen."],"prayer-to-st-joseph":["Oratio ad Sanctum Iosephum","Ad te beate Ioseph, in tribulatione nostra confugimus, atque, implorato Sponsae tuae sanctissimae auxilio, patrocinium quoque tuum fidenter exposcimus.","Per eam, quaesumus quae te cum immaculata Virgine Dei Genetrice coniunxit, caritatem, perque paternum, quo Puerum Iesum amplexus es, amorem, supplices deprecamur, ut ad hereditatem, quam Iesus Christus acquisivit Sanguine suo, benignus respicias, ac necessitatibus nostris tua virtute et ope succurras.","Tuere, o Custos providentissime divinae Familiae, Iesu Christi sobolem electam; prohibe a nobis, amantissime Pater, omnem errorum ac corruptelarum luem; propitius nobis, sospitator noster fortissime, in hoc cum potestate tenebrarum certamine e caelo adesto;","et sicut olim Puerum Iesum e summo eripuisti vitae discrimine, ita nunc Ecclesiam sanctam Dei ab hostilibus insidiis atque ab omni adversitate defende: nosque singulos perpetuo tege patrocinio, ut ad tui exemplar et ope tua suffulti, sancte vivere, pie emori, sempiternamque in caelis beatitudinem assequi possimus.","Amen."],"good-friday":["Dialogus","V. Christus factus est pro nobis oboediens usque ad mortem.","R. Mortem autem crucis."],"holy-saturday":["Dialogus","V. Christus factus est pro nobis oboediens usque ad mortem, mortem autem crucis.","R. Propter quod et Deus exaltavit illum: et dedit illi nomen, quod est super omne nomen."],"joyful-mysteries":{1:{introduction:["Annuntiatio","Primum mysterium gaudiosum","Quem, Virgo, concepisti.","Fruit of the mystery: Humility"],scripture:["[Mt 1:18, Lc 1:26-38]"]},2:{introduction:["Visitatio","Secundum mysterium gaudiosum","Quem visitando Elisabeth portasti.","Fruit of the mystery: Love of Neighbor"],scripture:["[Lc 1:39-45]"]},3:{introduction:["Nativitas","Tertium mysterium gaudiosum","Quem, Virgo, genuisti.","Fruit of the mystery: Poverty"],scripture:["[Lc 2:6-12]"]},4:{introduction:["Presentatio","Quartum mysterium gaudiosum","Quem in templo praesentasti.","Fruit of the mystery: Purity of Heart and Body"],scripture:["[Lc 2:25-32]"]},5:{introduction:["Inventionem Domini nostri Iesu Christi in templo","Quintum mysterium gaudiosum","Quem in templo invenisti.","Fruit of the mystery: Devotion to Jesus"],scripture:["[Lc 2:41-50]"]},introduction:["Mysteria gaudiosa"]},"luminous-mysteries":{1:{introduction:["Baptismus Iesu","Primum mysterium luminosum","Qui apud Iordanem baptizatus est.","Fruit of the mystery: Openness to the Holy Spirit"],scripture:["[Mt 3:13, Mc 1:9, Jn 1:29]"]},2:{introduction:["Miraculum ad nuptias in Cana","Secundum mysterium luminosum","Qui ipsum revelavit apud Canense matrimonium.","Fruit of the mystery: To Jesus through Mary"],scripture:["[In 2:1-11]"]},3:{introduction:["Proclamatio Regni Dei","Tertium mysterium luminosum","Qui Regnum Dei annuntiavit.","Fruit of the mystery: Conversion"],scripture:["[Mc 1:15, Lc 10:8-11]"]},4:{introduction:["Transfiguratum","Quartum mysterium luminosum","Qui transfiguratus est.","Fruit of the mystery: Desire for holiness"],scripture:["[Mt 17:1-8, Mc 9:2-9]"]},5:{introduction:["Ultima cena","Quintum mysterium luminosum","Qui Eucharistiam instituit.","Fruit of the mystery: Adoration"],scripture:["[In 6:27-59, Mt 26:26-29, Mc 14:22-24, Lc 22:15-20]"]},introduction:["Mysteria luminosa"]},"sorrowful-mysteries":{1:{introduction:["Cruciatus in Horto","Primum mysterium dolorosum","Qui pro nobis sanguinem sudavit.","Fruit of the mystery: Obedience to God\u2019s Will"],scripture:["[Lc 22:39-46]"]},2:{introduction:["Flagellatio Domini nostri Iesu Christi","Secundum mysterium dolorosum","Qui pro nobis flagellatus est.","Fruit of the mystery: Mortification"],scripture:["[Mt 27:26, Mc 15:6-15, In 19:1]"]},3:{introduction:["Coronatio cum Spinis","Tertium mysterium dolorosum","Qui pro nobis spinis coronatus est.","Fruit of the mystery: Courage"],scripture:["[In 19:1-8]"]},4:{introduction:["Baiulatio Crucis","Quartum mysterium dolorosum","Qui pro nobis crucem baiulavit.","Fruit of the mystery: Patience"],scripture:["[In 19:16-22]"]},5:{introduction:["Crucifixio","Quintum mysterium dolorosum","Qui pro nobis crucifixus est.","Fruit of the mystery: Sorrow for our Sins"],scripture:["[In 19:25-30]"]},introduction:["Mysteria dolorosa"]},"glorious-mysteries":{1:{introduction:["Resurrectio","Primum mysterium gloriosum","Qui resurrexit a mortuis.","Fruit of the mystery: Faith"],scripture:["[Mc 16:1-7]"]},2:{introduction:["Ascensio","Secundum mysterium gloriosum","Qui in caelum ascendit.","Fruit of the mystery: Hope"],scripture:["[Lc 24:46-53]"]},3:{introduction:["Descensus Spiritus Sancti","Tertium mysterium gloriosum","Qui Spiritum Sanctum misit.","Fruit of the mystery: Wisdom"],scripture:["[Acta 2:1-7]"]},4:{introduction:["Assumptio","Quartum mysterium gloriosum","Qui te assumpsit.","Fruit of the mystery: Devotion to Mary"],scripture:["[Ps 16:10]"]},5:{introduction:["Coronatio Beatae Mariae Virginis in caelum","Quintum mysterium gloriosum","Qui te in caelis coronavit.","Fruit of the mystery: Grace of a happy death"],scripture:["[Apoc 12:1]"]},introduction:["Mysteria gloriosa"]}},cg="Ro\u017Eukronis",fg={_name:cg,"salve-regina-concluding-prayer":["L\u016Bg\u0161ana","Dievs, kura Viendzimtais D\u0113ls ar savu dz\u012Bvi, n\u0101vi un aug\u0161\u0101mcel\u0161anos mums sagatavoja m\u016B\u017E\u012Bg\u0101s pest\u012B\u0161anas algu, Tevi l\u016Bdzam, dod, ka m\u0113s, \u0161os nosl\u0113pumus Vissv\u0113t\u0101s Jaunavas Marijas Ro\u017Eukron\u012B apcer\u0113dami, sekotu tajos ietvertai m\u0101c\u012Bbai un sasniegtu algu, kas tajos apsol\u012Bta. Caur to pa\u0161u m\u016Bsu Kungu J\u0113zu Kristu, Tavu D\u0113lu, kas ar Tevi dz\u012Bvo un valda Sv\u0113t\u0101 Gara vien\u012Bb\u0101, Dievs no m\u016B\u017E\u012Bbas m\u016B\u017E\u012Bb\u0101. Amen."],"prayer-to-st-joseph":["L\u016Bg\u0161ana sv\u0113tajam J\u0101zepam","Pie Tevis, sv\u0113tais J\u0101zep, m\u0113s steidzamies sav\u0101s b\u0113d\u0101s un Tavas Vissv\u0113t\u0101k\u0101s L\u012Bgavas pal\u012Bdz\u012Bbu piesauku\u0161i, pa\u013C\u0101v\u012Bgi l\u016Bdzam ar\u012B Tavu aizbildn\u012Bbu.","T\u0101s m\u012Blest\u012Bbas d\u0113\u013C, kas Tevi vienoja ar bezvain\u012Bgo Jaunavu, Dieva Dzemd\u0113t\u0101ju, un t\u0101s t\u0113vi\u0161\u0137\u0101s g\u0101d\u012Bbas d\u0113\u013C, ar kuru Tu r\u016Bp\u0113jies par b\u0113rni\u0146u J\u0113zu, m\u0113s Tevi pazem\u012Bgi l\u016Bdzam, uzl\u016Bko \u017E\u0113l\u012Bgi J\u0113zus Kristus asin\u012Bm atpirkto mantojumu un pal\u012Bdzi mums ar savu sp\u0113c\u012Bgo p\u0101rst\u0101v\u012Bbu m\u016Bsu vajadz\u012Bb\u0101s.","Sargi, Dieva aizg\u0101d\u012Bbas dotais sv\u0113t\u0101s \u0123imenes sargs, izredz\u0113tos J\u0113zus Kristus b\u0113rnus, izgl\u0101b m\u016Bs, visum\u012B\u013Cais T\u0113vs, no ikvienas samait\u0101\u0161anas un maldiem, ar debesu sp\u0113ku stiprini m\u016Bs, sp\u0113c\u012Bgais pal\u012Bdz\u0113t\u0101j, c\u012B\u0146\u0101 ar tums\u012Bbas sp\u0113kiem.","Un k\u0101 Tu citk\u0101rt izgl\u0101bi b\u0113rni\u0146u J\u0113zu no draudo\u0161\u0101m n\u0101ves briesm\u0101m, t\u0101 tagad aizst\u0101vi sv\u0113to Dieva Bazn\u012Bcu pret ienaidnieku uzbrukumiem un ikvienu nelaimi. Uz\u0146em m\u016Bs visus sav\u0101 past\u0101v\u012Bg\u0101 patv\u0113rum\u0101, ka m\u0113s, p\u0113c Tava parauga dz\u012Bvodami, un Tavas pal\u012Bdz\u012Bbas sp\u0113cin\u0101ti, var\u0113tu dievbij\u012Bgi dz\u012Bvot, sv\u0113t\u012Bgi nomirt un iemantot m\u016B\u017E\u012Bgo l\u012Bksm\u012Bbu debes\u012Bs.","Amen."],"good-friday":["Dialogs","V. M\u016Bsu d\u0113\u013C Kristus k\u013Cuva paklaus\u012Bgs l\u012Bdz n\u0101vei","R. L\u012Bdz par krusta n\u0101vei."],"holy-saturday":["Dialogs","V. M\u016Bsu d\u0113\u013C Kristus k\u013Cuva paklaus\u012Bgs l\u012Bdz n\u0101vei, l\u012Bdz par krusta n\u0101vei.","R. T\u0101d\u0113\u013C Dievs Vi\u0146u paaugstin\u0101ja p\u0101ri visam un deva Vi\u0146am V\u0101rdu, kas ir p\u0101ri p\u0101r katru v\u0101rdu."],"joyful-mysteries":{1:{introduction:["E\u0146\u0123e\u013Ca pasludin\u0101jums Jaunavai Marijai","Pirmais priec\u012Bgais nosl\u0113pums","Him Whom thou didst conceive.","Fruit of the mystery: Humility"],scripture:["[Lk 1,26-31]"]},2:{introduction:["Marija apmekl\u0113 sv. Elizabeti","Otrais priec\u012Bgais nosl\u0113pums","Him Whom thou didst carry while visiting Elizabeth.","Fruit of the mystery: Love of Neighbor"],scripture:["[Lk 1,39-42]"]},3:{introduction:["Betl\u0113mes stall\u012Bt\u012B piedzimst J\u0113zus","Tre\u0161ais priec\u012Bgais nosl\u0113pums","Him Whom thou didst give birth to.","Fruit of the mystery: Poverty"],scripture:["[Lk 1,4-7]"]},4:{introduction:["B\u0113rna J\u0113zus upur\u0113\u0161ana templ\u012B","Ceturtais priec\u012Bgais nosl\u0113pums","Him Whom thou didst present in the temple.","Fruit of the mystery: Purity of Heart and Body"],scripture:["[Lk 2]"]},5:{introduction:["B\u0113rna J\u0113zus atra\u0161ana sv\u0113tn\u012Bc\u0101","Piektais priec\u012Bgais nosl\u0113pums","Him Whom thou didst find in the temple.","Fruit of the mystery: Devotion to Jesus"],scripture:["[Lk 2,42-46]"]},introduction:["Priec\u012Bgie nosl\u0113pumi"]},"luminous-mysteries":{1:{introduction:["J\u0113zus Krist\u012Bba Jord\u0101n\u0101","Pirmais gaismas nosl\u0113pums","He Who was baptized in the Jordan.","Fruit of the mystery: Openness to the Holy Spirit"],scripture:["[Mt 3]"]},2:{introduction:["J\u0113zus atkl\u0101\u0161an\u0101s k\u0101z\u0101s K\u0101n\u0101","Otrais gaismas nosl\u0113pums","He Who revealed Himself at the wedding feast of Cana.","Fruit of the mystery: To Jesus through Mary"],scripture:["[J\u0146 2]"]},3:{introduction:["Dieva valst\u012Bbas sludin\u0101\u0161ana un aicin\u0101jums atgriezties","Tre\u0161ais gaismas nosl\u0113pums","He who announced the Kingdom of God.","Fruit of the mystery: Conversion"],scripture:["[Mk 1; Mk 2,5.11-12]"]},4:{introduction:["P\u0101rveido\u0161an\u0101s Tabora kaln\u0101","Ceturtais gaismas nosl\u0113pums","He Who was transfigured.","Fruit of the mystery: Desire for holiness"],scripture:["[Lk 9,28-35]"]},5:{introduction:["Euharistijas iedibin\u0101\u0161ana","Piektais gaismas nosl\u0113pums","He Who instituted the Eucharist.","Fruit of the mystery: Adoration"],scripture:["[J\u0146 13,1; Mk 14,22-24]"]},introduction:["Gaismas nosl\u0113pumi"]},"sorrowful-mysteries":{1:{introduction:["Kungs J\u0113zus l\u016Bdzas Ol\u012Bvd\u0101rz\u0101","Pirmais s\u0101p\u012Bgais nosl\u0113pums","He Who sweated blood for us.","Fruit of the mystery: Obedience to God\u2019s Will"],scripture:["[Lk 22,41-44]"]},2:{introduction:["Kungs J\u0113zus tiek \u0161aust\u012Bts","Otrais s\u0101p\u012Bgais nosl\u0113pums","He Who was scourged for us.","Fruit of the mystery: Mortification"],scripture:["[Mk 15,12-15]"]},3:{introduction:["Kungam J\u0113zum uzliek galv\u0101 \u0113rk\u0161\u0137u kroni","Tre\u0161ais s\u0101p\u012Bgais nosl\u0113pums","He Who was crowned with thorns for us.","Fruit of the mystery: Courage"],scripture:["[Mt 27,29]"]},4:{introduction:["Kunga J\u0113zus ce\u013C\u0161 uz Golg\u0101tu","Ceturtais s\u0101p\u012Bgais nosl\u0113pums","He Who carried the Cross for us.","Fruit of the mystery: Patience"],scripture:["[J\u0146 19,17]"]},5:{introduction:["J\u0113zu pienaglo pie Krusta, un Vi\u0146\u0161 mirst \u0161ausm\u012Bg\u0101s cie\u0161an\u0101s","Piektais s\u0101p\u012Bgais nosl\u0113pums","He Who was crucified for us.","Fruit of the mystery: Sorrow for our Sins"],scripture:["[Lk 23,33.44-46]"]},introduction:["S\u0101p\u012Bgie nosl\u0113pumi"]},"glorious-mysteries":{1:{introduction:["Kungs J\u0113zus aug\u0161\u0101mce\u013Cas","Pirmais god\u012Bbas nosl\u0113pums","He Who arose from the dead.","Fruit of the mystery: Faith"],scripture:["[Mt 28,5-6]"]},2:{introduction:["Kungs J\u0113zus uzk\u0101pj debes\u012Bs","Otrais god\u012Bbas nosl\u0113pums","He Who ascended into heaven.","Fruit of the mystery: Hope"],scripture:["[Mk 16,19-20]"]},3:{introduction:["Sv\u0113tais Gars non\u0101k p\u0101r Jaunavu Mariju un apustu\u013Ciem","Tre\u0161ais god\u012Bbas nosl\u0113pums","He Who sent the Holy Spirit.","Fruit of the mystery: Wisdom"],scripture:["[Apd 2,1-4]"]},4:{introduction:["Vissv\u0113t\u0101 Jaunava Marija ar miesu un dv\u0113seli tiek uz\u0146emta debes\u012Bs","Ceturtais god\u012Bbas nosl\u0113pums","He Who assumed thee into heaven.","Fruit of the mystery: Devotion to Mary"],scripture:[""]},5:{introduction:["Marija tiek kron\u0113ta par debesu un zemes Karalieni","Piektais god\u012Bbas nosl\u0113pums","He Who crowned thee Queen of Heaven.","Fruit of the mystery: Grace of a happy death"],scripture:["[Atkl 12,1]"]},introduction:["God\u012Bbas nosl\u0113pumi"]}},hg={generate:Yp,meta:Zp,params:tg,languages:{en:ng,es:sg,fr:og,la:lg,lv:fg}},dg=e=>[[["prayer"],"",["prayer"]],[["dialogue"],"",["dialogue"]],[["concluding-prayer"],"",["concluding-prayer"]]],pg="Salve Regina",gg={name:pg},mg={},yg="Hail, holy Queen",vg=["Prayer","Hail, holy Queen, Mother of mercy, our life, our sweetness and our hope. To thee do we cry, poor banished children of Eve. To thee do we send up our sighs, mourning and weeping in this valley of tears. Turn, then, most gracious advocate, thine eyes of mercy toward us, and after this, our exile, show unto us the blessed fruit of thy womb, Jesus. O clement, O loving, O sweet Virgin Mary."],bg=["Dialogue","V. Pray for us, O holy Mother of God.","R. That we may be made worthy of the promises of Christ."],Cg={_name:yg,prayer:vg,dialogue:bg,"concluding-prayer":["Prayer","Let us pray. Almighty and everlasting God, Who by the working of the Holy Spirit didst prepare both body and soul of the glorious Virgin Mother, Mary, that she might deserve to be made a worthy dwelling for Thy Son, grant that we who rejoice in her memory, may, by her loving intercession, be delivered from present evils and from lasting death, through the same Christ our Lord. Amen."]},Eg="Salve Regina",Sg=["Oraci\xF3n","Dios te salve, Reina y Madre de misericordia, vida, dulzura y esperanza nuestra; Dios te salve. A Ti llamamos los desterrados hijos de Eva; a Ti suspiramos gimiendo y llorando, en este valle de l\xE1grimas. Ea, pues, Se\xF1ora, abogada nuestra, vuelve a nosotros esos tus ojos misericordiosos; y despu\xE9s de este destierro, mu\xE9stranos a Jes\xFAs, fruto bendito de tu vientre. \xA1Oh clement\xEDsima, oh piadosa, oh dulce siempre Virgen Mar\xEDa!"],_g=["Di\xE1logo","V. Ruega por nosotros, Santa Madre de Dios.","R. Para que seamos dignos de alcanzar las promesas de Nuestro Se\xF1or Jesucristo."],wg={_name:Eg,prayer:Sg,dialogue:_g,"concluding-prayer":["Prayer","Let us pray. Almighty and everlasting God, Who by the working of the Holy Spirit didst prepare both body and soul of the glorious Virgin Mother, Mary, that she might deserve to be made a worthy dwelling for Thy Son, grant that we who rejoice in her memory, may, by her loving intercession, be delivered from present evils and from lasting death, through the same Christ our Lord. Amen."]},Tg="Salut, \xF4 Reine",xg=["Pri\xE8re","Salut, \xF4 Reine, m\xE8re de mis\xE9ricorde: notre vie, notre douceur et notre esp\xE9rance, salut! Enfants d'\xC8ve, exil\xE9s, nous crions vers toi; vers toi, nous soupirons, g\xE9missant et pleurant dans cette vall\xE9e de larmes. \xD4 toi, notre avocate, tourne vers nous ton regard mis\xE9ricordieux. Et apr\xE8s cet exil, montre-nous J\xE9sus, le fruit b\xE9ni de tes entrailles, \xF4 cl\xE9mente, \xF4 mis\xE9ricordieuse, \xF4 douce Vierge Marie!"],Ag=["Dialogue","V. Priez pour nous, sainte M\xE8re de Dieu.","R. Afin que nous soyons rendus dignes des promesses de Notre-Seigneur J\xE9sus-Christ."],Ig={_name:Tg,prayer:xg,dialogue:Ag,"concluding-prayer":["Prayer","Let us pray. Almighty and everlasting God, Who by the working of the Holy Spirit didst prepare both body and soul of the glorious Virgin Mother, Mary, that she might deserve to be made a worthy dwelling for Thy Son, grant that we who rejoice in her memory, may, by her loving intercession, be delivered from present evils and from lasting death, through the same Christ our Lord. Amen."]},Bg="Salve, Regina",kg=["Oratio","Salve, Regina, mater misericordiae;","vita, dulcedo et spes nostra, salve.","Ad te clamamus exsules filii Hevae.","Ad te suspiramus gementes et flentes","in hac lacrimarum valle.","Eia ergo, advocata nostra,","illos tuos misericordes oculos ad nos converte.","Et Iesum, benedictum fructum ventris tui,","nobis post hoc exsilium ostende.","O clemens, o pia, o dulcis Virgo Maria."],Rg=["Dialogus","V. Ora pro nobis, sancta Dei Genitrix.","R. Ut digni efficamur promissionibus Christi."],Ng={_name:Bg,prayer:kg,dialogue:Rg,"concluding-prayer":["Oratio","Oremus. Omnipotens sempiterne Deus, qui gloriosae Virginis Matris Mariae corpus et animam, ut dignum Filii tui habitaculum effici mereretur, Spiritu Sancto cooperante, praeparasti, da, ut cuius commemoratione laetamur; eius pia intercessione, ab instantibus malis et a morte perpetua liberemur. Per eundem Christum Dominum nostrum. Amen."]},Dg="Esi sveicin\u0101ta, Karaliene",Lg=["L\u016Bg\u0161ana","Esi sveicin\u0101ta, Karaliene, \u017E\u0113lsird\u012Bbas M\u0101te, Kas mums Pest\u012Bt\u0101ju devi, esi sveicin\u0101ta. M\u0113s, Ievas b\u0113rni, sve\u0161um\u0101 saucam uz Tevi. M\u0113s Tevi l\u016Bdzam, s\u0113rojot un raudot \u0161ai asaru ielej\u0101. T\u0101d\u0113\u013C, m\u016Bsu aizst\u0101ve, uzl\u016Bko m\u016Bs sav\u0101 \u017E\u0113lsird\u012Bb\u0101. Un p\u0113c \u0161\u012Bs dz\u012Bves ved m\u016Bs pie J\u0113zus, pie Tava dievi\u0161\u0137\u0101 D\u0113la. Tu \u017E\u0113l\u012Bg\u0101 un laipn\u0101, Vissv\u0113t\u0101k\u0101 Jaunava Marija."],Ug=["Dialogs","V. L\u016Bdz par mums, sv\u0113t\u0101 Dieva Dzemd\u0113t\u0101ja!","R. Lai m\u0113s Kristus sol\u012Bjumu cien\u012Bgi topam!"],Og={_name:Dg,prayer:Lg,dialogue:Ug,"concluding-prayer":["Prayer","Let us pray. Almighty and everlasting God, Who by the working of the Holy Spirit didst prepare both body and soul of the glorious Virgin Mother, Mary, that she might deserve to be made a worthy dwelling for Thy Son, grant that we who rejoice in her memory, may, by her loving intercession, be delivered from present evils and from lasting death, through the same Christ our Lord. Amen."]},Mg={generate:dg,meta:gg,params:mg,languages:{en:Cg,es:wg,fr:Ig,la:Ng,lv:Og}},Pg=e=>[[["formula"],"",["formula"],"Make the Sign of the Cross"]],Fg="Sign of the Cross",Vg={name:Fg},Hg={},Kg="The Sign of the Cross",qg=["The Sign of the Cross","In the name of the Father, and of the Son, and of the Holy Spirit. Amen."],$g={_name:Kg,formula:qg},Gg="La Se\xF1al de la Cruz",jg=["La Se\xF1al de la Cruz","En el nombre del Padre, y del Hijo, y del Esp\xEDritu Santo. Am\xE9n."],zg={_name:Gg,formula:jg},Wg="Signe de croix",Jg=["Signe de croix","Au nom du P\xE8re et du Fils et du Saint-Esprit. Amen."],Qg={_name:Wg,formula:Jg},Yg="Signum Crucis",Xg=["Signum Crucis","In nomine Patris et Filii et Spiritus Sancti. Amen."],Zg={_name:Yg,formula:Xg},em="Krusta z\u012Bme",tm=["Krusta z\u012Bme","Dieva T\u0113va un D\u0113la, un Sv\u0113t\u0101 Gara v\u0101rd\u0101. Amen."],rm={_name:em,formula:tm},nm={generate:Pg,meta:Vg,params:Hg,languages:{en:$g,es:zg,fr:Qg,la:Zg,lv:rm}},im=e=>{let t=[[["initial","1"],"",["preparatory-prayer"]]];for(let r=0;r<14;r++)t=t.concat([[["stations",[r,14],"dialogue"],"",["station-dialogue"]],[["stations",[r,14],"station"],"",["stations",(r+1).toString()]],[["stations",[r,14],"lords-prayer"],"lords-prayer",["formula"]],[["stations",[r,14],"hail-mary"],"hail-mary",["formula"]],[["stations",[r,14],"glory-be"],"glory-be",["formula"]],[["stations",[r,14],"prayer"],"",["station-prayer"]]]);return t},sm="Stations of the Cross",am={name:sm},om={},um="An Exercise in the Way of the Cross by St. Alphonsus Maria Liguori",lm={1:["First Station: Jesus Is Condemned to Death","Consider how Jesus, after having been scourged and crowned with thorns, was unjustly condemned by Pilate to die on the Cross.","My adorable Jesus, it was not Pilate; no, it was my sins that condemned Thee to die. I beseech Thee, by the merits of this sorrowful journey to assist my soul in its journey toward eternity. I love Thee, my beloved Jesus; I love Thee more than myself; I repent with my whole heart of having offended Thee. Never permit me to separate myself from Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],2:["Second Station: Jesus Is Made to Carry His Cross","Consider how Jesus, in making this journey with the Cross on His shoulders, thought of us, and offered for us to His Father the death He was about to undergo.","My most beloved Jesus, I embrace all the tribulations Thou hast destined for me until death. I beseech Thee, by the merits of the pain Thou did suffer in carrying Thy Cross, to give me the necessary help to carry mine with perfect patience and resignation. I love Thee, Jesus my love; I love Thee more than myself; I repent of having offended Thee. Never permit me to separate myself from Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],3:["Third Station: Jesus Falls the First Time","Consider this first fall of Jesus under His Cross. His flesh was torn by the scourges, His head crowned with thorns, and He had lost a great quantity of blood. He was so weakened that He could scarcely walk, and yet He had to carry this great load upon His shoulders. The soldiers struck Him rudely, and thus He fell several times in His journey.","My beloved Jesus, it is not the weight of the Cross, but my sins which hast made Thee suffer so much pain. By the merits of this first fall, deliver me from the misfortune of falling into mortal sin. I love Thee, Jesus, with my whole heart; I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],4:["Fourth Station: Jesus Meets His Afflicted Mother","Consider the meeting of the Son and the Mother, which took place on this journey. Jesus and Mary looked at each other, and their looks became as so many arrows to wound those hearts which loved each other so tenderly.","My most loving Jesus, by the sorrow that Thou didst experience in this meeting, grant me the grace of a truly devoted love for Thy most holy Mother. And thou, my Queen, who was overwhelmed with sorrow, obtain for me, by thy intercession, a continual and tender remembrance of the Passion of thy Son. I love Thee, Jesus my love; I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],5:["Fifth Station: Simon of Cyrene Helps Jesus Carry His Cross","Consider how the Jews, seeing that at each step, Jesus, from weakness, was on the point of expiring, and fearing that He would die on the way, when they wished Him to die the shameful death of the Cross, constrained Simon the Cyrenian to carry the Cross behind our Lord.","My most beloved Jesus, I will not refuse the Cross as the Cyrenian did; I accept it - I embrace it. I accept in particular the death Thou hast destined for me, with all the pains which may accompany it; I unite it to Thy death - I offer it to Thee. Thou hast died for love of me. I will die for love of Thee, and to please Thee. Help me by Thy grace. I love Thee Jesus my love; I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],6:["Sixth Station: Veronica Wipes the Face of Jesus","Consider how the holy woman named Veronica, seeing Jesus so afflicted, and His face bathed in sweat and blood, presented Him with a towel, with which He wiped His adorable face, leaving on it the impression of His holy countenance.","My most beloved Jesus, Thy face was beautiful before, but in this journey it hast lost all its beauty, and wounds and blood have disfigured it. Alas! my soul also was once beautiful, when it received Thy grace in Baptism; but I have disfigured it since by my sins. Thou alone, my Redeemer, can restore it to its former beauty. Do this by Thy Passion. I love Thee Jesus my love; I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],7:["Seventh Station: Jesus Falls the Second Time","Consider the second fall of Jesus under the Cross - a fall which renews the pain of all the wounds of the head and members of our afflicted Lord.","My most gentle Jesus, how many times Thou hast pardoned me, and how many times have I fallen again, and begun again to offend Thee! Oh! By the merits of this new fall, give me the necessary helps to persevere in Thy grace until death. Grant that in all temptations which assail me, I may always commend myself to Thee. I love Thee, Jesus my Love, with my whole heart; I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],8:["Eighth Station: Jesus Speaks to the Women of Jerusalem",'Consider how those women wept with compassion at seeing Jesus in such a pitiable state, streaming with Blood, as He walked along. But Jesus said to them: "Weep not for Me, but for your children."',"My Jesus, laden with sorrows, I weep for the offenses I have committed against Thee, because of the pains they have deserved, and still more because of the displeasure they have caused Thee, Who hast loved me so much. It is Thy love more than the fear of hell, which causes me to weep for my sins. My Jesus, I love Thee more than myself. I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],9:["Ninth Station: Jesus Falls the Third Time","Consider the third fall of Jesus Christ. His weakness was extreme, and the cruelty of His executioners excessive, who tried to hasten His steps when he had scarcely strength to move.","Ah, my outraged Jesus, by the merits of the weakness Thou didst suffer in going to Calvary, give me strength sufficient to conquer all human respect, and all my wicked passions, which have led me to despise Thy friendship. I love Thee, Jesus my love, with my whole heart. I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],10:["Tenth Station: Jesus Is Stripped of His Garments","Consider the violence with which the executioners stripped Jesus. His inner garments adhered to His torn flesh, and they dragged them off so roughly that the skin came with them. Compassionate your Savior thus cruelly treated, and say to Him:","My innocent Jesus, by the merits of the torments Thou hast felt, help me to strip myself of all affection to things of earth, in order that I may place all my love in Thee, Who art so worthy of my love. I love Thee, O Jesus, with my whole heart. I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],11:["Eleventh Station: Jesus Is Nailed to the Cross","Consider how Jesus, after being thrown on the Cross, extended His hands, and offered to His Eternal Father the sacrifice of His life for our salvation. These barbarians fastened him with nails, and then, raising the Cross, leave Him to die with anguish on this infamous gibbet.","My Jesus!, loaded with contempt, nail my heart to Thy feet, that it may ever remain there, to love Thee, and never quit Thee again. I love Thee more than myself. I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],12:["Twelfth Station: Jesus Dies on the Cross","Consider how thy Jesus, after three hours of agony on the Cross, consumed at length with anguish, abandons Himself to the weight of His Body, bows His Head, and dies.","O my dying Jesus, I kiss devoutly the Cross on which Thou did die for love of me. I have merited by my sins to die a miserable death, but Thy death is my hope, Ah, by the merits of Thy death, give me grace to die embracing Thy feet, and burning with love for Thee, I yield my soul into Thy hands. I love Thee with my whole heart; I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],13:["Thirteenth Station: Jesus is Taken Down from the Cross","Consider how, after the death of our Lord, two of His disciples, Joseph and Nicodemus, took Him down from the Cross, and placed Him in the arms of His afflicted Mother, who received Him with unutterable tenderness, and pressed Him to her bosom.","O Mother of Sorrows, for the love of this Son, accept me for thy servant, and pray to Him for me. And Thou, my Redeemer, since Thou hast died for me, permit me to love Thee; for I wish but Thee and nothing more. I love Thee, my Jesus, and I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],14:["Fourteenth Station: Jesus Is Placed in the Sepulcher","Consider how the disciples carried the body of Jesus to bury it, accompanied by His holy Mother who arranged it in the sepulcher with her own hands. They then closed the tomb, and all withdrew.","Ah, my buried Jesus, I kiss the stone that encloses Thee. But Thou didst rise again the third day. I beseech Thee by Thy resurrection, make me rise glorious with Thee at the last day, to be always united with Thee in Heaven, to praise Thee and love Thee forever. I love Thee, and I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."]},cm={_name:um,"preparatory-prayer":["Prayer","My Lord Jesus Christ, Thou hast made this journey to die for me with love unutterable, and I have so many times unworthily abandoned Thee; but now I love Thee with my whole heart, and because I love Thee I repent sincerely for having ever offended Thee. Pardon me, my God, and permit me to accompany Thee on this journey. Thou goest to die for love of me; I wish also, my beloved Redeemer, to die for love of Thee. My Jesus, I will live and die always united to Thee."],"station-dialogue":["Dialogue","V. We adore Thee, O Christ, and we praise Thee.","R. Because by Thy holy Cross Thou hast redeemed the world."],"station-prayer":["Prayer","Dear Jesus, Thou dost go to die","For very love of me;","Ah, let me bear Thee company,","I wish to die with Thee."],stations:lm},fm="Exercitium Viae Crucis de Sancto Alphonso Maria de Ligorio",hm={1:["Statio I: Iesus condemnatur ad mortem","Considera quomodo Iesus Christus, iam flagellatus et spinis coronatus, iniuste tandem a Pilato ad mortem crucis condemnetur.","O adorande Iesu, non Pilatus, sed iniqua mea vita te ad mortem condemnavit. Per meritum laboriosissimi huius itineris, quod ad Calvariae montem instituis, precor te, ut me semper in via, qua anima mea in aeternitatem tendit, benigne comiteris. Amo te, o Iesu, mi Amor, magis quam meipsum, et ex intimo corde paenitet me quod tibi displicui. Ne sinas me iterum a te separari. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit. Quod tibi placitum est, hoc idem mihi est acceptum."],2:["Statio II: Iesus oneratur ligno crucis","Considera quomodo Iesus Christus, portans humeris crucem, fuerit inter eundum, memor tui, offerendo pro te aeterno Patri mortem, quam erat obiturus.","Amabilissime Iesu, amplector omnes res adversas, quas mihi usque ad obitum tolerandas praefixisti, et, per durum illum, quem in portanda tua cruce pertulisti, laborem, precor te, ut vires mihi subministres, quibus ego quoque crucem meam, aequo ac patienti animo, portare valeam. Amo te, o Iesu, mi Amor, paenitet me quod tibi displicui. Ne sinas me iterum separari a te. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],3:["Statio III: Iesus procumbit primum sub onere crucis","Considera primum hunc Iesu Christi sub cruce lapsum. Habebat carnem ex saeva flagellatione multifarie sauciam, caput redimitum spinarum corona: profuderat insuper cruorem in tanta copia, ut vix pedem prae virium defectione, movere posset. Et quoniam gravi crucis onere premebatur, et immisericorditer a militibus propellebatur, accidit ut pluries inter eundum humi procumberet.","O mi Iesu, non est onus crucis, sed peccatorum meorum pondus, quod tantis te afficit doloribus. Rogo te, per primum hunc tuum lapsum, ut ab omni in peccatum me lapsu tuearis. Amo te, o Iesu, ex toto corde meo; paenitet me quod tibi displicui. Ne sinas me iterum in peccatum prolabi. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],4:["Statio IV: Iesus fit perdolenti Matri obvius","Considera qualis fuerit, in hac via, Filii et Matris occursus. Iesus et Maria se mutuo aspexerunt, mutuique eorum aspectus, fuerunt totidem sagittae, quibus amantia eorum pectora transverberabantur.","Amantissime Iesu, per acerbum dolorem, quem in hoc occursu expertus es, redde me, precor, sanctissimae Matri tuae vere devotum. Tu vero, perdolens mea Regina, intercede pro me, et obtine mihi talem cruciatum Filii tui memoriam, ut mens mea in pia illorum contemplatione perpetuo detineatur. Amo te, o Iesu, mi Amor; paenitet me quod tibi displicui. Ne sinas me iterum in te peccare. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],5:["Statio V: Iesus in baiulanda cruce a Cyrenaeo adiuvatur","Considera quomodo Iudaei, videntes Iesum ad quemlibet passum animam propemodum prae lassitudine efflantem, et timentes ex altera parte ne, quem crucis supplicio affectum volebant, in via moreretur, compellant Simonem Cyrenaeum ad baiulandam crucem post Dominum.","O dulcissime Iesu, nolo sicut Cyrenaeus, repudiare crucem, libenter eam amplector in meque recipio, amplector speciatim quam mihi praefiniisti mortem cum omnibus, quos haec secum adductura est, doloribus. Coniungo eam cum morte tua, sicque coniunctam eam in sacrificium tibi offero. Tu amore mei mortuus es; volo ego quoque mori amore tui, ea mente ut rem tibi gratam faciam. Tu vero adiuva me tua gratia. Amo te, o Iesu, mi Amor, paenitet me quod tibi displicui. Ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],6:["Statio VI: Iesus Veronicae sudario abstergitur","Considera quomodo sancta illa femina Veronica, videns Iesum doloribus confectum eiusque vultum sudore ac sanguine madidum, porrigat ei linteolum in quo ipse, abstersa facie, sacram sui imaginem impressam relinquit.","O mi Iesu, formosa erat antea facies tua; verum hac in via non amplius formosa apparet, sed est vulneribus et cruore omnino deformis. Hei mihi! quam formosa quoque erat anima mea, cum gratiam tuam per baptismum recepisset: peccando eam postea deformem reddidi. Tu solus, mi Redemptor, pristinam venustatem ei restituere vales; quod ut facias, per tuae Passionis meritum te precor. Amo te Iesu, mi Amor; paenitet me quod tibi displicui; ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],7:["Statio VII: Iesus procumbit iterum sub onere crucis","Considera alterum Iesu Christi sub cruce lapsum, quo lapsu perdolenti Domino omnes venerandi capitis et totius corporis plagae recrudescunt, omnesque cruciatus renovantur.","Mansuetissime Iesu, quam frequenter concessisti mihi veniam! Ego vero in eadem relapsus sum peccata, measque in te offensas renovavi. Per meritum novi huius tui lapsus adiuva me, ut in gratia tua usque ad obitum perseverem. Fac ut in omnibus, quae me invasurae sunt, tentationibus me tibi semper commendem. Amo te ex toto corde meo, o Iesu, mi Amor; paenitet me quod tibi displicui: ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],8:["Statio VIII: Iesus plorantes mulieres alloquitur",'Considera quomodo mulieres, videntes Iesum lassitudine exanimatum et cruore inter eundum diffluentem, commiseratione permoveantur, lacrimasque profundant. Ad flentes autem conversus: "Nolite, inquit, flere super me, sed super vos ipsas flete et super filios vestros."',"O perdolens Iesu, defleo mea in te peccata ob poenas quidem quibus me dignum reddiderunt, sed maxime ob molestiam quam tibi intulerunt, tibi qui me tantopere amasti. Ad fletum minus infernus quam amor tui me excitat. O mi Iesu, amo te magis quam meipsum; paenitet me quod tibi displicui; ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],9:["Statio IX: Iesus procumbit tertium sub onere crucis","Considera tertium Iesu Christi sub cruce lapsum. Procumbit quia nimia erat eius debilitas, et nimia saevitia carnificum, qui volebant ut gressum acceleraret, dum vix unum gradum facere posset.","O inclementer habite Iesu, per meritum illius virium defectionis, qua in via ad Calvarium laborare voluisti, tanto, precor, me vigore conforta, ut nullum amplius ad humana iudicia respectum habeam, ac vitiosam meam naturam edomem: quod utrumque in causa fuit cur tuam olim amicitiam contempserim. Amo te, o Iesu, mi Amor, ex toto corde meo; paenitet me quod tibi displicui: ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],10:["Statio X: Iesus vestibus spoliatur","Considera quam violenter Iesus vestimentis suis spolietur. Cum enim vestis interior arcte carni flagellis dilaniatae adhaereret, carnifices, avellendo vestem, cutem ei quoque avellunt. Subeat te commiseratio Domini tui, eumque sic alloquere:","Innocentissime Iesu, per meritum doloris quem inter hanc spoliationem passus es, adiuva me, precor, ut omnem in res creatas affectum exuam, et tota voluntatis meae inclinatione ad te solum convertar, qui meo nimis dignus es amore. Amo te ex toto corde meo; paenitet me quod tibi displicui; ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],11:["Statio XI: Iesus clavis affigitur cruci","Considera quomodo Iesus in crucem coniciatur, et extensis brachiis, vitam suam in sacrificium pro nostra salute aeterno Patri offerat. Carnifices clavis eum affigunt, dein erigunt crucem, et infami patibulo suffixum saevae morti permittunt.","O contemptissime Iesu, affige pedibus tuis cor meum, ut amoris vinculo ligatum semper tecum remaneat, necque amplius a te avellatur. Amo te magis quam meipsum; paenitet me quod tibi displicui: ne permittas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],12:["Statio XII: Iesus moritur in cruce","Considera tuum cruci suffixum Iesum, qui post trium horarum cum morte luctam, doloribus tandem consumptus addicit corpus morti, et inclinato capite emittit spiritum.","O mortue Iesu, exosculor, pietatis sensu intime commotus, hanc crucem in qua tu, mei causa, vitae tuae finem implevisti. Ob commissa peccata infelicem mihi mortem promerui; sed mors tua est spes mea. Per mortis tuae merita, concede mihi precor, ut in amplexu pedum tuorum extremum spiritum, tui amore flagrans, aliquando reddam. In manus tuas commendo spiritum meum. Amo te ex toto corde meo; paenitet me quod tibi displicui: ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],13:["Statio XIII: Iesus deponitur de cruce","Considera quomodo duo ex Iesu discipulis, Iosephus nempe et Nicodemus, eum exanimatum de cruce tollant et inter brachia perdolentis Matris reponant, quae mortuum Filium peramanter recipit et arcte complectitur.","O moerens Mater, per amorem quo Filium tuum amas, accipe me in servum tuum et precare eum pro me. Tu vero, o mi Redemptor, quoniam pro me mortuus es, fac benigne ut amem te; te enim solum volo, nec extra te aliud quidpiam mihi opto. Amo te, o mi Iesu, paenitet me quod tibi displicui: ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],14:["Statio XIV: Iesus sepulcro conditur","Considera quomodo discipuli exanimem Redemptorem ad locum sepulturae deferant. Moerens Mater eos comitatur, et propriis manibus corpus Filii sepulturae accommodat. Sepulchrum dein occluditur, et omnes a loco recedunt.","O sepulte Iesu, exosculor hunc, qui te recondit, lapidem; sed post triduum ex sepulcro resurges. Per tuam resurrectionem fac me, precor, extremo die gloriosum tecum resurgere, et venire in caelum, ubi tecum semper coniunctus, te laudabo et in aeternum amabo. Amo te, et doleo quod tibi displicui: ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."]},dm={_name:fm,"preparatory-prayer":["Oratio","Domine Iesu Christe, tu tam amanter hanc viam ingressus es, ut mortem pro me obires; ego vero multoties eo deveni, ut te contemnerem. Nunc autem ex tota anima mea amo te, et quia te amo, paenitet me ex intimo corde quod tibi displicui. Ignosce mihi, et patere ut in hac via me tibi comitem adiungam. Tu, amore mei ductus, pergis ad locum ubi pro me moriturus es, et ego vicissim, tui amore ductus, desidero te comitari, ut una tecum, amantissime Redemptor, moriar. O mi Iesu, volo coniunctim tecum et vivere et mori."],"station-dialogue":["Dialogus","V. Adoramus te, Christe, et benedicimus tibi.","R. Quia per sanctam crucem tuam redemisti mundum."],"station-prayer":["Oratio","Tu, caritatis victima,","Petis, Redemptor, Golgotham;","Tuis inhaerens gressibus,","Tecum peropto commori."],stations:hm},pm={generate:im,meta:am,params:om,languages:{en:cm,la:dm}},Nl={"alma-redemptoris-mater":ph,angelus:xh,"apostles-creed":jh,"ave-regina-caelorum":sd,"blessing-before-meals":Ed,"blessing-after-meals":Ld,"chaplet-of-divine-mercy":qd,confiteor:e0,"fatima-prayer":C0,"glory-be":V0,"hail-mary":ap,"lords-prayer":xp,"prayer-to-your-guardian-angel":Mp,"regina-caeli":Qp,rosary:hg,"salve-regina":Mg,"sign-of-the-cross":nm,"stations-of-the-cross":pm},Zo=JSON.parse(localStorage.getItem("state")),eu=localStorage.getItem("privateName"),ss=Wn("menu"),Tt=Wn(Zo!==null?Zo:{prayer:Object.keys(Nl)[0],lang:Rl[0],stage:0,step:0,conf:{}}),Dl=Wn(!1),li=Wn(eu!==null?eu:""),un=Wn(!0),Ns=kl(Rl,()=>()=>{}),Jn=kl(Nl,()=>()=>{});function gm(e){let t,r,n,i,s,a,o,u,l,c,f,d;return n=new hr({props:{id:"menu"}}),a=new hr({props:{id:"import_contacts"}}),l=new hr({props:{id:"groups"}}),{c(){t=oe("nav"),r=oe("div"),_t(n.$$.fragment),i=it(),s=oe("div"),_t(a.$$.fragment),o=it(),u=oe("div"),_t(l.$$.fragment),ce(r,"class","svelte-1uqidzq"),Fr(r,"active",e[0]=="menu"),ce(s,"class","svelte-1uqidzq"),Fr(s,"active",e[0]=="prayer"),ce(u,"class","svelte-1uqidzq"),Fr(u,"active",e[0]=="groups"),ce(t,"class","svelte-1uqidzq")},m(p,g){ye(p,t,g),se(t,r),pt(n,r,null),se(t,i),se(t,s),pt(a,s,null),se(t,o),se(t,u),pt(l,u,null),c=!0,f||(d=[Dt(r,"click",e[2]),Dt(s,"click",e[3]),Dt(u,"click",e[4])],f=!0)},p(p,[g]){(!c||g&1)&&Fr(r,"active",p[0]=="menu"),(!c||g&1)&&Fr(s,"active",p[0]=="prayer"),(!c||g&1)&&Fr(u,"active",p[0]=="groups")},i(p){c||(Se(n.$$.fragment,p),Se(a.$$.fragment,p),Se(l.$$.fragment,p),c=!0)},o(p){Ie(n.$$.fragment,p),Ie(a.$$.fragment,p),Ie(l.$$.fragment,p),c=!1},d(p){p&&me(t),gt(n),gt(a),gt(l),f=!1,Cr(d)}}}function mm(e,t,r){let n;Xe(e,ss,u=>r(0,n=u));const i=u=>{ss.set(u)};return[n,i,()=>{i("menu")},()=>{i("prayer")},()=>{i("groups")}]}class ym extends Sr{constructor(t){super(),Er(this,t,mm,gm,Lt,{})}}function Pn(e,{delay:t=0,duration:r=400,easing:n=Qa}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:n,css:s=>`opacity: ${s*i}`}}const as=(e,t,r)=>{if(t in e)return[t,e[t]];for(const n of r)if(n in e)return[n,e[n]]};function tu(e){let t,r,n=e[1].toUpperCase()+"",i,s,a=e[2]._name+"",o,u,l,c;return{c(){t=oe("div"),r=oe("div"),i=ft(n),s=ft(": "),o=ft(a),ce(r,"class","ellipsis"),ce(t,"class","svelte-134b3vf")},m(f,d){ye(f,t,d),se(t,r),se(r,i),se(r,s),se(r,o),c=!0},p(f,d){(!c||d&2)&&n!==(n=f[1].toUpperCase()+"")&&Gt(i,n),(!c||d&4)&&a!==(a=f[2]._name+"")&&Gt(o,a)},i(f){c||(Qr(()=>{l&&l.end(1),u=Za(t,Pn,{delay:75,duration:75}),u.start()}),c=!0)},o(f){u&&u.invalidate(),l=eo(t,Pn,{duration:75}),c=!1},d(f){f&&me(t),f&&l&&l.end()}}}function ru(e){let t=e[0].lang,r,n,i=tu(e);return{c(){i.c(),r=Ii()},m(s,a){i.m(s,a),ye(s,r,a),n=!0},p(s,a){a&1&&Lt(t,t=s[0].lang)?(Dr(),Ie(i,1,1,et),Lr(),i=tu(s),i.c(),Se(i,1),i.m(r.parentNode,r)):i.p(s,a)},i(s){n||(Se(i),n=!0)},o(s){Ie(i),n=!1},d(s){s&&me(r),i.d(s)}}}function vm(e){let t,r,n=e[0].prayer,i,s,a,o,u,l,c,f,d,p,g,y,T,x,k,v,_=ru(e);return o=new hr({props:{id:"restart_alt"}}),f=new hr({props:{id:"arrow_back"}}),y=new hr({props:{id:"arrow_forward"}}),{c(){t=oe("div"),r=oe("div"),_.c(),i=it(),s=oe("nav"),a=oe("button"),_t(o.$$.fragment),l=it(),c=oe("button"),_t(f.$$.fragment),p=it(),g=oe("button"),_t(y.$$.fragment),ce(r,"class","svelte-134b3vf"),a.disabled=u=!e[3]||e[0].stage==0&&e[0].step==0,ce(a,"class","svelte-134b3vf"),c.disabled=d=!e[3]||e[0].stage==0&&e[0].step==0,ce(c,"class","svelte-134b3vf"),g.disabled=T=!e[3]||e[0].stage==1||e[0].stage==2&&e[4],ce(g,"class","svelte-134b3vf"),ce(s,"class","svelte-134b3vf"),ce(t,"class","footer svelte-134b3vf")},m(w,I){ye(w,t,I),se(t,r),_.m(r,null),se(t,i),se(t,s),se(s,a),pt(o,a,null),se(s,l),se(s,c),pt(f,c,null),se(s,p),se(s,g),pt(y,g,null),x=!0,k||(v=[Dt(a,"click",e[5]),Dt(c,"click",e[6]),Dt(g,"click",e[7])],k=!0)},p(w,[I]){I&1&&Lt(n,n=w[0].prayer)?(Dr(),Ie(_,1,1,et),Lr(),_=ru(w),_.c(),Se(_,1),_.m(r,null)):_.p(w,I),(!x||I&9&&u!==(u=!w[3]||w[0].stage==0&&w[0].step==0))&&(a.disabled=u),(!x||I&9&&d!==(d=!w[3]||w[0].stage==0&&w[0].step==0))&&(c.disabled=d),(!x||I&25&&T!==(T=!w[3]||w[0].stage==1||w[0].stage==2&&w[4]))&&(g.disabled=T)},i(w){x||(Se(_),Se(o.$$.fragment,w),Se(f.$$.fragment,w),Se(y.$$.fragment,w),x=!0)},o(w){Ie(_),Ie(o.$$.fragment,w),Ie(f.$$.fragment,w),Ie(y.$$.fragment,w),x=!1},d(w){w&&me(t),_.d(w),gt(o),gt(f),gt(y),k=!1,Cr(v)}}}function bm(e,t,r){let n,i,s,a,o;Xe(e,Tt,p=>r(0,n=p)),Xe(e,Jn,p=>r(8,i=p)),Xe(e,Ns,p=>r(9,s=p)),Xe(e,un,p=>r(3,a=p)),Xe(e,Dl,p=>r(4,o=p));let u,l;const c=()=>{Tt.update(p=>(p.stage=0,p.step=0,p))},f=()=>{Tt.update(p=>{const g=Object.keys(i[n.prayer].params).length;return p.step==0?p.stage==2&&g==0?(p.stage=0,p.step=0):p.stage==2?(p.stage-=1,p.step=g-1):p.stage-=1:p.step-=1,p})},d=()=>{Tt.update(p=>{const g=Object.keys(i[n.prayer].params).length;return p.stage==0&&g==0?p.stage=2:p.stage==0?p.stage+=1:p.stage==1&&p.step==g-1?(p.step=0,p.stage+=1):p.step+=1,p})};return e.$$.update=()=>{e.$$.dirty&769&&r(1,[u,l]=as(i[n.prayer].languages,n.lang,s),u,(r(2,l),r(8,i),r(0,n),r(9,s)))},[n,u,l,a,o,c,f,d,i,s]}class Cm extends Sr{constructor(t){super(),Er(this,t,bm,vm,Lt,{})}}function nu(e,t,r){const n=e.slice();return n[8]=t[r],n}function iu(e,t,r){const n=e.slice();return n[11]=t[r],n}function su(e){let t,r=e[11].toUpperCase()+"",n,i,s,a;function o(){return e[6](e[11])}return{c(){t=oe("button"),n=ft(r),t.disabled=i=!e[1]||e[2].lang==e[11],ce(t,"class","svelte-1col42z")},m(u,l){ye(u,t,l),se(t,n),s||(a=Dt(t,"click",o),s=!0)},p(u,l){e=u,l&1&&r!==(r=e[11].toUpperCase()+"")&&Gt(n,r),l&7&&i!==(i=!e[1]||e[2].lang==e[11])&&(t.disabled=i)},d(u){u&&me(t),s=!1,a()}}}function au(e){let t,r=e[3][e[8]].meta.name+"",n,i,s,a;function o(){return e[7](e[8])}return{c(){t=oe("button"),n=ft(r),t.disabled=i=!e[1]||e[2].prayer==e[8]},m(u,l){ye(u,t,l),se(t,n),s||(a=Dt(t,"click",o),s=!0)},p(u,l){e=u,l&8&&r!==(r=e[3][e[8]].meta.name+"")&&Gt(n,r),l&14&&i!==(i=!e[1]||e[2].prayer==e[8])&&(t.disabled=i)},d(u){u&&me(t),s=!1,a()}}}function Em(e){let t,r,n,i,s,a,o=e[0],u=[];for(let f=0;f<o.length;f+=1)u[f]=su(iu(e,o,f));let l=Object.keys(e[3]),c=[];for(let f=0;f<l.length;f+=1)c[f]=au(nu(e,l,f));return{c(){t=oe("div"),r=oe("nav");for(let f=0;f<u.length;f+=1)u[f].c();n=it(),i=oe("h1"),i.textContent="Prayers",s=it(),a=oe("nav");for(let f=0;f<c.length;f+=1)c[f].c();ce(r,"class","languages svelte-1col42z"),ce(i,"class","svelte-1col42z"),ce(a,"class","prayers svelte-1col42z"),ce(t,"class","menu svelte-1col42z")},m(f,d){ye(f,t,d),se(t,r);for(let p=0;p<u.length;p+=1)u[p].m(r,null);se(t,n),se(t,i),se(t,s),se(t,a);for(let p=0;p<c.length;p+=1)c[p].m(a,null)},p(f,[d]){if(d&23){o=f[0];let p;for(p=0;p<o.length;p+=1){const g=iu(f,o,p);u[p]?u[p].p(g,d):(u[p]=su(g),u[p].c(),u[p].m(r,null))}for(;p<u.length;p+=1)u[p].d(1);u.length=o.length}if(d&46){l=Object.keys(f[3]);let p;for(p=0;p<l.length;p+=1){const g=nu(f,l,p);c[p]?c[p].p(g,d):(c[p]=au(g),c[p].c(),c[p].m(a,null))}for(;p<c.length;p+=1)c[p].d(1);c.length=l.length}},i:et,o:et,d(f){f&&me(t),dn(u,f),dn(c,f)}}}function Sm(e,t,r){let n,i,s,a;Xe(e,Ns,f=>r(0,n=f)),Xe(e,un,f=>r(1,i=f)),Xe(e,Tt,f=>r(2,s=f)),Xe(e,Jn,f=>r(3,a=f));const o=f=>{Tt.update(d=>(d.lang=f,d))},u=f=>{Tt.update(d=>(d.prayer=f,d.stage=0,d.step=0,d.conf={},d))};return[n,i,s,a,o,u,f=>o(f),f=>u(f)]}class _m extends Sr{constructor(t){super(),Er(this,t,Sm,Em,Lt,{})}}function wm(e){let t,r=as(e[0][e[1].prayer].languages,e[1].lang,e[2])[1]._name+"",n;return{c(){t=oe("h1"),n=ft(r)},m(i,s){ye(i,t,s),se(t,n)},p(i,[s]){s&7&&r!==(r=as(i[0][i[1].prayer].languages,i[1].lang,i[2])[1]._name+"")&&Gt(n,r)},i:et,o:et,d(i){i&&me(t)}}}function Tm(e,t,r){let n,i,s;return Xe(e,Jn,a=>r(0,n=a)),Xe(e,Tt,a=>r(1,i=a)),Xe(e,Ns,a=>r(2,s=a)),[n,i,s]}class xm extends Sr{constructor(t){super(),Er(this,t,Tm,wm,Lt,{})}}function ou(e,t,r){const n=e.slice();return n[7]=t[r],n}function uu(e){let t,r=e[7][1]+"",n,i,s,a;function o(){return e[4](e[7])}return{c(){t=oe("button"),n=ft(r),t.disabled=i=!e[0]},m(u,l){ye(u,t,l),se(t,n),s||(a=Dt(t,"click",o),s=!0)},p(u,l){e=u,l&1&&i!==(i=!e[0])&&(t.disabled=i)},d(u){u&&me(t),s=!1,a()}}}function Am(e){let t,r,n,i=Object.entries(e[1][e[2]].options),s=[];for(let a=0;a<i.length;a+=1)s[a]=uu(ou(e,i,a));return{c(){t=oe("h1"),t.textContent=`${e[1][e[2]].description[0]}`,r=it(),n=oe("div");for(let a=0;a<s.length;a+=1)s[a].c();ce(n,"class","options svelte-v65i26")},m(a,o){ye(a,t,o),ye(a,r,o),ye(a,n,o);for(let u=0;u<s.length;u+=1)s[u].m(n,null)},p(a,[o]){if(o&15){i=Object.entries(a[1][a[2]].options);let u;for(u=0;u<i.length;u+=1){const l=ou(a,i,u);s[u]?s[u].p(l,o):(s[u]=uu(l),s[u].c(),s[u].m(n,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=i.length}},i:et,o:et,d(a){a&&me(t),a&&me(r),a&&me(n),dn(s,a)}}}function Im(e,t,r){let n,i,s;Xe(e,Tt,c=>r(5,n=c)),Xe(e,Jn,c=>r(6,i=c)),Xe(e,un,c=>r(0,s=c));const a=i[n.prayer].params,o=Object.keys(a)[n.step],u=c=>{Tt.update(f=>(f.conf[o]=c,f.step==Object.keys(a).length-1?(f.step=0,f.stage+=1):f.step+=1,f))};return[s,a,o,u,c=>u(c[0])]}class Bm extends Sr{constructor(t){super(),Er(this,t,Im,Am,Lt,{})}}function lu(e,t,r){const n=e.slice();return n[7]=t[r],n[9]=r,n}function cu(e,t,r){const n=e.slice();return n[10]=t[r],n}function fu(e,t,r){const n=e.slice();return n[9]=t[r],n}function km(e){let t,r,n=e[2],i=[];for(let a=0;a<n.length;a+=1)i[a]=du(cu(e,n,a));const s=a=>Ie(i[a],1,1,()=>{i[a]=null});return{c(){t=oe("div");for(let a=0;a<i.length;a+=1)i[a].c();ce(t,"class","repetitions svelte-3vlz0t")},m(a,o){ye(a,t,o);for(let u=0;u<i.length;u+=1)i[u].m(t,null);r=!0},p(a,o){if(o&4){n=a[2];let u;for(u=0;u<n.length;u+=1){const l=cu(a,n,u);i[u]?(i[u].p(l,o),Se(i[u],1)):(i[u]=du(l),i[u].c(),Se(i[u],1),i[u].m(t,null))}for(Dr(),u=n.length;u<i.length;u+=1)s(u);Lr()}},i(a){if(!r){for(let o=0;o<n.length;o+=1)Se(i[o]);r=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)Ie(i[o]);r=!1},d(a){a&&me(t),dn(i,a)}}}function hu(e){let t,r,n;return r=new hr({props:{id:"circle"}}),{c(){t=oe("div"),_t(r.$$.fragment),ce(t,"class","svelte-3vlz0t"),Fr(t,"muted",e[9]>e[10][0])},m(i,s){ye(i,t,s),pt(r,t,null),n=!0},p(i,s){(!n||s&4)&&Fr(t,"muted",i[9]>i[10][0])},i(i){n||(Se(r.$$.fragment,i),n=!0)},o(i){Ie(r.$$.fragment,i),n=!1},d(i){i&&me(t),gt(r)}}}function du(e){let t,r,n,i=[...Array(e[10][1]).keys()],s=[];for(let o=0;o<i.length;o+=1)s[o]=hu(fu(e,i,o));const a=o=>Ie(s[o],1,1,()=>{s[o]=null});return{c(){t=oe("div");for(let o=0;o<s.length;o+=1)s[o].c();r=it(),ce(t,"class","svelte-3vlz0t")},m(o,u){ye(o,t,u);for(let l=0;l<s.length;l+=1)s[l].m(t,null);se(t,r),n=!0},p(o,u){if(u&4){i=[...Array(o[10][1]).keys()];let l;for(l=0;l<i.length;l+=1){const c=fu(o,i,l);s[l]?(s[l].p(c,u),Se(s[l],1)):(s[l]=hu(c),s[l].c(),Se(s[l],1),s[l].m(t,r))}for(Dr(),l=i.length;l<s.length;l+=1)a(l);Lr()}},i(o){if(!n){for(let u=0;u<i.length;u+=1)Se(s[u]);n=!0}},o(o){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)Ie(s[u]);n=!1},d(o){o&&me(t),dn(s,o)}}}function pu(e){let t,r,n=e[0].instructions+"",i;return{c(){t=oe("p"),r=oe("em"),i=ft(n)},m(s,a){ye(s,t,a),se(t,r),se(r,i)},p(s,a){a&1&&n!==(n=s[0].instructions+"")&&Gt(i,n)},d(s){s&&me(t)}}}function Rm(e){let t,r=e[7]+"",n;return{c(){t=oe("p"),n=ft(r)},m(i,s){ye(i,t,s),se(t,n)},p(i,s){s&2&&r!==(r=i[7]+"")&&Gt(n,r)},d(i){i&&me(t)}}}function gu(e){let t,r=e[9]>0&&Rm(e);return{c(){r&&r.c(),t=Ii()},m(n,i){r&&r.m(n,i),ye(n,t,i)},p(n,i){n[9]>0&&r.p(n,i)},d(n){r&&r.d(n),n&&me(t)}}}function Nm(e){let t,r,n,i=e[1][0]+"",s,a,o,u,l=e[2].length>0&&km(e),c=e[0].instructions!==null&&pu(e),f=e[1],d=[];for(let p=0;p<f.length;p+=1)d[p]=gu(lu(e,f,p));return{c(){l&&l.c(),t=it(),c&&c.c(),r=it(),n=oe("h1"),s=ft(i),a=it();for(let p=0;p<d.length;p+=1)d[p].c();o=Ii()},m(p,g){l&&l.m(p,g),ye(p,t,g),c&&c.m(p,g),ye(p,r,g),ye(p,n,g),se(n,s),ye(p,a,g);for(let y=0;y<d.length;y+=1)d[y].m(p,g);ye(p,o,g),u=!0},p(p,[g]){if(p[2].length>0&&l.p(p,g),p[0].instructions!==null?c?c.p(p,g):(c=pu(p),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null),(!u||g&2)&&i!==(i=p[1][0]+"")&&Gt(s,i),g&2){f=p[1];let y;for(y=0;y<f.length;y+=1){const T=lu(p,f,y);d[y]?d[y].p(T,g):(d[y]=gu(T),d[y].c(),d[y].m(o.parentNode,o))}for(;y<d.length;y+=1)d[y].d(1);d.length=f.length}},i(p){u||(Se(l),u=!0)},o(p){Ie(l),u=!1},d(p){l&&l.d(p),p&&me(t),c&&c.d(p),p&&me(r),p&&me(n),p&&me(a),dn(d,p),p&&me(o)}}}function Dm(e,t,r){let n,i,s;Xe(e,Ns,c=>r(3,n=c)),Xe(e,Tt,c=>r(4,i=c)),Xe(e,Jn,c=>r(5,s=c));let{item:a}=t;const o=a.id.filter(c=>typeof c!="string"&&c[1]>1),u=()=>{let c=as(s[a.prayer].languages,i.lang,n)[1];for(const f of a.key)c=c[f];return c};let l=u();return Tt.subscribe(c=>{r(1,l=u())}),e.$$set=c=>{"item"in c&&r(0,a=c.item)},[a,l,o]}class Lm extends Sr{constructor(t){super(),Er(this,t,Dm,Nm,Lt,{item:0})}}function Um(e){let t,r;return t=new Lm({props:{item:e[0][e[1].step]}}),{c(){_t(t.$$.fragment)},m(n,i){pt(t,n,i),r=!0},p(n,i){const s={};i&3&&(s.item=n[0][n[1].step]),t.$set(s)},i(n){r||(Se(t.$$.fragment,n),r=!0)},o(n){Ie(t.$$.fragment,n),r=!1},d(n){gt(t,n)}}}function Om(e){let t,r;return t=new Bm({}),{c(){_t(t.$$.fragment)},m(n,i){pt(t,n,i),r=!0},p:et,i(n){r||(Se(t.$$.fragment,n),r=!0)},o(n){Ie(t.$$.fragment,n),r=!1},d(n){gt(t,n)}}}function Mm(e){let t,r;return t=new xm({}),{c(){_t(t.$$.fragment)},m(n,i){pt(t,n,i),r=!0},p:et,i(n){r||(Se(t.$$.fragment,n),r=!0)},o(n){Ie(t.$$.fragment,n),r=!1},d(n){gt(t,n)}}}function mu(e){let t,r,n,i,s,a;const o=[Mm,Om,Um],u=[];function l(c,f){return c[1].stage==0?0:c[1].stage==1?1:2}return r=l(e),n=u[r]=o[r](e),{c(){t=oe("div"),n.c(),ce(t,"class","svelte-8wmxp5")},m(c,f){ye(c,t,f),u[r].m(t,null),a=!0},p(c,f){let d=r;r=l(c),r===d?u[r].p(c,f):(Dr(),Ie(u[d],1,1,()=>{u[d]=null}),Lr(),n=u[r],n?n.p(c,f):(n=u[r]=o[r](c),n.c()),Se(n,1),n.m(t,null))},i(c){a||(Se(n),Qr(()=>{s&&s.end(1),i=Za(t,Pn,{delay:75,duration:75}),i.start()}),a=!0)},o(c){Ie(n),i&&i.invalidate(),s=eo(t,Pn,{duration:75}),a=!1},d(c){c&&me(t),u[r].d(),c&&s&&s.end()}}}function yu(e){let t=e[1].step,r,n,i=mu(e);return{c(){i.c(),r=Ii()},m(s,a){i.m(s,a),ye(s,r,a),n=!0},p(s,a){a&2&&Lt(t,t=s[1].step)?(Dr(),Ie(i,1,1,et),Lr(),i=mu(s),i.c(),Se(i,1),i.m(r.parentNode,r)):i.p(s,a)},i(s){n||(Se(i),n=!0)},o(s){Ie(i),n=!1},d(s){s&&me(r),i.d(s)}}}function Pm(e){let t,r=e[1].stage,n,i=yu(e);return{c(){t=oe("div"),i.c(),ce(t,"class","prayer svelte-8wmxp5")},m(s,a){ye(s,t,a),i.m(t,null),n=!0},p(s,[a]){a&2&&Lt(r,r=s[1].stage)?(Dr(),Ie(i,1,1,et),Lr(),i=yu(s),i.c(),Se(i,1),i.m(t,null)):i.p(s,a)},i(s){n||(Se(i),n=!0)},o(s){Ie(i),n=!1},d(s){s&&me(t),i.d(s)}}}function Fm(e,t,r){let n,i;Xe(e,Tt,o=>r(1,n=o)),Xe(e,Jn,o=>r(2,i=o));let s=[];const a=()=>{r(0,s=i[n.prayer].generate(n.conf).map(o=>({id:o[0],prayer:o[1].length>0?o[1]:n.prayer,key:o[2],instructions:o.length>3?o[3]:null})))};return a(),Tt.subscribe(o=>{o.stage==2&&(o.step==0&&a(),Dl.set(o.step==s.length-1))}),[s,n]}class Vm extends Sr{constructor(t){super(),Er(this,t,Fm,Pm,Lt,{})}}const dr=()=>new Map,os=e=>{const t=dr();return e.forEach((r,n)=>{t.set(n,r)}),t},Zt=(e,t,r)=>{let n=e.get(t);return n===void 0&&e.set(t,n=r()),n},Hm=(e,t)=>{const r=[];for(const[n,i]of e)r.push(t(i,n));return r},Km=(e,t)=>{for(const[r,n]of e)if(t(n,r))return!0;return!1},vi=()=>new Set,ea=e=>e[e.length-1],qm=(e,t)=>{for(let r=0;r<t.length;r++)e.push(t[r])},Ll=Array.from,GS=Array.isArray;class Ds{constructor(){this._observers=dr()}on(t,r){Zt(this._observers,t,vi).add(r)}once(t,r){const n=(...i)=>{this.off(t,n),r(...i)};this.on(t,n)}off(t,r){const n=this._observers.get(t);n!==void 0&&(n.delete(r),n.size===0&&this._observers.delete(t))}emit(t,r){return Ll((this._observers.get(t)||dr()).values()).forEach(n=>n(...r))}destroy(){this._observers=dr()}}const mr=Math.floor,Ji=Math.abs,$m=Math.log10,to=(e,t)=>e<t?e:t,bn=(e,t)=>e>t?e:t,Ul=e=>e!==0?e<0:1/e<0,Gm=String.fromCharCode,jm=e=>e.toLowerCase(),zm=/^\s*/g,Wm=e=>e.replace(zm,""),Jm=/([A-Z])/g,vu=(e,t)=>Wm(e.replace(Jm,r=>`${t}${jm(r)}`)),Qm=e=>{const t=unescape(encodeURIComponent(e)),r=t.length,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=t.codePointAt(i);return n},bi=typeof TextEncoder<"u"?new TextEncoder:null,Ym=e=>bi.encode(e),Ca=bi?Ym:Qm;let di=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});di&&di.decode(new Uint8Array).length===1&&(di=null);const bu=e=>e===void 0?null:e;class Xm{constructor(){this.map=new Map}setItem(t,r){this.map.set(t,r)}getItem(t){return this.map.get(t)}}let Ol=new Xm,Ml=!0;try{typeof localStorage<"u"&&(Ol=localStorage,Ml=!1)}catch{}const Pl=Ol,Zm=e=>Ml||addEventListener("storage",e),ey=Object.keys,us=e=>ey(e).length,ty=(e,t)=>{for(const r in e)if(!t(e[r],r))return!1;return!0},Fl=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),ry=(e,t)=>e===t||us(e)===us(t)&&ty(e,(r,n)=>(r!==void 0||Fl(t,n))&&t[n]===r),ro=(e,t,r=0)=>{try{for(;r<e.length;r++)e[r](...t)}finally{r<e.length&&ro(e,t,r+1)}},ny=()=>{},iy=(e,t)=>e===t,pi=(e,t)=>{if(e==null||t==null)return iy(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const r of e.keys())if(!t.has(r)||!pi(e.get(r),t.get(r)))return!1;break}case Object:if(us(e)!==us(t))return!1;for(const r in e)if(!Fl(e,r)||!pi(e[r],t[r]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!pi(e[r],t[r]))return!1;break;default:return!1}return!0},sy=(e,t)=>t.includes(e),pn=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name),Vl=typeof window<"u"&&!pn;typeof navigator<"u"&&/Mac/.test(navigator.platform);let ir;const ay=()=>{if(ir===void 0)if(pn){ir=dr();const e=process.argv;let t=null;for(let r=0;r<e.length;r++){const n=e[r];n[0]==="-"?(t!==null&&ir.set(t,""),t=n):t!==null&&(ir.set(t,n),t=null)}t!==null&&ir.set(t,"")}else typeof location=="object"?(ir=dr(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,r]=e.split("=");ir.set(`--${vu(t,"-")}`,r),ir.set(`-${vu(t,"-")}`,r)}})):ir=dr();return ir},Ea=e=>ay().has(e),ls=e=>bu(pn?process.env[e.toUpperCase()]:Pl.getItem(e)),oy=e=>Ea("--"+e)||ls(e)!==null;oy("production");const Cu=pn&&sy(process.env.FORCE_COLOR,["true","1","2"]),uy=!Ea("no-colors")&&(!pn||process.stdout.isTTY||Cu)&&(!pn||Ea("color")||Cu||ls("COLORTERM")!==null||(ls("TERM")||"").includes("color")),Eu=1,Su=2,ta=4,ra=8,Ci=32,Br=64,$t=128,Ls=31,Sa=63,cn=127,ly=2147483647,Hl=Number.MAX_SAFE_INTEGER,cy=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&mr(e)===e),tn=e=>new Error(e),pr=()=>{throw tn("Method unimplemented")},yr=()=>{throw tn("Unexpected case")},Kl=tn("Unexpected end of array"),ql=tn("Integer out of Range");class Us{constructor(t){this.arr=t,this.pos=0}}const _r=e=>new Us(e),fy=e=>e.pos!==e.arr.length,hy=(e,t)=>{const r=so(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,r},Ct=e=>hy(e,Ce(e)),gn=e=>e.arr[e.pos++],Ce=e=>{let t=0,r=1;const n=e.arr.length;for(;e.pos<n;){const i=e.arr[e.pos++];if(t=t+(i&cn)*r,r*=128,i<$t)return t;if(t>Hl)throw ql}throw Kl},no=e=>{let t=e.arr[e.pos++],r=t&Sa,n=64;const i=(t&Br)>0?-1:1;if((t&$t)===0)return i*r;const s=e.arr.length;for(;e.pos<s;){if(t=e.arr[e.pos++],r=r+(t&cn)*n,n*=128,t<$t)return i*r;if(r>Hl)throw ql}throw Kl},dy=e=>{let t=Ce(e);if(t===0)return"";{let r=String.fromCodePoint(gn(e));if(--t<100)for(;t--;)r+=String.fromCodePoint(gn(e));else for(;t>0;){const n=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+n);e.pos+=n,r+=String.fromCodePoint.apply(null,i),t-=n}return decodeURIComponent(escape(r))}},py=e=>di.decode(Ct(e)),kr=di?py:dy,io=(e,t)=>{const r=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,r},gy=e=>io(e,4).getFloat32(0,!1),my=e=>io(e,8).getFloat64(0,!1),yy=e=>io(e,8).getBigInt64(0,!1),vy=[e=>{},e=>null,no,gy,my,yy,e=>!1,e=>!0,kr,e=>{const t=Ce(e),r={};for(let n=0;n<t;n++){const i=kr(e);r[i]=Fn(e)}return r},e=>{const t=Ce(e),r=[];for(let n=0;n<t;n++)r.push(Fn(e));return r},Ct],Fn=e=>vy[127-gn(e)](e);class _u extends Us{constructor(t,r){super(t),this.reader=r,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),fy(this)?this.count=Ce(this)+1:this.count=-1),this.count--,this.s}}class Qi extends Us{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=no(this);const t=Ul(this.s);this.count=1,t&&(this.s=-this.s,this.count=Ce(this)+2)}return this.count--,this.s}}class na extends Us{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=no(this),r=t&1;this.diff=mr(t/2),this.count=1,r&&(this.count=Ce(this)+2)}return this.s+=this.diff,this.count--,this.s}}class by{constructor(t){this.decoder=new Qi(t),this.str=kr(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),r=this.str.slice(this.spos,t);return this.spos=t,r}}const $l=e=>new Uint8Array(e),so=(e,t,r)=>new Uint8Array(e,t,r),Cy=e=>new Uint8Array(e),Ey=e=>{let t="";for(let r=0;r<e.byteLength;r++)t+=Gm(e[r]);return btoa(t)},Sy=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),_y=e=>{const t=atob(e),r=$l(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},wy=e=>{const t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},Gl=Vl?Ey:Sy,jl=Vl?_y:wy,Ty=e=>{const t=$l(e.byteLength);return t.set(e),t};class Bi{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const St=()=>new Bi,xy=e=>{let t=e.cpos;for(let r=0;r<e.bufs.length;r++)t+=e.bufs[r].length;return t},at=e=>{const t=new Uint8Array(xy(e));let r=0;for(let n=0;n<e.bufs.length;n++){const i=e.bufs[n];t.set(i,r),r+=i.length}return t.set(so(e.cbuf.buffer,0,e.cpos),r),t},Ay=(e,t)=>{const r=e.cbuf.length;r-e.cpos<t&&(e.bufs.push(so(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(bn(r,t)*2),e.cpos=0)},bt=(e,t)=>{const r=e.cbuf.length;e.cpos===r&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(r*2),e.cpos=0),e.cbuf[e.cpos++]=t},Ei=bt,he=(e,t)=>{for(;t>cn;)bt(e,$t|cn&t),t=mr(t/128);bt(e,cn&t)},ao=(e,t)=>{const r=Ul(t);for(r&&(t=-t),bt(e,(t>Sa?$t:0)|(r?Br:0)|Sa&t),t=mr(t/64);t>0;)bt(e,(t>cn?$t:0)|cn&t),t=mr(t/128)},_a=new Uint8Array(3e4),Iy=_a.length/3,By=(e,t)=>{if(t.length<Iy){const r=bi.encodeInto(t,_a).written||0;he(e,r);for(let n=0;n<r;n++)bt(e,_a[n])}else ct(e,Ca(t))},ky=(e,t)=>{const r=unescape(encodeURIComponent(t)),n=r.length;he(e,n);for(let i=0;i<n;i++)bt(e,r.codePointAt(i))},gr=bi&&bi.encodeInto?By:ky,Os=(e,t)=>{const r=e.cbuf.length,n=e.cpos,i=to(r-n,t.length),s=t.length-i;e.cbuf.set(t.subarray(0,i),n),e.cpos+=i,s>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(bn(r*2,s)),e.cbuf.set(t.subarray(i)),e.cpos=s)},ct=(e,t)=>{he(e,t.byteLength),Os(e,t)},oo=(e,t)=>{Ay(e,t);const r=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,r},Ry=(e,t)=>oo(e,4).setFloat32(0,t,!1),Ny=(e,t)=>oo(e,8).setFloat64(0,t,!1),Dy=(e,t)=>oo(e,8).setBigInt64(0,t,!1),wu=new DataView(new ArrayBuffer(4)),Ly=e=>(wu.setFloat32(0,e),wu.getFloat32(0)===e),Vn=(e,t)=>{switch(typeof t){case"string":bt(e,119),gr(e,t);break;case"number":cy(t)&&Ji(t)<=ly?(bt(e,125),ao(e,t)):Ly(t)?(bt(e,124),Ry(e,t)):(bt(e,123),Ny(e,t));break;case"bigint":bt(e,122),Dy(e,t);break;case"object":if(t===null)bt(e,126);else if(t instanceof Array){bt(e,117),he(e,t.length);for(let r=0;r<t.length;r++)Vn(e,t[r])}else if(t instanceof Uint8Array)bt(e,116),ct(e,t);else{bt(e,118);const r=Object.keys(t);he(e,r.length);for(let n=0;n<r.length;n++){const i=r[n];gr(e,i),Vn(e,t[i])}}break;case"boolean":bt(e,t?120:121);break;default:bt(e,127)}};class Tu extends Bi{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&he(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const xu=e=>{e.count>0&&(ao(e.encoder,e.count===1?e.s:-e.s),e.count>1&&he(e.encoder,e.count-2))};class Yi{constructor(){this.encoder=new Bi,this.s=0,this.count=0}write(t){this.s===t?this.count++:(xu(this),this.count=1,this.s=t)}toUint8Array(){return xu(this),at(this.encoder)}}const Au=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);ao(e.encoder,t),e.count>1&&he(e.encoder,e.count-2)}};class ia{constructor(){this.encoder=new Bi,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(Au(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return Au(this),at(this.encoder)}}class Uy{constructor(){this.sarr=[],this.s="",this.lensE=new Yi}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new Bi;return this.sarr.push(this.s),this.s="",gr(t,this.sarr.join("")),Os(t,this.lensE.toUint8Array()),at(t)}}const Iu=typeof crypto>"u"?null:crypto,Oy=Iu!==null?e=>{const t=new ArrayBuffer(e),r=new Uint8Array(t);return Iu.getRandomValues(r),t}:e=>{const t=new ArrayBuffer(e),r=new Uint8Array(t);for(let n=0;n<e;n++)r[n]=Math.ceil(Math.random()*4294967295>>>0);return t},My=Math.random,zl=()=>new Uint32Array(Oy(4))[0],Py=[1e7]+-1e3+-4e3+-8e3+-1e11,Wl=()=>Py.replace(/[018]/g,e=>(e^zl()&15>>e/4).toString(16)),Nr=Date.now,Fy=e=>new Promise(e),Vy=e=>Promise.reject(e),uo=e=>Promise.resolve(e),Ur=Symbol;class Hy{constructor(t,r){this.left=t,this.right=r}}const Tr=(e,t)=>new Hy(e,t),Cn=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const Ky=e=>Hm(e,(t,r)=>`${r}:${t};`).join("");Cn.ELEMENT_NODE;Cn.TEXT_NODE;Cn.CDATA_SECTION_NODE;Cn.COMMENT_NODE;Cn.DOCUMENT_NODE;Cn.DOCUMENT_TYPE_NODE;Cn.DOCUMENT_FRAGMENT_NODE;const qt=Ur(),Yr=Ur(),lo=Ur(),Ms=Ur(),co=Ur(),fo=Ur(),ho=Ur(),Ps=Ur(),ki=Ur(),qy={[qt]:Tr("font-weight","bold"),[Yr]:Tr("font-weight","normal"),[lo]:Tr("color","blue"),[co]:Tr("color","green"),[Ms]:Tr("color","grey"),[fo]:Tr("color","red"),[ho]:Tr("color","purple"),[Ps]:Tr("color","orange"),[ki]:Tr("color","black")},Jl={[qt]:"\x1B[1m",[Yr]:"\x1B[2m",[lo]:"\x1B[34m",[co]:"\x1B[32m",[Ms]:"\x1B[37m",[fo]:"\x1B[31m",[ho]:"\x1B[35m",[Ps]:"\x1B[38;5;208m",[ki]:"\x1B[0m"},$y=e=>{const t=[],r=[],n=dr();let i=[],s=0;for(;s<e.length;s++){const a=e[s],o=qy[a];if(o!==void 0)n.set(o.left,o.right);else if(a.constructor===String||a.constructor===Number){const u=Ky(n);s>0||u.length>0?(t.push("%c"+a),r.push(u)):t.push(a)}else break}for(s>0&&(i=r,i.unshift(t.join("")));s<e.length;s++){const a=e[s];a instanceof Symbol||i.push(a)}return i},Gy=e=>{const t=[],r=[];let n=0;for(;n<e.length;n++){const i=e[n];if(Jl[i]===void 0)if(i.constructor===String||i.constructor===Number)t.push(i);else break}for(n>0&&r.push(t.join(""));n<e.length;n++){const i=e[n];i instanceof Symbol||(i.constructor===Object?r.push(JSON.stringify(i)):r.push(i))}return r},jy=e=>{const t=[],r=[];let n=0;for(;n<e.length;n++){const i=e[n],s=Jl[i];if(s!==void 0)t.push(s);else if(i.constructor===String||i.constructor===Number)t.push(i);else break}for(n>0&&(t.push("\x1B[0m"),r.push(t.join("")));n<e.length;n++){const i=e[n];i instanceof Symbol||r.push(i)}return r},zy=uy?pn?jy:$y:Gy,Ql=(...e)=>{console.log(...zy(e)),Wy.forEach(t=>t.print(e))},Wy=new Set,Bu=[co,ho,Ps,lo];let sa=0,ku=Nr();const Jy=e=>{const t=Bu[sa],r=ls("log"),n=r!==null&&(r==="*"||r==="true"||new RegExp(r,"gi").test(e));return sa=(sa+1)%Bu.length,e+=": ",n?(...i)=>{const s=Nr(),a=s-ku;ku=s,Ql(t,e,ki,...i.map(o=>typeof o=="string"||typeof o=="symbol"?o:JSON.stringify(o)),t," +"+a+"ms")}:ny},Yl=e=>({[Symbol.iterator](){return this},next:e}),Qy=(e,t)=>Yl(()=>{let r;do r=e.next();while(!r.done&&!t(r.value));return r}),aa=(e,t)=>Yl(()=>{const{done:r,value:n}=e.next();return{done:r,value:r?void 0:t(n)}});class po{constructor(t,r){this.clock=t,this.len=r}}class Ri{constructor(){this.clients=new Map}}const wa=(e,t,r)=>t.clients.forEach((n,i)=>{const s=e.doc.store.clients.get(i);for(let a=0;a<n.length;a++){const o=n[a];fc(e,s,o.clock,o.len,r)}}),Yy=(e,t)=>{let r=0,n=e.length-1;for(;r<=n;){const i=mr((r+n)/2),s=e[i],a=s.clock;if(a<=t){if(t<a+s.len)return i;r=i+1}else n=i-1}return null},Xl=(e,t)=>{const r=e.clients.get(t.client);return r!==void 0&&Yy(r,t.clock)!==null},go=e=>{e.clients.forEach(t=>{t.sort((i,s)=>i.clock-s.clock);let r,n;for(r=1,n=1;r<t.length;r++){const i=t[n-1],s=t[r];i.clock+i.len>=s.clock?i.len=bn(i.len,s.clock+s.len-i.clock):(n<r&&(t[n]=s),n++)}t.length=n})},Xy=e=>{const t=new Ri;for(let r=0;r<e.length;r++)e[r].clients.forEach((n,i)=>{if(!t.clients.has(i)){const s=n.slice();for(let a=r+1;a<e.length;a++)qm(s,e[a].clients.get(i)||[]);t.clients.set(i,s)}});return go(t),t},cs=(e,t,r,n)=>{Zt(e.clients,t,()=>[]).push(new po(r,n))},Zl=()=>new Ri,Zy=e=>{const t=Zl();return e.clients.forEach((r,n)=>{const i=[];for(let s=0;s<r.length;s++){const a=r[s];if(a.deleted){const o=a.id.clock;let u=a.length;if(s+1<r.length)for(let l=r[s+1];s+1<r.length&&l.deleted;l=r[++s+1])u+=l.length;i.push(new po(o,u))}}i.length>0&&t.clients.set(n,i)}),t},Qn=(e,t)=>{he(e.restEncoder,t.clients.size),t.clients.forEach((r,n)=>{e.resetDsCurVal(),he(e.restEncoder,n);const i=r.length;he(e.restEncoder,i);for(let s=0;s<i;s++){const a=r[s];e.writeDsClock(a.clock),e.writeDsLen(a.len)}})},mo=e=>{const t=new Ri,r=Ce(e.restDecoder);for(let n=0;n<r;n++){e.resetDsCurVal();const i=Ce(e.restDecoder),s=Ce(e.restDecoder);if(s>0){const a=Zt(t.clients,i,()=>[]);for(let o=0;o<s;o++)a.push(new po(e.readDsClock(),e.readDsLen()))}}return t},Ru=(e,t,r)=>{const n=new Ri,i=Ce(e.restDecoder);for(let s=0;s<i;s++){e.resetDsCurVal();const a=Ce(e.restDecoder),o=Ce(e.restDecoder),u=r.clients.get(a)||[],l=xt(r,a);for(let c=0;c<o;c++){const f=e.readDsClock(),d=f+e.readDsLen();if(f<l){l<d&&cs(n,a,l,d-l);let p=vr(u,f),g=u[p];for(!g.deleted&&g.id.clock<f&&(u.splice(p+1,0,ys(t,g,f-g.id.clock)),p++);p<u.length&&(g=u[p++],g.id.clock<d);)g.deleted||(d<g.id.clock+g.length&&u.splice(p,0,ys(t,g,d-g.id.clock)),g.delete(t))}else cs(n,a,f,d-f)}}if(n.clients.size>0){const s=new mn;return he(s.restEncoder,0),Qn(s,n),s.toUint8Array()}return null},ec=zl;class Yn extends Ds{constructor({guid:t=Wl(),collectionid:r=null,gc:n=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:a=!1,shouldLoad:o=!0}={}){super(),this.gc=n,this.gcFilter=i,this.clientID=ec(),this.guid=t,this.collectionid=r,this.share=new Map,this.store=new lc,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=a,this.meta=s,this.isLoaded=!1,this.whenLoaded=Fy(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})})}load(){const t=this._item;t!==null&&!this.shouldLoad&&Ge(t.parent.doc,r=>{r.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map(t=>t.guid))}transact(t,r=null){Ge(this,t,r)}get(t,r=Nt){const n=Zt(this.share,t,()=>{const s=new r;return s._integrate(this,null),s}),i=n.constructor;if(r!==Nt&&i!==r)if(i===Nt){const s=new r;s._map=n._map,n._map.forEach(a=>{for(;a!==null;a=a.left)a.parent=s}),s._start=n._start;for(let a=s._start;a!==null;a=a.right)a.parent=s;return s._length=n._length,this.share.set(t,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return n}getArray(t=""){return this.get(t,On)}getText(t=""){return this.get(t,qn)}getMap(t=""){return this.get(t,Kn)}getXmlFragment(t=""){return this.get(t,yn)}toJSON(){const t={};return this.share.forEach((r,n)=>{t[n]=r.toJSON()}),t}destroy(){Ll(this.subdocs).forEach(r=>r.destroy());const t=this._item;if(t!==null){this._item=null;const r=t.content;r.doc=new Yn({guid:this.guid,...r.opts,shouldLoad:!1}),r.doc._item=t,Ge(t.parent.doc,n=>{const i=r.doc;t.deleted||n.subdocsAdded.add(i),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,r){super.on(t,r)}off(t,r){super.off(t,r)}}class tc{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return Ce(this.restDecoder)}readDsLen(){return Ce(this.restDecoder)}}class rc extends tc{readLeftID(){return De(Ce(this.restDecoder),Ce(this.restDecoder))}readRightID(){return De(Ce(this.restDecoder),Ce(this.restDecoder))}readClient(){return Ce(this.restDecoder)}readInfo(){return gn(this.restDecoder)}readString(){return kr(this.restDecoder)}readParentInfo(){return Ce(this.restDecoder)===1}readTypeRef(){return Ce(this.restDecoder)}readLen(){return Ce(this.restDecoder)}readAny(){return Fn(this.restDecoder)}readBuf(){return Ty(Ct(this.restDecoder))}readJSON(){return JSON.parse(kr(this.restDecoder))}readKey(){return kr(this.restDecoder)}}class ev{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ce(this.restDecoder),this.dsCurrVal}readDsLen(){const t=Ce(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class Hn extends ev{constructor(t){super(t),this.keys=[],Ce(t),this.keyClockDecoder=new na(Ct(t)),this.clientDecoder=new Qi(Ct(t)),this.leftClockDecoder=new na(Ct(t)),this.rightClockDecoder=new na(Ct(t)),this.infoDecoder=new _u(Ct(t),gn),this.stringDecoder=new by(Ct(t)),this.parentInfoDecoder=new _u(Ct(t),gn),this.typeRefDecoder=new Qi(Ct(t)),this.lenDecoder=new Qi(Ct(t))}readLeftID(){return new Un(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Un(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Fn(this.restDecoder)}readBuf(){return Ct(this.restDecoder)}readJSON(){return Fn(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const r=this.stringDecoder.read();return this.keys.push(r),r}}}class nc{constructor(){this.restEncoder=St()}toUint8Array(){return at(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){he(this.restEncoder,t)}writeDsLen(t){he(this.restEncoder,t)}}class Ni extends nc{writeLeftID(t){he(this.restEncoder,t.client),he(this.restEncoder,t.clock)}writeRightID(t){he(this.restEncoder,t.client),he(this.restEncoder,t.clock)}writeClient(t){he(this.restEncoder,t)}writeInfo(t){Ei(this.restEncoder,t)}writeString(t){gr(this.restEncoder,t)}writeParentInfo(t){he(this.restEncoder,t?1:0)}writeTypeRef(t){he(this.restEncoder,t)}writeLen(t){he(this.restEncoder,t)}writeAny(t){Vn(this.restEncoder,t)}writeBuf(t){ct(this.restEncoder,t)}writeJSON(t){gr(this.restEncoder,JSON.stringify(t))}writeKey(t){gr(this.restEncoder,t)}}class ic{constructor(){this.restEncoder=St(),this.dsCurrVal=0}toUint8Array(){return at(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const r=t-this.dsCurrVal;this.dsCurrVal=t,he(this.restEncoder,r)}writeDsLen(t){t===0&&yr(),he(this.restEncoder,t-1),this.dsCurrVal+=t}}class mn extends ic{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new ia,this.clientEncoder=new Yi,this.leftClockEncoder=new ia,this.rightClockEncoder=new ia,this.infoEncoder=new Tu(Ei),this.stringEncoder=new Uy,this.parentInfoEncoder=new Tu(Ei),this.typeRefEncoder=new Yi,this.lenEncoder=new Yi}toUint8Array(){const t=St();return he(t,0),ct(t,this.keyClockEncoder.toUint8Array()),ct(t,this.clientEncoder.toUint8Array()),ct(t,this.leftClockEncoder.toUint8Array()),ct(t,this.rightClockEncoder.toUint8Array()),ct(t,at(this.infoEncoder)),ct(t,this.stringEncoder.toUint8Array()),ct(t,at(this.parentInfoEncoder)),ct(t,this.typeRefEncoder.toUint8Array()),ct(t,this.lenEncoder.toUint8Array()),Os(t,at(this.restEncoder)),at(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){Vn(this.restEncoder,t)}writeBuf(t){ct(this.restEncoder,t)}writeJSON(t){Vn(this.restEncoder,t)}writeKey(t){const r=this.keyMap.get(t);r===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(r)}}const tv=(e,t,r,n)=>{n=bn(n,t[0].id.clock);const i=vr(t,n);he(e.restEncoder,t.length-i),e.writeClient(r),he(e.restEncoder,n);const s=t[i];s.write(e,n-s.id.clock);for(let a=i+1;a<t.length;a++)t[a].write(e,0)},yo=(e,t,r)=>{const n=new Map;r.forEach((i,s)=>{xt(t,s)>i&&n.set(s,i)}),Fs(t).forEach((i,s)=>{r.has(s)||n.set(s,0)}),he(e.restEncoder,n.size),Array.from(n.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{tv(e,t.clients.get(i),i,s)})},rv=(e,t)=>{const r=dr(),n=Ce(e.restDecoder);for(let i=0;i<n;i++){const s=Ce(e.restDecoder),a=new Array(s),o=e.readClient();let u=Ce(e.restDecoder);r.set(o,{i:0,refs:a});for(let l=0;l<s;l++){const c=e.readInfo();switch(Ls&c){case 0:{const f=e.readLen();a[l]=new zt(De(o,u),f),u+=f;break}case 10:{const f=Ce(e.restDecoder);a[l]=new Wt(De(o,u),f),u+=f;break}default:{const f=(c&(Br|$t))===0,d=new mt(De(o,u),null,(c&$t)===$t?e.readLeftID():null,null,(c&Br)===Br?e.readRightID():null,f?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,f&&(c&Ci)===Ci?e.readString():null,kc(e,c));a[l]=d,u+=d.length}}}}return r},nv=(e,t,r)=>{const n=[];let i=Array.from(r.keys()).sort((p,g)=>p-g);if(i.length===0)return null;const s=()=>{if(i.length===0)return null;let p=r.get(i[i.length-1]);for(;p.refs.length===p.i;)if(i.pop(),i.length>0)p=r.get(i[i.length-1]);else return null;return p};let a=s();if(a===null&&n.length===0)return null;const o=new lc,u=new Map,l=(p,g)=>{const y=u.get(p);(y==null||y>g)&&u.set(p,g)};let c=a.refs[a.i++];const f=new Map,d=()=>{for(const p of n){const g=p.id.client,y=r.get(g);y?(y.i--,o.clients.set(g,y.refs.slice(y.i)),r.delete(g),y.i=0,y.refs=[]):o.clients.set(g,[p]),i=i.filter(T=>T!==g)}n.length=0};for(;;){if(c.constructor!==Wt){const g=Zt(f,c.id.client,()=>xt(t,c.id.client))-c.id.clock;if(g<0)n.push(c),l(c.id.client,c.id.clock-1),d();else{const y=c.getMissing(e,t);if(y!==null){n.push(c);const T=r.get(y)||{refs:[],i:0};if(T.refs.length===T.i)l(y,xt(t,y)),d();else{c=T.refs[T.i++];continue}}else(g===0||g<c.length)&&(c.integrate(e,g),f.set(c.id.client,c.id.clock+c.length))}}if(n.length>0)c=n.pop();else if(a!==null&&a.i<a.refs.length)c=a.refs[a.i++];else{if(a=s(),a===null)break;c=a.refs[a.i++]}}if(o.clients.size>0){const p=new mn;return yo(p,o,new Map),he(p.restEncoder,0),{missing:u,update:p.toUint8Array()}}return null},iv=(e,t)=>yo(e,t.doc.store,t.beforeState),sv=(e,t,r,n=new Hn(e))=>Ge(t,i=>{i.local=!1;let s=!1;const a=i.doc,o=a.store,u=rv(n,a),l=nv(i,o,u),c=o.pendingStructs;if(c){for(const[d,p]of c.missing)if(p<xt(o,d)){s=!0;break}if(l){for(const[d,p]of l.missing){const g=c.missing.get(d);(g==null||g>p)&&c.missing.set(d,p)}c.update=fs([c.update,l.update])}}else o.pendingStructs=l;const f=Ru(n,i,o);if(o.pendingDs){const d=new Hn(_r(o.pendingDs));Ce(d.restDecoder);const p=Ru(d,i,o);f&&p?o.pendingDs=fs([f,p]):o.pendingDs=f||p}else o.pendingDs=f;if(s){const d=o.pendingStructs.update;o.pendingStructs=null,sc(i.doc,d)}},r,!1),sc=(e,t,r,n=Hn)=>{const i=_r(t);sv(i,e,r,new n(i))},av=(e,t,r)=>sc(e,t,r,rc),ov=(e,t,r=new Map)=>{yo(e,t.store,r),Qn(e,Zy(t.store))},uv=(e,t=new Uint8Array([0]),r=new mn)=>{const n=ac(t);ov(r,e,n);const i=[r.toUint8Array()];if(e.store.pendingDs&&i.push(e.store.pendingDs),e.store.pendingStructs&&i.push(xv(e.store.pendingStructs.update,t)),i.length>1){if(r.constructor===Ni)return wv(i.map((s,a)=>a===0?s:Iv(s)));if(r.constructor===mn)return fs(i)}return i[0]},lv=(e,t)=>uv(e,t,new Ni),cv=e=>{const t=new Map,r=Ce(e.restDecoder);for(let n=0;n<r;n++){const i=Ce(e.restDecoder),s=Ce(e.restDecoder);t.set(i,s)}return t},ac=e=>cv(new tc(_r(e))),oc=(e,t)=>(he(e.restEncoder,t.size),Array.from(t.entries()).sort((r,n)=>n[0]-r[0]).forEach(([r,n])=>{he(e.restEncoder,r),he(e.restEncoder,n)}),e),fv=(e,t)=>oc(e,Fs(t.store)),hv=(e,t=new ic)=>(e instanceof Map?oc(t,e):fv(t,e),t.toUint8Array()),dv=e=>hv(e,new nc);class pv{constructor(){this.l=[]}}const Nu=()=>new pv,Du=(e,t)=>e.l.push(t),Lu=(e,t)=>{const r=e.l,n=r.length;e.l=r.filter(i=>t!==i),n===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},uc=(e,t,r)=>ro(e.l,[t,r]);class Un{constructor(t,r){this.client=t,this.clock=r}}const Fi=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,De=(e,t)=>new Un(e,t),gv=e=>{for(const[t,r]of e.doc.share.entries())if(r===e)return t;throw yr()};class mv{constructor(t,r){this.ds=t,this.sv=r}}const yv=(e,t)=>new mv(e,t);yv(Zl(),new Map);const si=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Xl(t.ds,e.id),Ta=(e,t)=>{const r=Zt(e.meta,Ta,vi),n=e.doc.store;r.has(t)||(t.sv.forEach((i,s)=>{i<xt(n,s)&&Xr(e,De(s,i))}),wa(e,t.ds,i=>{}),r.add(t))};class lc{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Fs=e=>{const t=new Map;return e.clients.forEach((r,n)=>{const i=r[r.length-1];t.set(n,i.id.clock+i.length)}),t},xt=(e,t)=>{const r=e.clients.get(t);if(r===void 0)return 0;const n=r[r.length-1];return n.id.clock+n.length},cc=(e,t)=>{let r=e.clients.get(t.id.client);if(r===void 0)r=[],e.clients.set(t.id.client,r);else{const n=r[r.length-1];if(n.id.clock+n.length!==t.id.clock)throw yr()}r.push(t)},vr=(e,t)=>{let r=0,n=e.length-1,i=e[n],s=i.id.clock;if(s===t)return n;let a=mr(t/(s+i.length-1)*n);for(;r<=n;){if(i=e[a],s=i.id.clock,s<=t){if(t<s+i.length)return a;r=a+1}else n=a-1;a=mr((r+n)/2)}throw yr()},vv=(e,t)=>{const r=e.clients.get(t.client);return r[vr(r,t.clock)]},oa=vv,xa=(e,t,r)=>{const n=vr(t,r),i=t[n];return i.id.clock<r&&i instanceof mt?(t.splice(n+1,0,ys(e,i,r-i.id.clock)),n+1):n},Xr=(e,t)=>{const r=e.doc.store.clients.get(t.client);return r[xa(e,r,t.clock)]},Uu=(e,t,r)=>{const n=t.clients.get(r.client),i=vr(n,r.clock),s=n[i];return r.clock!==s.id.clock+s.length-1&&s.constructor!==zt&&n.splice(i+1,0,ys(e,s,r.clock-s.id.clock+1)),s},bv=(e,t,r)=>{const n=e.clients.get(t.id.client);n[vr(n,t.id.clock)]=r},fc=(e,t,r,n,i)=>{if(n===0)return;const s=r+n;let a=xa(e,t,r),o;do o=t[a++],s<o.id.clock+o.length&&xa(e,t,s),i(o);while(a<t.length&&t[a].id.clock<s)};class Cv{constructor(t,r,n){this.doc=t,this.deleteSet=new Ri,this.beforeState=Fs(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=r,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const Ou=(e,t)=>t.deleteSet.clients.size===0&&!Km(t.afterState,(r,n)=>t.beforeState.get(n)!==r)?!1:(go(t.deleteSet),iv(e,t),Qn(e,t.deleteSet),!0),Mu=(e,t,r)=>{const n=t._item;(n===null||n.id.clock<(e.beforeState.get(n.id.client)||0)&&!n.deleted)&&Zt(e.changed,t,vi).add(r)},Xi=(e,t)=>{const r=e[t-1],n=e[t];r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)&&(e.splice(t,1),n instanceof mt&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r))},Ev=(e,t,r)=>{for(const[n,i]of e.clients.entries()){const s=t.clients.get(n);for(let a=i.length-1;a>=0;a--){const o=i[a],u=o.clock+o.len;for(let l=vr(s,o.clock),c=s[l];l<s.length&&c.id.clock<u;c=s[++l]){const f=s[l];if(o.clock+o.len<=f.id.clock)break;f instanceof mt&&f.deleted&&!f.keep&&r(f)&&f.gc(t,!1)}}}},Sv=(e,t)=>{e.clients.forEach((r,n)=>{const i=t.clients.get(n);for(let s=r.length-1;s>=0;s--){const a=r[s],o=to(i.length-1,1+vr(i,a.clock+a.len-1));for(let u=o,l=i[u];u>0&&l.id.clock>=a.clock;l=i[--u])Xi(i,u)}})},hc=(e,t)=>{if(t<e.length){const r=e[t],n=r.doc,i=n.store,s=r.deleteSet,a=r._mergeStructs;try{go(s),r.afterState=Fs(r.doc.store),n.emit("beforeObserverCalls",[r,n]);const o=[];r.changed.forEach((u,l)=>o.push(()=>{(l._item===null||!l._item.deleted)&&l._callObserver(r,u)})),o.push(()=>{r.changedParentTypes.forEach((u,l)=>o.push(()=>{(l._item===null||!l._item.deleted)&&(u=u.filter(c=>c.target._item===null||!c.target._item.deleted),u.forEach(c=>{c.currentTarget=l}),u.sort((c,f)=>c.path.length-f.path.length),uc(l._dEH,u,r))})),o.push(()=>n.emit("afterTransaction",[r,n]))}),ro(o,[])}finally{n.gc&&Ev(s,i,n.gcFilter),Sv(s,i),r.afterState.forEach((c,f)=>{const d=r.beforeState.get(f)||0;if(d!==c){const p=i.clients.get(f),g=bn(vr(p,d),1);for(let y=p.length-1;y>=g;y--)Xi(p,y)}});for(let c=0;c<a.length;c++){const{client:f,clock:d}=a[c].id,p=i.clients.get(f),g=vr(p,d);g+1<p.length&&Xi(p,g+1),g>0&&Xi(p,g)}if(!r.local&&r.afterState.get(n.clientID)!==r.beforeState.get(n.clientID)&&(Ql(Ps,qt,"[yjs] ",Yr,fo,"Changed the client-id because another client seems to be using it."),n.clientID=ec()),n.emit("afterTransactionCleanup",[r,n]),n._observers.has("update")){const c=new Ni;Ou(c,r)&&n.emit("update",[c.toUint8Array(),r.origin,n,r])}if(n._observers.has("updateV2")){const c=new mn;Ou(c,r)&&n.emit("updateV2",[c.toUint8Array(),r.origin,n,r])}const{subdocsAdded:o,subdocsLoaded:u,subdocsRemoved:l}=r;(o.size>0||l.size>0||u.size>0)&&(o.forEach(c=>{c.clientID=n.clientID,c.collectionid==null&&(c.collectionid=n.collectionid),n.subdocs.add(c)}),l.forEach(c=>n.subdocs.delete(c)),n.emit("subdocs",[{loaded:u,added:o,removed:l},n,r]),l.forEach(c=>c.destroy())),e.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,e])):hc(e,t+1)}}},Ge=(e,t,r=null,n=!0)=>{const i=e._transactionCleanups;let s=!1;e._transaction===null&&(s=!0,e._transaction=new Cv(e,r,n),i.push(e._transaction),i.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{t(e._transaction)}finally{if(s){const a=e._transaction===i[0];e._transaction=null,a&&hc(i,0)}}};function*_v(e){const t=Ce(e.restDecoder);for(let r=0;r<t;r++){const n=Ce(e.restDecoder),i=e.readClient();let s=Ce(e.restDecoder);for(let a=0;a<n;a++){const o=e.readInfo();if(o===10){const u=Ce(e.restDecoder);yield new Wt(De(i,s),u),s+=u}else if((Ls&o)!==0){const u=(o&(Br|$t))===0,l=new mt(De(i,s),null,(o&$t)===$t?e.readLeftID():null,null,(o&Br)===Br?e.readRightID():null,u?e.readParentInfo()?e.readString():e.readLeftID():null,u&&(o&Ci)===Ci?e.readString():null,kc(e,o));yield l,s+=l.length}else{const u=e.readLen();yield new zt(De(i,s),u),s+=u}}}}class vo{constructor(t,r){this.gen=_v(t),this.curr=null,this.done=!1,this.filterSkips=r,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Wt);return this.curr}}class bo{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const wv=e=>fs(e,rc,Ni),Tv=(e,t)=>{if(e.constructor===zt){const{client:r,clock:n}=e.id;return new zt(De(r,n+t),e.length-t)}else if(e.constructor===Wt){const{client:r,clock:n}=e.id;return new Wt(De(r,n+t),e.length-t)}else{const r=e,{client:n,clock:i}=r.id;return new mt(De(n,i+t),null,De(n,i+t-1),null,r.rightOrigin,r.parent,r.parentSub,r.content.splice(t))}},fs=(e,t=Hn,r=mn)=>{if(e.length===1)return e[0];const n=e.map(c=>new t(_r(c)));let i=n.map(c=>new vo(c,!0)),s=null;const a=new r,o=new bo(a);for(;i=i.filter(d=>d.curr!==null),i.sort((d,p)=>{if(d.curr.id.client===p.curr.id.client){const g=d.curr.id.clock-p.curr.id.clock;return g===0?d.curr.constructor===p.curr.constructor?0:d.curr.constructor===Wt?1:-1:g}else return p.curr.id.client-d.curr.id.client}),i.length!==0;){const c=i[0],f=c.curr.id.client;if(s!==null){let d=c.curr,p=!1;for(;d!==null&&d.id.clock+d.length<=s.struct.id.clock+s.struct.length&&d.id.client>=s.struct.id.client;)d=c.next(),p=!0;if(d===null||d.id.client!==f||p&&d.id.clock>s.struct.id.clock+s.struct.length)continue;if(f!==s.struct.id.client)Hr(o,s.struct,s.offset),s={struct:d,offset:0},c.next();else if(s.struct.id.clock+s.struct.length<d.id.clock)if(s.struct.constructor===Wt)s.struct.length=d.id.clock+d.length-s.struct.id.clock;else{Hr(o,s.struct,s.offset);const g=d.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Wt(De(f,s.struct.id.clock+s.struct.length),g),offset:0}}else{const g=s.struct.id.clock+s.struct.length-d.id.clock;g>0&&(s.struct.constructor===Wt?s.struct.length-=g:d=Tv(d,g)),s.struct.mergeWith(d)||(Hr(o,s.struct,s.offset),s={struct:d,offset:0},c.next())}}else s={struct:c.curr,offset:0},c.next();for(let d=c.curr;d!==null&&d.id.client===f&&d.id.clock===s.struct.id.clock+s.struct.length&&d.constructor!==Wt;d=c.next())Hr(o,s.struct,s.offset),s={struct:d,offset:0}}s!==null&&(Hr(o,s.struct,s.offset),s=null),Co(o);const u=n.map(c=>mo(c)),l=Xy(u);return Qn(a,l),a.toUint8Array()},xv=(e,t,r=Hn,n=mn)=>{const i=ac(t),s=new n,a=new bo(s),o=new r(_r(e)),u=new vo(o,!1);for(;u.curr;){const c=u.curr,f=c.id.client,d=i.get(f)||0;if(u.curr.constructor===Wt){u.next();continue}if(c.id.clock+c.length>d)for(Hr(a,c,bn(d-c.id.clock,0)),u.next();u.curr&&u.curr.id.client===f;)Hr(a,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===f&&u.curr.id.clock+u.curr.length<=d;)u.next()}Co(a);const l=mo(o);return Qn(s,l),s.toUint8Array()},dc=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:at(e.encoder.restEncoder)}),e.encoder.restEncoder=St(),e.written=0)},Hr=(e,t,r)=>{e.written>0&&e.currClient!==t.id.client&&dc(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),he(e.encoder.restEncoder,t.id.clock+r)),t.write(e.encoder,r),e.written++},Co=e=>{dc(e);const t=e.encoder.restEncoder;he(t,e.clientStructs.length);for(let r=0;r<e.clientStructs.length;r++){const n=e.clientStructs[r];he(t,n.written),Os(t,n.restEncoder)}},Av=(e,t,r)=>{const n=new t(_r(e)),i=new vo(n,!1),s=new r,a=new bo(s);for(let u=i.curr;u!==null;u=i.next())Hr(a,u,0);Co(a);const o=mo(n);return Qn(s,o),s.toUint8Array()},Iv=e=>Av(e,Hn,Ni);class Vs{constructor(t,r){this.target=t,this.currentTarget=t,this.transaction=r,this._changes=null,this._keys=null,this._delta=null}get path(){return Bv(this.currentTarget,this.target)}deletes(t){return Xl(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){const t=new Map,r=this.target;this.transaction.changed.get(r).forEach(i=>{if(i!==null){const s=r._map.get(i);let a,o;if(this.adds(s)){let u=s.left;for(;u!==null&&this.adds(u);)u=u.left;if(this.deletes(s))if(u!==null&&this.deletes(u))a="delete",o=ea(u.content.getContent());else return;else u!==null&&this.deletes(u)?(a="update",o=ea(u.content.getContent())):(a="add",o=void 0)}else if(this.deletes(s))a="delete",o=ea(s.content.getContent());else return;t.set(i,{action:a,oldValue:o})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){const r=this.target,n=vi(),i=vi(),s=[];if(t={added:n,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(r).has(null)){let o=null;const u=()=>{o&&s.push(o)};for(let l=r._start;l!==null;l=l.right)l.deleted?this.deletes(l)&&!this.adds(l)&&((o===null||o.delete===void 0)&&(u(),o={delete:0}),o.delete+=l.length,i.add(l)):this.adds(l)?((o===null||o.insert===void 0)&&(u(),o={insert:[]}),o.insert=o.insert.concat(l.content.getContent()),n.add(l)):((o===null||o.retain===void 0)&&(u(),o={retain:0}),o.retain+=l.length);o!==null&&o.retain===void 0&&u()}this._changes=t}return t}}const Bv=(e,t)=>{const r=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)r.unshift(t._item.parentSub);else{let n=0,i=t._item.parent._start;for(;i!==t._item&&i!==null;)i.deleted||n++,i=i.right;r.unshift(n)}t=t._item.parent}return r},pc=80;let Eo=0;class kv{constructor(t,r){t.marker=!0,this.p=t,this.index=r,this.timestamp=Eo++}}const Rv=e=>{e.timestamp=Eo++},gc=(e,t,r)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=r,e.timestamp=Eo++},Nv=(e,t,r)=>{if(e.length>=pc){const n=e.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return gc(n,t,r),n}else{const n=new kv(t,r);return e.push(n),n}},Hs=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const r=e._searchMarker.length===0?null:e._searchMarker.reduce((s,a)=>Ji(t-s.index)<Ji(t-a.index)?s:a);let n=e._start,i=0;for(r!==null&&(n=r.p,i=r.index,Rv(r));n.right!==null&&i<t;){if(!n.deleted&&n.countable){if(t<i+n.length)break;i+=n.length}n=n.right}for(;n.left!==null&&i>t;)n=n.left,!n.deleted&&n.countable&&(i-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(i-=n.length);return r!==null&&Ji(r.index-i)<n.parent.length/pc?(gc(r,n,i),r):Nv(e._searchMarker,n,i)},Si=(e,t,r)=>{for(let n=e.length-1;n>=0;n--){const i=e[n];if(r>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){e.splice(n,1);continue}i.p=s,s.marker=!0}(t<i.index||r>0&&t===i.index)&&(i.index=bn(t,i.index+r))}},Ks=(e,t,r)=>{const n=e,i=t.changedParentTypes;for(;Zt(i,e,()=>[]).push(r),e._item!==null;)e=e._item.parent;uc(n._eH,r,t)};class Nt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Nu(),this._dEH=Nu(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,r){this.doc=t,this._item=r}_copy(){throw pr()}clone(){throw pr()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,r){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Du(this._eH,t)}observeDeep(t){Du(this._dEH,t)}unobserve(t){Lu(this._eH,t)}unobserveDeep(t){Lu(this._dEH,t)}toJSON(){}}const mc=(e,t,r)=>{t<0&&(t=e._length+t),r<0&&(r=e._length+r);let n=r-t;const i=[];let s=e._start;for(;s!==null&&n>0;){if(s.countable&&!s.deleted){const a=s.content.getContent();if(a.length<=t)t-=a.length;else{for(let o=t;o<a.length&&n>0;o++)i.push(a[o]),n--;t=0}}s=s.right}return i},yc=e=>{const t=[];let r=e._start;for(;r!==null;){if(r.countable&&!r.deleted){const n=r.content.getContent();for(let i=0;i<n.length;i++)t.push(n[i])}r=r.right}return t},_i=(e,t)=>{let r=0,n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const i=n.content.getContent();for(let s=0;s<i.length;s++)t(i[s],r++,e)}n=n.right}},vc=(e,t)=>{const r=[];return _i(e,(n,i)=>{r.push(t(n,i,e))}),r},Dv=e=>{let t=e._start,r=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(r===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};r=t.content.getContent(),n=0,t=t.right}const i=r[n++];return r.length<=n&&(r=null),{done:!1,value:i}}}},bc=(e,t)=>{const r=Hs(e,t);let n=e._start;for(r!==null&&(n=r.p,t-=r.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},hs=(e,t,r,n)=>{let i=r;const s=e.doc,a=s.clientID,o=s.store,u=r===null?t._start:r.right;let l=[];const c=()=>{l.length>0&&(i=new mt(De(a,xt(o,a)),i,i&&i.lastId,u,u&&u.id,t,null,new vn(l)),i.integrate(e,0),l=[])};n.forEach(f=>{if(f===null)l.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(f);break;default:switch(c(),f.constructor){case Uint8Array:case ArrayBuffer:i=new mt(De(a,xt(o,a)),i,i&&i.lastId,u,u&&u.id,t,null,new Di(new Uint8Array(f))),i.integrate(e,0);break;case Yn:i=new mt(De(a,xt(o,a)),i,i&&i.lastId,u,u&&u.id,t,null,new Li(f)),i.integrate(e,0);break;default:if(f instanceof Nt)i=new mt(De(a,xt(o,a)),i,i&&i.lastId,u,u&&u.id,t,null,new Or(f)),i.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),c()},Cc=tn("Length exceeded!"),Ec=(e,t,r,n)=>{if(r>t._length)throw Cc;if(r===0)return t._searchMarker&&Si(t._searchMarker,r,n.length),hs(e,t,null,n);const i=r,s=Hs(t,r);let a=t._start;for(s!==null&&(a=s.p,r-=s.index,r===0&&(a=a.prev,r+=a&&a.countable&&!a.deleted?a.length:0));a!==null;a=a.right)if(!a.deleted&&a.countable){if(r<=a.length){r<a.length&&Xr(e,De(a.id.client,a.id.clock+r));break}r-=a.length}return t._searchMarker&&Si(t._searchMarker,i,n.length),hs(e,t,a,n)},Lv=(e,t,r)=>{let i=(t._searchMarker||[]).reduce((s,a)=>a.index>s.index?a:s,{index:0,p:t._start}).p;if(i)for(;i.right;)i=i.right;return hs(e,t,i,r)},Sc=(e,t,r,n)=>{if(n===0)return;const i=r,s=n,a=Hs(t,r);let o=t._start;for(a!==null&&(o=a.p,r-=a.index);o!==null&&r>0;o=o.right)!o.deleted&&o.countable&&(r<o.length&&Xr(e,De(o.id.client,o.id.clock+r)),r-=o.length);for(;n>0&&o!==null;)o.deleted||(n<o.length&&Xr(e,De(o.id.client,o.id.clock+n)),o.delete(e),n-=o.length),o=o.right;if(n>0)throw Cc;t._searchMarker&&Si(t._searchMarker,i,-s+n)},ds=(e,t,r)=>{const n=t._map.get(r);n!==void 0&&n.delete(e)},So=(e,t,r,n)=>{const i=t._map.get(r)||null,s=e.doc,a=s.clientID;let o;if(n==null)o=new vn([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:o=new vn([n]);break;case Uint8Array:o=new Di(n);break;case Yn:o=new Li(n);break;default:if(n instanceof Nt)o=new Or(n);else throw new Error("Unexpected content type")}new mt(De(a,xt(s.store,a)),i,i&&i.lastId,null,null,t,r,o).integrate(e,0)},_o=(e,t)=>{const r=e._map.get(t);return r!==void 0&&!r.deleted?r.content.getContent()[r.length-1]:void 0},_c=e=>{const t={};return e._map.forEach((r,n)=>{r.deleted||(t[n]=r.content.getContent()[r.length-1])}),t},wc=(e,t)=>{const r=e._map.get(t);return r!==void 0&&!r.deleted},Vi=e=>Qy(e.entries(),t=>!t[1].deleted);class Uv extends Vs{constructor(t,r){super(t,r),this._transaction=r}}class On extends Nt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const r=new On;return r.push(t),r}_integrate(t,r){super._integrate(t,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new On}clone(){const t=new On;return t.insert(0,this.toArray().map(r=>r instanceof Nt?r.clone():r)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(t,r){super._callObserver(t,r),Ks(this,t,new Uv(this,t))}insert(t,r){this.doc!==null?Ge(this.doc,n=>{Ec(n,this,t,r)}):this._prelimContent.splice(t,0,...r)}push(t){this.doc!==null?Ge(this.doc,r=>{Lv(r,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,r=1){this.doc!==null?Ge(this.doc,n=>{Sc(n,this,t,r)}):this._prelimContent.splice(t,r)}get(t){return bc(this,t)}toArray(){return yc(this)}slice(t=0,r=this.length){return mc(this,t,r)}toJSON(){return this.map(t=>t instanceof Nt?t.toJSON():t)}map(t){return vc(this,t)}forEach(t){_i(this,t)}[Symbol.iterator](){return Dv(this)}_write(t){t.writeTypeRef(i1)}}const Ov=e=>new On;class Mv extends Vs{constructor(t,r,n){super(t,r),this.keysChanged=n}}class Kn extends Nt{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,r){super._integrate(t,r),this._prelimContent.forEach((n,i)=>{this.set(i,n)}),this._prelimContent=null}_copy(){return new Kn}clone(){const t=new Kn;return this.forEach((r,n)=>{t.set(n,r instanceof Nt?r.clone():r)}),t}_callObserver(t,r){Ks(this,t,new Mv(this,t,r))}toJSON(){const t={};return this._map.forEach((r,n)=>{if(!r.deleted){const i=r.content.getContent()[r.length-1];t[n]=i instanceof Nt?i.toJSON():i}}),t}get size(){return[...Vi(this._map)].length}keys(){return aa(Vi(this._map),t=>t[0])}values(){return aa(Vi(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return aa(Vi(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this._map.forEach((r,n)=>{r.deleted||t(r.content.getContent()[r.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Ge(this.doc,r=>{ds(r,this,t)}):this._prelimContent.delete(t)}set(t,r){return this.doc!==null?Ge(this.doc,n=>{So(n,this,t,r)}):this._prelimContent.set(t,r),r}get(t){return _o(this,t)}has(t){return wc(this,t)}clear(){this.doc!==null?Ge(this.doc,t=>{this.forEach(function(r,n,i){ds(t,i,n)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(s1)}}const Pv=e=>new Kn,qr=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&ry(e,t);class Aa{constructor(t,r,n,i){this.left=t,this.right=r,this.index=n,this.currentAttributes=i}forward(){switch(this.right===null&&yr(),this.right.content.constructor){case yt:this.right.deleted||Xn(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Pu=(e,t,r)=>{for(;t.right!==null&&r>0;){switch(t.right.content.constructor){case yt:t.right.deleted||Xn(t.currentAttributes,t.right.content);break;default:t.right.deleted||(r<t.right.length&&Xr(e,De(t.right.id.client,t.right.id.clock+r)),t.index+=t.right.length,r-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Hi=(e,t,r)=>{const n=new Map,i=Hs(t,r);if(i){const s=new Aa(i.p.left,i.p,i.index,n);return Pu(e,s,r-i.index)}else{const s=new Aa(null,t._start,0,n);return Pu(e,s,r)}},Tc=(e,t,r,n)=>{for(;r.right!==null&&(r.right.deleted===!0||r.right.content.constructor===yt&&qr(n.get(r.right.content.key),r.right.content.value));)r.right.deleted||n.delete(r.right.content.key),r.forward();const i=e.doc,s=i.clientID;n.forEach((a,o)=>{const u=r.left,l=r.right,c=new mt(De(s,xt(i.store,s)),u,u&&u.lastId,l,l&&l.id,t,null,new yt(o,a));c.integrate(e,0),r.right=c,r.forward()})},Xn=(e,t)=>{const{key:r,value:n}=t;n===null?e.delete(r):e.set(r,n)},xc=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===yt&&qr(t[e.right.content.key]||null,e.right.content.value)))break;e.forward()}},Ac=(e,t,r,n)=>{const i=e.doc,s=i.clientID,a=new Map;for(const o in n){const u=n[o],l=r.currentAttributes.get(o)||null;if(!qr(l,u)){a.set(o,l);const{left:c,right:f}=r;r.right=new mt(De(s,xt(i.store,s)),c,c&&c.lastId,f,f&&f.id,t,null,new yt(o,u)),r.right.integrate(e,0),r.forward()}}return a},ua=(e,t,r,n,i)=>{r.currentAttributes.forEach((d,p)=>{i[p]===void 0&&(i[p]=null)});const s=e.doc,a=s.clientID;xc(r,i);const o=Ac(e,t,r,i),u=n.constructor===String?new br(n):n instanceof Nt?new Or(n):new En(n);let{left:l,right:c,index:f}=r;t._searchMarker&&Si(t._searchMarker,r.index,u.getLength()),c=new mt(De(a,xt(s.store,a)),l,l&&l.lastId,c,c&&c.id,t,null,u),c.integrate(e,0),r.right=c,r.index=f,r.forward(),Tc(e,t,r,o)},Fu=(e,t,r,n,i)=>{const s=e.doc,a=s.clientID;xc(r,i);const o=Ac(e,t,r,i);e:for(;r.right!==null&&(n>0||o.size>0&&(r.right.deleted||r.right.content.constructor===yt));){if(!r.right.deleted)switch(r.right.content.constructor){case yt:{const{key:u,value:l}=r.right.content,c=i[u];if(c!==void 0){if(qr(c,l))o.delete(u);else{if(n===0)break e;o.set(u,l)}r.right.delete(e)}else r.currentAttributes.set(u,l);break}default:n<r.right.length&&Xr(e,De(r.right.id.client,r.right.id.clock+n)),n-=r.right.length;break}r.forward()}if(n>0){let u="";for(;n>0;n--)u+=`
`;r.right=new mt(De(a,xt(s.store,a)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,t,null,new br(u)),r.right.integrate(e,0),r.forward()}Tc(e,t,r,o)},Ic=(e,t,r,n,i)=>{let s=r;const a=os(i);for(;s&&(!s.countable||s.deleted);)!s.deleted&&s.content.constructor===yt&&Xn(a,s.content),s=s.right;let o=0,u=!1;for(;t!==s;){if(r===t&&(u=!0),!t.deleted){const l=t.content;switch(l.constructor){case yt:{const{key:c,value:f}=l;((a.get(c)||null)!==f||(n.get(c)||null)===f)&&(t.delete(e),o++,!u&&(i.get(c)||null)===f&&(n.get(c)||null)!==f&&i.delete(c));break}}}t=t.right}return o},Fv=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const r=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===yt){const n=t.content.key;r.has(n)?t.delete(e):r.add(n)}t=t.left}},Vv=e=>{let t=0;return Ge(e.doc,r=>{let n=e._start,i=e._start,s=dr();const a=os(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case yt:Xn(a,i.content);break;default:t+=Ic(r,n,i,s,a),s=os(a),n=i;break}i=i.right}}),t},Vu=(e,t,r)=>{const n=r,i=os(t.currentAttributes),s=t.right;for(;r>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case Or:case En:case br:r<t.right.length&&Xr(e,De(t.right.id.client,t.right.id.clock+r)),r-=t.right.length,t.right.delete(e);break}t.forward()}s&&Ic(e,s,t.right,i,t.currentAttributes);const a=(t.left||t.right).parent;return a._searchMarker&&Si(a._searchMarker,t.index,-n+r),t};class Hv extends Vs{constructor(t,r,n){super(t,r),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,r=[];Ge(t,n=>{const i=new Map,s=new Map;let a=this.target._start,o=null;const u={};let l="",c=0,f=0;const d=()=>{if(o!==null){let p;switch(o){case"delete":p={delete:f},f=0;break;case"insert":p={insert:l},i.size>0&&(p.attributes={},i.forEach((g,y)=>{g!==null&&(p.attributes[y]=g)})),l="";break;case"retain":if(p={retain:c},Object.keys(u).length>0){p.attributes={};for(const g in u)p.attributes[g]=u[g]}c=0;break}r.push(p),o=null}};for(;a!==null;){switch(a.content.constructor){case Or:case En:this.adds(a)?this.deletes(a)||(d(),o="insert",l=a.content.getContent()[0],d()):this.deletes(a)?(o!=="delete"&&(d(),o="delete"),f+=1):a.deleted||(o!=="retain"&&(d(),o="retain"),c+=1);break;case br:this.adds(a)?this.deletes(a)||(o!=="insert"&&(d(),o="insert"),l+=a.content.str):this.deletes(a)?(o!=="delete"&&(d(),o="delete"),f+=a.length):a.deleted||(o!=="retain"&&(d(),o="retain"),c+=a.length);break;case yt:{const{key:p,value:g}=a.content;if(this.adds(a)){if(!this.deletes(a)){const y=i.get(p)||null;qr(y,g)?g!==null&&a.delete(n):(o==="retain"&&d(),qr(g,s.get(p)||null)?delete u[p]:u[p]=g)}}else if(this.deletes(a)){s.set(p,g);const y=i.get(p)||null;qr(y,g)||(o==="retain"&&d(),u[p]=y)}else if(!a.deleted){s.set(p,g);const y=u[p];y!==void 0&&(qr(y,g)?y!==null&&a.delete(n):(o==="retain"&&d(),g===null?delete u[p]:u[p]=g))}a.deleted||(o==="insert"&&d(),Xn(i,a.content));break}}a=a.right}for(d();r.length>0;){const p=r[r.length-1];if(p.retain!==void 0&&p.attributes===void 0)r.pop();else break}}),this._delta=r}return this._delta}}class qn extends Nt{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(t,r){super._integrate(t,r);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new qn}clone(){const t=new qn;return t.applyDelta(this.toDelta()),t}_callObserver(t,r){super._callObserver(t,r);const n=new Hv(this,t,r),i=t.doc;if(Ks(this,t,n),!t.local){let s=!1;for(const[a,o]of t.afterState.entries()){const u=t.beforeState.get(a)||0;if(o!==u&&(fc(t,i.store.clients.get(a),u,o,l=>{!l.deleted&&l.content.constructor===yt&&(s=!0)}),s))break}s||wa(t,t.deleteSet,a=>{a instanceof zt||s||a.parent===this&&a.content.constructor===yt&&(s=!0)}),Ge(i,a=>{s?Vv(this):wa(a,a.deleteSet,o=>{o instanceof zt||o.parent===this&&Fv(a,o)})})}}toString(){let t="",r=this._start;for(;r!==null;)!r.deleted&&r.countable&&r.content.constructor===br&&(t+=r.content.str),r=r.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:r=!0}={}){this.doc!==null?Ge(this.doc,n=>{const i=new Aa(null,this._start,0,new Map);for(let s=0;s<t.length;s++){const a=t[s];if(a.insert!==void 0){const o=!r&&typeof a.insert=="string"&&s===t.length-1&&i.right===null&&a.insert.slice(-1)===`
`?a.insert.slice(0,-1):a.insert;(typeof o!="string"||o.length>0)&&ua(n,this,i,o,a.attributes||{})}else a.retain!==void 0?Fu(n,this,i,a.retain,a.attributes||{}):a.delete!==void 0&&Vu(n,i,a.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,r,n){const i=[],s=new Map,a=this.doc;let o="",u=this._start;function l(){if(o.length>0){const c={};let f=!1;s.forEach((p,g)=>{f=!0,c[g]=p});const d={insert:o};f&&(d.attributes=c),i.push(d),o=""}}return Ge(a,c=>{for(t&&Ta(c,t),r&&Ta(c,r);u!==null;){if(si(u,t)||r!==void 0&&si(u,r))switch(u.content.constructor){case br:{const f=s.get("ychange");t!==void 0&&!si(u,t)?(f===void 0||f.user!==u.id.client||f.type!=="removed")&&(l(),s.set("ychange",n?n("removed",u.id):{type:"removed"})):r!==void 0&&!si(u,r)?(f===void 0||f.user!==u.id.client||f.type!=="added")&&(l(),s.set("ychange",n?n("added",u.id):{type:"added"})):f!==void 0&&(l(),s.delete("ychange")),o+=u.content.str;break}case Or:case En:{l();const f={insert:u.content.getContent()[0]};if(s.size>0){const d={};f.attributes=d,s.forEach((p,g)=>{d[g]=p})}i.push(f);break}case yt:si(u,t)&&(l(),Xn(s,u.content));break}u=u.right}l()},"cleanup"),i}insert(t,r,n){if(r.length<=0)return;const i=this.doc;i!==null?Ge(i,s=>{const a=Hi(s,this,t);n||(n={},a.currentAttributes.forEach((o,u)=>{n[u]=o})),ua(s,this,a,r,n)}):this._pending.push(()=>this.insert(t,r,n))}insertEmbed(t,r,n={}){const i=this.doc;i!==null?Ge(i,s=>{const a=Hi(s,this,t);ua(s,this,a,r,n)}):this._pending.push(()=>this.insertEmbed(t,r,n))}delete(t,r){if(r===0)return;const n=this.doc;n!==null?Ge(n,i=>{Vu(i,Hi(i,this,t),r)}):this._pending.push(()=>this.delete(t,r))}format(t,r,n){if(r===0)return;const i=this.doc;i!==null?Ge(i,s=>{const a=Hi(s,this,t);a.right!==null&&Fu(s,this,a,r,n)}):this._pending.push(()=>this.format(t,r,n))}removeAttribute(t){this.doc!==null?Ge(this.doc,r=>{ds(r,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,r){this.doc!==null?Ge(this.doc,n=>{So(n,this,t,r)}):this._pending.push(()=>this.setAttribute(t,r))}getAttribute(t){return _o(this,t)}getAttributes(t){return _c(this)}_write(t){t.writeTypeRef(a1)}}const Kv=e=>new qn;class la{constructor(t,r=()=>!0){this._filter=r,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,r=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(r)))do if(r=t.content.type,!t.deleted&&(r.constructor===wi||r.constructor===yn)&&r._start!==null)t=r._start;else for(;t!==null;)if(t.right!==null){t=t.right;break}else t.parent===this._root?t=null:t=t.parent._item;while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class yn extends Nt{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,r){super._integrate(t,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new yn}clone(){const t=new yn;return t.insert(0,this.toArray().map(r=>r instanceof Nt?r.clone():r)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new la(this,t)}querySelector(t){t=t.toUpperCase();const n=new la(this,i=>i.nodeName&&i.nodeName.toUpperCase()===t).next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),Array.from(new la(this,r=>r.nodeName&&r.nodeName.toUpperCase()===t))}_callObserver(t,r){Ks(this,t,new Gv(this,r,t))}toString(){return vc(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,r={},n){const i=t.createDocumentFragment();return n!==void 0&&n._createAssociation(i,this),_i(this,s=>{i.insertBefore(s.toDOM(t,r,n),null)}),i}insert(t,r){this.doc!==null?Ge(this.doc,n=>{Ec(n,this,t,r)}):this._prelimContent.splice(t,0,...r)}insertAfter(t,r){if(this.doc!==null)Ge(this.doc,n=>{const i=t&&t instanceof Nt?t._item:t;hs(n,this,i,r)});else{const n=this._prelimContent,i=t===null?0:n.findIndex(s=>s===t)+1;if(i===0&&t!==null)throw tn("Reference item not found");n.splice(i,0,...r)}}delete(t,r=1){this.doc!==null?Ge(this.doc,n=>{Sc(n,this,t,r)}):this._prelimContent.splice(t,r)}toArray(){return yc(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return bc(this,t)}slice(t=0,r=this.length){return mc(this,t,r)}forEach(t){_i(this,t)}_write(t){t.writeTypeRef(u1)}}const qv=e=>new yn;class wi extends yn{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,r){super._integrate(t,r),this._prelimAttrs.forEach((n,i)=>{this.setAttribute(i,n)}),this._prelimAttrs=null}_copy(){return new wi(this.nodeName)}clone(){const t=new wi(this.nodeName),r=this.getAttributes();for(const n in r)t.setAttribute(n,r[n]);return t.insert(0,this.toArray().map(n=>n instanceof Nt?n.clone():n)),t}toString(){const t=this.getAttributes(),r=[],n=[];for(const o in t)n.push(o);n.sort();const i=n.length;for(let o=0;o<i;o++){const u=n[o];r.push(u+'="'+t[u]+'"')}const s=this.nodeName.toLocaleLowerCase(),a=r.length>0?" "+r.join(" "):"";return`<${s}${a}>${super.toString()}</${s}>`}removeAttribute(t){this.doc!==null?Ge(this.doc,r=>{ds(r,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,r){this.doc!==null?Ge(this.doc,n=>{So(n,this,t,r)}):this._prelimAttrs.set(t,r)}getAttribute(t){return _o(this,t)}hasAttribute(t){return wc(this,t)}getAttributes(){return _c(this)}toDOM(t=document,r={},n){const i=t.createElement(this.nodeName),s=this.getAttributes();for(const a in s)i.setAttribute(a,s[a]);return _i(this,a=>{i.appendChild(a.toDOM(t,r,n))}),n!==void 0&&n._createAssociation(i,this),i}_write(t){t.writeTypeRef(o1),t.writeKey(this.nodeName)}}const $v=e=>new wi(e.readKey());class Gv extends Vs{constructor(t,r,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class ps extends Kn{constructor(t){super(),this.hookName=t}_copy(){return new ps(this.hookName)}clone(){const t=new ps(this.hookName);return this.forEach((r,n)=>{t.set(n,r)}),t}toDOM(t=document,r={},n){const i=r[this.hookName];let s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(s,this),s}_write(t){t.writeTypeRef(l1),t.writeKey(this.hookName)}}const jv=e=>new ps(e.readKey());class gs extends qn{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new gs}clone(){const t=new gs;return t.applyDelta(this.toDelta()),t}toDOM(t=document,r,n){const i=t.createTextNode(this.toString());return n!==void 0&&n._createAssociation(i,this),i}toString(){return this.toDelta().map(t=>{const r=[];for(const i in t.attributes){const s=[];for(const a in t.attributes[i])s.push({key:a,value:t.attributes[i][a]});s.sort((a,o)=>a.key<o.key?-1:1),r.push({nodeName:i,attrs:s})}r.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let n="";for(let i=0;i<r.length;i++){const s=r[i];n+=`<${s.nodeName}`;for(let a=0;a<s.attrs.length;a++){const o=s.attrs[a];n+=` ${o.key}="${o.value}"`}n+=">"}n+=t.insert;for(let i=r.length-1;i>=0;i--)n+=`</${r[i].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(c1)}}const zv=e=>new gs;class wo{constructor(t,r){this.id=t,this.length=r}get deleted(){throw pr()}mergeWith(t){return!1}write(t,r,n){throw pr()}integrate(t,r){throw pr()}}const Wv=0;class zt extends wo{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,r){r>0&&(this.id.clock+=r,this.length-=r),cc(t.doc.store,this)}write(t,r){t.writeInfo(Wv),t.writeLen(this.length-r)}getMissing(t,r){return null}}class Di{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Di(this.content)}splice(t){throw pr()}mergeWith(t){return!1}integrate(t,r){}delete(t){}gc(t){}write(t,r){t.writeBuf(this.content)}getRef(){return 3}}const Jv=e=>new Di(e.readBuf());class Ti{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Ti(this.len)}splice(t){const r=new Ti(this.len-t);return this.len=t,r}mergeWith(t){return this.len+=t.len,!0}integrate(t,r){cs(t.deleteSet,r.id.client,r.id.clock,this.len),r.markDeleted()}delete(t){}gc(t){}write(t,r){t.writeLen(this.len-r)}getRef(){return 1}}const Qv=e=>new Ti(e.readLen()),Bc=(e,t)=>new Yn({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class Li{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const r={};this.opts=r,t.gc||(r.gc=!1),t.autoLoad&&(r.autoLoad=!0),t.meta!==null&&(r.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Li(Bc(this.doc.guid,this.opts))}splice(t){throw pr()}mergeWith(t){return!1}integrate(t,r){this.doc._item=r,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,r){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const Yv=e=>new Li(Bc(e.readString(),e.readAny()));class En{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new En(this.embed)}splice(t){throw pr()}mergeWith(t){return!1}integrate(t,r){}delete(t){}gc(t){}write(t,r){t.writeJSON(this.embed)}getRef(){return 5}}const Xv=e=>new En(e.readJSON());class yt{constructor(t,r){this.key=t,this.value=r}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new yt(this.key,this.value)}splice(t){throw pr()}mergeWith(t){return!1}integrate(t,r){r.parent._searchMarker=null}delete(t){}gc(t){}write(t,r){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const Zv=e=>new yt(e.readKey(),e.readJSON());class ms{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ms(this.arr)}splice(t){const r=new ms(this.arr.slice(t));return this.arr=this.arr.slice(0,t),r}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,r){}delete(t){}gc(t){}write(t,r){const n=this.arr.length;t.writeLen(n-r);for(let i=r;i<n;i++){const s=this.arr[i];t.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const e1=e=>{const t=e.readLen(),r=[];for(let n=0;n<t;n++){const i=e.readString();i==="undefined"?r.push(void 0):r.push(JSON.parse(i))}return new ms(r)};class vn{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new vn(this.arr)}splice(t){const r=new vn(this.arr.slice(t));return this.arr=this.arr.slice(0,t),r}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,r){}delete(t){}gc(t){}write(t,r){const n=this.arr.length;t.writeLen(n-r);for(let i=r;i<n;i++){const s=this.arr[i];t.writeAny(s)}}getRef(){return 8}}const t1=e=>{const t=e.readLen(),r=[];for(let n=0;n<t;n++)r.push(e.readAny());return new vn(r)};class br{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new br(this.str)}splice(t){const r=new br(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"\uFFFD",r.str="\uFFFD"+r.str.slice(1)),r}mergeWith(t){return this.str+=t.str,!0}integrate(t,r){}delete(t){}gc(t){}write(t,r){t.writeString(r===0?this.str:this.str.slice(r))}getRef(){return 4}}const r1=e=>new br(e.readString()),n1=[Ov,Pv,Kv,$v,qv,jv,zv],i1=0,s1=1,a1=2,o1=3,u1=4,l1=5,c1=6;class Or{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Or(this.type._copy())}splice(t){throw pr()}mergeWith(t){return!1}integrate(t,r){this.type._integrate(t.doc,r)}delete(t){let r=this.type._start;for(;r!==null;)r.deleted?t._mergeStructs.push(r):r.delete(t),r=r.right;this.type._map.forEach(n=>{n.deleted?t._mergeStructs.push(n):n.delete(t)}),t.changed.delete(this.type)}gc(t){let r=this.type._start;for(;r!==null;)r.gc(t,!0),r=r.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(t,!0),n=n.left}),this.type._map=new Map}write(t,r){this.type._write(t)}getRef(){return 7}}const f1=e=>new Or(n1[e.readTypeRef()](e));const ys=(e,t,r)=>{const{client:n,clock:i}=t.id,s=new mt(De(n,i+r),t,De(n,i+r-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(r));return t.deleted&&s.markDeleted(),t.keep&&(s.keep=!0),t.redone!==null&&(s.redone=De(t.redone.client,t.redone.clock+r)),t.right=s,s.right!==null&&(s.right.left=s),e._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),t.length=r,s};class mt extends wo{constructor(t,r,n,i,s,a,o,u){super(t,u.getLength()),this.origin=n,this.left=r,this.right=i,this.rightOrigin=s,this.parent=a,this.parentSub=o,this.redone=null,this.content=u,this.info=this.content.isCountable()?Su:0}set marker(t){(this.info&ra)>0!==t&&(this.info^=ra)}get marker(){return(this.info&ra)>0}get keep(){return(this.info&Eu)>0}set keep(t){this.keep!==t&&(this.info^=Eu)}get countable(){return(this.info&Su)>0}get deleted(){return(this.info&ta)>0}set deleted(t){this.deleted!==t&&(this.info^=ta)}markDeleted(){this.info|=ta}getMissing(t,r){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=xt(r,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=xt(r,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Un&&this.id.client!==this.parent.client&&this.parent.clock>=xt(r,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Uu(t,r,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Xr(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===zt||this.right&&this.right.constructor===zt)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===mt&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===mt&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Un){const n=oa(r,this.parent);n.constructor===zt?this.parent=null:this.parent=n.content.type}return null}integrate(t,r){if(r>0&&(this.id.clock+=r,this.left=Uu(t,t.doc.store,De(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(r),this.length-=r),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,i;if(n!==null)i=n.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,a=new Set;for(;i!==null&&i!==this.right;){if(a.add(i),s.add(i),Fi(this.origin,i.origin)){if(i.id.client<this.id.client)n=i,s.clear();else if(Fi(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&a.has(oa(t.doc.store,i.origin)))s.has(oa(t.doc.store,i.origin))||(n=i,s.clear());else break;i=i.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),cc(t.doc.store,this),this.content.integrate(t,this),Mu(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new zt(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:De(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Fi(t.origin,this.lastId)&&this.right===t&&Fi(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const r=this.parent._searchMarker;return r&&r.forEach(n=>{n.p===t&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const r=this.parent;this.countable&&this.parentSub===null&&(r._length-=this.length),this.markDeleted(),cs(t.deleteSet,this.id.client,this.id.clock,this.length),Mu(t,r,this.parentSub),this.content.delete(t)}}gc(t,r){if(!this.deleted)throw yr();this.content.gc(t),r?bv(t,this,new zt(this.id,this.length)):this.content=new Ti(this.length)}write(t,r){const n=r>0?De(this.id.client,this.id.clock+r-1):this.origin,i=this.rightOrigin,s=this.parentSub,a=this.content.getRef()&Ls|(n===null?0:$t)|(i===null?0:Br)|(s===null?0:Ci);if(t.writeInfo(a),n!==null&&t.writeLeftID(n),i!==null&&t.writeRightID(i),n===null&&i===null){const o=this.parent;if(o._item!==void 0){const u=o._item;if(u===null){const l=gv(o);t.writeParentInfo(!0),t.writeString(l)}else t.writeParentInfo(!1),t.writeLeftID(u.id)}else o.constructor===String?(t.writeParentInfo(!0),t.writeString(o)):o.constructor===Un?(t.writeParentInfo(!1),t.writeLeftID(o)):yr();s!==null&&t.writeString(s)}this.content.write(t,r)}}const kc=(e,t)=>h1[t&Ls](e),h1=[()=>{yr()},Qv,e1,Jv,r1,Xv,Zv,f1,t1,Yv,()=>{yr()}],d1=10;class Wt extends wo{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,r){yr()}write(t,r){t.writeInfo(d1),he(t.restEncoder,this.length-r)}getMissing(t,r){return null}}const Rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Nc="__ $YJS$ __";Rc[Nc]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Rc[Nc]=!0;const p1=1200,g1=2500,vs=3e4,Ia=e=>{if(e.shouldConnect&&e.ws===null){const t=new WebSocket(e.url),r=e.binaryType;let n=null;r&&(t.binaryType=r),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=a=>{e.lastMessageReceived=Nr();const o=a.data,u=typeof o=="string"?JSON.parse(o):o;u&&u.type==="pong"&&(clearTimeout(n),n=setTimeout(s,vs/2)),e.emit("message",[u,e])};const i=a=>{e.ws!==null&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:a},e])):e.unsuccessfulReconnects++,setTimeout(Ia,to($m(e.unsuccessfulReconnects+1)*p1,g1),e)),clearTimeout(n)},s=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>i(null),t.onerror=a=>i(a),t.onopen=()=>{e.lastMessageReceived=Nr(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),n=setTimeout(s,vs/2)}}};class m1 extends Ds{constructor(t,{binaryType:r}={}){super(),this.url=t,this.ws=null,this.binaryType=r||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&vs<Nr()-this.lastMessageReceived&&this.ws.close()},vs/2),Ia(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&Ia(this)}}const y1=new Map;class v1{constructor(t){this.room=t,this.onmessage=null,Zm(r=>r.key===t&&this.onmessage!==null&&this.onmessage({data:jl(r.newValue||"")}))}postMessage(t){Pl.setItem(this.room,Gl(Cy(t)))}}const b1=typeof BroadcastChannel>"u"?v1:BroadcastChannel,To=e=>Zt(y1,e,()=>{const t=new Set,r=new b1(e);return r.onmessage=n=>t.forEach(i=>i(n.data,"broadcastchannel")),{bc:r,subs:t}}),C1=(e,t)=>To(e).subs.add(t),E1=(e,t)=>To(e).subs.delete(t),S1=(e,t,r=null)=>{const n=To(e);n.bc.postMessage(t),n.subs.forEach(i=>i(t,r))},_1=()=>{let e=!0;return(t,r)=>{if(e){e=!1;try{t()}finally{e=!0}}else r!==void 0&&r()}};var er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function w1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function T1(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}function Ki(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Dc={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){var r=Math.floor,n=Math.abs,i=Math.pow;return function(){function s(a,o,u){function l(d,p){if(!o[d]){if(!a[d]){var g=typeof Ki=="function"&&Ki;if(!p&&g)return g(d,!0);if(c)return c(d,!0);var y=new Error("Cannot find module '"+d+"'");throw y.code="MODULE_NOT_FOUND",y}var T=o[d]={exports:{}};a[d][0].call(T.exports,function(x){var k=a[d][1][x];return l(k||x)},T,T.exports,s,a,o,u)}return o[d].exports}for(var c=typeof Ki=="function"&&Ki,f=0;f<u.length;f++)l(u[f]);return l}return s}()({1:[function(s,a,o){function u(_){var w=_.length;if(0<w%4)throw new Error("Invalid string. Length must be a multiple of 4");var I=_.indexOf("=");I===-1&&(I=w);var B=I===w?0:4-I%4;return[I,B]}function l(_,w,I){return 3*(w+I)/4-I}function c(_){var w,I,B=u(_),M=B[0],H=B[1],N=new T(l(_,M,H)),U=0,K=0<H?M-4:M;for(I=0;I<K;I+=4)w=y[_.charCodeAt(I)]<<18|y[_.charCodeAt(I+1)]<<12|y[_.charCodeAt(I+2)]<<6|y[_.charCodeAt(I+3)],N[U++]=255&w>>16,N[U++]=255&w>>8,N[U++]=255&w;return H===2&&(w=y[_.charCodeAt(I)]<<2|y[_.charCodeAt(I+1)]>>4,N[U++]=255&w),H===1&&(w=y[_.charCodeAt(I)]<<10|y[_.charCodeAt(I+1)]<<4|y[_.charCodeAt(I+2)]>>2,N[U++]=255&w>>8,N[U++]=255&w),N}function f(_){return g[63&_>>18]+g[63&_>>12]+g[63&_>>6]+g[63&_]}function d(_,w,I){for(var B,M=[],H=w;H<I;H+=3)B=(16711680&_[H]<<16)+(65280&_[H+1]<<8)+(255&_[H+2]),M.push(f(B));return M.join("")}function p(_){for(var w,I=_.length,B=I%3,M=[],H=16383,N=0,U=I-B;N<U;N+=H)M.push(d(_,N,N+H>U?U:N+H));return B===1?(w=_[I-1],M.push(g[w>>2]+g[63&w<<4]+"==")):B===2&&(w=(_[I-2]<<8)+_[I-1],M.push(g[w>>10]+g[63&w>>4]+g[63&w<<2]+"=")),M.join("")}o.byteLength=function(_){var w=u(_),I=w[0],B=w[1];return 3*(I+B)/4-B},o.toByteArray=c,o.fromByteArray=p;for(var g=[],y=[],T=typeof Uint8Array>"u"?Array:Uint8Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=0,v=x.length;k<v;++k)g[k]=x[k],y[x.charCodeAt(k)]=k;y[45]=62,y[95]=63},{}],2:[function(){},{}],3:[function(s,a,o){(function(){(function(){var u=String.fromCharCode,l=Math.min;function c(h){if(2147483647<h)throw new RangeError('The value "'+h+'" is invalid for option "size"');var m=new Uint8Array(h);return m.__proto__=f.prototype,m}function f(h,m,b){if(typeof h=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(h)}return d(h,m,b)}function d(h,m,b){if(typeof h=="string")return T(h,m);if(ArrayBuffer.isView(h))return x(h);if(h==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(P(h,ArrayBuffer)||h&&P(h.buffer,ArrayBuffer))return k(h,m,b);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var L=h.valueOf&&h.valueOf();if(L!=null&&L!==h)return f.from(L,m,b);var F=v(h);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return f.from(h[Symbol.toPrimitive]("string"),m,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}function p(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(0>h)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function g(h,m,b){return p(h),0>=h||m===void 0?c(h):typeof b=="string"?c(h).fill(m,b):c(h).fill(m)}function y(h){return p(h),c(0>h?0:0|_(h))}function T(h,m){if((typeof m!="string"||m==="")&&(m="utf8"),!f.isEncoding(m))throw new TypeError("Unknown encoding: "+m);var b=0|w(h,m),L=c(b),F=L.write(h,m);return F!==b&&(L=L.slice(0,F)),L}function x(h){for(var m=0>h.length?0:0|_(h.length),b=c(m),L=0;L<m;L+=1)b[L]=255&h[L];return b}function k(h,m,b){if(0>m||h.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<m+(b||0))throw new RangeError('"length" is outside of buffer bounds');var L;return L=m===void 0&&b===void 0?new Uint8Array(h):b===void 0?new Uint8Array(h,m):new Uint8Array(h,m,b),L.__proto__=f.prototype,L}function v(h){if(f.isBuffer(h)){var m=0|_(h.length),b=c(m);return b.length===0||h.copy(b,0,0,m),b}return h.length===void 0?h.type==="Buffer"&&Array.isArray(h.data)?x(h.data):void 0:typeof h.length!="number"||$(h.length)?c(0):x(h)}function _(h){if(h>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|h}function w(h,m){if(f.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||P(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);var b=h.length,L=2<arguments.length&&arguments[2]===!0;if(!L&&b===0)return 0;for(var F=!1;;)switch(m){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return rt(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*b;case"hex":return b>>>1;case"base64":return He(h).length;default:if(F)return L?-1:rt(h).length;m=(""+m).toLowerCase(),F=!0}}function I(h,m,b){var L=!1;if((m===void 0||0>m)&&(m=0),m>this.length||((b===void 0||b>this.length)&&(b=this.length),0>=b)||(b>>>=0,m>>>=0,b<=m))return"";for(h||(h="utf8");;)switch(h){case"hex":return Me(this,m,b);case"utf8":case"utf-8":return ee(this,m,b);case"ascii":return pe(this,m,b);case"latin1":case"binary":return qe(this,m,b);case"base64":return ue(this,m,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,m,b);default:if(L)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),L=!0}}function B(h,m,b){var L=h[m];h[m]=h[b],h[b]=L}function M(h,m,b,L,F){if(h.length===0)return-1;if(typeof b=="string"?(L=b,b=0):2147483647<b?b=2147483647:-2147483648>b&&(b=-2147483648),b=+b,$(b)&&(b=F?0:h.length-1),0>b&&(b=h.length+b),b>=h.length){if(F)return-1;b=h.length-1}else if(0>b)if(F)b=0;else return-1;if(typeof m=="string"&&(m=f.from(m,L)),f.isBuffer(m))return m.length===0?-1:H(h,m,b,L,F);if(typeof m=="number")return m&=255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(h,m,b):Uint8Array.prototype.lastIndexOf.call(h,m,b):H(h,[m],b,L,F);throw new TypeError("val must be string, number or Buffer")}function H(h,m,b,L,F){function G(wn,ni){return ae===1?wn[ni]:wn.readUInt16BE(ni*ae)}var ae=1,ke=h.length,nt=m.length;if(L!==void 0&&(L=(L+"").toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(2>h.length||2>m.length)return-1;ae=2,ke/=2,nt/=2,b/=2}var Re;if(F){var Te=-1;for(Re=b;Re<ke;Re++)if(G(h,Re)!==G(m,Te===-1?0:Re-Te))Te!==-1&&(Re-=Re-Te),Te=-1;else if(Te===-1&&(Te=Re),Re-Te+1===nt)return Te*ae}else for(b+nt>ke&&(b=ke-nt),Re=b;0<=Re;Re--){for(var It=!0,rn=0;rn<nt;rn++)if(G(h,Re+rn)!==G(m,rn)){It=!1;break}if(It)return Re}return-1}function N(h,m,b,L){b=+b||0;var F=h.length-b;L?(L=+L,L>F&&(L=F)):L=F;var G=m.length;L>G/2&&(L=G/2);for(var ae,ke=0;ke<L;++ke){if(ae=parseInt(m.substr(2*ke,2),16),$(ae))return ke;h[b+ke]=ae}return ke}function U(h,m,b,L){return Ke(rt(m,h.length-b),h,b,L)}function K(h,m,b,L){return Ke(lt(m),h,b,L)}function q(h,m,b,L){return K(h,m,b,L)}function re(h,m,b,L){return Ke(He(m),h,b,L)}function Y(h,m,b,L){return Ke(Qe(m,h.length-b),h,b,L)}function ue(h,m,b){return m===0&&b===h.length?Q.fromByteArray(h):Q.fromByteArray(h.slice(m,b))}function ee(h,m,b){b=l(h.length,b);for(var L=[],F=m;F<b;){var G=h[F],ae=null,ke=239<G?4:223<G?3:191<G?2:1;if(F+ke<=b){var nt,Re,Te,It;ke===1?128>G&&(ae=G):ke===2?(nt=h[F+1],(192&nt)==128&&(It=(31&G)<<6|63&nt,127<It&&(ae=It))):ke===3?(nt=h[F+1],Re=h[F+2],(192&nt)==128&&(192&Re)==128&&(It=(15&G)<<12|(63&nt)<<6|63&Re,2047<It&&(55296>It||57343<It)&&(ae=It))):ke===4&&(nt=h[F+1],Re=h[F+2],Te=h[F+3],(192&nt)==128&&(192&Re)==128&&(192&Te)==128&&(It=(15&G)<<18|(63&nt)<<12|(63&Re)<<6|63&Te,65535<It&&1114112>It&&(ae=It)))}ae===null?(ae=65533,ke=1):65535<ae&&(ae-=65536,L.push(55296|1023&ae>>>10),ae=56320|1023&ae),L.push(ae),F+=ke}return ot(L)}function ot(h){var m=h.length;if(m<=4096)return u.apply(String,h);for(var b="",L=0;L<m;)b+=u.apply(String,h.slice(L,L+=4096));return b}function pe(h,m,b){var L="";b=l(h.length,b);for(var F=m;F<b;++F)L+=u(127&h[F]);return L}function qe(h,m,b){var L="";b=l(h.length,b);for(var F=m;F<b;++F)L+=u(h[F]);return L}function Me(h,m,b){var L=h.length;(!m||0>m)&&(m=0),(!b||0>b||b>L)&&(b=L);for(var F="",G=m;G<b;++G)F+=tt(h[G]);return F}function Fe(h,m,b){for(var L=h.slice(m,b),F="",G=0;G<L.length;G+=2)F+=u(L[G]+256*L[G+1]);return F}function _e(h,m,b){if(h%1!=0||0>h)throw new RangeError("offset is not uint");if(h+m>b)throw new RangeError("Trying to access beyond buffer length")}function ve(h,m,b,L,F,G){if(!f.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>F||m<G)throw new RangeError('"value" argument is out of bounds');if(b+L>h.length)throw new RangeError("Index out of range")}function Ve(h,m,b,L){if(b+L>h.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("Index out of range")}function We(h,m,b,L,F){return m=+m,b>>>=0,F||Ve(h,m,b,4),le.write(h,m,b,L,23,4),b+4}function Je(h,m,b,L,F){return m=+m,b>>>=0,F||Ve(h,m,b,8),le.write(h,m,b,L,52,8),b+8}function ut(h){if(h=h.split("=")[0],h=h.trim().replace(A,""),2>h.length)return"";for(;h.length%4!=0;)h+="=";return h}function tt(h){return 16>h?"0"+h.toString(16):h.toString(16)}function rt(h,m){m=m||1/0;for(var b,L=h.length,F=null,G=[],ae=0;ae<L;++ae){if(b=h.charCodeAt(ae),55295<b&&57344>b){if(!F){if(56319<b){-1<(m-=3)&&G.push(239,191,189);continue}else if(ae+1===L){-1<(m-=3)&&G.push(239,191,189);continue}F=b;continue}if(56320>b){-1<(m-=3)&&G.push(239,191,189),F=b;continue}b=(F-55296<<10|b-56320)+65536}else F&&-1<(m-=3)&&G.push(239,191,189);if(F=null,128>b){if(0>(m-=1))break;G.push(b)}else if(2048>b){if(0>(m-=2))break;G.push(192|b>>6,128|63&b)}else if(65536>b){if(0>(m-=3))break;G.push(224|b>>12,128|63&b>>6,128|63&b)}else if(1114112>b){if(0>(m-=4))break;G.push(240|b>>18,128|63&b>>12,128|63&b>>6,128|63&b)}else throw new Error("Invalid code point")}return G}function lt(h){for(var m=[],b=0;b<h.length;++b)m.push(255&h.charCodeAt(b));return m}function Qe(h,m){for(var b,L,F,G=[],ae=0;ae<h.length&&!(0>(m-=2));++ae)b=h.charCodeAt(ae),L=b>>8,F=b%256,G.push(F),G.push(L);return G}function He(h){return Q.toByteArray(ut(h))}function Ke(h,m,b,L){for(var F=0;F<L&&!(F+b>=m.length||F>=h.length);++F)m[F+b]=h[F];return F}function P(h,m){return h instanceof m||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===m.name}function $(h){return h!==h}var Q=s("base64-js"),le=s("ieee754");o.Buffer=f,o.SlowBuffer=function(h){return+h!=h&&(h=0),f.alloc(+h)},o.INSPECT_MAX_BYTES=50,o.kMaxLength=2147483647,f.TYPED_ARRAY_SUPPORT=function(){try{var h=new Uint8Array(1);return h.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},h.foo()===42}catch{return!1}}(),f.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){return f.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){return f.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=function(h,m,b){return d(h,m,b)},f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(h,m,b){return g(h,m,b)},f.allocUnsafe=function(h){return y(h)},f.allocUnsafeSlow=function(h){return y(h)},f.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==f.prototype},f.compare=function(h,m){if(P(h,Uint8Array)&&(h=f.from(h,h.offset,h.byteLength)),P(m,Uint8Array)&&(m=f.from(m,m.offset,m.byteLength)),!f.isBuffer(h)||!f.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===m)return 0;for(var b=h.length,L=m.length,F=0,G=l(b,L);F<G;++F)if(h[F]!==m[F]){b=h[F],L=m[F];break}return b<L?-1:L<b?1:0},f.isEncoding=function(h){switch((h+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(h,m){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return f.alloc(0);var b;if(m===void 0)for(m=0,b=0;b<h.length;++b)m+=h[b].length;var L=f.allocUnsafe(m),F=0;for(b=0;b<h.length;++b){var G=h[b];if(P(G,Uint8Array)&&(G=f.from(G)),!f.isBuffer(G))throw new TypeError('"list" argument must be an Array of Buffers');G.copy(L,F),F+=G.length}return L},f.byteLength=w,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var h=this.length;if(h%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<h;m+=2)B(this,m,m+1);return this},f.prototype.swap32=function(){var h=this.length;if(h%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<h;m+=4)B(this,m,m+3),B(this,m+1,m+2);return this},f.prototype.swap64=function(){var h=this.length;if(h%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<h;m+=8)B(this,m,m+7),B(this,m+1,m+6),B(this,m+2,m+5),B(this,m+3,m+4);return this},f.prototype.toString=function(){var h=this.length;return h===0?"":arguments.length===0?ee(this,0,h):I.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(h){if(!f.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h||f.compare(this,h)===0},f.prototype.inspect=function(){var h="",m=o.INSPECT_MAX_BYTES;return h=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(h+=" ... "),"<Buffer "+h+">"},f.prototype.compare=function(h,m,b,L,F){if(P(h,Uint8Array)&&(h=f.from(h,h.offset,h.byteLength)),!f.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(m===void 0&&(m=0),b===void 0&&(b=h?h.length:0),L===void 0&&(L=0),F===void 0&&(F=this.length),0>m||b>h.length||0>L||F>this.length)throw new RangeError("out of range index");if(L>=F&&m>=b)return 0;if(L>=F)return-1;if(m>=b)return 1;if(m>>>=0,b>>>=0,L>>>=0,F>>>=0,this===h)return 0;for(var G=F-L,ae=b-m,ke=l(G,ae),nt=this.slice(L,F),Re=h.slice(m,b),Te=0;Te<ke;++Te)if(nt[Te]!==Re[Te]){G=nt[Te],ae=Re[Te];break}return G<ae?-1:ae<G?1:0},f.prototype.includes=function(h,m,b){return this.indexOf(h,m,b)!==-1},f.prototype.indexOf=function(h,m,b){return M(this,h,m,b,!0)},f.prototype.lastIndexOf=function(h,m,b){return M(this,h,m,b,!1)},f.prototype.write=function(h,m,b,L){if(m===void 0)L="utf8",b=this.length,m=0;else if(b===void 0&&typeof m=="string")L=m,b=this.length,m=0;else if(isFinite(m))m>>>=0,isFinite(b)?(b>>>=0,L===void 0&&(L="utf8")):(L=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var F=this.length-m;if((b===void 0||b>F)&&(b=F),0<h.length&&(0>b||0>m)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");for(var G=!1;;)switch(L){case"hex":return N(this,h,m,b);case"utf8":case"utf-8":return U(this,h,m,b);case"ascii":return K(this,h,m,b);case"latin1":case"binary":return q(this,h,m,b);case"base64":return re(this,h,m,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,h,m,b);default:if(G)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),G=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(h,m){var b=this.length;h=~~h,m=m===void 0?b:~~m,0>h?(h+=b,0>h&&(h=0)):h>b&&(h=b),0>m?(m+=b,0>m&&(m=0)):m>b&&(m=b),m<h&&(m=h);var L=this.subarray(h,m);return L.__proto__=f.prototype,L},f.prototype.readUIntLE=function(h,m,b){h>>>=0,m>>>=0,b||_e(h,m,this.length);for(var L=this[h],F=1,G=0;++G<m&&(F*=256);)L+=this[h+G]*F;return L},f.prototype.readUIntBE=function(h,m,b){h>>>=0,m>>>=0,b||_e(h,m,this.length);for(var L=this[h+--m],F=1;0<m&&(F*=256);)L+=this[h+--m]*F;return L},f.prototype.readUInt8=function(h,m){return h>>>=0,m||_e(h,1,this.length),this[h]},f.prototype.readUInt16LE=function(h,m){return h>>>=0,m||_e(h,2,this.length),this[h]|this[h+1]<<8},f.prototype.readUInt16BE=function(h,m){return h>>>=0,m||_e(h,2,this.length),this[h]<<8|this[h+1]},f.prototype.readUInt32LE=function(h,m){return h>>>=0,m||_e(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+16777216*this[h+3]},f.prototype.readUInt32BE=function(h,m){return h>>>=0,m||_e(h,4,this.length),16777216*this[h]+(this[h+1]<<16|this[h+2]<<8|this[h+3])},f.prototype.readIntLE=function(h,m,b){h>>>=0,m>>>=0,b||_e(h,m,this.length);for(var L=this[h],F=1,G=0;++G<m&&(F*=256);)L+=this[h+G]*F;return F*=128,L>=F&&(L-=i(2,8*m)),L},f.prototype.readIntBE=function(h,m,b){h>>>=0,m>>>=0,b||_e(h,m,this.length);for(var L=m,F=1,G=this[h+--L];0<L&&(F*=256);)G+=this[h+--L]*F;return F*=128,G>=F&&(G-=i(2,8*m)),G},f.prototype.readInt8=function(h,m){return h>>>=0,m||_e(h,1,this.length),128&this[h]?-1*(255-this[h]+1):this[h]},f.prototype.readInt16LE=function(h,m){h>>>=0,m||_e(h,2,this.length);var b=this[h]|this[h+1]<<8;return 32768&b?4294901760|b:b},f.prototype.readInt16BE=function(h,m){h>>>=0,m||_e(h,2,this.length);var b=this[h+1]|this[h]<<8;return 32768&b?4294901760|b:b},f.prototype.readInt32LE=function(h,m){return h>>>=0,m||_e(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},f.prototype.readInt32BE=function(h,m){return h>>>=0,m||_e(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},f.prototype.readFloatLE=function(h,m){return h>>>=0,m||_e(h,4,this.length),le.read(this,h,!0,23,4)},f.prototype.readFloatBE=function(h,m){return h>>>=0,m||_e(h,4,this.length),le.read(this,h,!1,23,4)},f.prototype.readDoubleLE=function(h,m){return h>>>=0,m||_e(h,8,this.length),le.read(this,h,!0,52,8)},f.prototype.readDoubleBE=function(h,m){return h>>>=0,m||_e(h,8,this.length),le.read(this,h,!1,52,8)},f.prototype.writeUIntLE=function(h,m,b,L){if(h=+h,m>>>=0,b>>>=0,!L){var F=i(2,8*b)-1;ve(this,h,m,b,F,0)}var G=1,ae=0;for(this[m]=255&h;++ae<b&&(G*=256);)this[m+ae]=255&h/G;return m+b},f.prototype.writeUIntBE=function(h,m,b,L){if(h=+h,m>>>=0,b>>>=0,!L){var F=i(2,8*b)-1;ve(this,h,m,b,F,0)}var G=b-1,ae=1;for(this[m+G]=255&h;0<=--G&&(ae*=256);)this[m+G]=255&h/ae;return m+b},f.prototype.writeUInt8=function(h,m,b){return h=+h,m>>>=0,b||ve(this,h,m,1,255,0),this[m]=255&h,m+1},f.prototype.writeUInt16LE=function(h,m,b){return h=+h,m>>>=0,b||ve(this,h,m,2,65535,0),this[m]=255&h,this[m+1]=h>>>8,m+2},f.prototype.writeUInt16BE=function(h,m,b){return h=+h,m>>>=0,b||ve(this,h,m,2,65535,0),this[m]=h>>>8,this[m+1]=255&h,m+2},f.prototype.writeUInt32LE=function(h,m,b){return h=+h,m>>>=0,b||ve(this,h,m,4,4294967295,0),this[m+3]=h>>>24,this[m+2]=h>>>16,this[m+1]=h>>>8,this[m]=255&h,m+4},f.prototype.writeUInt32BE=function(h,m,b){return h=+h,m>>>=0,b||ve(this,h,m,4,4294967295,0),this[m]=h>>>24,this[m+1]=h>>>16,this[m+2]=h>>>8,this[m+3]=255&h,m+4},f.prototype.writeIntLE=function(h,m,b,L){if(h=+h,m>>>=0,!L){var F=i(2,8*b-1);ve(this,h,m,b,F-1,-F)}var G=0,ae=1,ke=0;for(this[m]=255&h;++G<b&&(ae*=256);)0>h&&ke===0&&this[m+G-1]!==0&&(ke=1),this[m+G]=255&(h/ae>>0)-ke;return m+b},f.prototype.writeIntBE=function(h,m,b,L){if(h=+h,m>>>=0,!L){var F=i(2,8*b-1);ve(this,h,m,b,F-1,-F)}var G=b-1,ae=1,ke=0;for(this[m+G]=255&h;0<=--G&&(ae*=256);)0>h&&ke===0&&this[m+G+1]!==0&&(ke=1),this[m+G]=255&(h/ae>>0)-ke;return m+b},f.prototype.writeInt8=function(h,m,b){return h=+h,m>>>=0,b||ve(this,h,m,1,127,-128),0>h&&(h=255+h+1),this[m]=255&h,m+1},f.prototype.writeInt16LE=function(h,m,b){return h=+h,m>>>=0,b||ve(this,h,m,2,32767,-32768),this[m]=255&h,this[m+1]=h>>>8,m+2},f.prototype.writeInt16BE=function(h,m,b){return h=+h,m>>>=0,b||ve(this,h,m,2,32767,-32768),this[m]=h>>>8,this[m+1]=255&h,m+2},f.prototype.writeInt32LE=function(h,m,b){return h=+h,m>>>=0,b||ve(this,h,m,4,2147483647,-2147483648),this[m]=255&h,this[m+1]=h>>>8,this[m+2]=h>>>16,this[m+3]=h>>>24,m+4},f.prototype.writeInt32BE=function(h,m,b){return h=+h,m>>>=0,b||ve(this,h,m,4,2147483647,-2147483648),0>h&&(h=4294967295+h+1),this[m]=h>>>24,this[m+1]=h>>>16,this[m+2]=h>>>8,this[m+3]=255&h,m+4},f.prototype.writeFloatLE=function(h,m,b){return We(this,h,m,!0,b)},f.prototype.writeFloatBE=function(h,m,b){return We(this,h,m,!1,b)},f.prototype.writeDoubleLE=function(h,m,b){return Je(this,h,m,!0,b)},f.prototype.writeDoubleBE=function(h,m,b){return Je(this,h,m,!1,b)},f.prototype.copy=function(h,m,b,L){if(!f.isBuffer(h))throw new TypeError("argument should be a Buffer");if(b||(b=0),L||L===0||(L=this.length),m>=h.length&&(m=h.length),m||(m=0),0<L&&L<b&&(L=b),L===b||h.length===0||this.length===0)return 0;if(0>m)throw new RangeError("targetStart out of bounds");if(0>b||b>=this.length)throw new RangeError("Index out of range");if(0>L)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),h.length-m<L-b&&(L=h.length-m+b);var F=L-b;if(this===h&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(m,b,L);else if(this===h&&b<m&&m<L)for(var G=F-1;0<=G;--G)h[G+m]=this[G+b];else Uint8Array.prototype.set.call(h,this.subarray(b,L),m);return F},f.prototype.fill=function(h,m,b,L){if(typeof h=="string"){if(typeof m=="string"?(L=m,m=0,b=this.length):typeof b=="string"&&(L=b,b=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!f.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(h.length===1){var F=h.charCodeAt(0);(L==="utf8"&&128>F||L==="latin1")&&(h=F)}}else typeof h=="number"&&(h&=255);if(0>m||this.length<m||this.length<b)throw new RangeError("Out of range index");if(b<=m)return this;m>>>=0,b=b===void 0?this.length:b>>>0,h||(h=0);var G;if(typeof h=="number")for(G=m;G<b;++G)this[G]=h;else{var ae=f.isBuffer(h)?h:f.from(h,L),ke=ae.length;if(ke===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(G=0;G<b-m;++G)this[G+m]=ae[G%ke]}return this};var A=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,s("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(s,a,o){(function(u){(function(){function l(){let f;try{f=o.storage.getItem("debug")}catch{}return!f&&typeof u<"u"&&"env"in u&&(f=u.env.DEBUG),f}o.formatArgs=function(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;f.splice(1,0,d,"color: inherit");let p=0,g=0;f[0].replace(/%[a-zA-Z%]/g,y=>{y==="%%"||(p++,y==="%c"&&(g=p))}),f.splice(g,0,d)},o.save=function(f){try{f?o.storage.setItem("debug",f):o.storage.removeItem("debug")}catch{}},o.load=l,o.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},o.storage=function(){try{return localStorage}catch{}}(),o.destroy=(()=>{let f=!1;return()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.log=console.debug||console.log||(()=>{}),a.exports=s("./common")(o);const{formatters:c}=a.exports;c.j=function(f){try{return JSON.stringify(f)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}}).call(this)}).call(this,s("_process"))},{"./common":5,_process:12}],5:[function(s,a){a.exports=function(o){function u(f){function d(...y){if(!d.enabled)return;const T=d,x=+new Date,k=x-(p||x);T.diff=k,T.prev=p,T.curr=x,p=x,y[0]=u.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let v=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(w,I)=>{if(w==="%%")return"%";v++;const B=u.formatters[I];if(typeof B=="function"){const M=y[v];w=B.call(T,M),y.splice(v,1),v--}return w}),u.formatArgs.call(T,y),(T.log||u.log).apply(T,y)}let p,g=null;return d.namespace=f,d.useColors=u.useColors(),d.color=u.selectColor(f),d.extend=l,d.destroy=u.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>g===null?u.enabled(f):g,set:y=>{g=y}}),typeof u.init=="function"&&u.init(d),d}function l(f,d){const p=u(this.namespace+(typeof d>"u"?":":d)+f);return p.log=this.log,p}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}return u.debug=u,u.default=u,u.coerce=function(f){return f instanceof Error?f.stack||f.message:f},u.disable=function(){const f=[...u.names.map(c),...u.skips.map(c).map(d=>"-"+d)].join(",");return u.enable(""),f},u.enable=function(f){u.save(f),u.names=[],u.skips=[];let d;const p=(typeof f=="string"?f:"").split(/[\s,]+/),g=p.length;for(d=0;d<g;d++)p[d]&&(f=p[d].replace(/\*/g,".*?"),f[0]==="-"?u.skips.push(new RegExp("^"+f.substr(1)+"$")):u.names.push(new RegExp("^"+f+"$")))},u.enabled=function(f){if(f[f.length-1]==="*")return!0;let d,p;for(d=0,p=u.skips.length;d<p;d++)if(u.skips[d].test(f))return!1;for(d=0,p=u.names.length;d<p;d++)if(u.names[d].test(f))return!0;return!1},u.humanize=s("ms"),u.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(o).forEach(f=>{u[f]=o[f]}),u.names=[],u.skips=[],u.formatters={},u.selectColor=function(f){let d=0;for(let p=0;p<f.length;p++)d=(d<<5)-d+f.charCodeAt(p),d|=0;return u.colors[n(d)%u.colors.length]},u.enable(u.load()),u}},{ms:11}],6:[function(s,a){function o(u,l){for(const c in l)Object.defineProperty(u,c,{value:l[c],enumerable:!0,configurable:!0});return u}a.exports=function(u,l,c){if(!u||typeof u=="string")throw new TypeError("Please pass an Error to err-code");c||(c={}),typeof l=="object"&&(c=l,l=""),l&&(c.code=l);try{return o(u,c)}catch{c.message=u.message,c.stack=u.stack;const d=function(){};return d.prototype=Object.create(Object.getPrototypeOf(u)),o(new d,c)}}},{}],7:[function(s,a){function o(N){console&&console.warn&&console.warn(N)}function u(){u.init.call(this)}function l(N){if(typeof N!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N)}function c(N){return N._maxListeners===void 0?u.defaultMaxListeners:N._maxListeners}function f(N,U,K,q){var re,Y,ue;if(l(K),Y=N._events,Y===void 0?(Y=N._events=Object.create(null),N._eventsCount=0):(Y.newListener!==void 0&&(N.emit("newListener",U,K.listener?K.listener:K),Y=N._events),ue=Y[U]),ue===void 0)ue=Y[U]=K,++N._eventsCount;else if(typeof ue=="function"?ue=Y[U]=q?[K,ue]:[ue,K]:q?ue.unshift(K):ue.push(K),re=c(N),0<re&&ue.length>re&&!ue.warned){ue.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+ue.length+" "+(U+" listeners added. Use emitter.setMaxListeners() to increase limit"));ee.name="MaxListenersExceededWarning",ee.emitter=N,ee.type=U,ee.count=ue.length,o(ee)}return N}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(N,U,K){var q={fired:!1,wrapFn:void 0,target:N,type:U,listener:K},re=d.bind(q);return re.listener=K,q.wrapFn=re,re}function g(N,U,K){var q=N._events;if(q===void 0)return[];var re=q[U];return re===void 0?[]:typeof re=="function"?K?[re.listener||re]:[re]:K?k(re):T(re,re.length)}function y(N){var U=this._events;if(U!==void 0){var K=U[N];if(typeof K=="function")return 1;if(K!==void 0)return K.length}return 0}function T(N,U){for(var K=Array(U),q=0;q<U;++q)K[q]=N[q];return K}function x(N,U){for(;U+1<N.length;U++)N[U]=N[U+1];N.pop()}function k(N){for(var U=Array(N.length),K=0;K<U.length;++K)U[K]=N[K].listener||N[K];return U}function v(N,U,K){typeof N.on=="function"&&_(N,"error",U,K)}function _(N,U,K,q){if(typeof N.on=="function")q.once?N.once(U,K):N.on(U,K);else if(typeof N.addEventListener=="function")N.addEventListener(U,function re(Y){q.once&&N.removeEventListener(U,re),K(Y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof N)}var w,I=typeof Reflect=="object"?Reflect:null,B=I&&typeof I.apply=="function"?I.apply:function(N,U,K){return Function.prototype.apply.call(N,U,K)};w=I&&typeof I.ownKeys=="function"?I.ownKeys:Object.getOwnPropertySymbols?function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:function(N){return Object.getOwnPropertyNames(N)};var M=Number.isNaN||function(N){return N!==N};a.exports=u,a.exports.once=function(N,U){return new Promise(function(K,q){function re(ue){N.removeListener(U,Y),q(ue)}function Y(){typeof N.removeListener=="function"&&N.removeListener("error",re),K([].slice.call(arguments))}_(N,U,Y,{once:!0}),U!=="error"&&v(N,re,{once:!0})})},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var H=10;Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return H},set:function(N){if(typeof N!="number"||0>N||M(N))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+N+".");H=N}}),u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(N){if(typeof N!="number"||0>N||M(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this},u.prototype.getMaxListeners=function(){return c(this)},u.prototype.emit=function(N){for(var U=[],K=1;K<arguments.length;K++)U.push(arguments[K]);var q=N==="error",re=this._events;if(re!==void 0)q=q&&re.error===void 0;else if(!q)return!1;if(q){var Y;if(0<U.length&&(Y=U[0]),Y instanceof Error)throw Y;var ue=new Error("Unhandled error."+(Y?" ("+Y.message+")":""));throw ue.context=Y,ue}var ee=re[N];if(ee===void 0)return!1;if(typeof ee=="function")B(ee,this,U);else for(var ot=ee.length,pe=T(ee,ot),K=0;K<ot;++K)B(pe[K],this,U);return!0},u.prototype.addListener=function(N,U){return f(this,N,U,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(N,U){return f(this,N,U,!0)},u.prototype.once=function(N,U){return l(U),this.on(N,p(this,N,U)),this},u.prototype.prependOnceListener=function(N,U){return l(U),this.prependListener(N,p(this,N,U)),this},u.prototype.removeListener=function(N,U){var K,q,re,Y,ue;if(l(U),q=this._events,q===void 0)return this;if(K=q[N],K===void 0)return this;if(K===U||K.listener===U)--this._eventsCount==0?this._events=Object.create(null):(delete q[N],q.removeListener&&this.emit("removeListener",N,K.listener||U));else if(typeof K!="function"){for(re=-1,Y=K.length-1;0<=Y;Y--)if(K[Y]===U||K[Y].listener===U){ue=K[Y].listener,re=Y;break}if(0>re)return this;re===0?K.shift():x(K,re),K.length===1&&(q[N]=K[0]),q.removeListener!==void 0&&this.emit("removeListener",N,ue||U)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(N){var U,K,q;if(K=this._events,K===void 0)return this;if(K.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):K[N]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete K[N]),this;if(arguments.length===0){var re,Y=Object.keys(K);for(q=0;q<Y.length;++q)re=Y[q],re!=="removeListener"&&this.removeAllListeners(re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(U=K[N],typeof U=="function")this.removeListener(N,U);else if(U!==void 0)for(q=U.length-1;0<=q;q--)this.removeListener(N,U[q]);return this},u.prototype.listeners=function(N){return g(this,N,!0)},u.prototype.rawListeners=function(N){return g(this,N,!1)},u.listenerCount=function(N,U){return typeof N.listenerCount=="function"?N.listenerCount(U):y.call(N,U)},u.prototype.listenerCount=y,u.prototype.eventNames=function(){return 0<this._eventsCount?w(this._events):[]}},{}],8:[function(s,a){a.exports=function(){if(typeof globalThis>"u")return null;var o={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return o.RTCPeerConnection?o:null}},{}],9:[function(s,a,o){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */o.read=function(u,l,c,f,d){var p,g,y=8*d-f-1,T=(1<<y)-1,x=T>>1,k=-7,v=c?d-1:0,_=c?-1:1,w=u[l+v];for(v+=_,p=w&(1<<-k)-1,w>>=-k,k+=y;0<k;p=256*p+u[l+v],v+=_,k-=8);for(g=p&(1<<-k)-1,p>>=-k,k+=f;0<k;g=256*g+u[l+v],v+=_,k-=8);if(p===0)p=1-x;else{if(p===T)return g?NaN:(w?-1:1)*(1/0);g+=i(2,f),p-=x}return(w?-1:1)*g*i(2,p-f)},o.write=function(u,l,c,f,d,p){var g,y,T,x=Math.LN2,k=Math.log,v=8*p-d-1,_=(1<<v)-1,w=_>>1,I=d===23?i(2,-24)-i(2,-77):0,B=f?0:p-1,M=f?1:-1,H=0>l||l===0&&0>1/l?1:0;for(l=n(l),isNaN(l)||l===1/0?(y=isNaN(l)?1:0,g=_):(g=r(k(l)/x),1>l*(T=i(2,-g))&&(g--,T*=2),l+=1<=g+w?I/T:I*i(2,1-w),2<=l*T&&(g++,T/=2),g+w>=_?(y=0,g=_):1<=g+w?(y=(l*T-1)*i(2,d),g+=w):(y=l*i(2,w-1)*i(2,d),g=0));8<=d;u[c+B]=255&y,B+=M,y/=256,d-=8);for(g=g<<d|y,v+=d;0<v;u[c+B]=255&g,B+=M,g/=256,v-=8);u[c+B-M]|=128*H}},{}],10:[function(s,a){a.exports=typeof Object.create=="function"?function(o,u){u&&(o.super_=u,o.prototype=Object.create(u.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:function(o,u){if(u){o.super_=u;var l=function(){};l.prototype=u.prototype,o.prototype=new l,o.prototype.constructor=o}}},{}],11:[function(s,a){var o=Math.round;function u(d){if(d+="",!(100<d.length)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(p){var g=parseFloat(p[1]),y=(p[2]||"ms").toLowerCase();return y==="years"||y==="year"||y==="yrs"||y==="yr"||y==="y"?315576e5*g:y==="weeks"||y==="week"||y==="w"?6048e5*g:y==="days"||y==="day"||y==="d"?864e5*g:y==="hours"||y==="hour"||y==="hrs"||y==="hr"||y==="h"?36e5*g:y==="minutes"||y==="minute"||y==="mins"||y==="min"||y==="m"?6e4*g:y==="seconds"||y==="second"||y==="secs"||y==="sec"||y==="s"?1e3*g:y==="milliseconds"||y==="millisecond"||y==="msecs"||y==="msec"||y==="ms"?g:void 0}}}function l(d){var p=n(d);return 864e5<=p?o(d/864e5)+"d":36e5<=p?o(d/36e5)+"h":6e4<=p?o(d/6e4)+"m":1e3<=p?o(d/1e3)+"s":d+"ms"}function c(d){var p=n(d);return 864e5<=p?f(d,p,864e5,"day"):36e5<=p?f(d,p,36e5,"hour"):6e4<=p?f(d,p,6e4,"minute"):1e3<=p?f(d,p,1e3,"second"):d+" ms"}function f(d,p,g,y){return o(d/g)+" "+y+(p>=1.5*g?"s":"")}a.exports=function(d,p){p=p||{};var g=typeof d;if(g=="string"&&0<d.length)return u(d);if(g==="number"&&isFinite(d))return p.long?c(d):l(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))}},{}],12:[function(s,a){function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function l(I){if(y===setTimeout)return setTimeout(I,0);if((y===o||!y)&&setTimeout)return y=setTimeout,setTimeout(I,0);try{return y(I,0)}catch{try{return y.call(null,I,0)}catch{return y.call(this,I,0)}}}function c(I){if(T===clearTimeout)return clearTimeout(I);if((T===u||!T)&&clearTimeout)return T=clearTimeout,clearTimeout(I);try{return T(I)}catch{try{return T.call(null,I)}catch{return T.call(this,I)}}}function f(){_&&k&&(_=!1,k.length?v=k.concat(v):w=-1,v.length&&d())}function d(){if(!_){var I=l(f);_=!0;for(var B=v.length;B;){for(k=v,v=[];++w<B;)k&&k[w].run();w=-1,B=v.length}k=null,_=!1,c(I)}}function p(I,B){this.fun=I,this.array=B}function g(){}var y,T,x=a.exports={};(function(){try{y=typeof setTimeout=="function"?setTimeout:o}catch{y=o}try{T=typeof clearTimeout=="function"?clearTimeout:u}catch{T=u}})();var k,v=[],_=!1,w=-1;x.nextTick=function(I){var B=Array(arguments.length-1);if(1<arguments.length)for(var M=1;M<arguments.length;M++)B[M-1]=arguments[M];v.push(new p(I,B)),v.length!==1||_||l(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},x.title="browser",x.browser=!0,x.env={},x.argv=[],x.version="",x.versions={},x.on=g,x.addListener=g,x.once=g,x.off=g,x.removeListener=g,x.removeAllListeners=g,x.emit=g,x.prependListener=g,x.prependOnceListener=g,x.listeners=function(){return[]},x.binding=function(){throw new Error("process.binding is not supported")},x.cwd=function(){return"/"},x.chdir=function(){throw new Error("process.chdir is not supported")},x.umask=function(){return 0}},{}],13:[function(s,a){(function(o){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let u;a.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?o:window):l=>(u||(u=Promise.resolve())).then(l).catch(c=>setTimeout(()=>{throw c},0))}).call(this)}).call(this,typeof er>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:er)},{}],14:[function(s,a){(function(o,u){(function(){var l=s("safe-buffer").Buffer,c=u.crypto||u.msCrypto;a.exports=c&&c.getRandomValues?function(f,d){if(f>4294967295)throw new RangeError("requested too many random bytes");var p=l.allocUnsafe(f);if(0<f)if(65536<f)for(var g=0;g<f;g+=65536)c.getRandomValues(p.slice(g,g+65536));else c.getRandomValues(p);return typeof d=="function"?o.nextTick(function(){d(null,p)}):p}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,s("_process"),typeof er>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:er)},{_process:12,"safe-buffer":30}],15:[function(s,a){function o(g,y){g.prototype=Object.create(y.prototype),g.prototype.constructor=g,g.__proto__=y}function u(g,y,T){function x(v,_,w){return typeof y=="string"?y:y(v,_,w)}T||(T=Error);var k=function(v){function _(w,I,B){return v.call(this,x(w,I,B))||this}return o(_,v),_}(T);k.prototype.name=T.name,k.prototype.code=g,p[g]=k}function l(g,y){if(Array.isArray(g)){var T=g.length;return g=g.map(function(x){return x+""}),2<T?"one of ".concat(y," ").concat(g.slice(0,T-1).join(", "),", or ")+g[T-1]:T===2?"one of ".concat(y," ").concat(g[0]," or ").concat(g[1]):"of ".concat(y," ").concat(g[0])}return"of ".concat(y," ").concat(g+"")}function c(g,y,T){return g.substr(!T||0>T?0:+T,y.length)===y}function f(g,y,T){return(T===void 0||T>g.length)&&(T=g.length),g.substring(T-y.length,T)===y}function d(g,y,T){return typeof T!="number"&&(T=0),!(T+y.length>g.length)&&g.indexOf(y,T)!==-1}var p={};u("ERR_INVALID_OPT_VALUE",function(g,y){return'The value "'+y+'" is invalid for option "'+g+'"'},TypeError),u("ERR_INVALID_ARG_TYPE",function(g,y,T){var x;typeof y=="string"&&c(y,"not ")?(x="must not be",y=y.replace(/^not /,"")):x="must be";var k;if(f(g," argument"))k="The ".concat(g," ").concat(x," ").concat(l(y,"type"));else{var v=d(g,".")?"property":"argument";k='The "'.concat(g,'" ').concat(v," ").concat(x," ").concat(l(y,"type"))}return k+=". Received type ".concat(typeof T),k},TypeError),u("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),u("ERR_METHOD_NOT_IMPLEMENTED",function(g){return"The "+g+" method is not implemented"}),u("ERR_STREAM_PREMATURE_CLOSE","Premature close"),u("ERR_STREAM_DESTROYED",function(g){return"Cannot call "+g+" after a stream was destroyed"}),u("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),u("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),u("ERR_STREAM_WRITE_AFTER_END","write after end"),u("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),u("ERR_UNKNOWN_ENCODING",function(g){return"Unknown encoding: "+g},TypeError),u("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),a.exports.codes=p},{}],16:[function(s,a){(function(o){(function(){function u(x){return this instanceof u?(d.call(this,x),p.call(this,x),this.allowHalfOpen=!0,void(x&&(x.readable===!1&&(this.readable=!1),x.writable===!1&&(this.writable=!1),x.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",l))))):new u(x)}function l(){this._writableState.ended||o.nextTick(c,this)}function c(x){x.end()}var f=Object.keys||function(x){var k=[];for(var v in x)k.push(v);return k};a.exports=u;var d=s("./_stream_readable"),p=s("./_stream_writable");s("inherits")(u,d);for(var g,y=f(p.prototype),T=0;T<y.length;T++)g=y[T],u.prototype[g]||(u.prototype[g]=p.prototype[g]);Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(x){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=x,this._writableState.destroyed=x)}})}).call(this)}).call(this,s("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(s,a){function o(l){return this instanceof o?void u.call(this,l):new o(l)}a.exports=o;var u=s("./_stream_transform");s("inherits")(o,u),o.prototype._transform=function(l,c,f){f(null,l)}},{"./_stream_transform":19,inherits:10}],18:[function(s,a){(function(o,u){(function(){function l(A){return Fe.from(A)}function c(A){return Fe.isBuffer(A)||A instanceof _e}function f(A,h,m){return typeof A.prependListener=="function"?A.prependListener(h,m):void(A._events&&A._events[h]?Array.isArray(A._events[h])?A._events[h].unshift(m):A._events[h]=[m,A._events[h]]:A.on(h,m))}function d(A,h,m){ot=ot||s("./_stream_duplex"),A=A||{},typeof m!="boolean"&&(m=h instanceof ot),this.objectMode=!!A.objectMode,m&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=lt(this,A,"readableHighWaterMark",m),this.buffer=new ut,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(!Ve&&(Ve=s("string_decoder/").StringDecoder),this.decoder=new Ve(A.encoding),this.encoding=A.encoding)}function p(A){if(ot=ot||s("./_stream_duplex"),!(this instanceof p))return new p(A);var h=this instanceof ot;this._readableState=new d(A,this,h),this.readable=!0,A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy)),Me.call(this)}function g(A,h,m,b,L){pe("readableAddChunk",h);var F=A._readableState;if(h===null)F.reading=!1,v(A,F);else{var G;if(L||(G=T(F,h)),G)Q(A,G);else if(!(F.objectMode||h&&0<h.length))b||(F.reading=!1,I(A,F));else if(typeof h=="string"||F.objectMode||Object.getPrototypeOf(h)===Fe.prototype||(h=l(h)),b)F.endEmitted?Q(A,new $):y(A,F,h,!0);else if(F.ended)Q(A,new Ke);else{if(F.destroyed)return!1;F.reading=!1,F.decoder&&!m?(h=F.decoder.write(h),F.objectMode||h.length!==0?y(A,F,h,!1):I(A,F)):y(A,F,h,!1)}}return!F.ended&&(F.length<F.highWaterMark||F.length===0)}function y(A,h,m,b){h.flowing&&h.length===0&&!h.sync?(h.awaitDrain=0,A.emit("data",m)):(h.length+=h.objectMode?1:m.length,b?h.buffer.unshift(m):h.buffer.push(m),h.needReadable&&_(A)),I(A,h)}function T(A,h){var m;return c(h)||typeof h=="string"||h===void 0||A.objectMode||(m=new He("chunk",["string","Buffer","Uint8Array"],h)),m}function x(A){return 1073741824<=A?A=1073741824:(A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++),A}function k(A,h){return 0>=A||h.length===0&&h.ended?0:h.objectMode?1:A===A?(A>h.highWaterMark&&(h.highWaterMark=x(A)),A<=h.length?A:h.ended?h.length:(h.needReadable=!0,0)):h.flowing&&h.length?h.buffer.head.data.length:h.length}function v(A,h){if(pe("onEofChunk"),!h.ended){if(h.decoder){var m=h.decoder.end();m&&m.length&&(h.buffer.push(m),h.length+=h.objectMode?1:m.length)}h.ended=!0,h.sync?_(A):(h.needReadable=!1,!h.emittedReadable&&(h.emittedReadable=!0,w(A)))}}function _(A){var h=A._readableState;pe("emitReadable",h.needReadable,h.emittedReadable),h.needReadable=!1,h.emittedReadable||(pe("emitReadable",h.flowing),h.emittedReadable=!0,o.nextTick(w,A))}function w(A){var h=A._readableState;pe("emitReadable_",h.destroyed,h.length,h.ended),!h.destroyed&&(h.length||h.ended)&&(A.emit("readable"),h.emittedReadable=!1),h.needReadable=!h.flowing&&!h.ended&&h.length<=h.highWaterMark,q(A)}function I(A,h){h.readingMore||(h.readingMore=!0,o.nextTick(B,A,h))}function B(A,h){for(;!h.reading&&!h.ended&&(h.length<h.highWaterMark||h.flowing&&h.length===0);){var m=h.length;if(pe("maybeReadMore read 0"),A.read(0),m===h.length)break}h.readingMore=!1}function M(A){return function(){var h=A._readableState;pe("pipeOnDrain",h.awaitDrain),h.awaitDrain&&h.awaitDrain--,h.awaitDrain===0&&qe(A,"data")&&(h.flowing=!0,q(A))}}function H(A){var h=A._readableState;h.readableListening=0<A.listenerCount("readable"),h.resumeScheduled&&!h.paused?h.flowing=!0:0<A.listenerCount("data")&&A.resume()}function N(A){pe("readable nexttick read 0"),A.read(0)}function U(A,h){h.resumeScheduled||(h.resumeScheduled=!0,o.nextTick(K,A,h))}function K(A,h){pe("resume",h.reading),h.reading||A.read(0),h.resumeScheduled=!1,A.emit("resume"),q(A),h.flowing&&!h.reading&&A.read(0)}function q(A){var h=A._readableState;for(pe("flow",h.flowing);h.flowing&&A.read()!==null;);}function re(A,h){if(h.length===0)return null;var m;return h.objectMode?m=h.buffer.shift():!A||A>=h.length?(m=h.decoder?h.buffer.join(""):h.buffer.length===1?h.buffer.first():h.buffer.concat(h.length),h.buffer.clear()):m=h.buffer.consume(A,h.decoder),m}function Y(A){var h=A._readableState;pe("endReadable",h.endEmitted),h.endEmitted||(h.ended=!0,o.nextTick(ue,h,A))}function ue(A,h){if(pe("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&A.length===0&&(A.endEmitted=!0,h.readable=!1,h.emit("end"),A.autoDestroy)){var m=h._writableState;(!m||m.autoDestroy&&m.finished)&&h.destroy()}}function ee(A,h){for(var m=0,b=A.length;m<b;m++)if(A[m]===h)return m;return-1}a.exports=p;var ot;p.ReadableState=d;var pe;s("events").EventEmitter;var qe=function(A,h){return A.listeners(h).length},Me=s("./internal/streams/stream"),Fe=s("buffer").Buffer,_e=u.Uint8Array||function(){},ve=s("util");pe=ve&&ve.debuglog?ve.debuglog("stream"):function(){};var Ve,We,Je,ut=s("./internal/streams/buffer_list"),tt=s("./internal/streams/destroy"),rt=s("./internal/streams/state"),lt=rt.getHighWaterMark,Qe=s("../errors").codes,He=Qe.ERR_INVALID_ARG_TYPE,Ke=Qe.ERR_STREAM_PUSH_AFTER_EOF,P=Qe.ERR_METHOD_NOT_IMPLEMENTED,$=Qe.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;s("inherits")(p,Me);var Q=tt.errorOrDestroy,le=["error","close","destroy","pause","resume"];Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(A){this._readableState&&(this._readableState.destroyed=A)}}),p.prototype.destroy=tt.destroy,p.prototype._undestroy=tt.undestroy,p.prototype._destroy=function(A,h){h(A)},p.prototype.push=function(A,h){var m,b=this._readableState;return b.objectMode?m=!0:typeof A=="string"&&(h=h||b.defaultEncoding,h!==b.encoding&&(A=Fe.from(A,h),h=""),m=!0),g(this,A,h,!1,m)},p.prototype.unshift=function(A){return g(this,A,null,!0,!1)},p.prototype.isPaused=function(){return this._readableState.flowing===!1},p.prototype.setEncoding=function(A){Ve||(Ve=s("string_decoder/").StringDecoder);var h=new Ve(A);this._readableState.decoder=h,this._readableState.encoding=this._readableState.decoder.encoding;for(var m=this._readableState.buffer.head,b="";m!==null;)b+=h.write(m.data),m=m.next;return this._readableState.buffer.clear(),b!==""&&this._readableState.buffer.push(b),this._readableState.length=b.length,this},p.prototype.read=function(A){pe("read",A),A=parseInt(A,10);var h=this._readableState,m=A;if(A!==0&&(h.emittedReadable=!1),A===0&&h.needReadable&&((h.highWaterMark===0?0<h.length:h.length>=h.highWaterMark)||h.ended))return pe("read: emitReadable",h.length,h.ended),h.length===0&&h.ended?Y(this):_(this),null;if(A=k(A,h),A===0&&h.ended)return h.length===0&&Y(this),null;var b=h.needReadable;pe("need readable",b),(h.length===0||h.length-A<h.highWaterMark)&&(b=!0,pe("length less than watermark",b)),h.ended||h.reading?(b=!1,pe("reading or ended",b)):b&&(pe("do read"),h.reading=!0,h.sync=!0,h.length===0&&(h.needReadable=!0),this._read(h.highWaterMark),h.sync=!1,!h.reading&&(A=k(m,h)));var L;return L=0<A?re(A,h):null,L===null?(h.needReadable=h.length<=h.highWaterMark,A=0):(h.length-=A,h.awaitDrain=0),h.length===0&&(!h.ended&&(h.needReadable=!0),m!==A&&h.ended&&Y(this)),L!==null&&this.emit("data",L),L},p.prototype._read=function(){Q(this,new P("_read()"))},p.prototype.pipe=function(A,h){function m(Tn,xn){pe("onunpipe"),Tn===Re&&xn&&xn.hasUnpiped===!1&&(xn.hasUnpiped=!0,L())}function b(){pe("onend"),A.end()}function L(){pe("cleanup"),A.removeListener("close",ae),A.removeListener("finish",ke),A.removeListener("drain",wn),A.removeListener("error",G),A.removeListener("unpipe",m),Re.removeListener("end",b),Re.removeListener("end",nt),Re.removeListener("data",F),ni=!0,Te.awaitDrain&&(!A._writableState||A._writableState.needDrain)&&wn()}function F(Tn){pe("ondata");var xn=A.write(Tn);pe("dest.write",xn),xn===!1&&((Te.pipesCount===1&&Te.pipes===A||1<Te.pipesCount&&ee(Te.pipes,A)!==-1)&&!ni&&(pe("false write response, pause",Te.awaitDrain),Te.awaitDrain++),Re.pause())}function G(Tn){pe("onerror",Tn),nt(),A.removeListener("error",G),qe(A,"error")===0&&Q(A,Tn)}function ae(){A.removeListener("finish",ke),nt()}function ke(){pe("onfinish"),A.removeListener("close",ae),nt()}function nt(){pe("unpipe"),Re.unpipe(A)}var Re=this,Te=this._readableState;switch(Te.pipesCount){case 0:Te.pipes=A;break;case 1:Te.pipes=[Te.pipes,A];break;default:Te.pipes.push(A)}Te.pipesCount+=1,pe("pipe count=%d opts=%j",Te.pipesCount,h);var It=(!h||h.end!==!1)&&A!==o.stdout&&A!==o.stderr,rn=It?b:nt;Te.endEmitted?o.nextTick(rn):Re.once("end",rn),A.on("unpipe",m);var wn=M(Re);A.on("drain",wn);var ni=!1;return Re.on("data",F),f(A,"error",G),A.once("close",ae),A.once("finish",ke),A.emit("pipe",Re),Te.flowing||(pe("pipe resume"),Re.resume()),A},p.prototype.unpipe=function(A){var h=this._readableState,m={hasUnpiped:!1};if(h.pipesCount===0)return this;if(h.pipesCount===1)return A&&A!==h.pipes?this:(A||(A=h.pipes),h.pipes=null,h.pipesCount=0,h.flowing=!1,A&&A.emit("unpipe",this,m),this);if(!A){var b=h.pipes,L=h.pipesCount;h.pipes=null,h.pipesCount=0,h.flowing=!1;for(var F=0;F<L;F++)b[F].emit("unpipe",this,{hasUnpiped:!1});return this}var G=ee(h.pipes,A);return G===-1?this:(h.pipes.splice(G,1),h.pipesCount-=1,h.pipesCount===1&&(h.pipes=h.pipes[0]),A.emit("unpipe",this,m),this)},p.prototype.on=function(A,h){var m=Me.prototype.on.call(this,A,h),b=this._readableState;return A==="data"?(b.readableListening=0<this.listenerCount("readable"),b.flowing!==!1&&this.resume()):A=="readable"&&!b.endEmitted&&!b.readableListening&&(b.readableListening=b.needReadable=!0,b.flowing=!1,b.emittedReadable=!1,pe("on readable",b.length,b.reading),b.length?_(this):!b.reading&&o.nextTick(N,this)),m},p.prototype.addListener=p.prototype.on,p.prototype.removeListener=function(A,h){var m=Me.prototype.removeListener.call(this,A,h);return A==="readable"&&o.nextTick(H,this),m},p.prototype.removeAllListeners=function(A){var h=Me.prototype.removeAllListeners.apply(this,arguments);return(A==="readable"||A===void 0)&&o.nextTick(H,this),h},p.prototype.resume=function(){var A=this._readableState;return A.flowing||(pe("resume"),A.flowing=!A.readableListening,U(this,A)),A.paused=!1,this},p.prototype.pause=function(){return pe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(pe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},p.prototype.wrap=function(A){var h=this,m=this._readableState,b=!1;for(var L in A.on("end",function(){if(pe("wrapped end"),m.decoder&&!m.ended){var G=m.decoder.end();G&&G.length&&h.push(G)}h.push(null)}),A.on("data",function(G){if(pe("wrapped data"),m.decoder&&(G=m.decoder.write(G)),!(m.objectMode&&G==null)&&(m.objectMode||G&&G.length)){var ae=h.push(G);ae||(b=!0,A.pause())}}),A)this[L]===void 0&&typeof A[L]=="function"&&(this[L]=function(G){return function(){return A[G].apply(A,arguments)}}(L));for(var F=0;F<le.length;F++)A.on(le[F],this.emit.bind(this,le[F]));return this._read=function(G){pe("wrapped _read",G),b&&(b=!1,A.resume())},this},typeof Symbol=="function"&&(p.prototype[Symbol.asyncIterator]=function(){return We===void 0&&(We=s("./internal/streams/async_iterator")),We(this)}),Object.defineProperty(p.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(p.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(p.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}}),p._fromList=re,Object.defineProperty(p.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(p.from=function(A,h){return Je===void 0&&(Je=s("./internal/streams/from")),Je(p,A,h)})}).call(this)}).call(this,s("_process"),typeof er>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:er)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(s,a){function o(x,k){var v=this._transformState;v.transforming=!1;var _=v.writecb;if(_===null)return this.emit("error",new p);v.writechunk=null,v.writecb=null,k!=null&&this.push(k),_(x);var w=this._readableState;w.reading=!1,(w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}function u(x){return this instanceof u?(T.call(this,x),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,x&&(typeof x.transform=="function"&&(this._transform=x.transform),typeof x.flush=="function"&&(this._flush=x.flush)),void this.on("prefinish",l)):new u(x)}function l(){var x=this;typeof this._flush!="function"||this._readableState.destroyed?c(this,null,null):this._flush(function(k,v){c(x,k,v)})}function c(x,k,v){if(k)return x.emit("error",k);if(v!=null&&x.push(v),x._writableState.length)throw new y;if(x._transformState.transforming)throw new g;return x.push(null)}a.exports=u;var f=s("../errors").codes,d=f.ERR_METHOD_NOT_IMPLEMENTED,p=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_TRANSFORM_ALREADY_TRANSFORMING,y=f.ERR_TRANSFORM_WITH_LENGTH_0,T=s("./_stream_duplex");s("inherits")(u,T),u.prototype.push=function(x,k){return this._transformState.needTransform=!1,T.prototype.push.call(this,x,k)},u.prototype._transform=function(x,k,v){v(new d("_transform()"))},u.prototype._write=function(x,k,v){var _=this._transformState;if(_.writecb=v,_.writechunk=x,_.writeencoding=k,!_.transforming){var w=this._readableState;(_.needTransform||w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}},u.prototype._read=function(){var x=this._transformState;x.writechunk===null||x.transforming?x.needTransform=!0:(x.transforming=!0,this._transform(x.writechunk,x.writeencoding,x.afterTransform))},u.prototype._destroy=function(x,k){T.prototype._destroy.call(this,x,function(v){k(v)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(s,a){(function(o,u){(function(){function l(P){var $=this;this.next=null,this.entry=null,this.finish=function(){Y($,P)}}function c(P){return pe.from(P)}function f(P){return pe.isBuffer(P)||P instanceof qe}function d(){}function p(P,$,Q){ue=ue||s("./_stream_duplex"),P=P||{},typeof Q!="boolean"&&(Q=$ instanceof ue),this.objectMode=!!P.objectMode,Q&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=_e(this,P,"writableHighWaterMark",Q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var le=P.decodeStrings===!1;this.decodeStrings=!le,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(A){I($,A)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function g(P){ue=ue||s("./_stream_duplex");var $=this instanceof ue;return $||Ke.call(g,this)?(this._writableState=new p(P,this,$),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),void ot.call(this)):new g(P)}function y(P,$){var Q=new lt;He(P,Q),o.nextTick($,Q)}function T(P,$,Q,le){var A;return Q===null?A=new rt:typeof Q!="string"&&!$.objectMode&&(A=new Ve("chunk",["string","Buffer"],Q)),!A||(He(P,A),o.nextTick(le,A),!1)}function x(P,$,Q){return P.objectMode||P.decodeStrings===!1||typeof $!="string"||($=pe.from($,Q)),$}function k(P,$,Q,le,A,h){if(!Q){var m=x($,le,A);le!==m&&(Q=!0,A="buffer",le=m)}var b=$.objectMode?1:le.length;$.length+=b;var L=$.length<$.highWaterMark;if(L||($.needDrain=!0),$.writing||$.corked){var F=$.lastBufferedRequest;$.lastBufferedRequest={chunk:le,encoding:A,isBuf:Q,callback:h,next:null},F?F.next=$.lastBufferedRequest:$.bufferedRequest=$.lastBufferedRequest,$.bufferedRequestCount+=1}else v(P,$,!1,b,le,A,h);return L}function v(P,$,Q,le,A,h,m){$.writelen=le,$.writecb=m,$.writing=!0,$.sync=!0,$.destroyed?$.onwrite(new tt("write")):Q?P._writev(A,$.onwrite):P._write(A,h,$.onwrite),$.sync=!1}function _(P,$,Q,le,A){--$.pendingcb,Q?(o.nextTick(A,le),o.nextTick(q,P,$),P._writableState.errorEmitted=!0,He(P,le)):(A(le),P._writableState.errorEmitted=!0,He(P,le),q(P,$))}function w(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}function I(P,$){var Q=P._writableState,le=Q.sync,A=Q.writecb;if(typeof A!="function")throw new Je;if(w(Q),$)_(P,Q,le,$,A);else{var h=N(Q)||P.destroyed;h||Q.corked||Q.bufferProcessing||!Q.bufferedRequest||H(P,Q),le?o.nextTick(B,P,Q,h,A):B(P,Q,h,A)}}function B(P,$,Q,le){Q||M(P,$),$.pendingcb--,le(),q(P,$)}function M(P,$){$.length===0&&$.needDrain&&($.needDrain=!1,P.emit("drain"))}function H(P,$){$.bufferProcessing=!0;var Q=$.bufferedRequest;if(P._writev&&Q&&Q.next){var le=$.bufferedRequestCount,A=Array(le),h=$.corkedRequestsFree;h.entry=Q;for(var m=0,b=!0;Q;)A[m]=Q,Q.isBuf||(b=!1),Q=Q.next,m+=1;A.allBuffers=b,v(P,$,!0,$.length,A,"",h.finish),$.pendingcb++,$.lastBufferedRequest=null,h.next?($.corkedRequestsFree=h.next,h.next=null):$.corkedRequestsFree=new l($),$.bufferedRequestCount=0}else{for(;Q;){var L=Q.chunk,F=Q.encoding,G=Q.callback,ae=$.objectMode?1:L.length;if(v(P,$,!1,ae,L,F,G),Q=Q.next,$.bufferedRequestCount--,$.writing)break}Q===null&&($.lastBufferedRequest=null)}$.bufferedRequest=Q,$.bufferProcessing=!1}function N(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function U(P,$){P._final(function(Q){$.pendingcb--,Q&&He(P,Q),$.prefinished=!0,P.emit("prefinish"),q(P,$)})}function K(P,$){$.prefinished||$.finalCalled||(typeof P._final!="function"||$.destroyed?($.prefinished=!0,P.emit("prefinish")):($.pendingcb++,$.finalCalled=!0,o.nextTick(U,P,$)))}function q(P,$){var Q=N($);if(Q&&(K(P,$),$.pendingcb===0&&($.finished=!0,P.emit("finish"),$.autoDestroy))){var le=P._readableState;(!le||le.autoDestroy&&le.endEmitted)&&P.destroy()}return Q}function re(P,$,Q){$.ending=!0,q(P,$),Q&&($.finished?o.nextTick(Q):P.once("finish",Q)),$.ended=!0,P.writable=!1}function Y(P,$,Q){var le=P.entry;for(P.entry=null;le;){var A=le.callback;$.pendingcb--,A(Q),le=le.next}$.corkedRequestsFree.next=P}a.exports=g;var ue;g.WritableState=p;var ee={deprecate:s("util-deprecate")},ot=s("./internal/streams/stream"),pe=s("buffer").Buffer,qe=u.Uint8Array||function(){},Me=s("./internal/streams/destroy"),Fe=s("./internal/streams/state"),_e=Fe.getHighWaterMark,ve=s("../errors").codes,Ve=ve.ERR_INVALID_ARG_TYPE,We=ve.ERR_METHOD_NOT_IMPLEMENTED,Je=ve.ERR_MULTIPLE_CALLBACK,ut=ve.ERR_STREAM_CANNOT_PIPE,tt=ve.ERR_STREAM_DESTROYED,rt=ve.ERR_STREAM_NULL_VALUES,lt=ve.ERR_STREAM_WRITE_AFTER_END,Qe=ve.ERR_UNKNOWN_ENCODING,He=Me.errorOrDestroy;s("inherits")(g,ot),p.prototype.getBuffer=function(){for(var P=this.bufferedRequest,$=[];P;)$.push(P),P=P.next;return $},function(){try{Object.defineProperty(p.prototype,"buffer",{get:ee.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Ke;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ke=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(P){return!!Ke.call(this,P)||this===g&&P&&P._writableState instanceof p}})):Ke=function(P){return P instanceof this},g.prototype.pipe=function(){He(this,new ut)},g.prototype.write=function(P,$,Q){var le=this._writableState,A=!1,h=!le.objectMode&&f(P);return h&&!pe.isBuffer(P)&&(P=c(P)),typeof $=="function"&&(Q=$,$=null),h?$="buffer":!$&&($=le.defaultEncoding),typeof Q!="function"&&(Q=d),le.ending?y(this,Q):(h||T(this,le,P,Q))&&(le.pendingcb++,A=k(this,le,h,P,$,Q)),A},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,!P.writing&&!P.corked&&!P.bufferProcessing&&P.bufferedRequest&&H(this,P))},g.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())))throw new Qe(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(P,$,Q){Q(new We("_write()"))},g.prototype._writev=null,g.prototype.end=function(P,$,Q){var le=this._writableState;return typeof P=="function"?(Q=P,P=null,$=null):typeof $=="function"&&(Q=$,$=null),P!=null&&this.write(P,$),le.corked&&(le.corked=1,this.uncork()),le.ending||re(this,le,Q),this},Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),g.prototype.destroy=Me.destroy,g.prototype._undestroy=Me.undestroy,g.prototype._destroy=function(P,$){$(P)}}).call(this)}).call(this,s("_process"),typeof er>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:er)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(s,a){(function(o){(function(){function u(M,H,N){return H in M?Object.defineProperty(M,H,{value:N,enumerable:!0,configurable:!0,writable:!0}):M[H]=N,M}function l(M,H){return{value:M,done:H}}function c(M){var H=M[y];if(H!==null){var N=M[w].read();N!==null&&(M[v]=null,M[y]=null,M[T]=null,H(l(N,!1)))}}function f(M){o.nextTick(c,M)}function d(M,H){return function(N,U){M.then(function(){return H[k]?void N(l(void 0,!0)):void H[_](N,U)},U)}}var p,g=s("./end-of-stream"),y=Symbol("lastResolve"),T=Symbol("lastReject"),x=Symbol("error"),k=Symbol("ended"),v=Symbol("lastPromise"),_=Symbol("handlePromise"),w=Symbol("stream"),I=Object.getPrototypeOf(function(){}),B=Object.setPrototypeOf((p={get stream(){return this[w]},next:function(){var M=this,H=this[x];if(H!==null)return Promise.reject(H);if(this[k])return Promise.resolve(l(void 0,!0));if(this[w].destroyed)return new Promise(function(q,re){o.nextTick(function(){M[x]?re(M[x]):q(l(void 0,!0))})});var N,U=this[v];if(U)N=new Promise(d(U,this));else{var K=this[w].read();if(K!==null)return Promise.resolve(l(K,!1));N=new Promise(this[_])}return this[v]=N,N}},u(p,Symbol.asyncIterator,function(){return this}),u(p,"return",function(){var M=this;return new Promise(function(H,N){M[w].destroy(null,function(U){return U?void N(U):void H(l(void 0,!0))})})}),p),I);a.exports=function(M){var H,N=Object.create(B,(H={},u(H,w,{value:M,writable:!0}),u(H,y,{value:null,writable:!0}),u(H,T,{value:null,writable:!0}),u(H,x,{value:null,writable:!0}),u(H,k,{value:M._readableState.endEmitted,writable:!0}),u(H,_,{value:function(U,K){var q=N[w].read();q?(N[v]=null,N[y]=null,N[T]=null,U(l(q,!1))):(N[y]=U,N[T]=K)},writable:!0}),H));return N[v]=null,g(M,function(U){if(U&&U.code!=="ERR_STREAM_PREMATURE_CLOSE"){var K=N[T];return K!==null&&(N[v]=null,N[y]=null,N[T]=null,K(U)),void(N[x]=U)}var q=N[y];q!==null&&(N[v]=null,N[y]=null,N[T]=null,q(l(void 0,!0))),N[k]=!0}),M.on("readable",f.bind(null,N)),N}}).call(this)}).call(this,s("_process"))},{"./end-of-stream":24,_process:12}],22:[function(s,a){function o(v,_){var w=Object.keys(v);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(v);_&&(I=I.filter(function(B){return Object.getOwnPropertyDescriptor(v,B).enumerable})),w.push.apply(w,I)}return w}function u(v){for(var _,w=1;w<arguments.length;w++)_=arguments[w]==null?{}:arguments[w],w%2?o(Object(_),!0).forEach(function(I){l(v,I,_[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(_)):o(Object(_)).forEach(function(I){Object.defineProperty(v,I,Object.getOwnPropertyDescriptor(_,I))});return v}function l(v,_,w){return _ in v?Object.defineProperty(v,_,{value:w,enumerable:!0,configurable:!0,writable:!0}):v[_]=w,v}function c(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}function f(v,_){for(var w,I=0;I<_.length;I++)w=_[I],w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}function d(v,_,w){return _&&f(v.prototype,_),w&&f(v,w),v}function p(v,_,w){y.prototype.copy.call(v,_,w)}var g=s("buffer"),y=g.Buffer,T=s("util"),x=T.inspect,k=x&&x.custom||"inspect";a.exports=function(){function v(){c(this,v),this.head=null,this.tail=null,this.length=0}return d(v,[{key:"push",value:function(_){var w={data:_,next:null};0<this.length?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(_){var w={data:_,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var w=this.head,I=""+w.data;w=w.next;)I+=_+w.data;return I}},{key:"concat",value:function(_){if(this.length===0)return y.alloc(0);for(var w=y.allocUnsafe(_>>>0),I=this.head,B=0;I;)p(I.data,w,B),B+=I.data.length,I=I.next;return w}},{key:"consume",value:function(_,w){var I;return _<this.head.data.length?(I=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):_===this.head.data.length?I=this.shift():I=w?this._getString(_):this._getBuffer(_),I}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var w=this.head,I=1,B=w.data;for(_-=B.length;w=w.next;){var M=w.data,H=_>M.length?M.length:_;if(B+=H===M.length?M:M.slice(0,_),_-=H,_===0){H===M.length?(++I,this.head=w.next?w.next:this.tail=null):(this.head=w,w.data=M.slice(H));break}++I}return this.length-=I,B}},{key:"_getBuffer",value:function(_){var w=y.allocUnsafe(_),I=this.head,B=1;for(I.data.copy(w),_-=I.data.length;I=I.next;){var M=I.data,H=_>M.length?M.length:_;if(M.copy(w,w.length-_,0,H),_-=H,_===0){H===M.length?(++B,this.head=I.next?I.next:this.tail=null):(this.head=I,I.data=M.slice(H));break}++B}return this.length-=B,w}},{key:k,value:function(_,w){return x(this,u({},w,{depth:0,customInspect:!1}))}}]),v}()},{buffer:3,util:2}],23:[function(s,a){(function(o){(function(){function u(f,d){c(f,d),l(f)}function l(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function c(f,d){f.emit("error",d)}a.exports={destroy:function(f,d){var p=this,g=this._readableState&&this._readableState.destroyed,y=this._writableState&&this._writableState.destroyed;return g||y?(d?d(f):f&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,o.nextTick(c,this,f)):o.nextTick(c,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(T){!d&&T?p._writableState?p._writableState.errorEmitted?o.nextTick(l,p):(p._writableState.errorEmitted=!0,o.nextTick(u,p,T)):o.nextTick(u,p,T):d?(o.nextTick(l,p),d(T)):o.nextTick(l,p)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(f,d){var p=f._readableState,g=f._writableState;p&&p.autoDestroy||g&&g.autoDestroy?f.destroy(d):f.emit("error",d)}}}).call(this)}).call(this,s("_process"))},{_process:12}],24:[function(s,a){function o(d){var p=!1;return function(){if(!p){p=!0;for(var g=arguments.length,y=Array(g),T=0;T<g;T++)y[T]=arguments[T];d.apply(this,y)}}}function u(){}function l(d){return d.setHeader&&typeof d.abort=="function"}function c(d,p,g){if(typeof p=="function")return c(d,null,p);p||(p={}),g=o(g||u);var y=p.readable||p.readable!==!1&&d.readable,T=p.writable||p.writable!==!1&&d.writable,x=function(){d.writable||v()},k=d._writableState&&d._writableState.finished,v=function(){T=!1,k=!0,y||g.call(d)},_=d._readableState&&d._readableState.endEmitted,w=function(){y=!1,_=!0,T||g.call(d)},I=function(H){g.call(d,H)},B=function(){var H;return y&&!_?(d._readableState&&d._readableState.ended||(H=new f),g.call(d,H)):T&&!k?(d._writableState&&d._writableState.ended||(H=new f),g.call(d,H)):void 0},M=function(){d.req.on("finish",v)};return l(d)?(d.on("complete",v),d.on("abort",B),d.req?M():d.on("request",M)):T&&!d._writableState&&(d.on("end",x),d.on("close",x)),d.on("end",w),d.on("finish",v),p.error!==!1&&d.on("error",I),d.on("close",B),function(){d.removeListener("complete",v),d.removeListener("abort",B),d.removeListener("request",M),d.req&&d.req.removeListener("finish",v),d.removeListener("end",x),d.removeListener("close",x),d.removeListener("finish",v),d.removeListener("end",w),d.removeListener("error",I),d.removeListener("close",B)}}var f=s("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;a.exports=c},{"../../../errors":15}],25:[function(s,a){a.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(s,a){function o(k){var v=!1;return function(){v||(v=!0,k.apply(void 0,arguments))}}function u(k){if(k)throw k}function l(k){return k.setHeader&&typeof k.abort=="function"}function c(k,v,_,w){w=o(w);var I=!1;k.on("close",function(){I=!0}),g===void 0&&(g=s("./end-of-stream")),g(k,{readable:v,writable:_},function(M){return M?w(M):(I=!0,void w())});var B=!1;return function(M){if(!I)return B?void 0:(B=!0,l(k)?k.abort():typeof k.destroy=="function"?k.destroy():void w(M||new x("pipe")))}}function f(k){k()}function d(k,v){return k.pipe(v)}function p(k){return k.length&&typeof k[k.length-1]=="function"?k.pop():u}var g,y=s("../../../errors").codes,T=y.ERR_MISSING_ARGS,x=y.ERR_STREAM_DESTROYED;a.exports=function(){for(var k=arguments.length,v=Array(k),_=0;_<k;_++)v[_]=arguments[_];var w=p(v);if(Array.isArray(v[0])&&(v=v[0]),2>v.length)throw new T("streams");var I,B=v.map(function(M,H){var N=H<v.length-1;return c(M,N,0<H,function(U){I||(I=U),U&&B.forEach(f),N||(B.forEach(f),w(I))})});return v.reduce(d)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(s,a){function o(l,c,f){return l.highWaterMark==null?c?l[f]:null:l.highWaterMark}var u=s("../../../errors").codes.ERR_INVALID_OPT_VALUE;a.exports={getHighWaterMark:function(l,c,f,d){var p=o(c,d,f);if(p!=null){if(!(isFinite(p)&&r(p)===p)||0>p){var g=d?f:"highWaterMark";throw new u(g,p)}return r(p)}return l.objectMode?16:16384}}},{"../../../errors":15}],28:[function(s,a){a.exports=s("events").EventEmitter},{events:7}],29:[function(s,a,o){o=a.exports=s("./lib/_stream_readable.js"),o.Stream=o,o.Readable=o,o.Writable=s("./lib/_stream_writable.js"),o.Duplex=s("./lib/_stream_duplex.js"),o.Transform=s("./lib/_stream_transform.js"),o.PassThrough=s("./lib/_stream_passthrough.js"),o.finished=s("./lib/internal/streams/end-of-stream.js"),o.pipeline=s("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(s,a,o){function u(d,p){for(var g in d)p[g]=d[g]}function l(d,p,g){return f(d,p,g)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var c=s("buffer"),f=c.Buffer;f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?a.exports=c:(u(c,o),o.Buffer=l),l.prototype=Object.create(f.prototype),u(f,l),l.from=function(d,p,g){if(typeof d=="number")throw new TypeError("Argument must not be a number");return f(d,p,g)},l.alloc=function(d,p,g){if(typeof d!="number")throw new TypeError("Argument must be a number");var y=f(d);return p===void 0?y.fill(0):typeof g=="string"?y.fill(p,g):y.fill(p),y},l.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return f(d)},l.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return c.SlowBuffer(d)}},{buffer:3}],31:[function(s,a,o){function u(B){if(!B)return"utf8";for(var M;;)switch(B){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return B;default:if(M)return;B=(""+B).toLowerCase(),M=!0}}function l(B){var M=u(B);if(typeof M!="string"&&(w.isEncoding===I||!I(B)))throw new Error("Unknown encoding: "+B);return M||B}function c(B){this.encoding=l(B);var M;switch(this.encoding){case"utf16le":this.text=y,this.end=T,M=4;break;case"utf8":this.fillLast=g,M=4;break;case"base64":this.text=x,this.end=k,M=3;break;default:return this.write=v,void(this.end=_)}this.lastNeed=0,this.lastTotal=0,this.lastChar=w.allocUnsafe(M)}function f(B){return 127>=B?0:B>>5==6?2:B>>4==14?3:B>>3==30?4:B>>6==2?-1:-2}function d(B,M,H){var N=M.length-1;if(N<H)return 0;var U=f(M[N]);return 0<=U?(0<U&&(B.lastNeed=U-1),U):--N<H||U===-2?0:(U=f(M[N]),0<=U?(0<U&&(B.lastNeed=U-2),U):--N<H||U===-2?0:(U=f(M[N]),0<=U?(0<U&&(U===2?U=0:B.lastNeed=U-3),U):0))}function p(B,M){if((192&M[0])!=128)return B.lastNeed=0,"\uFFFD";if(1<B.lastNeed&&1<M.length){if((192&M[1])!=128)return B.lastNeed=1,"\uFFFD";if(2<B.lastNeed&&2<M.length&&(192&M[2])!=128)return B.lastNeed=2,"\uFFFD"}}function g(B){var M=this.lastTotal-this.lastNeed,H=p(this,B);return H===void 0?this.lastNeed<=B.length?(B.copy(this.lastChar,M,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(B.copy(this.lastChar,M,0,B.length),void(this.lastNeed-=B.length)):H}function y(B,M){if((B.length-M)%2==0){var H=B.toString("utf16le",M);if(H){var N=H.charCodeAt(H.length-1);if(55296<=N&&56319>=N)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=B[B.length-2],this.lastChar[1]=B[B.length-1],H.slice(0,-1)}return H}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=B[B.length-1],B.toString("utf16le",M,B.length-1)}function T(B){var M=B&&B.length?this.write(B):"";if(this.lastNeed){var H=this.lastTotal-this.lastNeed;return M+this.lastChar.toString("utf16le",0,H)}return M}function x(B,M){var H=(B.length-M)%3;return H==0?B.toString("base64",M):(this.lastNeed=3-H,this.lastTotal=3,H==1?this.lastChar[0]=B[B.length-1]:(this.lastChar[0]=B[B.length-2],this.lastChar[1]=B[B.length-1]),B.toString("base64",M,B.length-H))}function k(B){var M=B&&B.length?this.write(B):"";return this.lastNeed?M+this.lastChar.toString("base64",0,3-this.lastNeed):M}function v(B){return B.toString(this.encoding)}function _(B){return B&&B.length?this.write(B):""}var w=s("safe-buffer").Buffer,I=w.isEncoding||function(B){switch(B=""+B,B&&B.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};o.StringDecoder=c,c.prototype.write=function(B){if(B.length===0)return"";var M,H;if(this.lastNeed){if(M=this.fillLast(B),M===void 0)return"";H=this.lastNeed,this.lastNeed=0}else H=0;return H<B.length?M?M+this.text(B,H):this.text(B,H):M||""},c.prototype.end=function(B){var M=B&&B.length?this.write(B):"";return this.lastNeed?M+"\uFFFD":M},c.prototype.text=function(B,M){var H=d(this,B,M);if(!this.lastNeed)return B.toString("utf8",M);this.lastTotal=H;var N=B.length-(H-this.lastNeed);return B.copy(this.lastChar,0,N),B.toString("utf8",M,N)},c.prototype.fillLast=function(B){return this.lastNeed<=B.length?(B.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(B.copy(this.lastChar,this.lastTotal-this.lastNeed,0,B.length),void(this.lastNeed-=B.length))}},{"safe-buffer":30}],32:[function(s,a){(function(o){(function(){function u(l){try{if(!o.localStorage)return!1}catch{return!1}var c=o.localStorage[l];return c!=null&&(c+"").toLowerCase()==="true"}a.exports=function(l,c){function f(){if(!d){if(u("throwDeprecation"))throw new Error(c);u("traceDeprecation")?console.trace(c):console.warn(c),d=!0}return l.apply(this,arguments)}if(u("noDeprecation"))return l;var d=!1;return f}}).call(this)}).call(this,typeof er>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:er)},{}],"/":[function(s,a){function o(k){return k.replace(/a=ice-options:trickle\s\n/g,"")}function u(k){console.warn(k)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const l=s("debug")("simple-peer"),c=s("get-browser-rtc"),f=s("randombytes"),d=s("readable-stream"),p=s("queue-microtask"),g=s("err-code"),{Buffer:y}=s("buffer"),T=65536;class x extends d.Duplex{constructor(v){if(v=Object.assign({allowHalfOpen:!1},v),super(v),this._id=f(4).toString("hex").slice(0,7),this._debug("new peer %o",v),this.channelName=v.initiator?v.channelName||f(20).toString("hex"):null,this.initiator=v.initiator||!1,this.channelConfig=v.channelConfig||x.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},x.config,v.config),this.offerOptions=v.offerOptions||{},this.answerOptions=v.answerOptions||{},this.sdpTransform=v.sdpTransform||(_=>_),this.streams=v.streams||(v.stream?[v.stream]:[]),this.trickle=v.trickle===void 0||v.trickle,this.allowHalfTrickle=v.allowHalfTrickle!==void 0&&v.allowHalfTrickle,this.iceCompleteTimeout=v.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=v.wrtc&&typeof v.wrtc=="object"?v.wrtc:c(),!this._wrtc)throw g(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(_){return void this.destroy(g(_,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=_=>{this._onIceCandidate(_)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(_=>{this.destroy(g(_,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=_=>{this._setupData(_)},this.streams&&this.streams.forEach(_=>{this.addStream(_)}),this._pc.ontrack=_=>{this._onTrack(_)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(v){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof v=="string")try{v=JSON.parse(v)}catch{v={}}this._debug("signal()"),v.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),v.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(v.transceiverRequest.kind,v.transceiverRequest.init)),v.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(v.candidate):this._pendingCandidates.push(v.candidate)),v.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(v)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(_=>{this._addIceCandidate(_)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(_=>{this.destroy(g(_,"ERR_SET_REMOTE_DESCRIPTION"))}),v.sdp||v.candidate||v.renegotiate||v.transceiverRequest||this.destroy(g(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(v){const _=new this._wrtc.RTCIceCandidate(v);this._pc.addIceCandidate(_).catch(w=>{!_.address||_.address.endsWith(".local")?u("Ignoring unsupported ICE candidate."):this.destroy(g(w,"ERR_ADD_ICE_CANDIDATE"))})}send(v){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(v)}}addTransceiver(v,_){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(v,_),this._needsNegotiation()}catch(w){this.destroy(g(w,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:v,init:_}})}}addStream(v){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),v.getTracks().forEach(_=>{this.addTrack(_,v)})}}addTrack(v,_){if(this.destroying)return;if(this.destroyed)throw g(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const w=this._senderMap.get(v)||new Map;let I=w.get(_);if(!I)I=this._pc.addTrack(v,_),w.set(_,I),this._senderMap.set(v,w),this._needsNegotiation();else throw I.removed?g(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):g(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(v,_,w){if(this.destroying)return;if(this.destroyed)throw g(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const I=this._senderMap.get(v),B=I?I.get(w):null;if(!B)throw g(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");_&&this._senderMap.set(_,I),B.replaceTrack==null?this.destroy(g(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):B.replaceTrack(_)}removeTrack(v,_){if(this.destroying)return;if(this.destroyed)throw g(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const w=this._senderMap.get(v),I=w?w.get(_):null;if(!I)throw g(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{I.removed=!0,this._pc.removeTrack(I)}catch(B){B.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(I):this.destroy(g(B,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(v){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),v.getTracks().forEach(_=>{this.removeTrack(_,v)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,p(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(v){this._destroy(v,()=>{})}_destroy(v,_){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",v&&(v.message||v)),p(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",v&&(v.message||v)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,v&&this.emit("error",v),this.emit("close"),_()}))}_setupData(v){if(!v.channel)return this.destroy(g(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=v.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=T),this.channelName=this._channel.label,this._channel.onmessage=w=>{this._onChannelMessage(w)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=w=>{const I=w.error instanceof Error?w.error:new Error(`Datachannel error: ${w.message} ${w.filename}:${w.lineno}:${w.colno}`);this.destroy(g(I,"ERR_DATA_CHANNEL"))};let _=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(_&&this._onChannelClose(),_=!0):_=!1},5e3)}_read(){}_write(v,_,w){if(this.destroyed)return w(g(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(v)}catch(I){return this.destroy(g(I,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>T?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=w):w(null)}else this._debug("write before connect"),this._chunk=v,this._cb=w}_onFinish(){if(!this.destroyed){const v=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?v():this.once("connect",v)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(v=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(v.sdp=o(v.sdp)),v.sdp=this.sdpTransform(v.sdp);const _=()=>{if(!this.destroyed){const w=this._pc.localDescription||v;this._debug("signal"),this.emit("signal",{type:w.type,sdp:w.sdp})}};this._pc.setLocalDescription(v).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?_():this.once("_iceComplete",_))}).catch(w=>{this.destroy(g(w,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(v=>{this.destroy(g(v,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(v=>{v.mid||!v.sender.track||v.requested||(v.requested=!0,this.addTransceiver(v.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(v=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(v.sdp=o(v.sdp)),v.sdp=this.sdpTransform(v.sdp);const _=()=>{if(!this.destroyed){const w=this._pc.localDescription||v;this._debug("signal"),this.emit("signal",{type:w.type,sdp:w.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(v).then(()=>{this.destroyed||(this.trickle||this._iceComplete?_():this.once("_iceComplete",_))}).catch(w=>{this.destroy(g(w,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(v=>{this.destroy(g(v,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(g(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const v=this._pc.iceConnectionState,_=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",v,_),this.emit("iceStateChange",v,_),(v==="connected"||v==="completed")&&(this._pcReady=!0,this._maybeReady()),v==="failed"&&this.destroy(g(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),v==="closed"&&this.destroy(g(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(v){const _=w=>(Object.prototype.toString.call(w.values)==="[object Array]"&&w.values.forEach(I=>{Object.assign(w,I)}),w);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(w=>{const I=[];w.forEach(B=>{I.push(_(B))}),v(null,I)},w=>v(w)):0<this._pc.getStats.length?this._pc.getStats(w=>{if(this.destroyed)return;const I=[];w.result().forEach(B=>{const M={};B.names().forEach(H=>{M[H]=B.stat(H)}),M.id=B.id,M.type=B.type,M.timestamp=B.timestamp,I.push(_(M))}),v(null,I)},w=>v(w)):v(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const v=()=>{this.destroyed||this.getStats((_,w)=>{if(this.destroyed)return;_&&(w=[]);const I={},B={},M={};let H=!1;w.forEach(U=>{(U.type==="remotecandidate"||U.type==="remote-candidate")&&(I[U.id]=U),(U.type==="localcandidate"||U.type==="local-candidate")&&(B[U.id]=U),(U.type==="candidatepair"||U.type==="candidate-pair")&&(M[U.id]=U)});const N=U=>{H=!0;let K=B[U.localCandidateId];K&&(K.ip||K.address)?(this.localAddress=K.ip||K.address,this.localPort=+K.port):K&&K.ipAddress?(this.localAddress=K.ipAddress,this.localPort=+K.portNumber):typeof U.googLocalAddress=="string"&&(K=U.googLocalAddress.split(":"),this.localAddress=K[0],this.localPort=+K[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let q=I[U.remoteCandidateId];q&&(q.ip||q.address)?(this.remoteAddress=q.ip||q.address,this.remotePort=+q.port):q&&q.ipAddress?(this.remoteAddress=q.ipAddress,this.remotePort=+q.portNumber):typeof U.googRemoteAddress=="string"&&(q=U.googRemoteAddress.split(":"),this.remoteAddress=q[0],this.remotePort=+q[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(w.forEach(U=>{U.type==="transport"&&U.selectedCandidatePairId&&N(M[U.selectedCandidatePairId]),(U.type==="googCandidatePair"&&U.googActiveConnection==="true"||(U.type==="candidatepair"||U.type==="candidate-pair")&&U.selected)&&N(U)}),!H&&(!Object.keys(M).length||Object.keys(B).length))return void setTimeout(v,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(K){return this.destroy(g(K,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const U=this._cb;this._cb=null,U(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};v()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>T)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(v=>{this._pc.removeTrack(v),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(v){this.destroyed||(v.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:v.candidate.candidate,sdpMLineIndex:v.candidate.sdpMLineIndex,sdpMid:v.candidate.sdpMid}}):!v.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),v.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(v){if(this.destroyed)return;let _=v.data;_ instanceof ArrayBuffer&&(_=y.from(_)),this.push(_)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const v=this._cb;this._cb=null,v(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(v){this.destroyed||v.streams.forEach(_=>{this._debug("on track"),this.emit("track",v.track,_),this._remoteTracks.push({track:v.track,stream:_}),this._remoteStreams.some(w=>w.id===_.id)||(this._remoteStreams.push(_),p(()=>{this._debug("on stream"),this.emit("stream",_)}))})}_debug(){const v=[].slice.call(arguments);v[0]="["+this._id+"] "+v[0],l.apply(null,v)}}x.WEBRTC_SUPPORT=!!c(),x.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},x.channelConfig={},a.exports=x},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(Dc);const x1=Dc.exports,xo=0,Ao=1,Lc=2,Uc=(e,t)=>{he(e,xo);const r=dv(t);ct(e,r)},Oc=(e,t,r)=>{he(e,Ao),ct(e,lv(t,r))},A1=(e,t,r)=>Oc(t,r,Ct(e)),Mc=(e,t,r)=>{try{av(t,Ct(e),r)}catch(n){console.error("Caught error while handling a Yjs update",n)}},I1=(e,t)=>{he(e,Lc),ct(e,t)},B1=Mc,k1=(e,t,r,n)=>{const i=Ce(e);switch(i){case xo:A1(e,t,r);break;case Ao:Mc(e,r,n);break;case Lc:B1(e,r,n);break;default:throw new Error("Unknown message type")}return i},ca=3e4;class R1 extends Ds{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const r=Nr();this.getLocalState()!==null&&ca/2<=r-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const n=[];this.meta.forEach((i,s)=>{s!==this.clientID&&ca<=r-i.lastUpdated&&this.states.has(s)&&n.push(s)}),n.length>0&&Ba(this,n,"timeout")},mr(ca/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const r=this.clientID,n=this.meta.get(r),i=n===void 0?0:n.clock+1,s=this.states.get(r);t===null?this.states.delete(r):this.states.set(r,t),this.meta.set(r,{clock:i,lastUpdated:Nr()});const a=[],o=[],u=[],l=[];t===null?l.push(r):s==null?t!=null&&a.push(r):(o.push(r),pi(s,t)||u.push(r)),(a.length>0||u.length>0||l.length>0)&&this.emit("change",[{added:a,updated:u,removed:l},"local"]),this.emit("update",[{added:a,updated:o,removed:l},"local"])}setLocalStateField(t,r){const n=this.getLocalState();n!==null&&this.setLocalState({...n,[t]:r})}getStates(){return this.states}}const Ba=(e,t,r)=>{const n=[];for(let i=0;i<t.length;i++){const s=t[i];if(e.states.has(s)){if(e.states.delete(s),s===e.clientID){const a=e.meta.get(s);e.meta.set(s,{clock:a.clock+1,lastUpdated:Nr()})}n.push(s)}}n.length>0&&(e.emit("change",[{added:[],updated:[],removed:n},r]),e.emit("update",[{added:[],updated:[],removed:n},r]))},bs=(e,t,r=e.states)=>{const n=t.length,i=St();he(i,n);for(let s=0;s<n;s++){const a=t[s],o=r.get(a)||null,u=e.meta.get(a).clock;he(i,a),he(i,u),gr(i,JSON.stringify(o))}return at(i)},N1=(e,t,r)=>{const n=_r(t),i=Nr(),s=[],a=[],o=[],u=[],l=Ce(n);for(let c=0;c<l;c++){const f=Ce(n);let d=Ce(n);const p=JSON.parse(kr(n)),g=e.meta.get(f),y=e.states.get(f),T=g===void 0?0:g.clock;(T<d||T===d&&p===null&&e.states.has(f))&&(p===null?f===e.clientID&&e.getLocalState()!=null?d++:e.states.delete(f):e.states.set(f,p),e.meta.set(f,{clock:d,lastUpdated:i}),g===void 0&&p!==null?s.push(f):g!==void 0&&p===null?u.push(f):p!==null&&(pi(p,y)||o.push(f),a.push(f)))}(s.length>0||o.length>0||u.length>0)&&e.emit("change",[{added:s,updated:o,removed:u},r]),(s.length>0||a.length>0||u.length>0)&&e.emit("update",[{added:s,updated:a,removed:u},r])},D1=(e,t)=>{const r=Ca(e).buffer,n=Ca(t).buffer;return crypto.subtle.importKey("raw",r,"PBKDF2",!1,["deriveKey"]).then(i=>crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},Pc=(e,t)=>{if(!t)return uo(e);const r=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,e).then(n=>{const i=St();return gr(i,"AES-GCM"),ct(i,r),ct(i,new Uint8Array(n)),at(i)})},L1=(e,t)=>{const r=St();return Vn(r,e),Pc(at(r),t)},Fc=(e,t)=>{if(!t)return uo(e);const r=_r(e);kr(r)!=="AES-GCM"&&Vy(tn("Unknown encryption algorithm"));const i=Ct(r),s=Ct(r);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},t,s).then(a=>new Uint8Array(a))},U1=(e,t)=>Fc(e,t).then(r=>Fn(_r(new Uint8Array(r)))),rr=Jy("y-webrtc"),Mn=0,Vc=3,xi=1,Io=4,Cs=new Map,fn=new Map,Hc=e=>{let t=!0;e.webrtcConns.forEach(r=>{r.synced||(t=!1)}),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),rr("synced ",qt,e.name,Yr," with all peers"))},Kc=(e,t,r)=>{const n=_r(t),i=St(),s=Ce(n);if(e===void 0)return null;const a=e.awareness,o=e.doc;let u=!1;switch(s){case Mn:{he(i,Mn);const l=k1(n,i,o,e);l===Ao&&!e.synced&&r(),l===xo&&(u=!0);break}case Vc:he(i,xi),ct(i,bs(a,Array.from(a.getStates().keys()))),u=!0;break;case xi:N1(a,Ct(n),e);break;case Io:{const l=gn(n)===1,c=kr(n);if(c!==e.peerId&&(e.bcConns.has(c)&&!l||!e.bcConns.has(c)&&l)){const f=[],d=[];l?(e.bcConns.add(c),d.push(c)):(e.bcConns.delete(c),f.push(c)),e.provider.emit("peers",[{added:d,removed:f,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),qc(e)}break}default:return console.error("Unable to compute message"),i}return u?i:null},O1=(e,t)=>{const r=e.room;return rr("received message from ",qt,e.remotePeerId,Ms," (",r.name,")",Yr,ki),Kc(r,t,()=>{e.synced=!0,rr("synced ",qt,r.name,Yr," with ",qt,e.remotePeerId),Hc(r)})},fa=(e,t)=>{rr("send message to ",qt,e.remotePeerId,Yr,Ms," (",e.room.name,")",ki);try{e.peer.send(at(t))}catch{}},M1=(e,t)=>{rr("broadcast message in ",qt,e.name,Yr),e.webrtcConns.forEach(r=>{try{r.peer.send(t)}catch{}})};class Hu{constructor(t,r,n,i){rr("establishing connection to ",qt,n),this.room=i,this.remotePeerId=n,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new x1({initiator:r,...i.provider.peerOpts}),this.peer.on("signal",s=>{Bo(t,i,{to:n,from:i.peerId,type:"signal",signal:s})}),this.peer.on("connect",()=>{rr("connected to ",qt,n),this.connected=!0;const a=i.provider.doc,o=i.awareness,u=St();he(u,Mn),Uc(u,a),fa(this,u);const l=o.getStates();if(l.size>0){const c=St();he(c,xi),ct(c,bs(o,Array.from(l.keys()))),fa(this,c)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,i.webrtcConns.has(this.remotePeerId)&&(i.webrtcConns.delete(this.remotePeerId),i.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}])),Hc(i),this.peer.destroy(),rr("closed connection to ",qt,n),ka(i)}),this.peer.on("error",s=>{rr("Error in connection to ",qt,n,": ",s),ka(i)}),this.peer.on("data",s=>{const a=O1(this,s);a!==null&&fa(this,a)})}destroy(){this.peer.destroy()}}const Vr=(e,t)=>Pc(t,e.key).then(r=>e.mux(()=>S1(e.name,r))),Ku=(e,t)=>{e.bcconnected&&Vr(e,t),M1(e,t)},ka=e=>{Cs.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&Bo(t,e,{type:"announce",from:e.peerId}))})},qc=e=>{if(e.provider.filterBcConns){const t=St();he(t,Io),Ei(t,1),gr(t,e.peerId),Vr(e,at(t))}};class P1{constructor(t,r,n,i){this.peerId=Wl(),this.doc=t,this.awareness=r.awareness,this.provider=r,this.synced=!1,this.name=n,this.key=i,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=_1(),this.bcconnected=!1,this._bcSubscriber=s=>Fc(new Uint8Array(s),i).then(a=>this.mux(()=>{const o=Kc(this,a,()=>{});o&&Vr(this,at(o))})),this._docUpdateHandler=(s,a)=>{const o=St();he(o,Mn),I1(o,s),Ku(this,at(o))},this._awarenessUpdateHandler=({added:s,updated:a,removed:o},u)=>{const l=s.concat(a).concat(o),c=St();he(c,xi),ct(c,bs(this.awareness,l)),Ku(this,at(c))},this._beforeUnloadHandler=()=>{Ba(this.awareness,[t.clientID],"window unload"),fn.forEach(s=>{s.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),ka(this);const t=this.name;C1(t,this._bcSubscriber),this.bcconnected=!0,qc(this);const r=St();he(r,Mn),Uc(r,this.doc),Vr(this,at(r));const n=St();he(n,Mn),Oc(n,this.doc),Vr(this,at(n));const i=St();he(i,Vc),Vr(this,at(i));const s=St();he(s,xi),ct(s,bs(this.awareness,[this.doc.clientID])),Vr(this,at(s))}disconnect(){Cs.forEach(r=>{r.connected&&r.send({type:"unsubscribe",topics:[this.name]})}),Ba(this.awareness,[this.doc.clientID],"disconnect");const t=St();he(t,Io),Ei(t,0),gr(t,this.peerId),Vr(this,at(t)),E1(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(r=>r.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const F1=(e,t,r,n)=>{if(fn.has(r))throw tn(`A Yjs Doc connected to room "${r}" already exists!`);const i=new P1(e,t,r,n);return fn.set(r,i),i},Bo=(e,t,r)=>{t.key?L1(r,t.key).then(n=>{e.send({type:"publish",topic:t.name,data:Gl(n)})}):e.send({type:"publish",topic:t.name,data:r})};class V1 extends m1{constructor(t){super(t),this.providers=new Set,this.on("connect",()=>{rr(`connected (${t})`);const r=Array.from(fn.keys());this.send({type:"subscribe",topics:r}),fn.forEach(n=>Bo(this,n,{type:"announce",from:n.peerId}))}),this.on("message",r=>{switch(r.type){case"publish":{const n=r.topic,i=fn.get(n);if(i==null||typeof n!="string")return;const s=a=>{const o=i.webrtcConns,u=i.peerId;if(a==null||a.from===u||a.to!==void 0&&a.to!==u||i.bcConns.has(a.from))return;const l=o.has(a.from)?()=>{}:()=>i.provider.emit("peers",[{removed:[],added:[a.from],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}]);switch(a.type){case"announce":o.size<i.provider.maxConns&&(Zt(o,a.from,()=>new Hu(this,!0,a.from,i)),l());break;case"signal":a.to===u&&(Zt(o,a.from,()=>new Hu(this,!1,a.from,i)).peer.signal(a.signal),l());break}};i.key?typeof r.data=="string"&&U1(jl(r.data),i.key).then(s):s(r.data)}}}),this.on("disconnect",()=>rr(`disconnect (${t})`))}}class H1 extends Ds{constructor(t,r,{signaling:n=["wss://signaling.yjs.dev","wss://y-webrtc-signaling-eu.herokuapp.com","wss://y-webrtc-signaling-us.herokuapp.com"],password:i=null,awareness:s=new R1(r),maxConns:a=20+mr(My()*15),filterBcConns:o=!0,peerOpts:u={}}={}){super(),this.roomName=t,this.doc=r,this.filterBcConns=o,this.awareness=s,this.shouldConnect=!1,this.signalingUrls=n,this.signalingConns=[],this.maxConns=a,this.peerOpts=u,this.key=i?D1(i,t):uo(null),this.room=null,this.key.then(l=>{this.room=F1(r,this,t,l),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),r.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(t=>{const r=Zt(Cs,t,()=>new V1(t));this.signalingConns.push(r),r.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(t=>{t.providers.delete(this),t.providers.size===0&&(t.destroy(),Cs.delete(t.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),fn.delete(this.roomName)}),super.destroy()}}var $c={exports:{}},we={options:{usePureJavaScript:!1}},ko={},K1=ko,qu={};ko.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=q1(e,t);else{var i=0,s=t.length,a=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var u=0,l=e[i];u<o.length;++u)l+=o[u]<<8,o[u]=l%s,l=l/s|0;for(;l>0;)o.push(l%s),l=l/s|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=a;for(i=o.length-1;i>=0;--i)n+=t[o[i]]}if(r){var c=new RegExp(".{1,"+r+"}","g");n=n.match(c).join(`\r
`)}return n};ko.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=qu[t];if(!r){r=qu[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,s=t.charAt(0),a=[0],n=0;n<e.length;n++){var o=r[e.charCodeAt(n)];if(o===void 0)return;for(var u=0,l=o;u<a.length;++u)l+=a[u]*i,a[u]=l&255,l>>=8;for(;l>0;)a.push(l&255),l>>=8}for(var c=0;e[c]===s&&c<e.length-1;++c)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function q1(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var a=0,o=e.at(r);a<s.length;++a)o+=s[a]<<8,s[a]=o%n,o=o/n|0;for(;o>0;)s.push(o%n),o=o/n|0}var u="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)u+=i;for(r=s.length-1;r>=0;--r)u+=t[s[r]];return u}var $u=we,Gu=K1,O=$u.util=$u.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){O.nextTick=process.nextTick,typeof setImmediate=="function"?O.setImmediate=setImmediate:O.setImmediate=O.nextTick;return}if(typeof setImmediate=="function"){O.setImmediate=function(){return setImmediate.apply(void 0,arguments)},O.nextTick=function(o){return setImmediate(o)};return}if(O.setImmediate=function(o){setTimeout(o,0)},typeof window<"u"&&typeof window.postMessage=="function"){let o=function(u){if(u.source===window&&u.data===e){u.stopPropagation();var l=t.slice();t.length=0,l.forEach(function(c){c()})}};var a=o,e="forge.setImmediate",t=[];O.setImmediate=function(u){t.push(u),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var u=t.slice();t.length=0,u.forEach(function(l){l()})}).observe(i,{attributes:!0});var s=O.setImmediate;O.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),s(u)):(t.push(u),t.length===1&&i.setAttribute("a",n=!n))}}O.nextTick=O.setImmediate})();O.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;O.globalScope=function(){return O.isNodejs?er:typeof self>"u"?window:self}();O.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};O.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};O.isArrayBufferView=function(e){return e&&O.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function Ui(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}O.ByteBuffer=Ro;function Ro(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(O.isArrayBuffer(e)||O.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof Ro||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}O.ByteStringBuffer=Ro;var $1=4096;O.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>$1&&(this.data.substr(0,1),this._constructedStringLength=0)};O.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};O.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};O.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};O.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};O.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};O.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(O.encodeUtf8(e))};O.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};O.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};O.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};O.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};O.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};O.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};O.ByteStringBuffer.prototype.putInt=function(e,t){Ui(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};O.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};O.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};O.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};O.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};O.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};O.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};O.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};O.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};O.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};O.ByteStringBuffer.prototype.getInt=function(e){Ui(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};O.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};O.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};O.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};O.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};O.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};O.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};O.ByteStringBuffer.prototype.copy=function(){var e=O.createBuffer(this.data);return e.read=this.read,e};O.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};O.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};O.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};O.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};O.ByteStringBuffer.prototype.toString=function(){return O.decodeUtf8(this.bytes())};function G1(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=O.isArrayBuffer(e),n=O.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}O.DataBuffer=G1;O.DataBuffer.prototype.length=function(){return this.write-this.read};O.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};O.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};O.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};O.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};O.DataBuffer.prototype.putBytes=function(e,t){if(O.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(O.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof O.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&O.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof O.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var s;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=O.binary.hex.decode(e,s,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=O.binary.base64.decode(e,s,this.write),this;if(t==="utf8"&&(e=O.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=O.binary.raw.decode(s),this;if(t==="utf16")return this.accommodate(e.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=O.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};O.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};O.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};O.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};O.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};O.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};O.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};O.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};O.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};O.DataBuffer.prototype.putInt=function(e,t){Ui(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};O.DataBuffer.prototype.putSignedInt=function(e,t){return Ui(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};O.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};O.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};O.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};O.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};O.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};O.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};O.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};O.DataBuffer.prototype.getInt=function(e){Ui(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};O.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};O.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};O.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};O.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};O.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};O.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};O.DataBuffer.prototype.copy=function(){return new O.DataBuffer(this)};O.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};O.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};O.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};O.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};O.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return O.binary.raw.encode(t);if(e==="hex")return O.binary.hex.encode(t);if(e==="base64")return O.binary.base64.encode(t);if(e==="utf8")return O.text.utf8.decode(t);if(e==="utf16")return O.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};O.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=O.encodeUtf8(e)),new O.ByteBuffer(e)};O.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};O.xorBytes=function(e,t,r){for(var n="",i="",s="",a=0,o=0;r>0;--r,++a)i=e.charCodeAt(a)^t.charCodeAt(a),o>=10&&(n+=s,s="",o=0),s+=String.fromCharCode(i),++o;return n+=s,n};O.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};O.bytesToHex=function(e){return O.createBuffer(e).toHex()};O.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var $r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Gr=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Gc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";O.encode64=function(e,t){for(var r="",n="",i,s,a,o=0;o<e.length;)i=e.charCodeAt(o++),s=e.charCodeAt(o++),a=e.charCodeAt(o++),r+=$r.charAt(i>>2),r+=$r.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=$r.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":$r.charAt(a&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};O.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,s,a=0;a<e.length;)r=Gr[e.charCodeAt(a++)-43],n=Gr[e.charCodeAt(a++)-43],i=Gr[e.charCodeAt(a++)-43],s=Gr[e.charCodeAt(a++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t};O.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};O.decodeUtf8=function(e){return decodeURIComponent(escape(e))};O.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Gu.encode,decode:Gu.decode}};O.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};O.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};O.binary.hex.encode=O.bytesToHex;O.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,s=r;for(e.length&1&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n};O.binary.base64.encode=function(e,t){for(var r="",n="",i,s,a,o=0;o<e.byteLength;)i=e[o++],s=e[o++],a=e[o++],r+=$r.charAt(i>>2),r+=$r.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=$r.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":$r.charAt(a&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};O.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,a,o,u=0,l=r;u<e.length;)i=Gr[e.charCodeAt(u++)-43],s=Gr[e.charCodeAt(u++)-43],a=Gr[e.charCodeAt(u++)-43],o=Gr[e.charCodeAt(u++)-43],n[l++]=i<<2|s>>4,a!==64&&(n[l++]=(s&15)<<4|a>>2,o!==64&&(n[l++]=(a&3)<<6|o));return t?l-r:n.subarray(0,l)};O.binary.base58.encode=function(e,t){return O.binary.baseN.encode(e,Gc,t)};O.binary.base58.decode=function(e,t){return O.binary.baseN.decode(e,Gc,t)};O.text={utf8:{},utf16:{}};O.text.utf8.encode=function(e,t,r){e=O.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};O.text.utf8.decode=function(e){return O.decodeUtf8(String.fromCharCode.apply(null,e))};O.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,a=r,o=0;o<e.length;++o)i[a++]=e.charCodeAt(o),s+=2;return t?s-r:n};O.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};O.deflate=function(e,t,r){if(t=O.decode64(e.deflate(O.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};O.inflate=function(e,t,r){var n=e.inflate(O.encode64(t)).rval;return n===null?null:O.decode64(n)};var No=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=O.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},Do=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(O.decode64(r))),r},j1=function(e,t,r,n){var i=Do(e,t);i===null&&(i={}),i[r]=n,No(e,t,i)},z1=function(e,t,r){var n=Do(e,t);return n!==null&&(n=r in n?n[r]:null),n},W1=function(e,t,r){var n=Do(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),No(e,t,n)}},J1=function(e,t){No(e,t,null)},qs=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,a=null;for(var o in r){i=r[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),s=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),s=!0)}catch(u){a=u}if(s)break}if(!s)throw a;return n};O.setItem=function(e,t,r,n,i){qs(j1,arguments,i)};O.getItem=function(e,t,r,n){return qs(z1,arguments,n)};O.removeItem=function(e,t,r,n){qs(W1,arguments,n)};O.clearItems=function(e,t,r){qs(J1,arguments,r)};O.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};O.format=function(e){for(var t=/%./g,r,n,i=0,s=[],a=0;r=t.exec(e);){n=e.substring(a,t.lastIndex-2),n.length>0&&s.push(n),a=t.lastIndex;var o=r[0][1];switch(o){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>")}}return s.push(e.substring(a)),s.join("")};O.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,a=r===void 0?",":r,o=n===void 0?".":n,u=i<0?"-":"",l=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",c=l.length>3?l.length%3:0;return u+(c?l.substr(0,c)+o:"")+l.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(i-l).toFixed(s).slice(2):"")};O.formatSize=function(e){return e>=1073741824?e=O.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=O.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=O.formatNumber(e/1024,0)+" KiB":e=O.formatNumber(e,0)+" bytes",e};O.bytesFromIP=function(e){return e.indexOf(".")!==-1?O.bytesFromIPv4(e):e.indexOf(":")!==-1?O.bytesFromIPv6(e):null};O.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=O.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};O.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(a){return a.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=O.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=O.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};O.bytesToIP=function(e){return e.length===4?O.bytesToIPv4(e):e.length===16?O.bytesToIPv6(e):null};O.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};O.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=O.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var a=r[r.length-1],o=t.length;!a||o!==a.end+1?r.push({start:o,end:o}):(a.end=o,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(s)}if(r.length>0){var u=r[n];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),u.start===0&&t.unshift(""),u.end===7&&t.push(""))}return t.join(":")};O.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in O&&!e.update)return t(null,O.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return O.cores=navigator.hardwareConcurrency,t(null,O.cores);if(typeof Worker>"u")return O.cores=1,t(null,O.cores);if(typeof Blob>"u")return O.cores=2,t(null,O.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){var o=Date.now(),u=o+4;self.postMessage({st:o,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,o,u){if(o===0){var l=Math.floor(a.reduce(function(c,f){return c+f},0)/a.length);return O.cores=Math.max(1,l),URL.revokeObjectURL(r),t(null,O.cores)}i(u,function(c,f){a.push(s(u,f)),n(a,o-1,u)})}function i(a,o){for(var u=[],l=[],c=0;c<a;++c){var f=new Worker(r);f.addEventListener("message",function(d){if(l.push(d.data),l.length===a){for(var p=0;p<a;++p)u[p].terminate();o(null,l)}}),u.push(f)}for(var c=0;c<a;++c)u[c].postMessage(c)}function s(a,o){for(var u=[],l=0;l<a;++l)for(var c=o[l],f=u[l]=[],d=0;d<a;++d)if(l!==d){var p=o[d];(c.st>p.st&&c.st<p.et||p.st>c.st&&p.st<c.et)&&f.push(d)}return u.reduce(function(g,y){return Math.max(g,y.length)},0)}};var At=we;At.cipher=At.cipher||{};At.cipher.algorithms=At.cipher.algorithms||{};At.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=At.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new At.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};At.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=At.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new At.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};At.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),At.cipher.algorithms[e]=t};At.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in At.cipher.algorithms?At.cipher.algorithms[e]:null};var Lo=At.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};Lo.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=At.util.createBuffer(),this.output=e.output||At.util.createBuffer(),this.mode.start(t)};Lo.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Lo.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))};var wt=we;wt.cipher=wt.cipher||{};var Be=wt.cipher.modes=wt.cipher.modes||{};Be.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Be.ecb.prototype.start=function(e){};Be.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Be.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Be.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Be.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Be.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Be.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=$s(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Be.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};Be.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Be.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Be.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Be.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=wt.util.createBuffer(),this._partialBytes=0};Be.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=$s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Be.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Be.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Be.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=wt.util.createBuffer(),this._partialBytes=0};Be.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=$s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Be.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Be.ofb.prototype.decrypt=Be.ofb.prototype.encrypt;Be.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=wt.util.createBuffer(),this._partialBytes=0};Be.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=$s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Be.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Gs(this._inBlock)};Be.ctr.prototype.decrypt=Be.ctr.prototype.encrypt;Be.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=wt.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Be.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=wt.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=wt.util.createBuffer(e.additionalData):r=wt.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=wt.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Ra(n*8)))}this._inBlock=this._j0.slice(0),Gs(this._inBlock),this._partialBytes=0,r=wt.util.createBuffer(r),this._aDataLength=Ra(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Be.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Gs(this._inBlock)};Be.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Gs(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Be.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=wt.util.createBuffer();var n=this._aDataLength.concat(Ra(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Be.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Be.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};Be.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,s=this._m[r][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t};Be.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};Be.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),a=0;a<i;++a){var o=[0,0,0,0],u=a/n|0,l=(n-1-a%n)*t;o[u]=1<<t-1<<l,s[a]=this.generateSubHashTable(this.multiply(o,e),t)}return s};Be.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var a=1;a<s;++a){var o=i[s],u=i[a];i[s+a]=[o[0]^u[0],o[1]^u[1],o[2]^u[2],o[3]^u[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var l=i[s^n];i[s]=[e[0]^l[0],e[1]^l[1],e[2]^l[2],e[3]^l[3]]}return i};function $s(e,t){if(typeof e=="string"&&(e=wt.util.createBuffer(e)),wt.util.isArray(e)&&e.length>4){var r=e;e=wt.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!wt.util.isArray(e)){for(var i=[],s=t/4,n=0;n<s;++n)i.push(e.getInt32());e=i}return e}function Gs(e){e[e.length-1]=e[e.length-1]+1&4294967295}function Ra(e){return[e/4294967296|0,e&4294967295]}var ze=we;ze.aes=ze.aes||{};ze.aes.startEncrypting=function(e,t,r,n){var i=js({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};ze.aes.createEncryptionCipher=function(e,t){return js({key:e,output:null,decrypt:!1,mode:t})};ze.aes.startDecrypting=function(e,t,r,n){var i=js({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};ze.aes.createDecryptionCipher=function(e,t){return js({key:e,output:null,decrypt:!0,mode:t})};ze.aes.Algorithm=function(e,t){Uo||zc();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return Da(r._w,n,i,!1)},decrypt:function(n,i){return Da(r._w,n,i,!0)}}}),r._init=!1};ze.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=ze.util.createBuffer(t);else if(ze.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=ze.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!ze.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!ze.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=Wc(t,e.decrypt&&!a),this._init=!0}};ze.aes._expandKey=function(e,t){return Uo||zc(),Wc(e,t)};ze.aes._updateBlock=Da;Zn("AES-ECB",ze.cipher.modes.ecb);Zn("AES-CBC",ze.cipher.modes.cbc);Zn("AES-CFB",ze.cipher.modes.cfb);Zn("AES-OFB",ze.cipher.modes.ofb);Zn("AES-CTR",ze.cipher.modes.ctr);Zn("AES-GCM",ze.cipher.modes.gcm);function Zn(e,t){var r=function(){return new ze.aes.Algorithm(e,t)};ze.cipher.registerAlgorithm(e,r)}var Uo=!1,In=4,Ut,Na,jc,ln,nr;function zc(){Uo=!0,jc=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;Ut=new Array(256),Na=new Array(256),ln=new Array(4),nr=new Array(4);for(var t=0;t<4;++t)ln[t]=new Array(256),nr[t]=new Array(256);for(var r=0,n=0,i,s,a,o,u,l,c,t=0;t<256;++t){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,Ut[r]=o,Na[o]=r,u=e[o],i=e[r],s=e[i],a=e[s],l=u<<24^o<<16^o<<8^(o^u),c=(i^s^a)<<24^(r^a)<<16^(r^s^a)<<8^(r^i^a);for(var f=0;f<4;++f)ln[f][r]=l,nr[f][o]=c,l=l<<24|l>>>8,c=c<<24|c>>>8;r===0?r=n=1:(r=i^e[e[e[i^a]]],n^=e[e[n]])}}function Wc(e,t){for(var r=e.slice(0),n,i=1,s=r.length,a=s+6+1,o=In*a,u=s;u<o;++u)n=r[u-1],u%s===0?(n=Ut[n>>>16&255]<<24^Ut[n>>>8&255]<<16^Ut[n&255]<<8^Ut[n>>>24]^jc[i]<<24,i++):s>6&&u%s===4&&(n=Ut[n>>>24]<<24^Ut[n>>>16&255]<<16^Ut[n>>>8&255]<<8^Ut[n&255]),r[u]=r[u-s]^n;if(t){var l,c=nr[0],f=nr[1],d=nr[2],p=nr[3],g=r.slice(0);o=r.length;for(var u=0,y=o-In;u<o;u+=In,y-=In)if(u===0||u===o-In)g[u]=r[y],g[u+1]=r[y+3],g[u+2]=r[y+2],g[u+3]=r[y+1];else for(var T=0;T<In;++T)l=r[y+T],g[u+(3&-T)]=c[Ut[l>>>24]]^f[Ut[l>>>16&255]]^d[Ut[l>>>8&255]]^p[Ut[l&255]];r=g}return r}function Da(e,t,r,n){var i=e.length/4-1,s,a,o,u,l;n?(s=nr[0],a=nr[1],o=nr[2],u=nr[3],l=Na):(s=ln[0],a=ln[1],o=ln[2],u=ln[3],l=Ut);var c,f,d,p,g,y,T;c=t[0]^e[0],f=t[n?3:1]^e[1],d=t[2]^e[2],p=t[n?1:3]^e[3];for(var x=3,k=1;k<i;++k)g=s[c>>>24]^a[f>>>16&255]^o[d>>>8&255]^u[p&255]^e[++x],y=s[f>>>24]^a[d>>>16&255]^o[p>>>8&255]^u[c&255]^e[++x],T=s[d>>>24]^a[p>>>16&255]^o[c>>>8&255]^u[f&255]^e[++x],p=s[p>>>24]^a[c>>>16&255]^o[f>>>8&255]^u[d&255]^e[++x],c=g,f=y,d=T;r[0]=l[c>>>24]<<24^l[f>>>16&255]<<16^l[d>>>8&255]<<8^l[p&255]^e[++x],r[n?3:1]=l[f>>>24]<<24^l[d>>>16&255]<<16^l[p>>>8&255]<<8^l[c&255]^e[++x],r[2]=l[d>>>24]<<24^l[p>>>16&255]<<16^l[c>>>8&255]<<8^l[f&255]^e[++x],r[n?1:3]=l[p>>>24]<<24^l[c>>>16&255]<<16^l[f>>>8&255]<<8^l[d&255]^e[++x]}function js(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=ze.cipher.createDecipher(r,e.key):n=ze.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,a){var o=null;a instanceof ze.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(n,a)},n}var gi=we;gi.pki=gi.pki||{};var La=gi.pki.oids=gi.oids=gi.oids||{};function J(e,t){La[e]=t,La[t]=e}function Pe(e,t){La[e]=t}J("1.2.840.113549.1.1.1","rsaEncryption");J("1.2.840.113549.1.1.4","md5WithRSAEncryption");J("1.2.840.113549.1.1.5","sha1WithRSAEncryption");J("1.2.840.113549.1.1.7","RSAES-OAEP");J("1.2.840.113549.1.1.8","mgf1");J("1.2.840.113549.1.1.9","pSpecified");J("1.2.840.113549.1.1.10","RSASSA-PSS");J("1.2.840.113549.1.1.11","sha256WithRSAEncryption");J("1.2.840.113549.1.1.12","sha384WithRSAEncryption");J("1.2.840.113549.1.1.13","sha512WithRSAEncryption");J("1.3.101.112","EdDSA25519");J("1.2.840.10040.4.3","dsa-with-sha1");J("1.3.14.3.2.7","desCBC");J("1.3.14.3.2.26","sha1");J("1.3.14.3.2.29","sha1WithRSASignature");J("2.16.840.1.101.3.4.2.1","sha256");J("2.16.840.1.101.3.4.2.2","sha384");J("2.16.840.1.101.3.4.2.3","sha512");J("2.16.840.1.101.3.4.2.4","sha224");J("2.16.840.1.101.3.4.2.5","sha512-224");J("2.16.840.1.101.3.4.2.6","sha512-256");J("1.2.840.113549.2.2","md2");J("1.2.840.113549.2.5","md5");J("1.2.840.113549.1.7.1","data");J("1.2.840.113549.1.7.2","signedData");J("1.2.840.113549.1.7.3","envelopedData");J("1.2.840.113549.1.7.4","signedAndEnvelopedData");J("1.2.840.113549.1.7.5","digestedData");J("1.2.840.113549.1.7.6","encryptedData");J("1.2.840.113549.1.9.1","emailAddress");J("1.2.840.113549.1.9.2","unstructuredName");J("1.2.840.113549.1.9.3","contentType");J("1.2.840.113549.1.9.4","messageDigest");J("1.2.840.113549.1.9.5","signingTime");J("1.2.840.113549.1.9.6","counterSignature");J("1.2.840.113549.1.9.7","challengePassword");J("1.2.840.113549.1.9.8","unstructuredAddress");J("1.2.840.113549.1.9.14","extensionRequest");J("1.2.840.113549.1.9.20","friendlyName");J("1.2.840.113549.1.9.21","localKeyId");J("1.2.840.113549.1.9.22.1","x509Certificate");J("1.2.840.113549.1.12.10.1.1","keyBag");J("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");J("1.2.840.113549.1.12.10.1.3","certBag");J("1.2.840.113549.1.12.10.1.4","crlBag");J("1.2.840.113549.1.12.10.1.5","secretBag");J("1.2.840.113549.1.12.10.1.6","safeContentsBag");J("1.2.840.113549.1.5.13","pkcs5PBES2");J("1.2.840.113549.1.5.12","pkcs5PBKDF2");J("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");J("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");J("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");J("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");J("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");J("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");J("1.2.840.113549.2.7","hmacWithSHA1");J("1.2.840.113549.2.8","hmacWithSHA224");J("1.2.840.113549.2.9","hmacWithSHA256");J("1.2.840.113549.2.10","hmacWithSHA384");J("1.2.840.113549.2.11","hmacWithSHA512");J("1.2.840.113549.3.7","des-EDE3-CBC");J("2.16.840.1.101.3.4.1.2","aes128-CBC");J("2.16.840.1.101.3.4.1.22","aes192-CBC");J("2.16.840.1.101.3.4.1.42","aes256-CBC");J("2.5.4.3","commonName");J("2.5.4.4","surname");J("2.5.4.5","serialNumber");J("2.5.4.6","countryName");J("2.5.4.7","localityName");J("2.5.4.8","stateOrProvinceName");J("2.5.4.9","streetAddress");J("2.5.4.10","organizationName");J("2.5.4.11","organizationalUnitName");J("2.5.4.12","title");J("2.5.4.13","description");J("2.5.4.15","businessCategory");J("2.5.4.17","postalCode");J("2.5.4.42","givenName");J("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");J("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");J("2.16.840.1.113730.1.1","nsCertType");J("2.16.840.1.113730.1.13","nsComment");Pe("2.5.29.1","authorityKeyIdentifier");Pe("2.5.29.2","keyAttributes");Pe("2.5.29.3","certificatePolicies");Pe("2.5.29.4","keyUsageRestriction");Pe("2.5.29.5","policyMapping");Pe("2.5.29.6","subtreesConstraint");Pe("2.5.29.7","subjectAltName");Pe("2.5.29.8","issuerAltName");Pe("2.5.29.9","subjectDirectoryAttributes");Pe("2.5.29.10","basicConstraints");Pe("2.5.29.11","nameConstraints");Pe("2.5.29.12","policyConstraints");Pe("2.5.29.13","basicConstraints");J("2.5.29.14","subjectKeyIdentifier");J("2.5.29.15","keyUsage");Pe("2.5.29.16","privateKeyUsagePeriod");J("2.5.29.17","subjectAltName");J("2.5.29.18","issuerAltName");J("2.5.29.19","basicConstraints");Pe("2.5.29.20","cRLNumber");Pe("2.5.29.21","cRLReason");Pe("2.5.29.22","expirationDate");Pe("2.5.29.23","instructionCode");Pe("2.5.29.24","invalidityDate");Pe("2.5.29.25","cRLDistributionPoints");Pe("2.5.29.26","issuingDistributionPoint");Pe("2.5.29.27","deltaCRLIndicator");Pe("2.5.29.28","issuingDistributionPoint");Pe("2.5.29.29","certificateIssuer");Pe("2.5.29.30","nameConstraints");J("2.5.29.31","cRLDistributionPoints");J("2.5.29.32","certificatePolicies");Pe("2.5.29.33","policyMappings");Pe("2.5.29.34","policyConstraints");J("2.5.29.35","authorityKeyIdentifier");Pe("2.5.29.36","policyConstraints");J("2.5.29.37","extKeyUsage");Pe("2.5.29.46","freshestCRL");Pe("2.5.29.54","inhibitAnyPolicy");J("1.3.6.1.4.1.11129.2.4.2","timestampList");J("1.3.6.1.5.5.7.1.1","authorityInfoAccess");J("1.3.6.1.5.5.7.3.1","serverAuth");J("1.3.6.1.5.5.7.3.2","clientAuth");J("1.3.6.1.5.5.7.3.3","codeSigning");J("1.3.6.1.5.5.7.3.4","emailProtection");J("1.3.6.1.5.5.7.3.8","timeStamping");var Ye=we,te=Ye.asn1=Ye.asn1||{};te.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};te.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};te.create=function(e,t,r,n,i){if(Ye.util.isArray(n)){for(var s=[],a=0;a<n.length;++a)n[a]!==void 0&&s.push(n[a]);n=s}var o={tagClass:e,type:t,constructed:r,composed:r||Ye.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=te.copy(o)),o};te.copy=function(e,t){var r;if(Ye.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(te.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:te.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};te.equals=function(e,t,r){if(Ye.util.isArray(e)){if(!Ye.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!te.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&te.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};te.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function ci(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var Q1=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;ci(e,t,s),n=e.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};te.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=Ye.util.createBuffer(e));var r=e.length(),n=Zi(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function Zi(e,t,r,n){var i;ci(e,t,2);var s=e.getByte();t--;var a=s&192,o=s&31;i=e.length();var u=Q1(e,t);if(t-=i-e.length(),u!==void 0&&u>t){if(n.strict){var l=new Error("Too few bytes to read ASN.1 value.");throw l.available=e.length(),l.remaining=t,l.requested=u,l}u=t}var c,f,d=(s&32)===32;if(d)if(c=[],u===void 0)for(;;){if(ci(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),c.push(Zi(e,t,r+1,n)),t-=i-e.length()}else for(;u>0;)i=e.length(),c.push(Zi(e,u,r+1,n)),t-=i-e.length(),u-=i-e.length();if(c===void 0&&a===te.Class.UNIVERSAL&&o===te.Type.BITSTRING&&(f=e.bytes(u)),c===void 0&&n.decodeBitStrings&&a===te.Class.UNIVERSAL&&o===te.Type.BITSTRING&&u>1){var p=e.read,g=t,y=0;if(o===te.Type.BITSTRING&&(ci(e,t,1),y=e.getByte(),t--),y===0)try{i=e.length();var T={strict:!0,decodeBitStrings:!0},x=Zi(e,t,r+1,T),k=i-e.length();t-=k,o==te.Type.BITSTRING&&k++;var v=x.tagClass;k===u&&(v===te.Class.UNIVERSAL||v===te.Class.CONTEXT_SPECIFIC)&&(c=[x])}catch{}c===void 0&&(e.read=p,t=g)}if(c===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=t}if(o===te.Type.BMPSTRING)for(c="";u>0;u-=2)ci(e,t,2),c+=String.fromCharCode(e.getInt16()),t-=2;else c=e.getBytes(u),t-=u}var _=f===void 0?null:{bitStringContents:f};return te.create(a,o,d,c,_)}te.toDer=function(e){var t=Ye.util.createBuffer(),r=e.tagClass|e.type,n=Ye.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=te.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&n.putBuffer(te.toDer(e.value[s]))}else if(e.type===te.Type.BMPSTRING)for(var s=0;s<e.value.length;++s)n.putInt16(e.value.charCodeAt(s));else e.type===te.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&(e.value.charCodeAt(1)&128)===0||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var a=n.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);t.putByte(o.length|128);for(var s=o.length-1;s>=0;--s)t.putByte(o.charCodeAt(s))}return t.putBuffer(n),t};te.oidToDer=function(e){var t=e.split("."),r=Ye.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,s,a,o=2;o<t.length;++o){n=!0,i=[],s=parseInt(t[o],10);do a=s&127,s=s>>>7,n||(a|=128),i.push(a),n=!1;while(s>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};te.derToOid=function(e){var t;typeof e=="string"&&(e=Ye.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};te.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var u=e.charAt(10),l=10;u!=="+"&&u!=="-"&&(o=parseInt(e.substr(10,2),10),l+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,a,o,0),l&&(u=e.charAt(l),u==="+"||u==="-")){var c=parseInt(e.substr(l+1,2),10),f=parseInt(e.substr(l+4,2),10),d=c*60+f;d*=6e4,u==="+"?t.setTime(+t-d):t.setTime(+t+d)}return t};te.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),u=0,l=0,c=!1;e.charAt(e.length-1)==="Z"&&(c=!0);var f=e.length-5,d=e.charAt(f);if(d==="+"||d==="-"){var p=parseInt(e.substr(f+1,2),10),g=parseInt(e.substr(f+4,2),10);l=p*60+g,l*=6e4,d==="+"&&(l*=-1),c=!0}return e.charAt(14)==="."&&(u=parseFloat(e.substr(14),10)*1e3),c?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,a,o,u),t.setTime(+t+l)):(t.setFullYear(r,n,i),t.setHours(s,a,o,u)),t};te.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};te.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};te.integerToDer=function(e){var t=Ye.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};te.derToInteger=function(e){typeof e=="string"&&(e=Ye.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};te.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&Ye.util.isArray(t.value))for(var s=0,a=0;i&&a<t.value.length;++a)i=t.value[a].optional||!1,e.value[s]&&(i=te.validate(e.value[s],t.value[a],r,n),i?++s:t.value[a].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var o=e.bitStringContents.charCodeAt(0);if(o!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var ju=/[^\\u0000-\\u00ff]/;te.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",s=0;s<t*r;++s)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case te.Class.UNIVERSAL:n+="Universal:";break;case te.Class.APPLICATION:n+="Application:";break;case te.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case te.Class.PRIVATE:n+="Private:";break}if(e.tagClass===te.Class.UNIVERSAL)switch(n+=e.type,e.type){case te.Type.NONE:n+=" (None)";break;case te.Type.BOOLEAN:n+=" (Boolean)";break;case te.Type.INTEGER:n+=" (Integer)";break;case te.Type.BITSTRING:n+=" (Bit string)";break;case te.Type.OCTETSTRING:n+=" (Octet string)";break;case te.Type.NULL:n+=" (Null)";break;case te.Type.OID:n+=" (Object Identifier)";break;case te.Type.ODESC:n+=" (Object Descriptor)";break;case te.Type.EXTERNAL:n+=" (External or Instance of)";break;case te.Type.REAL:n+=" (Real)";break;case te.Type.ENUMERATED:n+=" (Enumerated)";break;case te.Type.EMBEDDED:n+=" (Embedded PDV)";break;case te.Type.UTF8:n+=" (UTF8)";break;case te.Type.ROID:n+=" (Relative Object Identifier)";break;case te.Type.SEQUENCE:n+=" (Sequence)";break;case te.Type.SET:n+=" (Set)";break;case te.Type.PRINTABLESTRING:n+=" (Printable String)";break;case te.Type.IA5String:n+=" (IA5String (ASCII))";break;case te.Type.UTCTIME:n+=" (UTC time)";break;case te.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case te.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var a=0,o="",s=0;s<e.value.length;++s)e.value[s]!==void 0&&(a+=1,o+=te.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(o+=","));n+=i+"Sub values: "+a+o}else{if(n+=i+"Value: ",e.type===te.Type.OID){var u=te.derToOid(e.value);n+=u,Ye.pki&&Ye.pki.oids&&u in Ye.pki.oids&&(n+=" ("+Ye.pki.oids[u]+") ")}if(e.type===te.Type.INTEGER)try{n+=te.derToInteger(e.value)}catch{n+="0x"+Ye.util.bytesToHex(e.value)}else if(e.type===te.Type.BITSTRING){if(e.value.length>1?n+="0x"+Ye.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var l=e.value.charCodeAt(0);l==1?n+=" (1 unused bit shown)":l>1&&(n+=" ("+l+" unused bits shown)")}}else if(e.type===te.Type.OCTETSTRING)ju.test(e.value)||(n+="("+e.value+") "),n+="0x"+Ye.util.bytesToHex(e.value);else if(e.type===te.Type.UTF8)try{n+=Ye.util.decodeUtf8(e.value)}catch(c){if(c.message==="URI malformed")n+="0x"+Ye.util.bytesToHex(e.value)+" (malformed UTF8)";else throw c}else e.type===te.Type.PRINTABLESTRING||e.type===te.Type.IA5String?n+=e.value:ju.test(e.value)?n+="0x"+Ye.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n};var Es=we,Y1=Es.md=Es.md||{};Es.md.algorithms=Es.md.algorithms||{};var Ar=we,X1=Ar.hmac=Ar.hmac||{};X1.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(s,a){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Ar.md.algorithms)t=Ar.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else t=s;if(a===null)a=e;else{if(typeof a=="string")a=Ar.util.createBuffer(a);else if(Ar.util.isArray(a)){var o=a;a=Ar.util.createBuffer();for(var u=0;u<o.length;++u)a.putByte(o[u])}var l=a.length();l>t.blockLength&&(t.start(),t.update(a.bytes()),a=t.digest()),r=Ar.util.createBuffer(),n=Ar.util.createBuffer(),l=a.length();for(var u=0;u<l;++u){var o=a.at(u);r.putByte(54^o),n.putByte(92^o)}if(l<t.blockLength)for(var o=t.blockLength-l,u=0;u<o;++u)r.putByte(54),n.putByte(92);e=a,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(s){t.update(s)},i.getMac=function(){var s=t.digest().bytes();return t.start(),t.update(n),t.update(s),t.digest()},i.digest=i.getMac,i};var ur=we,Jc=ur.md5=ur.md5||{};ur.md.md5=ur.md.algorithms.md5=Jc;Jc.create=function(){Qc||Z1();var e=null,t=ur.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=ur.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=ur.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),zu(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=ur.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(Ua.substr(0,n.blockLength-a));for(var o,u=0,l=n.fullMessageLength.length-1;l>=0;--l)o=n.fullMessageLength[l]*8+u,u=o/4294967296>>>0,i.putInt32Le(o>>>0);var c={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};zu(c,r,i);var f=ur.util.createBuffer();return f.putInt32Le(c.h0),f.putInt32Le(c.h1),f.putInt32Le(c.h2),f.putInt32Le(c.h3),f},n};var Ua=null,es=null,fi=null,Rn=null,Qc=!1;function Z1(){Ua=String.fromCharCode(128),Ua+=ur.util.fillString(String.fromCharCode(0),64),es=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],fi=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],Rn=new Array(64);for(var e=0;e<64;++e)Rn[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);Qc=!0}function zu(e,t,r){for(var n,i,s,a,o,u,l,c,f=r.length();f>=64;){for(i=e.h0,s=e.h1,a=e.h2,o=e.h3,c=0;c<16;++c)t[c]=r.getInt32Le(),u=o^s&(a^o),n=i+u+Rn[c]+t[c],l=fi[c],i=o,o=a,a=s,s+=n<<l|n>>>32-l;for(;c<32;++c)u=a^o&(s^a),n=i+u+Rn[c]+t[es[c]],l=fi[c],i=o,o=a,a=s,s+=n<<l|n>>>32-l;for(;c<48;++c)u=s^a^o,n=i+u+Rn[c]+t[es[c]],l=fi[c],i=o,o=a,a=s,s+=n<<l|n>>>32-l;for(;c<64;++c)u=a^(s|~o),n=i+u+Rn[c]+t[es[c]],l=fi[c],i=o,o=a,a=s,s+=n<<l|n>>>32-l;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+a|0,e.h3=e.h3+o|0,f-=64}}var Ss=we,Yc=Ss.pem=Ss.pem||{};Yc.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=qi(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=qi(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=qi(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=qi(e.headers[i]);return e.procType&&(r+=`\r
`),r+=Ss.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};Yc.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(e),!!s;){var a=s[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var o={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Ss.util.decode64(s[3])};if(t.push(o),!!s[2]){for(var u=s[2].split(i),l=0;s&&l<u.length;){for(var c=u[l].replace(/\s+$/,""),f=l+1;f<u.length;++f){var d=u[f];if(!/\s/.test(d[0]))break;c+=d,l=f}if(s=c.match(n),s){for(var p={name:s[1],values:[]},g=s[2].split(","),y=0;y<g.length;++y)p.values.push(eb(g[y]));if(o.procType)if(!o.contentDomain&&p.name==="Content-Domain")o.contentDomain=g[0]||"";else if(!o.dekInfo&&p.name==="DEK-Info"){if(p.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:g[0],parameters:g[1]||null}}else o.headers.push(p);else{if(p.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(p.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:g[0],type:g[1]}}}++l}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function qi(e){for(var t=e.name+": ",r=[],n=function(u,l){return" "+l},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var s=0,a=-1,i=0;i<t.length;++i,++s)if(s>65&&a!==-1){var o=t[a];o===","?(++a,t=t.substr(0,a)+`\r
 `+t.substr(a)):t=t.substr(0,a)+`\r
`+o+t.substr(a+1),s=i-a-1,a=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(a=i);return t}function eb(e){return e.replace(/^\s+/,"")}var st=we;st.des=st.des||{};st.des.startEncrypting=function(e,t,r,n){var i=zs({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};st.des.createEncryptionCipher=function(e,t){return zs({key:e,output:null,decrypt:!1,mode:t})};st.des.startDecrypting=function(e,t,r,n){var i=zs({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};st.des.createDecryptionCipher=function(e,t){return zs({key:e,output:null,decrypt:!0,mode:t})};st.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return Wu(r._keys,n,i,!1)},decrypt:function(n,i){return Wu(r._keys,n,i,!0)}}}),r._init=!1};st.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=st.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=lb(t),this._init=!0}};wr("DES-ECB",st.cipher.modes.ecb);wr("DES-CBC",st.cipher.modes.cbc);wr("DES-CFB",st.cipher.modes.cfb);wr("DES-OFB",st.cipher.modes.ofb);wr("DES-CTR",st.cipher.modes.ctr);wr("3DES-ECB",st.cipher.modes.ecb);wr("3DES-CBC",st.cipher.modes.cbc);wr("3DES-CFB",st.cipher.modes.cfb);wr("3DES-OFB",st.cipher.modes.ofb);wr("3DES-CTR",st.cipher.modes.ctr);function wr(e,t){var r=function(){return new st.des.Algorithm(e,t)};st.cipher.registerAlgorithm(e,r)}var tb=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],rb=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],nb=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],ib=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],sb=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],ab=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],ob=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],ub=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function lb(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],c=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=e.length()>8?3:1,T=[],x=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],k=0,v,_=0;_<y;_++){var w=e.getInt32(),I=e.getInt32();v=(w>>>4^I)&252645135,I^=v,w^=v<<4,v=(I>>>-16^w)&65535,w^=v,I^=v<<-16,v=(w>>>2^I)&858993459,I^=v,w^=v<<2,v=(I>>>-16^w)&65535,w^=v,I^=v<<-16,v=(w>>>1^I)&1431655765,I^=v,w^=v<<1,v=(I>>>8^w)&16711935,w^=v,I^=v<<8,v=(w>>>1^I)&1431655765,I^=v,w^=v<<1,v=w<<8|I>>>20&240,w=I<<24|I<<8&16711680|I>>>8&65280|I>>>24&240,I=v;for(var B=0;B<x.length;++B){x[B]?(w=w<<2|w>>>26,I=I<<2|I>>>26):(w=w<<1|w>>>27,I=I<<1|I>>>27),w&=-15,I&=-15;var M=t[w>>>28]|r[w>>>24&15]|n[w>>>20&15]|i[w>>>16&15]|s[w>>>12&15]|a[w>>>8&15]|o[w>>>4&15],H=u[I>>>28]|l[I>>>24&15]|c[I>>>20&15]|f[I>>>16&15]|d[I>>>12&15]|p[I>>>8&15]|g[I>>>4&15];v=(H>>>16^M)&65535,T[k++]=M^v,T[k++]=H^v<<16}}return T}function Wu(e,t,r,n){var i=e.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=t[0],u=t[1];a=(o>>>4^u)&252645135,u^=a,o^=a<<4,a=(o>>>16^u)&65535,u^=a,o^=a<<16,a=(u>>>2^o)&858993459,o^=a,u^=a<<2,a=(u>>>8^o)&16711935,o^=a,u^=a<<8,a=(o>>>1^u)&1431655765,u^=a,o^=a<<1,o=o<<1|o>>>31,u=u<<1|u>>>31;for(var l=0;l<i;l+=3){for(var c=s[l+1],f=s[l+2],d=s[l];d!=c;d+=f){var p=u^e[d],g=(u>>>4|u<<28)^e[d+1];a=o,o=u,u=a^(rb[p>>>24&63]|ib[p>>>16&63]|ab[p>>>8&63]|ub[p&63]|tb[g>>>24&63]|nb[g>>>16&63]|sb[g>>>8&63]|ob[g&63])}a=o,o=u,u=a}o=o>>>1|o<<31,u=u>>>1|u<<31,a=(o>>>1^u)&1431655765,u^=a,o^=a<<1,a=(u>>>8^o)&16711935,o^=a,u^=a<<8,a=(u>>>2^o)&858993459,o^=a,u^=a<<2,a=(o>>>16^u)&65535,u^=a,o^=a<<16,a=(o>>>4^u)&252645135,u^=a,o^=a<<4,r[0]=o,r[1]=u}function zs(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=st.cipher.createDecipher(r,e.key):n=st.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,a){var o=null;a instanceof st.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(n,a)},n}const cb={},fb=Object.freeze(Object.defineProperty({__proto__:null,default:cb},Symbol.toStringTag,{value:"Module"})),Oo=T1(fb);var Ot=we,hb=Ot.pkcs5=Ot.pkcs5||{},xr;Ot.util.isNodejs&&!Ot.options.usePureJavaScript&&(xr=Oo);Ot.pbkdf2=hb.pbkdf2=function(e,t,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),Ot.util.isNodejs&&!Ot.options.usePureJavaScript&&xr.pbkdf2&&(i===null||typeof i!="object")&&(xr.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?xr.pbkdf2Sync.length===4?xr.pbkdf2(e,t,r,n,function(v,_){if(v)return s(v);s(null,_.toString("binary"))}):xr.pbkdf2(e,t,r,n,i,function(v,_){if(v)return s(v);s(null,_.toString("binary"))}):xr.pbkdf2Sync.length===4?xr.pbkdf2Sync(e,t,r,n).toString("binary"):xr.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Ot.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Ot.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var o=new Error("Derived key is too long.");if(s)return s(o);throw o}var u=Math.ceil(n/a),l=n-(u-1)*a,c=Ot.hmac.create();c.start(i,e);var f="",d,p,g;if(!s){for(var y=1;y<=u;++y){c.start(null,null),c.update(t),c.update(Ot.util.int32ToBytes(y)),d=g=c.digest().getBytes();for(var T=2;T<=r;++T)c.start(null,null),c.update(g),p=c.digest().getBytes(),d=Ot.util.xorBytes(d,p,a),g=p;f+=y<u?d:d.substr(0,l)}return f}var y=1,T;function x(){if(y>u)return s(null,f);c.start(null,null),c.update(t),c.update(Ot.util.int32ToBytes(y)),d=g=c.digest().getBytes(),T=2,k()}function k(){if(T<=r)return c.start(null,null),c.update(g),p=c.digest().getBytes(),d=Ot.util.xorBytes(d,p,a),g=p,++T,Ot.util.setImmediate(k);f+=y<u?d:d.substr(0,l),++y,x()}x()};var lr=we,Xc=lr.sha256=lr.sha256||{};lr.md.sha256=lr.md.algorithms.sha256=Xc;Xc.create=function(){Zc||db();var e=null,t=lr.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=lr.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=lr.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),Ju(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=lr.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(Oa.substr(0,n.blockLength-a));for(var o,u,l=n.fullMessageLength[0]*8,c=0;c<n.fullMessageLength.length-1;++c)o=n.fullMessageLength[c+1]*8,u=o/4294967296>>>0,l+=u,i.putInt32(l>>>0),l=o>>>0;i.putInt32(l);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};Ju(f,r,i);var d=lr.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d.putInt32(f.h5),d.putInt32(f.h6),d.putInt32(f.h7),d},n};var Oa=null,Zc=!1,ef=null;function db(){Oa=String.fromCharCode(128),Oa+=lr.util.fillString(String.fromCharCode(0),64),ef=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Zc=!0}function Ju(e,t,r){for(var n,i,s,a,o,u,l,c,f,d,p,g,y,T,x,k=r.length();k>=64;){for(l=0;l<16;++l)t[l]=r.getInt32();for(;l<64;++l)n=t[l-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[l]=n+t[l-7]+i+t[l-16]|0;for(c=e.h0,f=e.h1,d=e.h2,p=e.h3,g=e.h4,y=e.h5,T=e.h6,x=e.h7,l=0;l<64;++l)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),o=T^g&(y^T),s=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),u=c&f|d&(c^f),n=x+a+o+ef[l]+t[l],i=s+u,x=T,T=y,y=g,g=p+n>>>0,p=d,d=f,f=c,c=n+i>>>0;e.h0=e.h0+c|0,e.h1=e.h1+f|0,e.h2=e.h2+d|0,e.h3=e.h3+p|0,e.h4=e.h4+g|0,e.h5=e.h5+y|0,e.h6=e.h6+T|0,e.h7=e.h7+x|0,k-=64}}var ar=we,ts=null;ar.util.isNodejs&&!ar.options.usePureJavaScript&&!process.versions["node-webkit"]&&(ts=Oo);var pb=ar.prng=ar.prng||{};pb.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(l,c){if(!c)return t.generateSync(l);var f=t.plugin.cipher,d=t.plugin.increment,p=t.plugin.formatKey,g=t.plugin.formatSeed,y=ar.util.createBuffer();t.key=null,T();function T(x){if(x)return c(x);if(y.length()>=l)return c(null,y.getBytes(l));if(t.generated>1048575&&(t.key=null),t.key===null)return ar.util.nextTick(function(){s(T)});var k=f(t.key,t.seed);t.generated+=k.length,y.putBytes(k),t.key=p(f(t.key,d(t.seed))),t.seed=g(f(t.key,t.seed)),ar.util.setImmediate(T)}},t.generateSync=function(l){var c=t.plugin.cipher,f=t.plugin.increment,d=t.plugin.formatKey,p=t.plugin.formatSeed;t.key=null;for(var g=ar.util.createBuffer();g.length()<l;){t.generated>1048575&&(t.key=null),t.key===null&&a();var y=c(t.key,t.seed);t.generated+=y.length,g.putBytes(y),t.key=d(c(t.key,f(t.seed))),t.seed=p(c(t.key,t.seed))}return g.getBytes(l)};function s(l){if(t.pools[0].messageLength>=32)return o(),l();var c=32-t.pools[0].messageLength<<5;t.seedFile(c,function(f,d){if(f)return l(f);t.collect(d),o(),l()})}function a(){if(t.pools[0].messageLength>=32)return o();var l=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(l)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var l=t.plugin.md.create();l.update(t.keyBytes);for(var c=1,f=0;f<32;++f)t.reseeds%c===0&&(l.update(t.pools[f].digest().getBytes()),t.pools[f].start()),c=c<<1;t.keyBytes=l.digest().getBytes(),l.start(),l.update(t.keyBytes);var d=l.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(d),t.generated=0}function u(l){var c=null,f=ar.util.globalScope,d=f.crypto||f.msCrypto;d&&d.getRandomValues&&(c=function(w){return d.getRandomValues(w)});var p=ar.util.createBuffer();if(c)for(;p.length()<l;){var g=Math.max(1,Math.min(l-p.length(),65536)/4),y=new Uint32Array(Math.floor(g));try{c(y);for(var T=0;T<y.length;++T)p.putInt32(y[T])}catch(w){if(!(typeof QuotaExceededError<"u"&&w instanceof QuotaExceededError))throw w}}if(p.length()<l)for(var x,k,v,_=Math.floor(Math.random()*65536);p.length()<l;){k=16807*(_&65535),x=16807*(_>>16),k+=(x&32767)<<16,k+=x>>15,k=(k&2147483647)+(k>>31),_=k&4294967295;for(var T=0;T<3;++T)v=_>>>(T<<3),v^=Math.floor(Math.random()*256),p.putByte(v&255)}return p.getBytes(l)}return ts?(t.seedFile=function(l,c){ts.randomBytes(l,function(f,d){if(f)return c(f);c(null,d.toString())})},t.seedFileSync=function(l){return ts.randomBytes(l).toString()}):(t.seedFile=function(l,c){try{c(null,u(l))}catch(f){c(f)}},t.seedFileSync=u),t.collect=function(l){for(var c=l.length,f=0;f<c;++f)t.pools[t.pool].update(l.substr(f,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(l,c){for(var f="",d=0;d<c;d+=8)f+=String.fromCharCode(l>>d&255);t.collect(f)},t.registerWorker=function(l){if(l===self)t.seedFile=function(f,d){function p(g){var y=g.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",p),d(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:f}}})};else{var c=function(f){var d=f.data;d.forge&&d.forge.prng&&t.seedFile(d.forge.prng.needed,function(p,g){l.postMessage({forge:{prng:{err:p,bytes:g}}})})};l.addEventListener("message",c)}},t};var vt=we;(function(){if(vt.random&&vt.random.getBytes){vt.random;return}(function(e){var t={},r=new Array(4),n=vt.util.createBuffer();t.formatKey=function(f){var d=vt.util.createBuffer(f);return f=new Array(4),f[0]=d.getInt32(),f[1]=d.getInt32(),f[2]=d.getInt32(),f[3]=d.getInt32(),vt.aes._expandKey(f,!1)},t.formatSeed=function(f){var d=vt.util.createBuffer(f);return f=new Array(4),f[0]=d.getInt32(),f[1]=d.getInt32(),f[2]=d.getInt32(),f[3]=d.getInt32(),f},t.cipher=function(f,d){return vt.aes._updateBlock(f,d,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(f){return++f[3],f},t.md=vt.md.sha256;function i(){var f=vt.prng.create(t);return f.getBytes=function(d,p){return f.generate(d,p)},f.getBytesSync=function(d){return f.generate(d)},f}var s=i(),a=null,o=vt.util.globalScope,u=o.crypto||o.msCrypto;if(u&&u.getRandomValues&&(a=function(f){return u.getRandomValues(f)}),vt.options.usePureJavaScript||!vt.util.isNodejs&&!a){if(s.collectInt(+new Date,32),typeof navigator<"u"){var l="";for(var c in navigator)try{typeof navigator[c]=="string"&&(l+=navigator[c])}catch{}s.collect(l),l=null}e&&(e().mousemove(function(f){s.collectInt(f.clientX,16),s.collectInt(f.clientY,16)}),e().keypress(function(f){s.collectInt(f.charCode,8)}))}if(!vt.random)vt.random=s;else for(var c in s)vt.random[c]=s[c];vt.random.createInstance=i,vt.random})(typeof jQuery<"u"?jQuery:null)})();var Ft=we,ha=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Qu=[1,2,3,5],gb=function(e,t){return e<<t&65535|(e&65535)>>16-t},mb=function(e,t){return(e&65535)>>t|e<<16-t&65535};Ft.rc2=Ft.rc2||{};Ft.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Ft.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,s=Math.ceil(i/8),a=255>>(i&7),o;for(o=n;o<128;o++)r.putByte(ha[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-s,ha[r.at(128-s)&a]),o=127-s;o>=0;o--)r.setAt(o,ha[r.at(o+1)^r.at(o+s)]);return r};var tf=function(e,t,r){var n=!1,i=null,s=null,a=null,o,u,l,c,f=[];for(e=Ft.rc2.expandKey(e,t),l=0;l<64;l++)f.push(e.getInt16Le());r?(o=function(g){for(l=0;l<4;l++)g[l]+=f[c]+(g[(l+3)%4]&g[(l+2)%4])+(~g[(l+3)%4]&g[(l+1)%4]),g[l]=gb(g[l],Qu[l]),c++},u=function(g){for(l=0;l<4;l++)g[l]+=f[g[(l+3)%4]&63]}):(o=function(g){for(l=3;l>=0;l--)g[l]=mb(g[l],Qu[l]),g[l]-=f[c]+(g[(l+3)%4]&g[(l+2)%4])+(~g[(l+3)%4]&g[(l+1)%4]),c--},u=function(g){for(l=3;l>=0;l--)g[l]-=f[g[(l+3)%4]&63]});var d=function(g){var y=[];for(l=0;l<4;l++){var T=i.getInt16Le();a!==null&&(r?T^=a.getInt16Le():a.putInt16Le(T)),y.push(T&65535)}c=r?0:63;for(var x=0;x<g.length;x++)for(var k=0;k<g[x][0];k++)g[x][1](y);for(l=0;l<4;l++)a!==null&&(r?a.putInt16Le(y[l]):y[l]^=a.getInt16Le()),s.putInt16Le(y[l])},p=null;return p={start:function(g,y){g&&typeof g=="string"&&(g=Ft.util.createBuffer(g)),n=!1,i=Ft.util.createBuffer(),s=y||new Ft.util.createBuffer,a=g,p.output=s},update:function(g){for(n||i.putBuffer(g);i.length()>=8;)d([[5,o],[1,u],[6,o],[1,u],[5,o]])},finish:function(g){var y=!0;if(r)if(g)y=g(8,i,!r);else{var T=i.length()===8?8:8-i.length();i.fillWithByte(T,T)}if(y&&(n=!0,p.update()),!r&&(y=i.length()===0,y))if(g)y=g(8,s,!r);else{var x=s.length(),k=s.at(x-1);k>x?y=!1:s.truncate(k)}return y}},p};Ft.rc2.startEncrypting=function(e,t,r){var n=Ft.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Ft.rc2.createEncryptionCipher=function(e,t){return tf(e,t,!0)};Ft.rc2.startDecrypting=function(e,t,r){var n=Ft.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Ft.rc2.createDecryptionCipher=function(e,t){return tf(e,t,!1)};var Ma=we;Ma.jsbn=Ma.jsbn||{};var Ir;function W(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}Ma.jsbn.BigInteger=W;function Oe(){return new W(null)}function yb(e,t,r,n,i,s){for(;--s>=0;){var a=t*this.data[e++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}function vb(e,t,r,n,i,s){for(var a=t&32767,o=t>>15;--s>=0;){var u=this.data[e]&32767,l=this.data[e++]>>15,c=o*u+l*a;u=a*u+((c&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(c>>>15)+o*l+(i>>>30),r.data[n++]=u&1073741823}return i}function Yu(e,t,r,n,i,s){for(var a=t&16383,o=t>>14;--s>=0;){var u=this.data[e]&16383,l=this.data[e++]>>14,c=o*u+l*a;u=a*u+((c&16383)<<14)+r.data[n]+i,i=(u>>28)+(c>>14)+o*l,r.data[n++]=u&268435455}return i}typeof navigator>"u"?(W.prototype.am=Yu,Ir=28):navigator.appName=="Microsoft Internet Explorer"?(W.prototype.am=vb,Ir=30):navigator.appName!="Netscape"?(W.prototype.am=yb,Ir=26):(W.prototype.am=Yu,Ir=28);W.prototype.DB=Ir;W.prototype.DM=(1<<Ir)-1;W.prototype.DV=1<<Ir;var Mo=52;W.prototype.FV=Math.pow(2,Mo);W.prototype.F1=Mo-Ir;W.prototype.F2=2*Ir-Mo;var bb="0123456789abcdefghijklmnopqrstuvwxyz",Ws=new Array,ei,Jt;ei="0".charCodeAt(0);for(Jt=0;Jt<=9;++Jt)Ws[ei++]=Jt;ei="a".charCodeAt(0);for(Jt=10;Jt<36;++Jt)Ws[ei++]=Jt;ei="A".charCodeAt(0);for(Jt=10;Jt<36;++Jt)Ws[ei++]=Jt;function Xu(e){return bb.charAt(e)}function rf(e,t){var r=Ws[e.charCodeAt(t)];return r==null?-1:r}function Cb(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function Eb(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function jr(e){var t=Oe();return t.fromInt(e),t}function Sb(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var a=r==8?e[n]&255:rf(e,n);if(a<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&W.ZERO.subTo(this,this)}function _b(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function wb(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,s="",a=this.t,o=this.DB-a*this.DB%t;if(a-- >0)for(o<this.DB&&(n=this.data[a]>>o)>0&&(i=!0,s=Xu(n));a>=0;)o<t?(n=(this.data[a]&(1<<o)-1)<<t-o,n|=this.data[--a]>>(o+=this.DB-t)):(n=this.data[a]>>(o-=t)&r,o<=0&&(o+=this.DB,--a)),n>0&&(i=!0),i&&(s+=Xu(n));return i?s:"0"}function Tb(){var e=Oe();return W.ZERO.subTo(this,e),e}function xb(){return this.s<0?this.negate():this}function Ab(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function Js(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function Ib(){return this.t<=0?0:this.DB*(this.t-1)+Js(this.data[this.t-1]^this.s&this.DM)}function Bb(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function kb(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function Rb(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+s+1]=this.data[o]>>n|a,a=(this.data[o]&i)<<r;for(o=s-1;o>=0;--o)t.data[o]=0;t.data[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()}function Nb(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)t.data[a-r-1]|=(this.data[a]&s)<<i,t.data[a-r]=this.data[a]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}function Db(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function Lb(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&W.ZERO.subTo(t,t)}function Ub(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function Ob(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Oe());var s=Oe(),a=this.s,o=e.s,u=this.DB-Js(n.data[n.t-1]);u>0?(n.lShiftTo(u,s),i.lShiftTo(u,r)):(n.copyTo(s),i.copyTo(r));var l=s.t,c=s.data[l-1];if(c!=0){var f=c*(1<<this.F1)+(l>1?s.data[l-2]>>this.F2:0),d=this.FV/f,p=(1<<this.F1)/f,g=1<<this.F2,y=r.t,T=y-l,x=t==null?Oe():t;for(s.dlShiftTo(T,x),r.compareTo(x)>=0&&(r.data[r.t++]=1,r.subTo(x,r)),W.ONE.dlShiftTo(l,x),x.subTo(s,s);s.t<l;)s.data[s.t++]=0;for(;--T>=0;){var k=r.data[--y]==c?this.DM:Math.floor(r.data[y]*d+(r.data[y-1]+g)*p);if((r.data[y]+=s.am(0,k,r,T,0,l))<k)for(s.dlShiftTo(T,x),r.subTo(x,r);r.data[y]<--k;)r.subTo(x,r)}t!=null&&(r.drShiftTo(l,t),a!=o&&W.ZERO.subTo(t,t)),r.t=l,r.clamp(),u>0&&r.rShiftTo(u,r),a<0&&W.ZERO.subTo(r,r)}}}function Mb(e){var t=Oe();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(W.ZERO)>0&&e.subTo(t,t),t}function Sn(e){this.m=e}function Pb(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function Fb(e){return e}function Vb(e){e.divRemTo(this.m,null,e)}function Hb(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function Kb(e,t){e.squareTo(t),this.reduce(t)}Sn.prototype.convert=Pb;Sn.prototype.revert=Fb;Sn.prototype.reduce=Vb;Sn.prototype.mulTo=Hb;Sn.prototype.sqrTo=Kb;function qb(){if(this.t<1)return 0;var e=this.data[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function _n(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function $b(e){var t=Oe();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(W.ZERO)>0&&this.m.subTo(t,t),t}function Gb(e){var t=Oe();return e.copyTo(t),this.reduce(t),t}function jb(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function zb(e,t){e.squareTo(t),this.reduce(t)}function Wb(e,t,r){e.multiplyTo(t,r),this.reduce(r)}_n.prototype.convert=$b;_n.prototype.revert=Gb;_n.prototype.reduce=jb;_n.prototype.mulTo=Wb;_n.prototype.sqrTo=zb;function Jb(){return(this.t>0?this.data[0]&1:this.s)==0}function Qb(e,t){if(e>4294967295||e<1)return W.ONE;var r=Oe(),n=Oe(),i=t.convert(this),s=Js(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else{var a=r;r=n,n=a}return t.revert(r)}function Yb(e,t){var r;return e<256||t.isEven()?r=new Sn(t):r=new _n(t),this.exp(e,r)}W.prototype.copyTo=Cb;W.prototype.fromInt=Eb;W.prototype.fromString=Sb;W.prototype.clamp=_b;W.prototype.dlShiftTo=Bb;W.prototype.drShiftTo=kb;W.prototype.lShiftTo=Rb;W.prototype.rShiftTo=Nb;W.prototype.subTo=Db;W.prototype.multiplyTo=Lb;W.prototype.squareTo=Ub;W.prototype.divRemTo=Ob;W.prototype.invDigit=qb;W.prototype.isEven=Jb;W.prototype.exp=Qb;W.prototype.toString=wb;W.prototype.negate=Tb;W.prototype.abs=xb;W.prototype.compareTo=Ab;W.prototype.bitLength=Ib;W.prototype.mod=Mb;W.prototype.modPowInt=Yb;W.ZERO=jr(0);W.ONE=jr(1);function Xb(){var e=Oe();return this.copyTo(e),e}function Zb(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function eC(){return this.t==0?this.s:this.data[0]<<24>>24}function tC(){return this.t==0?this.s:this.data[0]<<16>>16}function rC(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function nC(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function iC(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=jr(r),i=Oe(),s=Oe(),a="";for(this.divRemTo(n,i,s);i.signum()>0;)a=(r+s.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(e)+a}function sC(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,a=0,o=0;o<e.length;++o){var u=rf(e,o);if(u<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}a=t*a+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(a,0)),i&&W.ZERO.subTo(this,this)}function aC(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(W.ONE.shiftLeft(e-1),Po,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(W.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function oC(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function uC(e){return this.compareTo(e)==0}function lC(e){return this.compareTo(e)<0?this:e}function cC(e){return this.compareTo(e)>0?this:e}function fC(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function hC(e,t){return e&t}function dC(e){var t=Oe();return this.bitwiseTo(e,hC,t),t}function Po(e,t){return e|t}function pC(e){var t=Oe();return this.bitwiseTo(e,Po,t),t}function nf(e,t){return e^t}function gC(e){var t=Oe();return this.bitwiseTo(e,nf,t),t}function sf(e,t){return e&~t}function mC(e){var t=Oe();return this.bitwiseTo(e,sf,t),t}function yC(){for(var e=Oe(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function vC(e){var t=Oe();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function bC(e){var t=Oe();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function CC(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function EC(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+CC(this.data[e]);return this.s<0?this.t*this.DB:-1}function SC(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function _C(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=SC(this.data[r]^t);return e}function wC(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function TC(e,t){var r=W.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function xC(e){return this.changeBit(e,Po)}function AC(e){return this.changeBit(e,sf)}function IC(e){return this.changeBit(e,nf)}function BC(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function kC(e){var t=Oe();return this.addTo(e,t),t}function RC(e){var t=Oe();return this.subTo(e,t),t}function NC(e){var t=Oe();return this.multiplyTo(e,t),t}function DC(e){var t=Oe();return this.divRemTo(e,t,null),t}function LC(e){var t=Oe();return this.divRemTo(e,null,t),t}function UC(e){var t=Oe(),r=Oe();return this.divRemTo(e,t,r),new Array(t,r)}function OC(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function MC(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Oi(){}function af(e){return e}function PC(e,t,r){e.multiplyTo(t,r)}function FC(e,t){e.squareTo(t)}Oi.prototype.convert=af;Oi.prototype.revert=af;Oi.prototype.mulTo=PC;Oi.prototype.sqrTo=FC;function VC(e){return this.exp(e,new Oi)}function HC(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function KC(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function ti(e){this.r2=Oe(),this.q3=Oe(),W.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function qC(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Oe();return e.copyTo(t),this.reduce(t),t}function $C(e){return e}function GC(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function jC(e,t){e.squareTo(t),this.reduce(t)}function zC(e,t,r){e.multiplyTo(t,r),this.reduce(r)}ti.prototype.convert=qC;ti.prototype.revert=$C;ti.prototype.reduce=GC;ti.prototype.mulTo=zC;ti.prototype.sqrTo=jC;function WC(e,t){var r=e.bitLength(),n,i=jr(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new Sn(t):t.isEven()?s=new ti(t):s=new _n(t);var a=new Array,o=3,u=n-1,l=(1<<n)-1;if(a[1]=s.convert(this),n>1){var c=Oe();for(s.sqrTo(a[1],c);o<=l;)a[o]=Oe(),s.mulTo(c,a[o-2],a[o]),o+=2}var f=e.t-1,d,p=!0,g=Oe(),y;for(r=Js(e.data[f])-1;f>=0;){for(r>=u?d=e.data[f]>>r-u&l:(d=(e.data[f]&(1<<r+1)-1)<<u-r,f>0&&(d|=e.data[f-1]>>this.DB+r-u)),o=n;(d&1)==0;)d>>=1,--o;if((r-=o)<0&&(r+=this.DB,--f),p)a[d].copyTo(i),p=!1;else{for(;o>1;)s.sqrTo(i,g),s.sqrTo(g,i),o-=2;o>0?s.sqrTo(i,g):(y=i,i=g,g=y),s.mulTo(g,a[d],i)}for(;f>=0&&(e.data[f]&1<<r)==0;)s.sqrTo(i,g),y=i,i=g,g=y,--r<0&&(r=this.DB-1,--f)}return s.revert(i)}function JC(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function QC(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function YC(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return W.ZERO;for(var r=e.clone(),n=this.clone(),i=jr(1),s=jr(0),a=jr(0),o=jr(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(a,i),s.subTo(o,s)):(n.subTo(r,n),t&&a.subTo(i,a),o.subTo(s,o))}if(n.compareTo(W.ONE)!=0)return W.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var tr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],XC=(1<<26)/tr[tr.length-1];function ZC(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=tr[tr.length-1]){for(t=0;t<tr.length;++t)if(r.data[0]==tr[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<tr.length;){for(var n=tr[t],i=t+1;i<tr.length&&n<XC;)n*=tr[i++];for(n=r.modInt(n);t<i;)if(n%tr[t++]==0)return!1}return r.millerRabin(e)}function eE(e){var t=this.subtract(W.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=tE(),s,a=0;a<e;++a){do s=new W(this.bitLength(),i);while(s.compareTo(W.ONE)<=0||s.compareTo(t)>=0);var o=s.modPow(n,this);if(o.compareTo(W.ONE)!=0&&o.compareTo(t)!=0){for(var u=1;u++<r&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(W.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function tE(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}W.prototype.chunkSize=rC;W.prototype.toRadix=iC;W.prototype.fromRadix=sC;W.prototype.fromNumber=aC;W.prototype.bitwiseTo=fC;W.prototype.changeBit=TC;W.prototype.addTo=BC;W.prototype.dMultiply=OC;W.prototype.dAddOffset=MC;W.prototype.multiplyLowerTo=HC;W.prototype.multiplyUpperTo=KC;W.prototype.modInt=QC;W.prototype.millerRabin=eE;W.prototype.clone=Xb;W.prototype.intValue=Zb;W.prototype.byteValue=eC;W.prototype.shortValue=tC;W.prototype.signum=nC;W.prototype.toByteArray=oC;W.prototype.equals=uC;W.prototype.min=lC;W.prototype.max=cC;W.prototype.and=dC;W.prototype.or=pC;W.prototype.xor=gC;W.prototype.andNot=mC;W.prototype.not=yC;W.prototype.shiftLeft=vC;W.prototype.shiftRight=bC;W.prototype.getLowestSetBit=EC;W.prototype.bitCount=_C;W.prototype.testBit=wC;W.prototype.setBit=xC;W.prototype.clearBit=AC;W.prototype.flipBit=IC;W.prototype.add=kC;W.prototype.subtract=RC;W.prototype.multiply=NC;W.prototype.divide=DC;W.prototype.remainder=LC;W.prototype.divideAndRemainder=UC;W.prototype.modPow=WC;W.prototype.modInverse=YC;W.prototype.pow=VC;W.prototype.gcd=JC;W.prototype.isProbablePrime=ZC;var cr=we,of=cr.sha1=cr.sha1||{};cr.md.sha1=cr.md.algorithms.sha1=of;of.create=function(){uf||rE();var e=null,t=cr.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=cr.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=cr.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),Zu(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=cr.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(Pa.substr(0,n.blockLength-a));for(var o,u,l=n.fullMessageLength[0]*8,c=0;c<n.fullMessageLength.length-1;++c)o=n.fullMessageLength[c+1]*8,u=o/4294967296>>>0,l+=u,i.putInt32(l>>>0),l=o>>>0;i.putInt32(l);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};Zu(f,r,i);var d=cr.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d},n};var Pa=null,uf=!1;function rE(){Pa=String.fromCharCode(128),Pa+=cr.util.fillString(String.fromCharCode(0),64),uf=!0}function Zu(e,t,r){for(var n,i,s,a,o,u,l,c,f=r.length();f>=64;){for(i=e.h0,s=e.h1,a=e.h2,o=e.h3,u=e.h4,c=0;c<16;++c)n=r.getInt32(),t[c]=n,l=o^s&(a^o),n=(i<<5|i>>>27)+l+u+1518500249+n,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<20;++c)n=t[c-3]^t[c-8]^t[c-14]^t[c-16],n=n<<1|n>>>31,t[c]=n,l=o^s&(a^o),n=(i<<5|i>>>27)+l+u+1518500249+n,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<32;++c)n=t[c-3]^t[c-8]^t[c-14]^t[c-16],n=n<<1|n>>>31,t[c]=n,l=s^a^o,n=(i<<5|i>>>27)+l+u+1859775393+n,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<40;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,l=s^a^o,n=(i<<5|i>>>27)+l+u+1859775393+n,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<60;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,l=s&a|o&(s^a),n=(i<<5|i>>>27)+l+u+2400959708+n,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<80;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,l=s^a^o,n=(i<<5|i>>>27)+l+u+3395469782+n,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+a|0,e.h3=e.h3+o|0,e.h4=e.h4+u|0,f-=64}}var fr=we,lf=fr.pkcs1=fr.pkcs1||{};lf.encode_rsa_oaep=function(e,t,r){var n,i,s,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),s?s.start():s=fr.md.sha1.create(),a||(a=s);var o=Math.ceil(e.n.bitLength()/8),u=o-2*s.digestLength-2;if(t.length>u){var l=new Error("RSAES-OAEP input message length is too long.");throw l.length=t.length,l.maxLength=u,l}n||(n=""),s.update(n,"raw");for(var c=s.digest(),f="",d=u-t.length,p=0;p<d;p++)f+="\0";var g=c.getBytes()+f+""+t;if(!i)i=fr.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var l=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw l.seedLength=i.length,l.digestLength=s.digestLength,l}var y=_s(i,o-s.digestLength-1,a),T=fr.util.xorBytes(g,y,g.length),x=_s(T,s.digestLength,a),k=fr.util.xorBytes(i,x,i.length);return"\0"+k+T};lf.decode_rsa_oaep=function(e,t,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a){var T=new Error("RSAES-OAEP encoded message length is invalid.");throw T.length=t.length,T.expectedLength=a,T}if(i===void 0?i=fr.md.sha1.create():i.start(),s||(s=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var o=i.digest().getBytes(),u=t.charAt(0),l=t.substring(1,i.digestLength+1),c=t.substring(1+i.digestLength),f=_s(c,i.digestLength,s),d=fr.util.xorBytes(l,f,l.length),p=_s(d,a-i.digestLength-1,s),g=fr.util.xorBytes(c,p,c.length),y=g.substring(0,i.digestLength),T=u!=="\0",x=0;x<i.digestLength;++x)T|=o.charAt(x)!==y.charAt(x);for(var k=1,v=i.digestLength,_=i.digestLength;_<g.length;_++){var w=g.charCodeAt(_),I=w&1^1,B=k?65534:0;T|=w&B,k=k&I,v+=k}if(T||g.charCodeAt(v)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(v+1)};function _s(e,t,r){r||(r=fr.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(e+a),n+=r.digest().getBytes()}return n.substring(0,t)}var Mr=we;(function(){if(Mr.prime){Mr.prime;return}var e=Mr.prime=Mr.prime||{},t=Mr.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(f,d){return f|d};e.generateProbablePrime=function(f,d,p){typeof d=="function"&&(p=d,d={}),d=d||{};var g=d.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var y=d.prng||Mr.random,T={nextBytes:function(x){for(var k=y.getBytesSync(x.length),v=0;v<x.length;++v)x[v]=k.charCodeAt(v)}};if(g.name==="PRIMEINC")return s(f,T,g.options,p);throw new Error("Invalid prime generation algorithm: "+g.name)};function s(f,d,p,g){return"workers"in p?u(f,d,p,g):a(f,d,p,g)}function a(f,d,p,g){var y=l(f,d),T=0,x=c(y.bitLength());"millerRabinTests"in p&&(x=p.millerRabinTests);var k=10;"maxBlockTime"in p&&(k=p.maxBlockTime),o(y,f,d,T,x,k,g)}function o(f,d,p,g,y,T,x){var k=+new Date;do{if(f.bitLength()>d&&(f=l(d,p)),f.isProbablePrime(y))return x(null,f);f.dAddOffset(r[g++%8],0)}while(T<0||+new Date-k<T);Mr.util.setImmediate(function(){o(f,d,p,g,y,T,x)})}function u(f,d,p,g){if(typeof Worker>"u")return a(f,d,p,g);var y=l(f,d),T=p.workers,x=p.workLoad||100,k=x*30/8,v=p.workerScript||"forge/prime.worker.js";if(T===-1)return Mr.util.estimateCores(function(w,I){w&&(I=2),T=I-1,_()});_();function _(){T=Math.max(1,T);for(var w=[],I=0;I<T;++I)w[I]=new Worker(v);for(var I=0;I<T;++I)w[I].addEventListener("message",M);var B=!1;function M(H){if(!B){var N=H.data;if(N.found){for(var U=0;U<w.length;++U)w[U].terminate();return B=!0,g(null,new t(N.prime,16))}y.bitLength()>f&&(y=l(f,d));var K=y.toString(16);H.target.postMessage({hex:K,workLoad:x}),y.dAddOffset(k,0)}}}}function l(f,d){var p=new t(f,d),g=f-1;return p.testBit(g)||p.bitwiseTo(t.ONE.shiftLeft(g),i,p),p.dAddOffset(31-p.mod(n).byteValue(),0),p}function c(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})();var fe=we;if(typeof Ue>"u")var Ue=fe.jsbn.BigInteger;var Fa=fe.util.isNodejs?Oo:null,V=fe.asn1,Qt=fe.util;fe.pki=fe.pki||{};fe.pki.rsa=fe.rsa=fe.rsa||{};var be=fe.pki,nE=[6,4,2,4,2,4,6,2],iE={name:"PrivateKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},sE={name:"RSAPrivateKey",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},aE={name:"RSAPublicKey",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},oE=fe.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},uE={name:"DigestInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:V.Class.UNIVERSAL,type:V.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},lE=function(e){var t;if(e.algorithm in be.oids)t=be.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=V.oidToDer(t).getBytes(),i=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),s=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);s.value.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,n)),s.value.push(V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,""));var a=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(a),V.toDer(i).getBytes()},cf=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(Ue.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(Ue.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new Ue(fe.util.bytesToHex(fe.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(Ue.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var a=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return a=a.multiply(n.modInverse(t.n)).mod(t.n),a};be.rsa.encrypt=function(e,t,r){var n=r,i,s=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=ff(e,t,r)):(i=fe.util.createBuffer(),i.putBytes(e));for(var a=new Ue(i.toHex(),16),o=cf(a,t,n),u=o.toString(16),l=fe.util.createBuffer(),c=s-Math.ceil(u.length/2);c>0;)l.putByte(0),--c;return l.putBytes(fe.util.hexToBytes(u)),l.getBytes()};be.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var a=new Ue(fe.util.createBuffer(e).toHex(),16);if(a.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=cf(a,t,r),u=o.toString(16),l=fe.util.createBuffer(),c=i-Math.ceil(u.length/2);c>0;)l.putByte(0),--c;return l.putBytes(fe.util.hexToBytes(u)),n!==!1?ws(l.getBytes(),t,r):l.getBytes()};be.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||fe.random,i={nextBytes:function(o){for(var u=n.getBytesSync(o.length),l=0;l<o.length;++l)o[l]=u.charCodeAt(l)}},s=r.algorithm||"PRIMEINC",a;if(s==="PRIMEINC")a={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new Ue(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+s);return a};be.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new Ue(null);r.fromInt(30);for(var n=0,i=function(f,d){return f|d},s=+new Date,a,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var u=e.p===null?e.pBits:e.qBits,l=u-1;e.pqState===0?(e.num=new Ue(u,e.rng),e.num.testBit(l)||e.num.bitwiseTo(Ue.ONE.shiftLeft(l),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>u?e.pqState=0:e.num.isProbablePrime(fE(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(nE[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(Ue.ONE).gcd(e.e).compareTo(Ue.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(Ue.ONE),e.q1=e.q.subtract(Ue.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(Ue.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var c=e.e.modInverse(e.phi);e.keys={privateKey:be.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:be.rsa.setPublicKey(e.n,e.e)}}a=+new Date,o+=a-s,s=a}return e.keys!==null};be.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!fe.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(el("generateKeyPair"))return Fa.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,u,l){if(o)return n(o);n(null,{privateKey:be.privateKeyFromPem(l),publicKey:be.publicKeyFromPem(u)})});if(tl("generateKey")&&tl("exportKey"))return Qt.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:nl(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return Qt.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o)}).then(function(o){if(o){var u=be.privateKeyFromAsn1(V.fromDer(fe.util.createBuffer(o)));n(null,{privateKey:u,publicKey:be.setRsaPublicKey(u.n,u.e)})}});if(rl("generateKey")&&rl("exportKey")){var i=Qt.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:nl(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var u=o.target.result,l=Qt.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);l.oncomplete=function(c){var f=c.target.result,d=be.privateKeyFromAsn1(V.fromDer(fe.util.createBuffer(f)));n(null,{privateKey:d,publicKey:be.setRsaPublicKey(d.n,d.e)})},l.onerror=function(c){n(c)}},i.onerror=function(o){n(o)};return}}else if(el("generateKeyPairSync")){var s=Fa.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:be.privateKeyFromPem(s.privateKey),publicKey:be.publicKeyFromPem(s.publicKey)}}}var a=be.rsa.createKeyPairGenerationState(e,t,r);if(!n)return be.rsa.stepKeyPairGenerationState(a,0),a.keys;cE(a,r,n)};be.setRsaPublicKey=be.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,u,l){return ff(o,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,u){return fe.pkcs1.encode_rsa_oaep(u,o,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return be.rsa.encrypt(a,r,!0)},r.verify=function(n,i,s,a){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(u,l){l=ws(l,r,!0);var c=V.fromDer(l,{parseAllBytes:a._parseAllDigestBytes}),f={},d=[];if(!V.validate(c,uE,f,d)){var p=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw p.errors=d,p}var g=V.derToOid(f.algorithmIdentifier);if(!(g===fe.oids.md2||g===fe.oids.md5||g===fe.oids.sha1||g===fe.oids.sha224||g===fe.oids.sha256||g===fe.oids.sha384||g===fe.oids.sha512||g===fe.oids["sha512-224"]||g===fe.oids["sha512-256"])){var p=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw p.oid=g,p}if((g===fe.oids.md2||g===fe.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===f.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(u,l){return l=ws(l,r,!0),u===l}});var o=be.rsa.decrypt(i,r,!0,!1);return s.verify(n,o,r.n.bitLength())},r};be.setRsaPrivateKey=be.rsa.setPrivateKey=function(e,t,r,n,i,s,a,o){var u={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:a,qInv:o};return u.decrypt=function(l,c,f){typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSAES-PKCS1-V1_5");var d=be.rsa.decrypt(l,u,!1,!1);if(c==="RSAES-PKCS1-V1_5")c={decode:ws};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={decode:function(p,g){return fe.pkcs1.decode_rsa_oaep(g,p,f)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+c+'".');return c.decode(d,u,!1)},u.sign=function(l,c){var f=!1;typeof c=="string"&&(c=c.toUpperCase()),c===void 0||c==="RSASSA-PKCS1-V1_5"?(c={encode:lE},f=1):(c==="NONE"||c==="NULL"||c===null)&&(c={encode:function(){return l}},f=1);var d=c.encode(l,u.n.bitLength());return be.rsa.encrypt(d,u,f)},u};be.wrapRsaPrivateKey=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(0).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(be.oids.rsaEncryption).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,V.toDer(e).getBytes())])};be.privateKeyFromAsn1=function(e){var t={},r=[];if(V.validate(e,iE,t,r)&&(e=V.fromDer(fe.util.createBuffer(t.privateKey))),t={},r=[],!V.validate(e,sE,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,a,o,u,l,c,f;return i=fe.util.createBuffer(t.privateKeyModulus).toHex(),s=fe.util.createBuffer(t.privateKeyPublicExponent).toHex(),a=fe.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=fe.util.createBuffer(t.privateKeyPrime1).toHex(),u=fe.util.createBuffer(t.privateKeyPrime2).toHex(),l=fe.util.createBuffer(t.privateKeyExponent1).toHex(),c=fe.util.createBuffer(t.privateKeyExponent2).toHex(),f=fe.util.createBuffer(t.privateKeyCoefficient).toHex(),be.setRsaPrivateKey(new Ue(i,16),new Ue(s,16),new Ue(a,16),new Ue(o,16),new Ue(u,16),new Ue(l,16),new Ue(c,16),new Ue(f,16))};be.privateKeyToAsn1=be.privateKeyToRSAPrivateKey=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(0).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,sr(e.n)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,sr(e.e)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,sr(e.d)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,sr(e.p)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,sr(e.q)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,sr(e.dP)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,sr(e.dQ)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,sr(e.qInv))])};be.publicKeyFromAsn1=function(e){var t={},r=[];if(V.validate(e,oE,t,r)){var n=V.derToOid(t.publicKeyOid);if(n!==be.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!V.validate(e,aE,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=fe.util.createBuffer(t.publicKeyModulus).toHex(),a=fe.util.createBuffer(t.publicKeyExponent).toHex();return be.setRsaPublicKey(new Ue(s,16),new Ue(a,16))};be.publicKeyToAsn1=be.publicKeyToSubjectPublicKeyInfo=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(be.oids.rsaEncryption).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,[be.publicKeyToRSAPublicKey(e)])])};be.publicKeyToRSAPublicKey=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,sr(e.n)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,sr(e.e))])};function ff(e,t,r){var n=fe.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var a=i-3-e.length,o;if(r===0||r===1){o=r===0?0:255;for(var u=0;u<a;++u)n.putByte(o)}else for(;a>0;){for(var l=0,c=fe.random.getBytes(a),u=0;u<a;++u)o=c.charCodeAt(u),o===0?++l:n.putByte(o);a=l}return n.putByte(0),n.putBytes(e),n}function ws(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),s=fe.util.createBuffer(e),a=s.getByte(),o=s.getByte();if(a!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var u=0;if(o===0){u=i-3-n;for(var l=0;l<u;++l)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(u=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++u}else if(o===2)for(u=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++u}var c=s.getByte();if(c!==0||u!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function cE(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){s(e.pBits,function(o,u){if(o)return r(o);if(e.p=u,e.q!==null)return a(o,e.q);s(e.qBits,a)})}function s(o,u){fe.prime.generateProbablePrime(o,n,u)}function a(o,u){if(o)return r(o);if(e.q=u,e.p.compareTo(e.q)<0){var l=e.p;e.p=e.q,e.q=l}if(e.p.subtract(Ue.ONE).gcd(e.e).compareTo(Ue.ONE)!==0){e.p=null,i();return}if(e.q.subtract(Ue.ONE).gcd(e.e).compareTo(Ue.ONE)!==0){e.q=null,s(e.qBits,a);return}if(e.p1=e.p.subtract(Ue.ONE),e.q1=e.q.subtract(Ue.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(Ue.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,s(e.qBits,a);return}var c=e.e.modInverse(e.phi);e.keys={privateKey:be.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:be.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function sr(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=fe.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function fE(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function el(e){return fe.util.isNodejs&&typeof Fa[e]=="function"}function tl(e){return typeof Qt.globalScope<"u"&&typeof Qt.globalScope.crypto=="object"&&typeof Qt.globalScope.crypto.subtle=="object"&&typeof Qt.globalScope.crypto.subtle[e]=="function"}function rl(e){return typeof Qt.globalScope<"u"&&typeof Qt.globalScope.msCrypto=="object"&&typeof Qt.globalScope.msCrypto.subtle=="object"&&typeof Qt.globalScope.msCrypto.subtle[e]=="function"}function nl(e){for(var t=fe.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}var ie=we;if(typeof hE>"u")var hE=ie.jsbn.BigInteger;var j=ie.asn1,Ee=ie.pki=ie.pki||{};Ee.pbe=ie.pbe=ie.pbe||{};var nn=Ee.oids,dE={name:"EncryptedPrivateKeyInfo",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:j.Class.UNIVERSAL,type:j.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},pE={name:"PBES2Algorithms",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:j.Class.UNIVERSAL,type:j.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:j.Class.UNIVERSAL,type:j.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},gE={name:"pkcs-12PbeParams",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:j.Class.UNIVERSAL,type:j.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"iterations"}]};Ee.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=ie.random.getBytesSync(r.saltSize),i=r.count,s=j.integerToDer(i),a,o,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var l,c,f;switch(r.algorithm){case"aes128":a=16,l=16,c=nn["aes128-CBC"],f=ie.aes.createEncryptionCipher;break;case"aes192":a=24,l=16,c=nn["aes192-CBC"],f=ie.aes.createEncryptionCipher;break;case"aes256":a=32,l=16,c=nn["aes256-CBC"],f=ie.aes.createEncryptionCipher;break;case"des":a=8,l=8,c=nn.desCBC,f=ie.des.createEncryptionCipher;break;default:var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),g=df(p),y=ie.pkcs5.pbkdf2(t,n,i,a,g),T=ie.random.getBytesSync(l),x=f(y);x.start(T),x.update(j.toDer(e)),x.finish(),u=x.output.getBytes();var k=mE(n,s,a,p);o=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(nn.pkcs5PBES2).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(nn.pkcs5PBKDF2).getBytes()),k]),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(c).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,T)])])])}else if(r.algorithm==="3des"){a=24;var v=new ie.util.ByteBuffer(n),y=Ee.pbe.generatePkcs12Key(t,v,1,i,a),T=Ee.pbe.generatePkcs12Key(t,v,2,i,a),x=ie.des.createEncryptionCipher(y);x.start(T),x.update(j.toDer(e)),x.finish(),u=x.output.getBytes(),o=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(nn["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,n),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,s.getBytes())])])}else{var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var _=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[o,j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,u)]);return _};Ee.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!j.validate(e,dE,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=j.derToOid(n.encryptionOid),o=Ee.pbe.getCipher(a,n.encryptionParams,t),u=ie.util.createBuffer(n.encryptedData);return o.update(u),o.finish()&&(r=j.fromDer(o.output)),r};Ee.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:j.toDer(e).getBytes()};return ie.pem.encode(r,{maxline:t})};Ee.encryptedPrivateKeyFromPem=function(e){var t=ie.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return j.fromDer(t.body)};Ee.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=Ee.wrapRsaPrivateKey(Ee.privateKeyToAsn1(e));return n=Ee.encryptPrivateKeyInfo(n,t,r),Ee.encryptedPrivateKeyToPem(n)}var i,s,a,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,s=ie.random.getBytesSync(16),o=ie.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,s=ie.random.getBytesSync(16),o=ie.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,s=ie.random.getBytesSync(16),o=ie.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,s=ie.random.getBytesSync(8),o=ie.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,s=ie.random.getBytesSync(8),o=ie.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var l=ie.pbe.opensslDeriveBytes(t,s.substr(0,8),a),c=o(l);c.start(s),c.update(j.toDer(Ee.privateKeyToAsn1(e))),c.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:ie.util.bytesToHex(s).toUpperCase()},body:c.output.getBytes()};return ie.pem.encode(f)};Ee.decryptRsaPrivateKey=function(e,t){var r=null,n=ie.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,a;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,a=ie.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,a=ie.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,a=ie.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,a=ie.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,a=ie.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,a=function(f){return ie.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":s=8,a=function(f){return ie.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":s=16,a=function(f){return ie.rc2.createDecryptionCipher(f,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var o=ie.util.hexToBytes(n.dekInfo.parameters),u=ie.pbe.opensslDeriveBytes(t,o.substr(0,8),s),l=a(u);if(l.start(o),l.update(ie.util.createBuffer(n.body)),l.finish())r=l.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Ee.decryptPrivateKeyInfo(j.fromDer(r),t):r=j.fromDer(r),r!==null&&(r=Ee.privateKeyFromAsn1(r)),r};Ee.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var a,o;if(typeof s>"u"||s===null){if(!("sha1"in ie.md))throw new Error('"sha1" hash algorithm unavailable.');s=ie.md.sha1.create()}var u=s.digestLength,l=s.blockLength,c=new ie.util.ByteBuffer,f=new ie.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)f.putInt16(e.charCodeAt(o));f.putInt16(0)}var d=f.length(),p=t.length(),g=new ie.util.ByteBuffer;g.fillWithByte(r,l);var y=l*Math.ceil(p/l),T=new ie.util.ByteBuffer;for(o=0;o<y;o++)T.putByte(t.at(o%p));var x=l*Math.ceil(d/l),k=new ie.util.ByteBuffer;for(o=0;o<x;o++)k.putByte(f.at(o%d));var v=T;v.putBuffer(k);for(var _=Math.ceil(i/u),w=1;w<=_;w++){var I=new ie.util.ByteBuffer;I.putBytes(g.bytes()),I.putBytes(v.bytes());for(var B=0;B<n;B++)s.start(),s.update(I.getBytes()),I=s.digest();var M=new ie.util.ByteBuffer;for(o=0;o<l;o++)M.putByte(I.at(o%u));var H=Math.ceil(p/l)+Math.ceil(d/l),N=new ie.util.ByteBuffer;for(a=0;a<H;a++){var U=new ie.util.ByteBuffer(v.getBytes(l)),K=511;for(o=M.length()-1;o>=0;o--)K=K>>8,K+=M.at(o)+U.at(o),U.setAt(o,K&255);N.putBuffer(U)}v=N,c.putBuffer(I)}return c.truncate(c.length()-i),c};Ee.pbe.getCipher=function(e,t,r){switch(e){case Ee.oids.pkcs5PBES2:return Ee.pbe.getCipherForPBES2(e,t,r);case Ee.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Ee.oids["pbewithSHAAnd40BitRC2-CBC"]:return Ee.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Ee.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!j.validate(t,pE,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(e=j.derToOid(n.kdfOid),e!==Ee.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=e,s.supportedOids=["pkcs5PBKDF2"],s}if(e=j.derToOid(n.encOid),e!==Ee.oids["aes128-CBC"]&&e!==Ee.oids["aes192-CBC"]&&e!==Ee.oids["aes256-CBC"]&&e!==Ee.oids["des-EDE3-CBC"]&&e!==Ee.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=e,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var a=n.kdfSalt,o=ie.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var u,l;switch(Ee.oids[e]){case"aes128-CBC":u=16,l=ie.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,l=ie.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,l=ie.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,l=ie.des.createDecryptionCipher;break;case"desCBC":u=8,l=ie.des.createDecryptionCipher;break}var c=hf(n.prfOid),f=ie.pkcs5.pbkdf2(r,a,o,u,c),d=n.encIv,p=l(f);return p.start(d),p};Ee.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!j.validate(t,gE,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=ie.util.createBuffer(n.salt),o=ie.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var u,l,c;switch(e){case Ee.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,l=8,c=ie.des.startDecrypting;break;case Ee.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,l=8,c=function(y,T){var x=ie.rc2.createDecryptionCipher(y,40);return x.start(T,null),x};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=e,s}var f=hf(n.prfOid),d=Ee.pbe.generatePkcs12Key(r,a,1,o,u,f);f.start();var p=Ee.pbe.generatePkcs12Key(r,a,2,o,l,f);return c(d,p)};Ee.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in ie.md))throw new Error('"md5" hash algorithm unavailable.');n=ie.md.md5.create()}t===null&&(t="");for(var i=[il(n,e+t)],s=16,a=1;s<r;++a,s+=16)i.push(il(n,i[a-1]+e+t));return i.join("").substr(0,r)};function il(e,t){return e.start().update(t).digest().getBytes()}function hf(e){var t;if(!e)t="hmacWithSHA1";else if(t=Ee.oids[j.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return df(t)}function df(e){var t=ie.md;switch(e){case"hmacWithSHA224":t=ie.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function mE(e,t,r,n){var i=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,e),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,ie.util.hexToBytes(r.toString(16))),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(Ee.oids[n]).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])),i}var $n=we,ne=$n.asn1,ri=$n.pkcs7asn1=$n.pkcs7asn1||{};$n.pkcs7=$n.pkcs7||{};$n.pkcs7.asn1=ri;var pf={name:"ContentInfo",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:ne.Class.UNIVERSAL,type:ne.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:ne.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};ri.contentInfoValidator=pf;var gf={name:"EncryptedContentInfo",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:ne.Class.UNIVERSAL,type:ne.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:ne.Class.UNIVERSAL,type:ne.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:ne.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:ne.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};ri.envelopedDataValidator={name:"EnvelopedData",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:ne.Class.UNIVERSAL,type:ne.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(gf)};ri.encryptedDataValidator={name:"EncryptedData",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:ne.Class.UNIVERSAL,type:ne.Type.INTEGER,constructed:!1,capture:"version"}].concat(gf)};var yE={name:"SignerInfo",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:ne.Class.UNIVERSAL,type:ne.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:ne.Class.UNIVERSAL,type:ne.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:ne.Class.UNIVERSAL,type:ne.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:ne.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:ne.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:ne.Class.UNIVERSAL,type:ne.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:ne.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};ri.signedDataValidator={name:"SignedData",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:ne.Class.UNIVERSAL,type:ne.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},pf,{name:"SignedData.Certificates",tagClass:ne.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:ne.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SET,capture:"signerInfos",optional:!0,value:[yE]}]};ri.recipientInfoValidator={name:"RecipientInfo",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:ne.Class.UNIVERSAL,type:ne.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:ne.Class.UNIVERSAL,type:ne.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:ne.Class.UNIVERSAL,type:ne.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:ne.Class.UNIVERSAL,type:ne.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:ne.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:ne.Class.UNIVERSAL,type:ne.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};var hn=we;hn.mgf=hn.mgf||{};var vE=hn.mgf.mgf1=hn.mgf1=hn.mgf1||{};vE.create=function(e){var t={generate:function(r,n){for(var i=new hn.util.ByteBuffer,s=Math.ceil(n/e.digestLength),a=0;a<s;a++){var o=new hn.util.ByteBuffer;o.putInt32(a),e.start(),e.update(r+o.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}};return t};var Ts=we;Ts.mgf=Ts.mgf||{};Ts.mgf.mgf1=Ts.mgf1;var sn=we,bE=sn.pss=sn.pss||{};bE.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=sn.util.createBuffer(i));var s;if("saltLength"in e)s=e.saltLength;else if(i!==null)s=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==s)throw new Error("Given salt length does not match length of given salt.");var a=e.prng||sn.random,o={};return o.encode=function(u,l){var c,f=l-1,d=Math.ceil(f/8),p=u.digest().getBytes();if(d<n+s+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(s):g=i.bytes();var y=new sn.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(p),y.putBytes(g),t.start(),t.update(y.getBytes());var T=t.digest().getBytes(),x=new sn.util.ByteBuffer;x.fillWithByte(0,d-s-n-2),x.putByte(1),x.putBytes(g);var k=x.getBytes(),v=d-n-1,_=r.generate(T,v),w="";for(c=0;c<v;c++)w+=String.fromCharCode(k.charCodeAt(c)^_.charCodeAt(c));var I=65280>>8*d-f&255;return w=String.fromCharCode(w.charCodeAt(0)&~I)+w.substr(1),w+T+String.fromCharCode(188)},o.verify=function(u,l,c){var f,d=c-1,p=Math.ceil(d/8);if(l=l.substr(-p),p<n+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(l.charCodeAt(p-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=p-n-1,y=l.substr(0,g),T=l.substr(g,n),x=65280>>8*p-d&255;if((y.charCodeAt(0)&x)!==0)throw new Error("Bits beyond keysize not zero as expected.");var k=r.generate(T,g),v="";for(f=0;f<g;f++)v+=String.fromCharCode(y.charCodeAt(f)^k.charCodeAt(f));v=String.fromCharCode(v.charCodeAt(0)&~x)+v.substr(1);var _=p-n-s-2;for(f=0;f<_;f++)if(v.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(v.charCodeAt(_)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var w=v.substr(-s),I=new sn.util.ByteBuffer;I.fillWithByte(0,8),I.putBytes(u),I.putBytes(w),t.start(),t.update(I.getBytes());var B=t.digest().getBytes();return T===B},o};var de=we,C=de.asn1,X=de.pki=de.pki||{},Le=X.oids,ht={};ht.CN=Le.commonName;ht.commonName="CN";ht.C=Le.countryName;ht.countryName="C";ht.L=Le.localityName;ht.localityName="L";ht.ST=Le.stateOrProvinceName;ht.stateOrProvinceName="ST";ht.O=Le.organizationName;ht.organizationName="O";ht.OU=Le.organizationalUnitName;ht.organizationalUnitName="OU";ht.E=Le.emailAddress;ht.emailAddress="E";var mf=de.pki.rsa.publicKeyValidator,CE={name:"Certificate",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:C.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:C.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:C.Class.UNIVERSAL,type:C.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:C.Class.UNIVERSAL,type:C.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:C.Class.UNIVERSAL,type:C.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:C.Class.UNIVERSAL,type:C.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},mf,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:C.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:C.Class.UNIVERSAL,type:C.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:C.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:C.Class.UNIVERSAL,type:C.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:C.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:C.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:C.Class.UNIVERSAL,type:C.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},EE={name:"rsapss",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:C.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:C.Class.UNIVERSAL,type:C.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:C.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:C.Class.UNIVERSAL,type:C.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:C.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:C.Class.UNIVERSAL,type:C.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:C.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:C.Class.UNIVERSAL,type:C.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},SE={name:"CertificationRequestInfo",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},mf,{name:"CertificationRequestInfo.attributes",tagClass:C.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:C.Class.UNIVERSAL,type:C.Type.SET,constructed:!0}]}]}]},_E={name:"CertificationRequest",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[SE,{name:"CertificationRequest.signatureAlgorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:C.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:C.Class.UNIVERSAL,type:C.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};X.RDNAttributesAsArray=function(e,t){for(var r=[],n,i,s,a=0;a<e.value.length;++a){n=e.value[a];for(var o=0;o<n.value.length;++o)s={},i=n.value[o],s.type=C.derToOid(i.value[0].value),s.value=i.value[1].value,s.valueTagClass=i.value[1].type,s.type in Le&&(s.name=Le[s.type],s.name in ht&&(s.shortName=ht[s.name])),t&&(t.update(s.type),t.update(s.value)),r.push(s)}return r};X.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=C.derToOid(n.value[0].value),s=n.value[1].value,a=0;a<s.length;++a){var o={};if(o.type=i,o.value=s[a].value,o.valueTagClass=s[a].type,o.type in Le&&(o.name=Le[o.type],o.name in ht&&(o.shortName=ht[o.name])),o.type===Le.extensionRequest){o.extensions=[];for(var u=0;u<o.value.length;++u)o.extensions.push(X.certificateExtensionFromAsn1(o.value[u]))}t.push(o)}return t};function Zr(e,t){typeof t=="string"&&(t={shortName:t});for(var r=null,n,i=0;r===null&&i<e.attributes.length;++i)n=e.attributes[i],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}var xs=function(e,t,r){var n={};if(e!==Le["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Le.sha1},mgf:{algorithmOid:Le.mgf1,hash:{algorithmOid:Le.sha1}},saltLength:20});var i={},s=[];if(!C.validate(t,EE,i,s)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=s,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=C.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=C.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=C.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},Qs=function(e){switch(Le[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return de.md.sha1.create();case"md5WithRSAEncryption":return de.md.md5.create();case"sha256WithRSAEncryption":return de.md.sha256.create();case"sha384WithRSAEncryption":return de.md.sha384.create();case"sha512WithRSAEncryption":return de.md.sha512.create();case"RSASSA-PSS":return de.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},yf=function(e){var t=e.certificate,r;switch(t.signatureOid){case Le.sha1WithRSAEncryption:case Le.sha1WithRSASignature:break;case Le["RSASSA-PSS"]:var n,i;if(n=Le[t.signatureParameters.mgf.hash.algorithmOid],n===void 0||de.md[n]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=t.signatureParameters.mgf.hash.algorithmOid,s.name=n,s}if(i=Le[t.signatureParameters.mgf.algorithmOid],i===void 0||de.mgf[i]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=t.signatureParameters.mgf.algorithmOid,s.name=i,s}if(i=de.mgf[i].create(de.md[n].create()),n=Le[t.signatureParameters.hash.algorithmOid],n===void 0||de.md[n]===void 0){var s=new Error("Unsupported RSASSA-PSS hash function.");throw s.oid=t.signatureParameters.hash.algorithmOid,s.name=n,s}r=de.pss.create(de.md[n].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,r)};X.certificateFromPem=function(e,t,r){var n=de.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=C.fromDer(n.body,r);return X.certificateFromAsn1(s,t)};X.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:C.toDer(X.certificateToAsn1(e)).getBytes()};return de.pem.encode(r,{maxline:t})};X.publicKeyFromPem=function(e){var t=de.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=C.fromDer(t.body);return X.publicKeyFromAsn1(n)};X.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:C.toDer(X.publicKeyToAsn1(e)).getBytes()};return de.pem.encode(r,{maxline:t})};X.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:C.toDer(X.publicKeyToRSAPublicKey(e)).getBytes()};return de.pem.encode(r,{maxline:t})};X.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||de.md.sha1.create(),n=t.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=C.toDer(X.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=C.toDer(X.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}r.start(),r.update(i);var s=r.digest();if(t.encoding==="hex"){var a=s.toHex();return t.delimiter?a.match(/.{2}/g).join(t.delimiter):a}else{if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};X.certificationRequestFromPem=function(e,t,r){var n=de.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=C.fromDer(n.body,r);return X.certificationRequestFromAsn1(s,t)};X.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:C.toDer(X.certificationRequestToAsn1(e)).getBytes()};return de.pem.encode(r,{maxline:t})};X.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return Zr(e.issuer,t)},e.issuer.addField=function(t){Yt([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return Zr(e.subject,t)},e.subject.addField=function(t){Yt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){Yt(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){Yt(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)vf(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r=null,n,i=0;r===null&&i<e.extensions.length;++i)n=e.extensions[i],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,r){e.md=r||de.md.sha1.create();var n=Le[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=X.getTBSCertificate(e);var s=C.toDer(e.tbsCertificate);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=i.attributes,s.actualIssuer=n.attributes,s}var a=t.md;if(a===null){a=Qs({signatureOid:t.signatureOid,type:"certificate"});var o=t.tbsCertificate||X.getTBSCertificate(t),u=C.toDer(o);a.update(u.getBytes())}return a!==null&&(r=yf({certificate:e,md:a,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var s,a,o=0;r&&o<n.attributes.length;++o)s=n.attributes[o],a=i.attributes[o],(s.type!==a.type||s.value!==a.value)&&(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return X.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=Le.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return de.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},e};X.certificateFromAsn1=function(e,t){var r={},n=[];if(!C.validate(e,CE,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var s=C.derToOid(r.publicKeyOid);if(s!==X.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=X.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var o=de.util.createBuffer(r.certSerialNumber);a.serialNumber=o.toHex(),a.signatureOid=de.asn1.derToOid(r.certSignatureOid),a.signatureParameters=xs(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=de.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=xs(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var u=[];if(r.certValidity1UTCTime!==void 0&&u.push(C.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&u.push(C.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&u.push(C.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&u.push(C.generalizedTimeToDate(r.certValidity4GeneralizedTime)),u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=u[0],a.validity.notAfter=u[1],a.tbsCertificate=r.tbsCertificate,t){a.md=Qs({signatureOid:a.signatureOid,type:"certificate"});var l=C.toDer(a.tbsCertificate);a.md.update(l.getBytes())}var c=de.md.sha1.create(),f=C.toDer(r.certIssuer);c.update(f.getBytes()),a.issuer.getField=function(g){return Zr(a.issuer,g)},a.issuer.addField=function(g){Yt([g]),a.issuer.attributes.push(g)},a.issuer.attributes=X.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=c.digest().toHex();var d=de.md.sha1.create(),p=C.toDer(r.certSubject);return d.update(p.getBytes()),a.subject.getField=function(g){return Zr(a.subject,g)},a.subject.addField=function(g){Yt([g]),a.subject.attributes.push(g)},a.subject.attributes=X.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=d.digest().toHex(),r.certExtensions?a.extensions=X.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=X.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};X.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(X.certificateExtensionFromAsn1(n.value[i]));return t};X.certificateExtensionFromAsn1=function(e){var t={};if(t.id=C.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===C.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in Le){if(t.name=Le[t.id],t.name==="keyUsage"){var r=C.fromDer(t.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=(n&128)===128,t.nonRepudiation=(n&64)===64,t.keyEncipherment=(n&32)===32,t.dataEncipherment=(n&16)===16,t.keyAgreement=(n&8)===8,t.keyCertSign=(n&4)===4,t.cRLSign=(n&2)===2,t.encipherOnly=(n&1)===1,t.decipherOnly=(i&128)===128}else if(t.name==="basicConstraints"){var r=C.fromDer(t.value);r.value.length>0&&r.value[0].type===C.Type.BOOLEAN?t.cA=r.value[0].value.charCodeAt(0)!==0:t.cA=!1;var s=null;r.value.length>0&&r.value[0].type===C.Type.INTEGER?s=r.value[0].value:r.value.length>1&&(s=r.value[1].value),s!==null&&(t.pathLenConstraint=C.derToInteger(s))}else if(t.name==="extKeyUsage")for(var r=C.fromDer(t.value),a=0;a<r.value.length;++a){var o=C.derToOid(r.value[a].value);o in Le?t[Le[o]]=!0:t[o]=!0}else if(t.name==="nsCertType"){var r=C.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=(n&128)===128,t.server=(n&64)===64,t.email=(n&32)===32,t.objsign=(n&16)===16,t.reserved=(n&8)===8,t.sslCA=(n&4)===4,t.emailCA=(n&2)===2,t.objCA=(n&1)===1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var u,r=C.fromDer(t.value),l=0;l<r.value.length;++l){u=r.value[l];var c={type:u.type,value:u.value};switch(t.altNames.push(c),u.type){case 1:case 2:case 6:break;case 7:c.ip=de.util.bytesToIP(u.value);break;case 8:c.oid=C.derToOid(u.value);break}}}else if(t.name==="subjectKeyIdentifier"){var r=C.fromDer(t.value);t.subjectKeyIdentifier=de.util.bytesToHex(r.value)}}return t};X.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!C.validate(e,_E,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var s=C.derToOid(r.publicKeyOid);if(s!==X.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=X.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=de.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=xs(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=de.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=xs(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,t){a.md=Qs({signatureOid:a.signatureOid,type:"certification request"});var o=C.toDer(a.certificationRequestInfo);a.md.update(o.getBytes())}var u=de.md.sha1.create();return a.subject.getField=function(l){return Zr(a.subject,l)},a.subject.addField=function(l){Yt([l]),a.subject.attributes.push(l)},a.subject.attributes=X.RDNAttributesAsArray(r.certificationRequestInfoSubject,u),a.subject.hash=u.digest().toHex(),a.publicKey=X.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(l){return Zr(a,l)},a.addAttribute=function(l){Yt([l]),a.attributes.push(l)},a.attributes=X.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};X.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return Zr(e.subject,t)},e.subject.addField=function(t){Yt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return Zr(e,t)},e.addAttribute=function(t){Yt([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){Yt(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){Yt(t),e.attributes=t},e.sign=function(t,r){e.md=r||de.md.sha1.create();var n=Le[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=X.getCertificationRequestInfo(e);var s=C.toDer(e.certificationRequestInfo);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(r===null){r=Qs({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||X.getCertificationRequestInfo(e),i=C.toDer(n);r.update(i.getBytes())}return r!==null&&(t=yf({certificate:e,md:r,signature:e.signature})),t},e};function Gn(e){for(var t=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]),r,n,i=e.attributes,s=0;s<i.length;++s){r=i[s];var a=r.value,o=C.Type.PRINTABLESTRING;"valueTagClass"in r&&(o=r.valueTagClass,o===C.Type.UTF8&&(a=de.util.encodeUtf8(a))),n=C.create(C.Class.UNIVERSAL,C.Type.SET,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(r.type).getBytes()),C.create(C.Class.UNIVERSAL,o,!1,a)])]),t.value.push(n)}return t}function Yt(e){for(var t,r=0;r<e.length;++r){if(t=e[r],typeof t.name>"u"&&(t.type&&t.type in X.oids?t.name=X.oids[t.type]:t.shortName&&t.shortName in ht&&(t.name=X.oids[ht[t.shortName]])),typeof t.type>"u")if(t.name&&t.name in X.oids)t.type=X.oids[t.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=t,n}if(typeof t.shortName>"u"&&t.name&&t.name in ht&&(t.shortName=ht[t.name]),t.type===Le.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=C.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(X.certificateExtensionToAsn1(vf(t.extensions[i])))}if(typeof t.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function vf(e,t){if(t=t||{},typeof e.name>"u"&&e.id&&e.id in X.oids&&(e.name=X.oids[e.id]),typeof e.id>"u")if(e.name&&e.name in X.oids)e.id=X.oids[e.name];else{var r=new Error("Extension ID not specified.");throw r.extension=e,r}if(typeof e.value<"u")return e;if(e.name==="keyUsage"){var n=0,i=0,s=0;e.digitalSignature&&(i|=128,n=7),e.nonRepudiation&&(i|=64,n=6),e.keyEncipherment&&(i|=32,n=5),e.dataEncipherment&&(i|=16,n=4),e.keyAgreement&&(i|=8,n=3),e.keyCertSign&&(i|=4,n=2),e.cRLSign&&(i|=2,n=1),e.encipherOnly&&(i|=1,n=0),e.decipherOnly&&(s|=128,n=7);var a=String.fromCharCode(n);s!==0?a+=String.fromCharCode(i)+String.fromCharCode(s):i!==0&&(a+=String.fromCharCode(i)),e.value=C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,a)}else if(e.name==="basicConstraints")e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(C.create(C.Class.UNIVERSAL,C.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var u in e)e[u]===!0&&(u in Le?o.push(C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(Le[u]).getBytes())):u.indexOf(".")!==-1&&o.push(C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(u).getBytes())))}else if(e.name==="nsCertType"){var n=0,i=0;e.client&&(i|=128,n=7),e.server&&(i|=64,n=6),e.email&&(i|=32,n=5),e.objsign&&(i|=16,n=4),e.reserved&&(i|=8,n=3),e.sslCA&&(i|=4,n=2),e.emailCA&&(i|=2,n=1),e.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),e.value=C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,a)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);for(var l,c=0;c<e.altNames.length;++c){l=e.altNames[c];var a=l.value;if(l.type===7&&l.ip){if(a=de.util.bytesFromIP(l.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else l.type===8&&(l.oid?a=C.oidToDer(C.oidToDer(l.oid)):a=C.oidToDer(a));e.value.value.push(C.create(C.Class.CONTEXT_SPECIFIC,l.type,!1,a))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=C.create(C.Class.UNIVERSAL,C.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,f.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);var o=e.value.value;if(e.keyIdentifier){var d=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(C.create(C.Class.CONTEXT_SPECIFIC,0,!1,d))}if(e.authorityCertIssuer){var p=[C.create(C.Class.CONTEXT_SPECIFIC,4,!0,[Gn(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(C.create(C.Class.CONTEXT_SPECIFIC,1,!0,p))}if(e.serialNumber){var g=de.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(C.create(C.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(e.name==="cRLDistributionPoints"){e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);for(var o=e.value.value,y=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]),T=C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[]),l,c=0;c<e.altNames.length;++c){l=e.altNames[c];var a=l.value;if(l.type===7&&l.ip){if(a=de.util.bytesFromIP(l.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else l.type===8&&(l.oid?a=C.oidToDer(C.oidToDer(l.oid)):a=C.oidToDer(a));T.value.push(C.create(C.Class.CONTEXT_SPECIFIC,l.type,!1,a))}y.value.push(C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[T])),o.push(y)}if(typeof e.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function Fo(e,t){switch(e){case Le["RSASSA-PSS"]:var r=[];return t.hash.algorithmOid!==void 0&&r.push(C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(t.hash.algorithmOid).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(C.create(C.Class.CONTEXT_SPECIFIC,1,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(t.mgf.algorithmOid).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(t.mgf.hash.algorithmOid).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(C.create(C.Class.CONTEXT_SPECIFIC,2,!0,[C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(t.saltLength).getBytes())])),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,r);default:return C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")}}function wE(e){var t=C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],s=i.value,a=C.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===C.Type.UTF8&&(s=de.util.encodeUtf8(s));var o=!1;"valueConstructed"in i&&(o=i.valueConstructed);var u=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(i.type).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SET,!0,[C.create(C.Class.UNIVERSAL,a,o,s)])]);t.value.push(u)}return t}var TE=new Date("1950-01-01T00:00:00Z"),xE=new Date("2050-01-01T00:00:00Z");function sl(e){return e>=TE&&e<xE?C.create(C.Class.UNIVERSAL,C.Type.UTCTIME,!1,C.dateToUtcTime(e)):C.create(C.Class.UNIVERSAL,C.Type.GENERALIZEDTIME,!1,C.dateToGeneralizedTime(e))}X.getTBSCertificate=function(e){var t=sl(e.validity.notBefore),r=sl(e.validity.notAfter),n=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(e.version).getBytes())]),C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,de.util.hexToBytes(e.serialNumber)),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(e.siginfo.algorithmOid).getBytes()),Fo(e.siginfo.algorithmOid,e.siginfo.parameters)]),Gn(e.issuer),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[t,r]),Gn(e.subject),X.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(C.create(C.Class.CONTEXT_SPECIFIC,1,!0,[C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(C.create(C.Class.CONTEXT_SPECIFIC,2,!0,[C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(X.certificateExtensionsToAsn1(e.extensions)),n};X.getCertificationRequestInfo=function(e){var t=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(e.version).getBytes()),Gn(e.subject),X.publicKeyToAsn1(e.publicKey),wE(e)]);return t};X.distinguishedNameToAsn1=function(e){return Gn(e)};X.certificateToAsn1=function(e){var t=e.tbsCertificate||X.getTBSCertificate(e);return C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[t,C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(e.signatureOid).getBytes()),Fo(e.signatureOid,e.signatureParameters)]),C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};X.certificateExtensionsToAsn1=function(e){var t=C.create(C.Class.CONTEXT_SPECIFIC,3,!0,[]),r=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(X.certificateExtensionToAsn1(e[n]));return t};X.certificateExtensionToAsn1=function(e){var t=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);t.value.push(C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(e.id).getBytes())),e.critical&&t.value.push(C.create(C.Class.UNIVERSAL,C.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return typeof e.value!="string"&&(r=C.toDer(r).getBytes()),t.value.push(C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,r)),t};X.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||X.getCertificationRequestInfo(e);return C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[t,C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(e.signatureOid).getBytes()),Fo(e.signatureOid,e.signatureParameters)]),C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};X.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(a){var o=r(a.issuer);return o},t.addCertificate=function(a){if(typeof a=="string"&&(a=de.pki.certificateFromPem(a)),n(a.subject),!t.hasCertificate(a))if(a.subject.hash in t.certs){var o=t.certs[a.subject.hash];de.util.isArray(o)||(o=[o]),o.push(a),t.certs[a.subject.hash]=o}else t.certs[a.subject.hash]=a},t.hasCertificate=function(a){typeof a=="string"&&(a=de.pki.certificateFromPem(a));var o=r(a.subject);if(!o)return!1;de.util.isArray(o)||(o=[o]);for(var u=C.toDer(X.certificateToAsn1(a)).getBytes(),l=0;l<o.length;++l){var c=C.toDer(X.certificateToAsn1(o[l])).getBytes();if(u===c)return!0}return!1},t.listAllCertificates=function(){var a=[];for(var o in t.certs)if(t.certs.hasOwnProperty(o)){var u=t.certs[o];if(!de.util.isArray(u))a.push(u);else for(var l=0;l<u.length;++l)a.push(u[l])}return a},t.removeCertificate=function(a){var o;if(typeof a=="string"&&(a=de.pki.certificateFromPem(a)),n(a.subject),!t.hasCertificate(a))return null;var u=r(a.subject);if(!de.util.isArray(u))return o=t.certs[a.subject.hash],delete t.certs[a.subject.hash],o;for(var l=C.toDer(X.certificateToAsn1(a)).getBytes(),c=0;c<u.length;++c){var f=C.toDer(X.certificateToAsn1(u[c])).getBytes();l===f&&(o=u[c],u.splice(c,1))}return u.length===0&&delete t.certs[a.subject.hash],o};function r(a){return n(a),t.certs[a.hash]||null}function n(a){if(!a.hash){var o=de.md.sha1.create();a.attributes=X.RDNAttributesAsArray(Gn(a),o),a.hash=o.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var s=e[i];t.addCertificate(s)}return t};X.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};X.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{},t=t.slice(0);var n=t.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var s=!0,a=null,o=0;do{var u=t.shift(),l=null,c=!1;if(i&&(i<u.validity.notBefore||i>u.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:X.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:i}),a===null){if(l=t[0]||e.getIssuer(u),l===null&&u.isIssuer(u)&&(c=!0,l=u),l){var f=l;de.util.isArray(f)||(f=[f]);for(var d=!1;!d&&f.length>0;){l=f.shift();try{d=l.verify(u)}catch{}}d||(a={message:"Certificate signature is invalid.",error:X.certificateError.bad_certificate})}a===null&&(!l||c)&&!e.hasCertificate(u)&&(a={message:"Certificate is not trusted.",error:X.certificateError.unknown_ca})}if(a===null&&l&&!u.isIssuer(l)&&(a={message:"Certificate issuer is invalid.",error:X.certificateError.bad_certificate}),a===null)for(var p={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<u.extensions.length;++g){var y=u.extensions[g];y.critical&&!(y.name in p)&&(a={message:"Certificate has an unsupported critical extension.",error:X.certificateError.unsupported_certificate})}if(a===null&&(!s||t.length===0&&(!l||c))){var T=u.getExtension("basicConstraints"),x=u.getExtension("keyUsage");if(x!==null&&(!x.keyCertSign||T===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:X.certificateError.bad_certificate}),a===null&&T!==null&&!T.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:X.certificateError.bad_certificate}),a===null&&x!==null&&"pathLenConstraint"in T){var k=o-1;k>T.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:X.certificateError.bad_certificate})}}var v=a===null?!0:a.error,_=r.verify?r.verify(v,o,n):v;if(_===!0)a=null;else throw v===!0&&(a={message:"The application rejected the certificate.",error:X.certificateError.bad_certificate}),(_||_===0)&&(typeof _=="object"&&!de.util.isArray(_)?(_.message&&(a.message=_.message),_.error&&(a.error=_.error)):typeof _=="string"&&(a.error=_)),a;s=!1,++o}while(t.length>0);return!0};var je=we,R=je.asn1,xe=je.pki,Ai=je.pkcs12=je.pkcs12||{},bf={name:"ContentInfo",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:R.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},AE={name:"PFX",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,capture:"version"},bf,{name:"PFX.macData",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:R.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},IE={name:"SafeBag",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:R.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:R.Class.UNIVERSAL,type:R.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},BE={name:"Attribute",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:R.Class.UNIVERSAL,type:R.Type.SET,constructed:!0,capture:"values"}]},kE={name:"CertBag",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:R.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:R.Class.UNIVERSAL,type:R.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function ai(e,t,r,n){for(var i=[],s=0;s<e.length;s++)for(var a=0;a<e[s].safeBags.length;a++){var o=e[s].safeBags[a];if(!(n!==void 0&&o.type!==n)){if(t===null){i.push(o);continue}o.attributes[t]!==void 0&&o.attributes[t].indexOf(r)>=0&&i.push(o)}}return i}Ai.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={},i=[];if(!R.validate(e,AE,n,i)){var s=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw s.errors=s,s}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:function(T){var x={},k;return"localKeyId"in T?k=T.localKeyId:"localKeyIdHex"in T&&(k=je.util.hexToBytes(T.localKeyIdHex)),k===void 0&&!("friendlyName"in T)&&"bagType"in T&&(x[T.bagType]=ai(a.safeContents,null,null,T.bagType)),k!==void 0&&(x.localKeyId=ai(a.safeContents,"localKeyId",k,T.bagType)),"friendlyName"in T&&(x.friendlyName=ai(a.safeContents,"friendlyName",T.friendlyName,T.bagType)),x},getBagsByFriendlyName:function(T,x){return ai(a.safeContents,"friendlyName",T,x)},getBagsByLocalKeyId:function(T,x){return ai(a.safeContents,"localKeyId",T,x)}};if(n.version.charCodeAt(0)!==3){var s=new Error("PKCS#12 PFX of version other than 3 not supported.");throw s.version=n.version.charCodeAt(0),s}if(R.derToOid(n.contentType)!==xe.oids.data){var s=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw s.oid=R.derToOid(n.contentType),s}var o=n.content.value[0];if(o.tagClass!==R.Class.UNIVERSAL||o.type!==R.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=Vo(o),n.mac){var u=null,l=0,c=R.derToOid(n.macAlgorithm);switch(c){case xe.oids.sha1:u=je.md.sha1.create(),l=20;break;case xe.oids.sha256:u=je.md.sha256.create(),l=32;break;case xe.oids.sha384:u=je.md.sha384.create(),l=48;break;case xe.oids.sha512:u=je.md.sha512.create(),l=64;break;case xe.oids.md5:u=je.md.md5.create(),l=16;break}if(u===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+c);var f=new je.util.ByteBuffer(n.macSalt),d="macIterations"in n?parseInt(je.util.bytesToHex(n.macIterations),16):1,p=Ai.generateKey(r,f,3,d,l,u),g=je.hmac.create();g.start(u,p),g.update(o.value);var y=g.getMac();if(y.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return RE(a,o.value,t,r),a};function Vo(e){if(e.composed||e.constructed){for(var t=je.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function RE(e,t,r,n){if(t=R.fromDer(t,r),t.tagClass!==R.Class.UNIVERSAL||t.type!==R.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var s=t.value[i],a={},o=[];if(!R.validate(s,bf,a,o)){var u=new Error("Cannot read ContentInfo.");throw u.errors=o,u}var l={encrypted:!1},c=null,f=a.content.value[0];switch(R.derToOid(a.contentType)){case xe.oids.data:if(f.tagClass!==R.Class.UNIVERSAL||f.type!==R.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");c=Vo(f).value;break;case xe.oids.encryptedData:c=NE(f,n),l.encrypted=!0;break;default:var u=new Error("Unsupported PKCS#12 contentType.");throw u.contentType=R.derToOid(a.contentType),u}l.safeBags=DE(c,r,n),e.safeContents.push(l)}}function NE(e,t){var r={},n=[];if(!R.validate(e,je.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var s=R.derToOid(r.contentType);if(s!==xe.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=s,i}s=R.derToOid(r.encAlgorithm);var a=xe.pbe.getCipher(s,r.encParameter,t),o=Vo(r.encryptedContentAsn1),u=je.util.createBuffer(o.value);if(a.update(u),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}function DE(e,t,r){if(!t&&e.length===0)return[];if(e=R.fromDer(e,t),e.tagClass!==R.Class.UNIVERSAL||e.type!==R.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var s=e.value[i],a={},o=[];if(!R.validate(s,IE,a,o)){var u=new Error("Cannot read SafeBag.");throw u.errors=o,u}var l={type:R.derToOid(a.bagId),attributes:LE(a.bagAttributes)};n.push(l);var c,f,d=a.bagValue.value[0];switch(l.type){case xe.oids.pkcs8ShroudedKeyBag:if(d=xe.decryptPrivateKeyInfo(d,r),d===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case xe.oids.keyBag:try{l.key=xe.privateKeyFromAsn1(d)}catch{l.key=null,l.asn1=d}continue;case xe.oids.certBag:c=kE,f=function(){if(R.derToOid(a.certId)!==xe.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=R.derToOid(a.certId),g}var y=R.fromDer(a.cert,t);try{l.cert=xe.certificateFromAsn1(y,!0)}catch{l.cert=null,l.asn1=y}};break;default:var u=new Error("Unsupported PKCS#12 SafeBag type.");throw u.oid=l.type,u}if(c!==void 0&&!R.validate(d,c,a,o)){var u=new Error("Cannot read PKCS#12 "+c.name);throw u.errors=o,u}f()}return n}function LE(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},i=[];if(!R.validate(e[r],BE,n,i)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=i,s}var a=R.derToOid(n.oid);if(xe.oids[a]!==void 0){t[xe.oids[a]]=[];for(var o=0;o<n.values.length;++o)t[xe.oids[a]].push(n.values[o].value)}}return t}Ai.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,s;if(i!==null)i=je.util.hexToBytes(i);else if(n.generateLocalKeyId)if(t){var a=je.util.isArray(t)?t[0]:t;typeof a=="string"&&(a=xe.certificateFromPem(a));var o=je.md.sha1.create();o.update(R.toDer(xe.certificateToAsn1(a)).getBytes()),i=o.digest().getBytes()}else i=je.random.getBytes(20);var u=[];i!==null&&u.push(R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.localKeyId).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.SET,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&u.push(R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.friendlyName).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.SET,!0,[R.create(R.Class.UNIVERSAL,R.Type.BMPSTRING,!1,n.friendlyName)])])),u.length>0&&(s=R.create(R.Class.UNIVERSAL,R.Type.SET,!0,u));var l=[],c=[];t!==null&&(je.util.isArray(t)?c=t:c=[t]);for(var f=[],d=0;d<c.length;++d){t=c[d],typeof t=="string"&&(t=xe.certificateFromPem(t));var p=d===0?s:void 0,g=xe.certificateToAsn1(t),y=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.certBag).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.x509Certificate).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,R.toDer(g).getBytes())])])]),p]);f.push(y)}if(f.length>0){var T=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,f),x=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.data).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,R.toDer(T).getBytes())])]);l.push(x)}var k=null;if(e!==null){var v=xe.wrapRsaPrivateKey(xe.privateKeyToAsn1(e));r===null?k=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.keyBag).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[v]),s]):k=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.pkcs8ShroudedKeyBag).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[xe.encryptPrivateKeyInfo(v,r,n)]),s]);var _=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[k]),w=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.data).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,R.toDer(_).getBytes())])]);l.push(w)}var I=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,l),B;if(n.useMac){var o=je.md.sha1.create(),M=new je.util.ByteBuffer(je.random.getBytes(n.saltSize)),H=n.count,e=Ai.generateKey(r,M,3,H,20),N=je.hmac.create();N.start(o,e),N.update(R.toDer(I).getBytes());var U=N.getMac();B=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.sha1).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.NULL,!1,"")]),R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,U.getBytes())]),R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,M.getBytes()),R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,R.integerToDer(H).getBytes())])}return R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,R.integerToDer(3).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.data).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,R.toDer(I).getBytes())])]),B])};Ai.generateKey=je.pbe.generatePkcs12Key;var en=we,Ho=en.asn1,jn=en.pki=en.pki||{};jn.pemToDer=function(e){var t=en.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return en.util.createBuffer(t.body)};jn.privateKeyFromPem=function(e){var t=en.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Ho.fromDer(t.body);return jn.privateKeyFromAsn1(n)};jn.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:Ho.toDer(jn.privateKeyToAsn1(e)).getBytes()};return en.pem.encode(r,{maxline:t})};jn.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:Ho.toDer(e).getBytes()};return en.pem.encode(r,{maxline:t})};var z=we,Ys=function(e,t,r,n){var i=z.util.createBuffer(),s=e.length>>1,a=s+(e.length&1),o=e.substr(0,a),u=e.substr(s,a),l=z.util.createBuffer(),c=z.hmac.create();r=t+r;var f=Math.ceil(n/16),d=Math.ceil(n/20);c.start("MD5",o);var p=z.util.createBuffer();l.putBytes(r);for(var g=0;g<f;++g)c.start(null,null),c.update(l.getBytes()),l.putBuffer(c.digest()),c.start(null,null),c.update(l.bytes()+r),p.putBuffer(c.digest());c.start("SHA1",u);var y=z.util.createBuffer();l.clear(),l.putBytes(r);for(var g=0;g<d;++g)c.start(null,null),c.update(l.getBytes()),l.putBuffer(c.digest()),c.start(null,null),c.update(l.bytes()+r),y.putBuffer(c.digest());return i.putBytes(z.util.xorBytes(p.getBytes(),y.getBytes(),n)),i},UE=function(e,t,r){var n=z.hmac.create();n.start("SHA1",e);var i=z.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},OE=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=z.util.createBuffer(i),t.length=i.length,n=!0}catch{}return n},ME=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=z.util.createBuffer(i),t.length=i.length,n=!0}catch{}return n},Ht=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32();break}return z.util.createBuffer(e.getBytes(r))},jt=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},S={};S.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};S.SupportedVersions=[S.Versions.TLS_1_1,S.Versions.TLS_1_0];S.Version=S.SupportedVersions[0];S.MaxFragment=16384-1024;S.ConnectionEnd={server:0,client:1};S.PRFAlgorithm={tls_prf_sha256:0};S.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};S.CipherType={stream:0,block:1,aead:2};S.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};S.CompressionMethod={none:0,deflate:1};S.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};S.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};S.Alert={};S.Alert.Level={warning:1,fatal:2};S.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};S.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};S.CipherSuites={};S.getCipherSuite=function(e){var t=null;for(var r in S.CipherSuites){var n=S.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t};S.handleUnexpected=function(e,t){var r=!e.open&&e.entity===S.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.unexpected_message}})};S.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(S.queue(e,S.createAlert(e,{level:S.Alert.Level.warning,description:S.Alert.Description.no_renegotiation})),S.flush(e)),e.process()};S.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===S.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});else{var s=t.fragment,a=s.length();if(n={version:{major:s.getByte(),minor:s.getByte()},random:z.util.createBuffer(s.getBytes(32)),session_id:Ht(s,1),extensions:[]},i?(n.cipher_suite=s.getBytes(2),n.compression_method=s.getByte()):(n.cipher_suites=Ht(s,2),n.compression_methods=Ht(s,1)),a=r-(a-s.length()),a>0){for(var o=Ht(s,2);o.length()>0;)n.extensions.push({type:[o.getByte(),o.getByte()],data:Ht(o,2)});if(!i)for(var u=0;u<n.extensions.length;++u){var l=n.extensions[u];if(l.type[0]===0&&l.type[1]===0)for(var c=Ht(l.data,2);c.length()>0;){var f=c.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(Ht(c,2).getBytes())}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=S.getCipherSuite(n.cipher_suite);else for(var d=z.util.createBuffer(n.cipher_suites.bytes());d.length()>0&&(e.session.cipherSuite=S.getCipherSuite(d.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.handshake_failure},cipherSuite:z.util.bytesToHex(n.cipher_suite)});i?e.session.compressionMethod=n.compression_method:e.session.compressionMethod=S.CompressionMethod.none}return n};S.createSecurityParameters=function(e,t){var r=e.entity===S.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,s=r?n:S.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:S.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:s}};S.handleServerHello=function(e,t,r){var n=S.parseHelloMessage(e,t,r);if(!e.fail){if(n.version.minor<=e.version.minor)e.version.minor=n.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.protocol_version}});e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=Cf,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=FE,e.session.resuming=!1,S.createSecurityParameters(e,n)),e.session.id=i,e.process()}};S.handleClientHello=function(e,t,r){var n=S.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),s=null;if(e.sessionCache&&(s=e.sessionCache.getSession(i),s===null?i="":(s.version.major!==n.version.major||s.version.minor>n.version.minor)&&(s=null,i="")),i.length===0&&(i=z.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},s)e.version=e.session.version=s.version,e.session.sp=s.sp;else{for(var a,o=1;o<S.SupportedVersions.length&&(a=S.SupportedVersions[o],!(a.minor<=n.version.minor));++o);e.version={major:a.major,minor:a.minor},e.session.version=e.version}s!==null?(e.expect=Ko,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?jE:Va,e.session.resuming=!1,S.createSecurityParameters(e,n)),e.open=!0,S.queue(e,S.createRecord(e,{type:S.ContentType.handshake,data:S.createServerHello(e)})),e.session.resuming?(S.queue(e,S.createRecord(e,{type:S.ContentType.change_cipher_spec,data:S.createChangeCipherSpec()})),e.state.pending=S.createConnectionState(e),e.state.current.write=e.state.pending.write,S.queue(e,S.createRecord(e,{type:S.ContentType.handshake,data:S.createFinished(e)}))):(S.queue(e,S.createRecord(e,{type:S.ContentType.handshake,data:S.createCertificate(e)})),e.fail||(S.queue(e,S.createRecord(e,{type:S.ContentType.handshake,data:S.createServerKeyExchange(e)})),e.verifyClient!==!1&&S.queue(e,S.createRecord(e,{type:S.ContentType.handshake,data:S.createCertificateRequest(e)})),S.queue(e,S.createRecord(e,{type:S.ContentType.handshake,data:S.createServerHelloDone(e)})))),S.flush(e),e.process()}};S.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_list:Ht(n,3)},s,a,o=[];try{for(;i.certificate_list.length()>0;)s=Ht(i.certificate_list,3),a=z.asn1.fromDer(s),s=z.pki.certificateFromAsn1(a,!0),o.push(s)}catch(l){return e.error(e,{message:"Could not parse certificate list.",cause:l,send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.bad_certificate}})}var u=e.entity===S.ConnectionEnd.client;(u||e.verifyClient===!0)&&o.length===0?e.error(e,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}}):o.length===0?e.expect=u?al:Va:(u?e.session.serverCertificate=o[0]:e.session.clientCertificate=o[0],S.verifyCertificateChain(e,o)&&(e.expect=u?al:Va)),e.process()};S.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.unsupported_certificate}});e.expect=VE,e.process()};S.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:Ht(n,2).getBytes()},s=null;if(e.getPrivateKey)try{s=e.getPrivateKey(e,e.session.serverCertificate),s=z.pki.privateKeyFromPem(s)}catch(u){e.error(e,{message:"Could not get private key.",cause:u,send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}})}if(s===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}});try{var a=e.session.sp;a.pre_master_secret=s.decrypt(i.enc_pre_master_secret);var o=e.session.clientHelloVersion;if(o.major!==a.pre_master_secret.charCodeAt(0)||o.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=z.random.getBytes(48)}e.expect=Ko,e.session.clientCertificate!==null&&(e.expect=zE),e.process()};S.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:Ht(n,1),certificate_authorities:Ht(n,2)};e.session.certificateRequest=i,e.expect=HE,e.process()};S.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s={signature:Ht(n,2).getBytes()},a=z.util.createBuffer();a.putBuffer(e.session.md5.digest()),a.putBuffer(e.session.sha1.digest()),a=a.getBytes();try{var o=e.session.clientCertificate;if(!o.publicKey.verify(a,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.handshake_failure}})}e.expect=Ko,e.process()};S.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.insufficient_security}},i=0,s=e.verify(e,n.alert.description,i,[]);if(s!==!0)return(s||s===0)&&(typeof s=="object"&&!z.util.isArray(s)?(s.message&&(n.message=s.message),s.alert&&(n.alert.description=s.alert)):typeof s=="number"&&(n.alert.description=s)),e.error(e,n)}e.session.certificateRequest!==null&&(t=S.createRecord(e,{type:S.ContentType.handshake,data:S.createCertificate(e)}),S.queue(e,t)),t=S.createRecord(e,{type:S.ContentType.handshake,data:S.createClientKeyExchange(e)}),S.queue(e,t),e.expect=$E;var a=function(o,u){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&S.queue(o,S.createRecord(o,{type:S.ContentType.handshake,data:S.createCertificateVerify(o,u)})),S.queue(o,S.createRecord(o,{type:S.ContentType.change_cipher_spec,data:S.createChangeCipherSpec()})),o.state.pending=S.createConnectionState(o),o.state.current.write=o.state.pending.write,S.queue(o,S.createRecord(o,{type:S.ContentType.handshake,data:S.createFinished(o)})),o.expect=Cf,S.flush(o),o.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return a(e,null);S.getClientSignature(e,a)};S.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});var r=e.entity===S.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=S.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?KE:WE,e.process()};S.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s=t.fragment.getBytes();n=z.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var a=e.entity===S.ConnectionEnd.client,o=a?"server finished":"client finished",u=e.session.sp,l=12,c=Ys;if(n=c(u.master_secret,o,n.getBytes(),l),n.getBytes()!==s)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&a||!e.session.resuming&&!a)&&(S.queue(e,S.createRecord(e,{type:S.ContentType.change_cipher_spec,data:S.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,S.queue(e,S.createRecord(e,{type:S.ContentType.handshake,data:S.createFinished(e)}))),e.expect=a?qE:JE,e.handshaking=!1,++e.handshakes,e.peerCertificate=a?e.session.serverCertificate:e.session.clientCertificate,S.flush(e),e.isConnected=!0,e.connected(e),e.process()};S.handleAlert=function(e,t){var r=t.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case S.Alert.Description.close_notify:i="Connection closed.";break;case S.Alert.Description.unexpected_message:i="Unexpected message.";break;case S.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case S.Alert.Description.decryption_failed:i="Decryption failed.";break;case S.Alert.Description.record_overflow:i="Record overflow.";break;case S.Alert.Description.decompression_failure:i="Decompression failed.";break;case S.Alert.Description.handshake_failure:i="Handshake failure.";break;case S.Alert.Description.bad_certificate:i="Bad certificate.";break;case S.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case S.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case S.Alert.Description.certificate_expired:i="Certificate expired.";break;case S.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case S.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case S.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case S.Alert.Description.access_denied:i="Access denied.";break;case S.Alert.Description.decode_error:i="Decode error.";break;case S.Alert.Description.decrypt_error:i="Decrypt error.";break;case S.Alert.Description.export_restriction:i="Export restriction.";break;case S.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case S.Alert.Description.insufficient_security:i="Insufficient security.";break;case S.Alert.Description.internal_error:i="Internal error.";break;case S.Alert.Description.user_canceled:i="User canceled.";break;case S.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===S.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===S.ConnectionEnd.client?"server":"client",alert:n}),e.process()};S.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=z.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var s=r.bytes(i+4);r.read+=4,n in As[e.entity][e.expect]?(e.entity===S.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:z.md.md5.create(),sha1:z.md.sha1.create()}),n!==S.HandshakeType.hello_request&&n!==S.HandshakeType.certificate_verify&&n!==S.HandshakeType.finished&&(e.session.md5.update(s),e.session.sha1.update(s)),As[e.entity][e.expect][n](e,t,i)):S.handleUnexpected(e,t)};S.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};S.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),s=r.getBytes(i);if(n===S.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>s.length)return e.process();S.queue(e,S.createRecord(e,{type:S.ContentType.heartbeat,data:S.createHeartbeat(S.HeartbeatMessageType.heartbeat_response,s)})),S.flush(e)}else if(n===S.HeartbeatMessageType.heartbeat_response){if(s!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,z.util.createBuffer(s))}e.process()};var PE=0,FE=1,al=2,VE=3,HE=4,Cf=5,KE=6,qE=7,$E=8,GE=0,jE=1,Va=2,zE=3,Ko=4,WE=5,JE=6,E=S.handleUnexpected,Ef=S.handleChangeCipherSpec,Bt=S.handleAlert,Mt=S.handleHandshake,Sf=S.handleApplicationData,kt=S.handleHeartbeat,qo=[];qo[S.ConnectionEnd.client]=[[E,Bt,Mt,E,kt],[E,Bt,Mt,E,kt],[E,Bt,Mt,E,kt],[E,Bt,Mt,E,kt],[E,Bt,Mt,E,kt],[Ef,Bt,E,E,kt],[E,Bt,Mt,E,kt],[E,Bt,Mt,Sf,kt],[E,Bt,Mt,E,kt]];qo[S.ConnectionEnd.server]=[[E,Bt,Mt,E,kt],[E,Bt,Mt,E,kt],[E,Bt,Mt,E,kt],[E,Bt,Mt,E,kt],[Ef,Bt,E,E,kt],[E,Bt,Mt,E,kt],[E,Bt,Mt,Sf,kt],[E,Bt,Mt,E,kt]];var Pr=S.handleHelloRequest,QE=S.handleServerHello,_f=S.handleCertificate,ol=S.handleServerKeyExchange,da=S.handleCertificateRequest,$i=S.handleServerHelloDone,wf=S.handleFinished,As=[];As[S.ConnectionEnd.client]=[[E,E,QE,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[Pr,E,E,E,E,E,E,E,E,E,E,_f,ol,da,$i,E,E,E,E,E,E],[Pr,E,E,E,E,E,E,E,E,E,E,E,ol,da,$i,E,E,E,E,E,E],[Pr,E,E,E,E,E,E,E,E,E,E,E,E,da,$i,E,E,E,E,E,E],[Pr,E,E,E,E,E,E,E,E,E,E,E,E,E,$i,E,E,E,E,E,E],[Pr,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[Pr,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,wf],[Pr,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[Pr,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]];var YE=S.handleClientHello,XE=S.handleClientKeyExchange,ZE=S.handleCertificateVerify;As[S.ConnectionEnd.server]=[[E,YE,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,_f,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,XE,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,ZE,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,wf],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]];S.generateKeys=function(e,t){var r=Ys,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,s=e.version.major===S.Versions.TLS_1_0.major&&e.version.minor===S.Versions.TLS_1_0.minor;s&&(i+=2*t.fixed_iv_length);var a=r(t.master_secret,"key expansion",n,i),o={client_write_MAC_key:a.getBytes(t.mac_key_length),server_write_MAC_key:a.getBytes(t.mac_key_length),client_write_key:a.getBytes(t.enc_key_length),server_write_key:a.getBytes(t.enc_key_length)};return s&&(o.client_write_IV=a.getBytes(t.fixed_iv_length),o.server_write_IV=a.getBytes(t.fixed_iv_length)),o};S.createConnectionState=function(e){var t=e.entity===S.ConnectionEnd.client,r=function(){var s={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(a){return!0},compressionState:null,compressFunction:function(a){return!0},updateSequenceNumber:function(){s.sequenceNumber[1]===4294967295?(s.sequenceNumber[1]=0,++s.sequenceNumber[0]):++s.sequenceNumber[1]}};return s},n={read:r(),write:r()};if(n.read.update=function(s,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(s,a,n.read)||s.error(s,{message:"Could not decompress record.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.decompression_failure}}):s.error(s,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.bad_record_mac}}),!s.fail},n.write.update=function(s,a){return n.write.compressFunction(s,a,n.write)?n.write.cipherFunction(a,n.write)||s.error(s,{message:"Could not encrypt record.",send:!1,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}}):s.error(s,{message:"Could not compress record.",send:!1,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}}),!s.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=S.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case S.CompressionMethod.none:break;case S.CompressionMethod.deflate:n.read.compressFunction=ME,n.write.compressFunction=OE;break;default:throw new Error("Unsupported compression algorithm.")}}return n};S.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,r=z.util.createBuffer();return r.putInt32(t),r.putBytes(z.random.getBytes(28)),r};S.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r};S.createAlert=function(e,t){var r=z.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),S.createRecord(e,{type:S.ContentType.alert,data:r})};S.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=z.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var i=t.length(),s=z.util.createBuffer();s.putByte(S.CompressionMethod.none);var a=s.length(),o=z.util.createBuffer();if(e.virtualHost){var u=z.util.createBuffer();u.putByte(0),u.putByte(0);var l=z.util.createBuffer();l.putByte(0),jt(l,2,z.util.createBuffer(e.virtualHost));var c=z.util.createBuffer();jt(c,2,l),jt(u,2,c),o.putBuffer(u)}var f=o.length();f>0&&(f+=2);var d=e.session.id,p=d.length+1+2+4+28+2+i+1+a+f,g=z.util.createBuffer();return g.putByte(S.HandshakeType.client_hello),g.putInt24(p),g.putByte(e.version.major),g.putByte(e.version.minor),g.putBytes(e.session.sp.client_random),jt(g,1,z.util.createBuffer(d)),jt(g,2,t),jt(g,1,s),f>0&&jt(g,2,o),g};S.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=z.util.createBuffer();return n.putByte(S.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),jt(n,1,z.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n};S.createCertificate=function(e){var t=e.entity===S.ConnectionEnd.client,r=null;if(e.getCertificate){var n;t?n=e.session.certificateRequest:n=e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n)}var i=z.util.createBuffer();if(r!==null)try{z.util.isArray(r)||(r=[r]);for(var s=null,a=0;a<r.length;++a){var o=z.pem.decode(r[a])[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=o.type,u}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var l=z.util.createBuffer(o.body);s===null&&(s=z.asn1.fromDer(l.bytes(),!1));var c=z.util.createBuffer();jt(c,3,l),i.putBuffer(c)}r=z.pki.certificateFromAsn1(s),t?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(p){return e.error(e,{message:"Could not send certificate list.",cause:p,send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.bad_certificate}})}var f=3+i.length(),d=z.util.createBuffer();return d.putByte(S.HandshakeType.certificate),d.putInt24(f),jt(d,3,i),d};S.createClientKeyExchange=function(e){var t=z.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(z.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var i=t.length+2,s=z.util.createBuffer();return s.putByte(S.HandshakeType.client_key_exchange),s.putInt24(i),s.putInt16(t.length),s.putBytes(t),s};S.createServerKeyExchange=function(e){var t=z.util.createBuffer();return t};S.getClientSignature=function(e,t){var r=z.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,i,s){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=z.pki.privateKeyFromPem(a)}catch(o){n.error(n,{message:"Could not get private key.",cause:o,send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}}):i=a.sign(i,null),s(n,i)},e.getSignature(e,r,t)};S.createCertificateVerify=function(e,t){var r=t.length+2,n=z.util.createBuffer();return n.putByte(S.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n};S.createCertificateRequest=function(e){var t=z.util.createBuffer();t.putByte(1);var r=z.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],s=z.pki.distinguishedNameToAsn1(i.subject),a=z.asn1.toDer(s);r.putInt16(a.length()),r.putBuffer(a)}var o=1+t.length()+2+r.length(),u=z.util.createBuffer();return u.putByte(S.HandshakeType.certificate_request),u.putInt24(o),jt(u,1,t),jt(u,2,r),u};S.createServerHelloDone=function(e){var t=z.util.createBuffer();return t.putByte(S.HandshakeType.server_hello_done),t.putInt24(0),t};S.createChangeCipherSpec=function(){var e=z.util.createBuffer();return e.putByte(1),e};S.createFinished=function(e){var t=z.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===S.ConnectionEnd.client,n=e.session.sp,i=12,s=Ys,a=r?"client finished":"server finished";t=s(n.master_secret,a,t.getBytes(),i);var o=z.util.createBuffer();return o.putByte(S.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o};S.createHeartbeat=function(e,t,r){typeof r>"u"&&(r=t.length);var n=z.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),s=Math.max(16,i-r-3);return n.putBytes(z.random.getBytes(s)),n};S.queue=function(e,t){if(!!t&&!(t.fragment.length()===0&&(t.type===S.ContentType.handshake||t.type===S.ContentType.alert||t.type===S.ContentType.change_cipher_spec))){if(t.type===S.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=S.MaxFragment)n=[t];else{n=[];for(var i=t.fragment.bytes();i.length>S.MaxFragment;)n.push(S.createRecord(e,{type:t.type,data:z.util.createBuffer(i.slice(0,S.MaxFragment))})),i=i.slice(S.MaxFragment);i.length>0&&n.push(S.createRecord(e,{type:t.type,data:z.util.createBuffer(i)}))}for(var s=0;s<n.length&&!e.fail;++s){var a=n[s],o=e.state.current.write;o.update(e,a)&&e.records.push(a)}}};S.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var pa=function(e){switch(e){case!0:return!0;case z.pki.certificateError.bad_certificate:return S.Alert.Description.bad_certificate;case z.pki.certificateError.unsupported_certificate:return S.Alert.Description.unsupported_certificate;case z.pki.certificateError.certificate_revoked:return S.Alert.Description.certificate_revoked;case z.pki.certificateError.certificate_expired:return S.Alert.Description.certificate_expired;case z.pki.certificateError.certificate_unknown:return S.Alert.Description.certificate_unknown;case z.pki.certificateError.unknown_ca:return S.Alert.Description.unknown_ca;default:return S.Alert.Description.bad_certificate}},eS=function(e){switch(e){case!0:return!0;case S.Alert.Description.bad_certificate:return z.pki.certificateError.bad_certificate;case S.Alert.Description.unsupported_certificate:return z.pki.certificateError.unsupported_certificate;case S.Alert.Description.certificate_revoked:return z.pki.certificateError.certificate_revoked;case S.Alert.Description.certificate_expired:return z.pki.certificateError.certificate_expired;case S.Alert.Description.certificate_unknown:return z.pki.certificateError.certificate_unknown;case S.Alert.Description.unknown_ca:return z.pki.certificateError.unknown_ca;default:return z.pki.certificateError.bad_certificate}};S.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(s,a,o){var u=pa(s),l=e.verify(e,s,a,o);if(l!==!0){if(typeof l=="object"&&!z.util.isArray(l)){var c=new Error("The application rejected the certificate.");throw c.send=!0,c.alert={level:S.Alert.Level.fatal,description:S.Alert.Description.bad_certificate},l.message&&(c.message=l.message),l.alert&&(c.alert.description=l.alert),c}l!==s&&(l=eS(l))}return l},z.pki.verifyCertificateChain(e.caStore,t,r)}catch(s){var i=s;(typeof i!="object"||z.util.isArray(i))&&(i={send:!0,alert:{level:S.Alert.Level.fatal,description:pa(s)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:S.Alert.Level.fatal,description:pa(i.error)}),e.error(e,i)}return!e.fail};S.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var n in e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(i){var s=null,a=null;if(i?a=z.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){s=r.cache[a],delete r.cache[a];for(var o in r.order)if(r.order[o]===a){r.order.splice(o,1);break}}return s},r.setSession=function(i,s){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=z.util.bytesToHex(i);r.order.push(a),r.cache[a]=s}}return r};S.createConnection=function(e){var t=null;e.caStore?z.util.isArray(e.caStore)?t=z.pki.createCaStore(e.caStore):t=e.caStore:t=z.pki.createCaStore();var r=e.cipherSuites||null;if(r===null){r=[];for(var n in S.CipherSuites)r.push(S.CipherSuites[n])}var i=e.server?S.ConnectionEnd.server:S.ConnectionEnd.client,s=e.sessionCache?S.createSessionCache(e.sessionCache):null,a={version:{major:S.Version.major,minor:S.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:s,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(c,f,d,p){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:z.util.createBuffer(),tlsData:z.util.createBuffer(),data:z.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(c,f){f.origin=f.origin||(c.entity===S.ConnectionEnd.client?"client":"server"),f.send&&(S.queue(c,S.createAlert(c,f.alert)),S.flush(c));var d=f.fatal!==!1;d&&(c.fail=!0),e.error(c,f),d&&c.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};a.reset=function(c){a.version={major:S.Version.major,minor:S.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===S.ConnectionEnd.client?PE:GE,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(c||typeof c>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=S.createConnectionState(a)},a.reset();var o=function(c,f){var d=f.type-S.ContentType.change_cipher_spec,p=qo[c.entity][c.expect];d in p?p[d](c,f):S.handleUnexpected(c,f)},u=function(c){var f=0,d=c.input,p=d.length();if(p<5)f=5-p;else{c.record={type:d.getByte(),version:{major:d.getByte(),minor:d.getByte()},length:d.getInt16(),fragment:z.util.createBuffer(),ready:!1};var g=c.record.version.major===c.version.major;g&&c.session&&c.session.version&&(g=c.record.version.minor===c.version.minor),g||c.error(c,{message:"Incompatible TLS version.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.protocol_version}})}return f},l=function(c){var f=0,d=c.input,p=d.length();if(p<c.record.length)f=c.record.length-p;else{c.record.fragment.putBytes(d.getBytes(c.record.length)),d.compact();var g=c.state.current.read;g.update(c,c.record)&&(c.fragmented!==null&&(c.fragmented.type===c.record.type?(c.fragmented.fragment.putBuffer(c.record.fragment),c.record=c.fragmented):c.error(c,{message:"Invalid fragmented record.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.unexpected_message}})),c.record.ready=!0)}return f};return a.handshake=function(c){if(a.entity!==S.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,c=c||"";var f=null;c.length>0&&(a.sessionCache&&(f=a.sessionCache.getSession(c)),f===null&&(c="")),c.length===0&&a.sessionCache&&(f=a.sessionCache.getSession(),f!==null&&(c=f.id)),a.session={id:c,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:z.md.md5.create(),sha1:z.md.sha1.create()},f&&(a.version=f.version,a.session.sp=f.sp),a.session.sp.client_random=S.createRandom().getBytes(),a.open=!0,S.queue(a,S.createRecord(a,{type:S.ContentType.handshake,data:S.createClientHello(a)})),S.flush(a)}},a.process=function(c){var f=0;return c&&a.input.putBytes(c),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(f=u(a)),!a.fail&&a.record!==null&&!a.record.ready&&(f=l(a)),!a.fail&&a.record!==null&&a.record.ready&&o(a,a.record)),f},a.prepare=function(c){return S.queue(a,S.createRecord(a,{type:S.ContentType.application_data,data:z.util.createBuffer(c)})),S.flush(a)},a.prepareHeartbeatRequest=function(c,f){return c instanceof z.util.ByteBuffer&&(c=c.bytes()),typeof f>"u"&&(f=c.length),a.expectedHeartbeatPayload=c,S.queue(a,S.createRecord(a,{type:S.ContentType.heartbeat,data:S.createHeartbeat(S.HeartbeatMessageType.heartbeat_request,c,f)})),S.flush(a)},a.close=function(c){if(!a.fail&&a.sessionCache&&a.session){var f={id:a.session.id,version:a.session.version,sp:a.session.sp};f.sp.keys=null,a.sessionCache.setSession(f.id,f)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,S.queue(a,S.createAlert(a,{level:S.Alert.Level.warning,description:S.Alert.Description.close_notify})),S.flush(a)),a.closed(a)),a.reset(c)},a};z.tls=z.tls||{};for(var ga in S)typeof S[ga]!="function"&&(z.tls[ga]=S[ga]);z.tls.prf_tls1=Ys;z.tls.hmac_sha1=UE;z.tls.createSessionCache=S.createSessionCache;z.tls.createConnection=S.createConnection;var Jr=we,Xt=Jr.tls;Xt.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Xt.BulkCipherAlgorithm.aes,e.cipher_type=Xt.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Xt.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:Tf};Xt.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Xt.BulkCipherAlgorithm.aes,e.cipher_type=Xt.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Xt.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:Tf};function Tf(e,t,r){var n=t.entity===Jr.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:Jr.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:Jr.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=iS,e.write.cipherFunction=tS,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=Xt.hmac_sha1}function tS(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var i;e.version.minor===Xt.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=Jr.random.getBytesSync(16),t.cipherState.init=!0;var s=t.cipherState.cipher;return s.start({iv:i}),e.version.minor>=Xt.Versions.TLS_1_1.minor&&s.output.putBytes(i),s.update(e.fragment),s.finish(rS)&&(e.fragment=s.output,e.length=e.fragment.length(),r=!0),r}function rS(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function nS(e,t,r){var n=!0;if(r){for(var i=t.length(),s=t.last(),a=i-1-s;a<i-1;++a)n=n&&t.at(a)==s;n&&t.truncate(s+1)}return n}function iS(e,t){var r=!1,n;e.version.minor===Xt.Versions.TLS_1_0.minor?n=t.cipherState.init?null:t.cipherState.iv:n=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:n}),i.update(e.fragment),r=i.finish(nS);var s=t.macLength,a=Jr.random.getBytesSync(s),o=i.output.length();o>=s?(e.fragment=i.output.getBytes(o-s),a=i.output.getBytes(s)):e.fragment=i.output.getBytes(),e.fragment=Jr.util.createBuffer(e.fragment),e.length=e.fragment.length();var u=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=sS(t.macKey,a,u)&&r,r}function sS(e,t,r){var n=Jr.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}var Ze=we,Mi=Ze.sha512=Ze.sha512||{};Ze.md.sha512=Ze.md.algorithms.sha512=Mi;var xf=Ze.sha384=Ze.sha512.sha384=Ze.sha512.sha384||{};xf.create=function(){return Mi.create("SHA-384")};Ze.md.sha384=Ze.md.algorithms.sha384=xf;Ze.sha512.sha256=Ze.sha512.sha256||{create:function(){return Mi.create("SHA-512/256")}};Ze.md["sha512/256"]=Ze.md.algorithms["sha512/256"]=Ze.sha512.sha256;Ze.sha512.sha224=Ze.sha512.sha224||{create:function(){return Mi.create("SHA-512/224")}};Ze.md["sha512/224"]=Ze.md.algorithms["sha512/224"]=Ze.sha512.sha224;Mi.create=function(e){if(Af||aS(),typeof e>"u"&&(e="SHA-512"),!(e in an))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=an[e],r=null,n=Ze.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var a=64;switch(e){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var u=o.messageLengthSize/4,l=0;l<u;++l)o.fullMessageLength.push(0);n=Ze.util.createBuffer(),r=new Array(t.length);for(var l=0;l<t.length;++l)r[l]=t[l].slice(0);return o},o.start(),o.update=function(u,l){l==="utf8"&&(u=Ze.util.encodeUtf8(u));var c=u.length;o.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var f=o.fullMessageLength.length-1;f>=0;--f)o.fullMessageLength[f]+=c[1],c[1]=c[0]+(o.fullMessageLength[f]/4294967296>>>0),o.fullMessageLength[f]=o.fullMessageLength[f]>>>0,c[0]=c[1]/4294967296>>>0;return n.putBytes(u),ul(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var u=Ze.util.createBuffer();u.putBytes(n.bytes());var l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,c=l&o.blockLength-1;u.putBytes(Ha.substr(0,o.blockLength-c));for(var f,d,p=o.fullMessageLength[0]*8,g=0;g<o.fullMessageLength.length-1;++g)f=o.fullMessageLength[g+1]*8,d=f/4294967296>>>0,p+=d,u.putInt32(p>>>0),p=f>>>0;u.putInt32(p);for(var y=new Array(r.length),g=0;g<r.length;++g)y[g]=r[g].slice(0);ul(y,i,u);var T=Ze.util.createBuffer(),x;e==="SHA-512"?x=y.length:e==="SHA-384"?x=y.length-2:x=y.length-4;for(var g=0;g<x;++g)T.putInt32(y[g][0]),(g!==x-1||e!=="SHA-512/224")&&T.putInt32(y[g][1]);return T},o};var Ha=null,Af=!1,Ka=null,an=null;function aS(){Ha=String.fromCharCode(128),Ha+=Ze.util.fillString(String.fromCharCode(0),128),Ka=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],an={},an["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],an["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],an["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],an["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Af=!0}function ul(e,t,r){for(var n,i,s,a,o,u,l,c,f,d,p,g,y,T,x,k,v,_,w,I,B,M,H,N,U,K,q,re,Y,ue,ee,ot,pe,qe,Me,Fe=r.length();Fe>=128;){for(Y=0;Y<16;++Y)t[Y][0]=r.getInt32()>>>0,t[Y][1]=r.getInt32()>>>0;for(;Y<80;++Y)ot=t[Y-2],ue=ot[0],ee=ot[1],n=((ue>>>19|ee<<13)^(ee>>>29|ue<<3)^ue>>>6)>>>0,i=((ue<<13|ee>>>19)^(ee<<3|ue>>>29)^(ue<<26|ee>>>6))>>>0,qe=t[Y-15],ue=qe[0],ee=qe[1],s=((ue>>>1|ee<<31)^(ue>>>8|ee<<24)^ue>>>7)>>>0,a=((ue<<31|ee>>>1)^(ue<<24|ee>>>8)^(ue<<25|ee>>>7))>>>0,pe=t[Y-7],Me=t[Y-16],ee=i+pe[1]+a+Me[1],t[Y][0]=n+pe[0]+s+Me[0]+(ee/4294967296>>>0)>>>0,t[Y][1]=ee>>>0;for(y=e[0][0],T=e[0][1],x=e[1][0],k=e[1][1],v=e[2][0],_=e[2][1],w=e[3][0],I=e[3][1],B=e[4][0],M=e[4][1],H=e[5][0],N=e[5][1],U=e[6][0],K=e[6][1],q=e[7][0],re=e[7][1],Y=0;Y<80;++Y)l=((B>>>14|M<<18)^(B>>>18|M<<14)^(M>>>9|B<<23))>>>0,c=((B<<18|M>>>14)^(B<<14|M>>>18)^(M<<23|B>>>9))>>>0,f=(U^B&(H^U))>>>0,d=(K^M&(N^K))>>>0,o=((y>>>28|T<<4)^(T>>>2|y<<30)^(T>>>7|y<<25))>>>0,u=((y<<4|T>>>28)^(T<<30|y>>>2)^(T<<25|y>>>7))>>>0,p=(y&x|v&(y^x))>>>0,g=(T&k|_&(T^k))>>>0,ee=re+c+d+Ka[Y][1]+t[Y][1],n=q+l+f+Ka[Y][0]+t[Y][0]+(ee/4294967296>>>0)>>>0,i=ee>>>0,ee=u+g,s=o+p+(ee/4294967296>>>0)>>>0,a=ee>>>0,q=U,re=K,U=H,K=N,H=B,N=M,ee=I+i,B=w+n+(ee/4294967296>>>0)>>>0,M=ee>>>0,w=v,I=_,v=x,_=k,x=y,k=T,ee=i+a,y=n+s+(ee/4294967296>>>0)>>>0,T=ee>>>0;ee=e[0][1]+T,e[0][0]=e[0][0]+y+(ee/4294967296>>>0)>>>0,e[0][1]=ee>>>0,ee=e[1][1]+k,e[1][0]=e[1][0]+x+(ee/4294967296>>>0)>>>0,e[1][1]=ee>>>0,ee=e[2][1]+_,e[2][0]=e[2][0]+v+(ee/4294967296>>>0)>>>0,e[2][1]=ee>>>0,ee=e[3][1]+I,e[3][0]=e[3][0]+w+(ee/4294967296>>>0)>>>0,e[3][1]=ee>>>0,ee=e[4][1]+M,e[4][0]=e[4][0]+B+(ee/4294967296>>>0)>>>0,e[4][1]=ee>>>0,ee=e[5][1]+N,e[5][0]=e[5][0]+H+(ee/4294967296>>>0)>>>0,e[5][1]=ee>>>0,ee=e[6][1]+K,e[6][0]=e[6][0]+U+(ee/4294967296>>>0)>>>0,e[6][1]=ee>>>0,ee=e[7][1]+re,e[7][0]=e[7][0]+q+(ee/4294967296>>>0)>>>0,e[7][1]=ee>>>0,Fe-=128}}var $o={},oS=we,Et=oS.asn1;$o.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Et.Class.UNIVERSAL,type:Et.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Et.Class.UNIVERSAL,type:Et.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Et.Class.UNIVERSAL,type:Et.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Et.Class.UNIVERSAL,type:Et.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Et.Class.UNIVERSAL,type:Et.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};$o.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Et.Class.UNIVERSAL,type:Et.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Et.Class.UNIVERSAL,type:Et.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Et.Class.UNIVERSAL,type:Et.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Et.Class.UNIVERSAL,type:Et.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};var Rt=we,If=$o,uS=If.publicKeyValidator,lS=If.privateKeyValidator;if(typeof cS>"u")var cS=Rt.jsbn.BigInteger;var qa=Rt.util.ByteBuffer,Vt=typeof Buffer>"u"?Uint8Array:Buffer;Rt.pki=Rt.pki||{};Rt.pki.ed25519=Rt.ed25519=Rt.ed25519||{};var Ae=Rt.ed25519;Ae.constants={};Ae.constants.PUBLIC_KEY_BYTE_LENGTH=32;Ae.constants.PRIVATE_KEY_BYTE_LENGTH=64;Ae.constants.SEED_BYTE_LENGTH=32;Ae.constants.SIGN_BYTE_LENGTH=64;Ae.constants.HASH_BYTE_LENGTH=64;Ae.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=Rt.random.getBytesSync(Ae.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==Ae.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Ae.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Rr({message:t,encoding:"binary"});for(var r=new Vt(Ae.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Vt(Ae.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=t[i];return pS(r,n),{publicKey:r,privateKey:n}};Ae.privateKeyFromAsn1=function(e){var t={},r=[],n=Rt.asn1.validate(e,lS,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=Rt.asn1.derToOid(t.privateKeyOid),a=Rt.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var o=t.privateKey,u=Rr({message:Rt.asn1.fromDer(o).value,encoding:"binary"});return{privateKeyBytes:u}};Ae.publicKeyFromAsn1=function(e){var t={},r=[],n=Rt.asn1.validate(e,uS,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=Rt.asn1.derToOid(t.publicKeyOid),a=Rt.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var o=t.ed25519PublicKey;if(o.length!==Ae.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Rr({message:o,encoding:"binary"})};Ae.publicKeyFromPrivateKey=function(e){e=e||{};var t=Rr({message:e.privateKey,encoding:"binary"});if(t.length!==Ae.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Ae.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Vt(Ae.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r};Ae.sign=function(e){e=e||{};var t=Rr(e),r=Rr({message:e.privateKey,encoding:"binary"});if(r.length===Ae.constants.SEED_BYTE_LENGTH){var n=Ae.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Ae.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Ae.constants.SEED_BYTE_LENGTH+" or "+Ae.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Vt(Ae.constants.SIGN_BYTE_LENGTH+t.length);gS(i,t,t.length,r);for(var s=new Vt(Ae.constants.SIGN_BYTE_LENGTH),a=0;a<s.length;++a)s[a]=i[a];return s};Ae.verify=function(e){e=e||{};var t=Rr(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Rr({message:e.signature,encoding:"binary"});if(r.length!==Ae.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Ae.constants.SIGN_BYTE_LENGTH);var n=Rr({message:e.publicKey,encoding:"binary"});if(n.length!==Ae.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Ae.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Vt(Ae.constants.SIGN_BYTE_LENGTH+t.length),s=new Vt(Ae.constants.SIGN_BYTE_LENGTH+t.length),a;for(a=0;a<Ae.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<t.length;++a)i[a+Ae.constants.SIGN_BYTE_LENGTH]=t[a];return mS(s,i,i.length,n)>=0};function Rr(e){var t=e.message;if(t instanceof Uint8Array||t instanceof Vt)return t;var r=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.from(t,r);t=new qa(t,r)}else if(!(t instanceof qa))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Vt(t.length()),i=0;i<n.length;++i)n[i]=t.at(i);return n}var $a=ge(),Is=ge([1]),fS=ge([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),hS=ge([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),ll=ge([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),cl=ge([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),ma=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),dS=ge([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function mi(e,t){var r=Rt.md.sha512.create(),n=new qa(e);r.update(n.getBytes(t),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var s=new Vt(Ae.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)s[a]=i.charCodeAt(a);return s}function pS(e,t){var r=[ge(),ge(),ge(),ge()],n,i=mi(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,jo(r,i),Go(e,r),n=0;n<32;++n)t[n+32]=e[n];return 0}function gS(e,t,r,n){var i,s,a=new Float64Array(64),o=[ge(),ge(),ge(),ge()],u=mi(n,32);u[0]&=248,u[31]&=127,u[31]|=64;var l=r+64;for(i=0;i<r;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=u[32+i];var c=mi(e.subarray(32),r+32);for(Ga(c),jo(o,c),Go(e,o),i=32;i<64;++i)e[i]=n[i];var f=mi(e,r+64);for(Ga(f),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=c[i];for(i=0;i<32;++i)for(s=0;s<32;s++)a[i+s]+=f[i]*u[s];return Bf(e.subarray(32),a),l}function mS(e,t,r,n){var i,s,a=new Vt(32),o=[ge(),ge(),ge(),ge()],u=[ge(),ge(),ge(),ge()];if(s=-1,r<64||yS(u,n))return-1;for(i=0;i<r;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=n[i];var l=mi(e,r);if(Ga(l),Nf(o,u,l),jo(u,t.subarray(32)),ja(o,u),Go(a,o),r-=64,kf(t,0,a,0)){for(i=0;i<r;++i)e[i]=0;return-1}for(i=0;i<r;++i)e[i]=t[i+64];return s=r,s}function Bf(e,t){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*ma[i-(n-32)],r=t[i]+128>>8,t[i]-=r*256;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*ma[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*ma[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=t[n]&255}function Ga(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;Bf(e,t)}function ja(e,t){var r=ge(),n=ge(),i=ge(),s=ge(),a=ge(),o=ge(),u=ge(),l=ge(),c=ge();Nn(r,e[1],e[0]),Nn(c,t[1],t[0]),$e(r,r,c),Bn(n,e[0],e[1]),Bn(c,t[0],t[1]),$e(n,n,c),$e(i,e[3],t[3]),$e(i,i,hS),$e(s,e[2],t[2]),Bn(s,s,s),Nn(a,n,r),Nn(o,s,i),Bn(u,s,i),Bn(l,n,r),$e(e[0],a,o),$e(e[1],l,u),$e(e[2],u,o),$e(e[3],a,l)}function fl(e,t,r){for(var n=0;n<4;++n)Df(e[n],t[n],r)}function Go(e,t){var r=ge(),n=ge(),i=ge();ES(i,t[2]),$e(r,t[0],i),$e(n,t[1],i),Bs(e,n),e[31]^=Rf(r)<<7}function Bs(e,t){var r,n,i,s=ge(),a=ge();for(r=0;r<16;++r)a[r]=t[r];for(ya(a),ya(a),ya(a),n=0;n<2;++n){for(s[0]=a[0]-65517,r=1;r<15;++r)s[r]=a[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,Df(a,s,1-i)}for(r=0;r<16;r++)e[2*r]=a[r]&255,e[2*r+1]=a[r]>>8}function yS(e,t){var r=ge(),n=ge(),i=ge(),s=ge(),a=ge(),o=ge(),u=ge();return zr(e[2],Is),vS(e[1],t),on(i,e[1]),$e(s,i,fS),Nn(i,i,e[2]),Bn(s,e[2],s),on(a,s),on(o,a),$e(u,o,a),$e(r,u,i),$e(r,r,s),bS(r,r),$e(r,r,i),$e(r,r,s),$e(r,r,s),$e(e[0],r,s),on(n,e[0]),$e(n,n,s),hl(n,i)&&$e(e[0],e[0],dS),on(n,e[0]),$e(n,n,s),hl(n,i)?-1:(Rf(e[0])===t[31]>>7&&Nn(e[0],$a,e[0]),$e(e[3],e[0],e[1]),0)}function vS(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function bS(e,t){var r=ge(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)on(r,r),n!==1&&$e(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function hl(e,t){var r=new Vt(32),n=new Vt(32);return Bs(r,e),Bs(n,t),kf(r,0,n,0)}function kf(e,t,r,n){return CS(e,t,r,n,32)}function CS(e,t,r,n,i){var s,a=0;for(s=0;s<i;++s)a|=e[t+s]^r[n+s];return(1&a-1>>>8)-1}function Rf(e){var t=new Vt(32);return Bs(t,e),t[0]&1}function Nf(e,t,r){var n,i;for(zr(e[0],$a),zr(e[1],Is),zr(e[2],Is),zr(e[3],$a),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,fl(e,t,n),ja(t,e),ja(e,e),fl(e,t,n)}function jo(e,t){var r=[ge(),ge(),ge(),ge()];zr(r[0],ll),zr(r[1],cl),zr(r[2],Is),$e(r[3],ll,cl),Nf(e,r,t)}function zr(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0}function ES(e,t){var r=ge(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)on(r,r),n!==2&&n!==4&&$e(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function ya(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-n*65536;e[0]+=n-1+37*(n-1)}function Df(e,t,r){for(var n,i=~(r-1),s=0;s<16;++s)n=i&(e[s]^t[s]),e[s]^=n,t[s]^=n}function ge(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function Bn(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function Nn(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function on(e,t){$e(e,t,t)}function $e(e,t,r){var n,i,s=0,a=0,o=0,u=0,l=0,c=0,f=0,d=0,p=0,g=0,y=0,T=0,x=0,k=0,v=0,_=0,w=0,I=0,B=0,M=0,H=0,N=0,U=0,K=0,q=0,re=0,Y=0,ue=0,ee=0,ot=0,pe=0,qe=r[0],Me=r[1],Fe=r[2],_e=r[3],ve=r[4],Ve=r[5],We=r[6],Je=r[7],ut=r[8],tt=r[9],rt=r[10],lt=r[11],Qe=r[12],He=r[13],Ke=r[14],P=r[15];n=t[0],s+=n*qe,a+=n*Me,o+=n*Fe,u+=n*_e,l+=n*ve,c+=n*Ve,f+=n*We,d+=n*Je,p+=n*ut,g+=n*tt,y+=n*rt,T+=n*lt,x+=n*Qe,k+=n*He,v+=n*Ke,_+=n*P,n=t[1],a+=n*qe,o+=n*Me,u+=n*Fe,l+=n*_e,c+=n*ve,f+=n*Ve,d+=n*We,p+=n*Je,g+=n*ut,y+=n*tt,T+=n*rt,x+=n*lt,k+=n*Qe,v+=n*He,_+=n*Ke,w+=n*P,n=t[2],o+=n*qe,u+=n*Me,l+=n*Fe,c+=n*_e,f+=n*ve,d+=n*Ve,p+=n*We,g+=n*Je,y+=n*ut,T+=n*tt,x+=n*rt,k+=n*lt,v+=n*Qe,_+=n*He,w+=n*Ke,I+=n*P,n=t[3],u+=n*qe,l+=n*Me,c+=n*Fe,f+=n*_e,d+=n*ve,p+=n*Ve,g+=n*We,y+=n*Je,T+=n*ut,x+=n*tt,k+=n*rt,v+=n*lt,_+=n*Qe,w+=n*He,I+=n*Ke,B+=n*P,n=t[4],l+=n*qe,c+=n*Me,f+=n*Fe,d+=n*_e,p+=n*ve,g+=n*Ve,y+=n*We,T+=n*Je,x+=n*ut,k+=n*tt,v+=n*rt,_+=n*lt,w+=n*Qe,I+=n*He,B+=n*Ke,M+=n*P,n=t[5],c+=n*qe,f+=n*Me,d+=n*Fe,p+=n*_e,g+=n*ve,y+=n*Ve,T+=n*We,x+=n*Je,k+=n*ut,v+=n*tt,_+=n*rt,w+=n*lt,I+=n*Qe,B+=n*He,M+=n*Ke,H+=n*P,n=t[6],f+=n*qe,d+=n*Me,p+=n*Fe,g+=n*_e,y+=n*ve,T+=n*Ve,x+=n*We,k+=n*Je,v+=n*ut,_+=n*tt,w+=n*rt,I+=n*lt,B+=n*Qe,M+=n*He,H+=n*Ke,N+=n*P,n=t[7],d+=n*qe,p+=n*Me,g+=n*Fe,y+=n*_e,T+=n*ve,x+=n*Ve,k+=n*We,v+=n*Je,_+=n*ut,w+=n*tt,I+=n*rt,B+=n*lt,M+=n*Qe,H+=n*He,N+=n*Ke,U+=n*P,n=t[8],p+=n*qe,g+=n*Me,y+=n*Fe,T+=n*_e,x+=n*ve,k+=n*Ve,v+=n*We,_+=n*Je,w+=n*ut,I+=n*tt,B+=n*rt,M+=n*lt,H+=n*Qe,N+=n*He,U+=n*Ke,K+=n*P,n=t[9],g+=n*qe,y+=n*Me,T+=n*Fe,x+=n*_e,k+=n*ve,v+=n*Ve,_+=n*We,w+=n*Je,I+=n*ut,B+=n*tt,M+=n*rt,H+=n*lt,N+=n*Qe,U+=n*He,K+=n*Ke,q+=n*P,n=t[10],y+=n*qe,T+=n*Me,x+=n*Fe,k+=n*_e,v+=n*ve,_+=n*Ve,w+=n*We,I+=n*Je,B+=n*ut,M+=n*tt,H+=n*rt,N+=n*lt,U+=n*Qe,K+=n*He,q+=n*Ke,re+=n*P,n=t[11],T+=n*qe,x+=n*Me,k+=n*Fe,v+=n*_e,_+=n*ve,w+=n*Ve,I+=n*We,B+=n*Je,M+=n*ut,H+=n*tt,N+=n*rt,U+=n*lt,K+=n*Qe,q+=n*He,re+=n*Ke,Y+=n*P,n=t[12],x+=n*qe,k+=n*Me,v+=n*Fe,_+=n*_e,w+=n*ve,I+=n*Ve,B+=n*We,M+=n*Je,H+=n*ut,N+=n*tt,U+=n*rt,K+=n*lt,q+=n*Qe,re+=n*He,Y+=n*Ke,ue+=n*P,n=t[13],k+=n*qe,v+=n*Me,_+=n*Fe,w+=n*_e,I+=n*ve,B+=n*Ve,M+=n*We,H+=n*Je,N+=n*ut,U+=n*tt,K+=n*rt,q+=n*lt,re+=n*Qe,Y+=n*He,ue+=n*Ke,ee+=n*P,n=t[14],v+=n*qe,_+=n*Me,w+=n*Fe,I+=n*_e,B+=n*ve,M+=n*Ve,H+=n*We,N+=n*Je,U+=n*ut,K+=n*tt,q+=n*rt,re+=n*lt,Y+=n*Qe,ue+=n*He,ee+=n*Ke,ot+=n*P,n=t[15],_+=n*qe,w+=n*Me,I+=n*Fe,B+=n*_e,M+=n*ve,H+=n*Ve,N+=n*We,U+=n*Je,K+=n*ut,q+=n*tt,re+=n*rt,Y+=n*lt,ue+=n*Qe,ee+=n*He,ot+=n*Ke,pe+=n*P,s+=38*w,a+=38*I,o+=38*B,u+=38*M,l+=38*H,c+=38*N,f+=38*U,d+=38*K,p+=38*q,g+=38*re,y+=38*Y,T+=38*ue,x+=38*ee,k+=38*ot,v+=38*pe,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,s+=i-1+37*(i-1),e[0]=s,e[1]=a,e[2]=o,e[3]=u,e[4]=l,e[5]=c,e[6]=f,e[7]=d,e[8]=p,e[9]=g,e[10]=y,e[11]=T,e[12]=x,e[13]=k,e[14]=v,e[15]=_}var Kt=we;Kt.kem=Kt.kem||{};var dl=Kt.jsbn.BigInteger;Kt.kem.rsa={};Kt.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||Kt.random,n={};return n.encrypt=function(i,s){var a=Math.ceil(i.n.bitLength()/8),o;do o=new dl(Kt.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(o.compareTo(dl.ONE)<=0);o=Kt.util.hexToBytes(o.toString(16));var u=a-o.length;u>0&&(o=Kt.util.fillString(String.fromCharCode(0),u)+o);var l=i.encrypt(o,"NONE"),c=e.generate(o,s);return{encapsulation:l,key:c}},n.decrypt=function(i,s,a){var o=i.decrypt(s,"NONE");return e.generate(o,a)},n};Kt.kem.kdf1=function(e,t){Lf(this,e,0,t||e.digestLength)};Kt.kem.kdf2=function(e,t){Lf(this,e,1,t||e.digestLength)};function Lf(e,t,r,n){e.generate=function(i,s){for(var a=new Kt.util.ByteBuffer,o=Math.ceil(s/n)+r,u=new Kt.util.ByteBuffer,l=r;l<o;++l){u.putInt32(l),t.start(),t.update(i+u.getBytes());var c=t.digest();a.putBytes(c.getBytes(n))}return a.truncate(a.length()-s),a.getBytes()}}var Ne=we;Ne.log=Ne.log||{};Ne.log.levels=["none","error","warning","info","debug","verbose","max"];var ks={},za=[],yi=null;Ne.log.LEVEL_LOCKED=1<<1;Ne.log.NO_LEVEL_CHECK=1<<2;Ne.log.INTERPOLATE=1<<3;for(var Wr=0;Wr<Ne.log.levels.length;++Wr){var pl=Ne.log.levels[Wr];ks[pl]={index:Wr,name:pl.toUpperCase()}}Ne.log.logMessage=function(e){for(var t=ks[e.level].index,r=0;r<za.length;++r){var n=za[r];if(n.flags&Ne.log.NO_LEVEL_CHECK)n.f(e);else{var i=ks[n.level].index;t<=i&&n.f(n,e)}}};Ne.log.prepareStandard=function(e){"standard"in e||(e.standard=ks[e.level].name+" ["+e.category+"] "+e.message)};Ne.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=Ne.util.format.apply(this,t)}};Ne.log.prepareStandardFull=function(e){"standardFull"in e||(Ne.log.prepareStandard(e),e.standardFull=e.standard)};for(var gl=["error","warning","info","debug","verbose"],Wr=0;Wr<gl.length;++Wr)(function(t){Ne.log[t]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),s={timestamp:new Date,level:t,category:r,message:n,arguments:i};Ne.log.logMessage(s)}})(gl[Wr]);Ne.log.makeLogger=function(e){var t={flags:0,f:e};return Ne.log.setLevel(t,"none"),t};Ne.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&Ne.log.LEVEL_LOCKED))for(var n=0;n<Ne.log.levels.length;++n){var i=Ne.log.levels[n];if(t==i){e.level=t,r=!0;break}}return r};Ne.log.lock=function(e,t){typeof t>"u"||t?e.flags|=Ne.log.LEVEL_LOCKED:e.flags&=~Ne.log.LEVEL_LOCKED};Ne.log.addLogger=function(e){za.push(e)};if(typeof console<"u"&&"log"in console){var oi;if(console.error&&console.warn&&console.info&&console.debug){var SS={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},zo=function(e,t){Ne.log.prepareStandard(t);var r=SS[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)};oi=Ne.log.makeLogger(zo)}else{var zo=function(t,r){Ne.log.prepareStandardFull(r),console.log(r.standardFull)};oi=Ne.log.makeLogger(zo)}Ne.log.setLevel(oi,"debug"),Ne.log.addLogger(oi),yi=oi}else console={log:function(){}};if(yi!==null&&typeof window<"u"&&window.location){var Gi=new URL(window.location.href).searchParams;if(Gi.has("console.level")&&Ne.log.setLevel(yi,Gi.get("console.level").slice(-1)[0]),Gi.has("console.lock")){var _S=Gi.get("console.lock").slice(-1)[0];_S=="true"&&Ne.log.lock(yi)}}Ne.log.consoleLogger=yi;var wS={exports:{}};(function(e){e.exports=Y1})(wS);var Z=we,D=Z.asn1,Pt=Z.pkcs7=Z.pkcs7||{};Pt.messageFromPem=function(e){var t=Z.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=D.fromDer(t.body);return Pt.messageFromAsn1(n)};Pt.messageToPem=function(e,t){var r={type:"PKCS7",body:D.toDer(e.toAsn1()).getBytes()};return Z.pem.encode(r,{maxline:t})};Pt.messageFromAsn1=function(e){var t={},r=[];if(!D.validate(e,Pt.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=D.derToOid(t.contentType),s;switch(i){case Z.pki.oids.envelopedData:s=Pt.createEnvelopedData();break;case Z.pki.oids.encryptedData:s=Pt.createEncryptedData();break;case Z.pki.oids.signedData:s=Pt.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return s.fromAsn1(t.content.value[0]),s};Pt.createSignedData=function(){var e=null;return e={type:Z.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(Wo(e,n,Pt.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,s=0;s<i.length;++s)e.certificates.push(Z.pki.certificateFromAsn1(i[s]))},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],i=0;i<e.certificates.length;++i)n.push(Z.pki.certificateToAsn1(e.certificates[i]));var s=[],a=D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(e.version).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&a.value[0].value.push(D.create(D.Class.CONTEXT_SPECIFIC,0,!0,n)),s.length>0&&a.value[0].value.push(D.create(D.Class.CONTEXT_SPECIFIC,1,!0,s)),a.value[0].value.push(D.create(D.Class.UNIVERSAL,D.Type.SET,!0,e.signerInfos)),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.type).getBytes()),a])},addSigner:function(n){var i=n.issuer,s=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=Z.pki.certificateFromPem(a)),i=a.issuer.attributes,s=a.serialNumber}var o=n.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=Z.pki.privateKeyFromPem(o));var u=n.digestAlgorithm||Z.pki.oids.sha1;switch(u){case Z.pki.oids.sha1:case Z.pki.oids.sha256:case Z.pki.oids.sha384:case Z.pki.oids.sha512:case Z.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+u)}var l=n.authenticatedAttributes||[];if(l.length>0){for(var c=!1,f=!1,d=0;d<l.length;++d){var p=l[d];if(!c&&p.type===Z.pki.oids.contentType){if(c=!0,f)break;continue}if(!f&&p.type===Z.pki.oids.messageDigest){if(f=!0,c)break;continue}}if(!c||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:i,serialNumber:s,digestAlgorithm:u,signatureAlgorithm:Z.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:l,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Z.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof Z.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=Z.util.encodeUtf8(e.content)),n.detached?e.detachedContent=D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var s=t();r(s)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Z.pki.certificateFromPem(n)),e.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var n={},i=0;i<e.signers.length;++i){var s=e.signers[i],a=s.digestAlgorithm;a in n||(n[a]=Z.md[Z.pki.oids[a]].create()),s.authenticatedAttributes.length===0?s.md=n[a]:s.md=Z.md[Z.pki.oids[a]].create()}e.digestAlgorithmIdentifiers=[];for(var a in n)e.digestAlgorithmIdentifiers.push(D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(a).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")]));return n}function r(n){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=D.derToOid(e.contentInfo.value[0].value),a=D.toDer(i);a.getByte(),D.getBerValueLength(a),a=a.getBytes();for(var o in n)n[o].start().update(a);for(var u=new Date,l=0;l<e.signers.length;++l){var c=e.signers[l];if(c.authenticatedAttributes.length===0){if(s!==Z.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{c.authenticatedAttributesAsn1=D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[]),d=0;d<c.authenticatedAttributes.length;++d){var p=c.authenticatedAttributes[d];p.type===Z.pki.oids.messageDigest?p.value=n[c.digestAlgorithm].digest():p.type===Z.pki.oids.signingTime&&(p.value||(p.value=u)),f.value.push(Wa(p)),c.authenticatedAttributesAsn1.value.push(Wa(p))}a=D.toDer(f).getBytes(),c.md.start().update(a)}c.signature=c.key.sign(c.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=kS(e.signers)}};Pt.createEncryptedData=function(){var e=null;return e={type:Z.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Z.pki.oids["aes256-CBC"]},fromAsn1:function(t){Wo(e,t,Pt.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),Uf(e)}},e};Pt.createEnvelopedData=function(){var e=null;return e={type:Z.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Z.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=Wo(e,t,Pt.asn1.envelopedDataValidator);e.recipients=AS(r.recipientInfos.value)},toAsn1:function(){return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.type).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(e.version).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SET,!0,IS(e.recipients)),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,RS(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var a=!0,o=0;o<r.length;++o)if(s[o].type!==r[o].type||s[o].value!==r[o].value){a=!1;break}if(a)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case Z.pki.oids.rsaEncryption:case Z.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=Z.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}Uf(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:Z.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===void 0){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,i,s;switch(r){case Z.pki.oids["aes128-CBC"]:n=16,i=16,s=Z.aes.createEncryptionCipher;break;case Z.pki.oids["aes192-CBC"]:n=24,i=16,s=Z.aes.createEncryptionCipher;break;case Z.pki.oids["aes256-CBC"]:n=32,i=16,s=Z.aes.createEncryptionCipher;break;case Z.pki.oids["des-EDE3-CBC"]:n=24,i=8,s=Z.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=Z.util.createBuffer(Z.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=Z.util.createBuffer(Z.random.getBytes(i));var a=s(t);if(a.start(e.encryptedContent.parameter.copy()),a.update(e.content),!a.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=a.output}for(var o=0;o<e.recipients.length;++o){var u=e.recipients[o];if(u.encryptedContent.content===void 0)switch(u.encryptedContent.algorithm){case Z.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}},e};function TS(e){var t={},r=[];if(!D.validate(e,Pt.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:Z.pki.RDNAttributesAsArray(t.issuer),serialNumber:Z.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:D.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function xS(e){return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(e.version).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[Z.pki.distinguishedNameToAsn1({attributes:e.issuer}),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,Z.util.hexToBytes(e.serialNumber))]),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.encryptedContent.algorithm).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")]),D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function AS(e){for(var t=[],r=0;r<e.length;++r)t.push(TS(e[r]));return t}function IS(e){for(var t=[],r=0;r<e.length;++r)t.push(xS(e[r]));return t}function BS(e){var t=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(e.version).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[Z.pki.distinguishedNameToAsn1({attributes:e.issuer}),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,Z.util.hexToBytes(e.serialNumber))]),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.digestAlgorithm).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.signatureAlgorithm).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")])),t.value.push(D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=D.create(D.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(Wa(i))}t.value.push(r)}return t}function kS(e){for(var t=[],r=0;r<e.length;++r)t.push(BS(e[r]));return t}function Wa(e){var t;if(e.type===Z.pki.oids.contentType)t=D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.value).getBytes());else if(e.type===Z.pki.oids.messageDigest)t=D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===Z.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var s=Date.parse(i);isNaN(s)?i.length===13?i=D.utcTimeToDate(i):i=D.generalizedTimeToDate(i):i=new Date(s)}i>=r&&i<n?t=D.create(D.Class.UNIVERSAL,D.Type.UTCTIME,!1,D.dateToUtcTime(i)):t=D.create(D.Class.UNIVERSAL,D.Type.GENERALIZEDTIME,!1,D.dateToGeneralizedTime(i))}return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.type).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[t])])}function RS(e){return[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Z.pki.oids.data).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.algorithm).getBytes()),e.parameter?D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,e.content.getBytes())])]}function Wo(e,t,r){var n={},i=[];if(!D.validate(t,r,n,i)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var a=D.derToOid(n.contentType);if(a!==Z.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var o="";if(Z.util.isArray(n.encryptedContent))for(var u=0;u<n.encryptedContent.length;++u){if(n.encryptedContent[u].type!==D.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=n.encryptedContent[u].value}else o=n.encryptedContent;e.encryptedContent={algorithm:D.derToOid(n.encAlgorithm),parameter:Z.util.createBuffer(n.encParameter.value),content:Z.util.createBuffer(o)}}if(n.content){var o="";if(Z.util.isArray(n.content))for(var u=0;u<n.content.length;++u){if(n.content[u].type!==D.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=n.content[u].value}else o=n.content;e.content=Z.util.createBuffer(o)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function Uf(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case Z.pki.oids["aes128-CBC"]:case Z.pki.oids["aes192-CBC"]:case Z.pki.oids["aes256-CBC"]:t=Z.aes.createDecryptionCipher(e.encryptedContent.key);break;case Z.pki.oids.desCBC:case Z.pki.oids["des-EDE3-CBC"]:t=Z.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}var dt=we,Xs=dt.ssh=dt.ssh||{};Xs.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var n="ssh-rsa",i=t===""?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: "+n+`\r
`;s+="Encryption: "+i+`\r
`,s+="Comment: "+r+`\r
`;var a=dt.util.createBuffer();Dn(a,n),or(a,e.e),or(a,e.n);var o=dt.util.encode64(a.bytes(),64),u=Math.floor(o.length/66)+1;s+="Public-Lines: "+u+`\r
`,s+=o;var l=dt.util.createBuffer();or(l,e.d),or(l,e.p),or(l,e.q),or(l,e.qInv);var c;if(!t)c=dt.util.encode64(l.bytes(),64);else{var f=l.length()+16-1;f-=f%16;var d=ji(l.bytes());d.truncate(d.length()-f+l.length()),l.putBuffer(d);var p=dt.util.createBuffer();p.putBuffer(ji("\0\0\0\0",t)),p.putBuffer(ji("\0\0\0",t));var g=dt.aes.createEncryptionCipher(p.truncate(8),"CBC");g.start(dt.util.createBuffer().fillWithByte(0,16)),g.update(l.copy()),g.finish();var y=g.output;y.truncate(16),c=dt.util.encode64(y.bytes(),64)}u=Math.floor(c.length/66)+1,s+=`\r
Private-Lines: `+u+`\r
`,s+=c;var T=ji("putty-private-key-file-mac-key",t),x=dt.util.createBuffer();Dn(x,n),Dn(x,i),Dn(x,r),x.putInt32(a.length()),x.putBuffer(a),x.putInt32(l.length()),x.putBuffer(l);var k=dt.hmac.create();return k.start("sha1",T),k.update(x.bytes()),s+=`\r
Private-MAC: `+k.digest().toHex()+`\r
`,s};Xs.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=dt.util.createBuffer();return Dn(n,r),or(n,e.e),or(n,e.n),r+" "+dt.util.encode64(n.bytes())+" "+t};Xs.privateKeyToOpenSSH=function(e,t){return t?dt.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):dt.pki.privateKeyToPem(e)};Xs.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||dt.md.md5.create(),n="ssh-rsa",i=dt.util.createBuffer();Dn(i,n),or(i,e.e),or(i,e.n),r.start(),r.update(i.getBytes());var s=r.digest();if(t.encoding==="hex"){var a=s.toHex();return t.delimiter?a.match(/.{2}/g).join(t.delimiter):a}else{if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};function or(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=dt.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function Dn(e,t){e.putInt32(t.length),e.putString(t)}function ji(){for(var e=dt.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}(function(e){e.exports=we})($c);const zn=w1($c.exports),NS={peerOpts:{config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"}]}}},Ja=e=>{const t=zn.util.createBuffer();return t.putBytes(zn.util.hexToBytes(e)),t},Of=e=>{const t=e.substring(0,32),r=e.substring(32);return{key:Ja(t),iv:Ja(r)}},DS=(e,t)=>{const{key:r,iv:n}=Of(t),i=zn.cipher.createCipher("AES-CBC",r);return i.start({iv:n}),i.update(zn.util.createBuffer(e)),i.finish(),i.output.toHex()},ml=(e,t)=>{const{key:r,iv:n}=Of(t),i=zn.cipher.createDecipher("AES-CBC",r);return i.start({iv:n}),i.update(Ja(e)),i.finish()?i.output.toString():null};class LS{constructor(t){this.name=t,this.session=null}isEntered(){return this.session!==null}enter(t,r,n,i,s){const a=zn.md.sha512.create().update(this.name).digest().toHex(),o=new Yn,u=o.getMap("nav");u.observe(f=>i(u.get("state")));const l=o.getArray("chat");l.observe(f=>{for(const d of[...f.changes.delta[0].insert].reverse()){const p=ml(d.encryptedMessage,this.session.secret);p!==null&&s({username:d.username,message:p})}});const c=new H1(a.substring(0,a.length-64),o,NS);return this.session={secret:a.substring(a.length-64),ydoc:o,awareness:c.awareness},this.session.awareness.on("change",f=>n(this.session.awareness.getStates())),this.session.awareness.setLocalStateField("username",t),this.session.awareness.setLocalStateField("navControl",r),{clientID:this.session.awareness.clientID,messages:l.toArray().map(f=>{const d=ml(f.encryptedMessage,this.session.secret);return d!==null?{username:f.username,message:d}:null})}}leave(){!this.isEntered()||(this.session.ydoc.destroy(),this.session=null)}setNavControl(t){!this.isEntered()||this.session.awareness.setLocalStateField("navControl",t)}navigate(t){if(!this.isEntered())return;this.session.ydoc.getMap("nav").set("state",t)}send(t){if(!this.isEntered())return;const r=this.session.ydoc.getArray("chat");r.insert(0,[{username:this.session.awareness.getLocalState().username,encryptedMessage:DS(t,this.session.secret)}]),r.delete(100,r.length-100)}}function yl(e,t,r){const n=e.slice();return n[16]=t[r],n}function US(e){let t,r,n,i,s,a,o,u,l,c,f,d,p,g,y,T,x,k,v,_,w,I,B;function M(q,re){return q[6]?PS:MS}let H=M(e),N=H(e);s=new hr({props:{id:"logout"}}),k=new hr({props:{id:"send"}});let U=e[3].chat,K=[];for(let q=0;q<U.length;q+=1)K[q]=vl(yl(e,U,q));return{c(){t=oe("div"),r=oe("button"),N.c(),n=it(),i=oe("button"),_t(s.$$.fragment),a=it(),o=oe("p"),u=ft("Praying in "),l=oe("em"),c=ft(e[0]),f=ft(" (private) "),d=ft(e[5]),p=it(),g=oe("div"),y=oe("input"),T=it(),x=oe("button"),_t(k.$$.fragment),v=it();for(let q=0;q<K.length;q+=1)K[q].c();_=Ii(),ce(r,"class","svelte-1689pjd"),ce(i,"class","svelte-1689pjd"),ce(t,"class","action svelte-1689pjd"),ce(o,"class","svelte-1689pjd"),ce(y,"type","text"),ce(y,"class","svelte-1689pjd"),ce(x,"class","svelte-1689pjd"),ce(g,"class","action svelte-1689pjd")},m(q,re){ye(q,t,re),se(t,r),N.m(r,null),se(t,n),se(t,i),pt(s,i,null),ye(q,a,re),ye(q,o,re),se(o,u),se(o,l),se(l,c),se(o,f),se(o,d),ye(q,p,re),ye(q,g,re),se(g,y),kn(y,e[4]),se(g,T),se(g,x),pt(k,x,null),ye(q,v,re);for(let Y=0;Y<K.length;Y+=1)K[Y].m(q,re);ye(q,_,re),w=!0,I||(B=[Dt(r,"click",e[10]),Dt(i,"click",e[8]),Dt(y,"input",e[13]),Dt(x,"click",e[9])],I=!0)},p(q,re){if(H!==(H=M(q))&&(N.d(1),N=H(q),N&&(N.c(),N.m(r,null))),(!w||re&1)&&Gt(c,q[0]),(!w||re&32)&&Gt(d,q[5]),re&16&&y.value!==q[4]&&kn(y,q[4]),re&8){U=q[3].chat;let Y;for(Y=0;Y<U.length;Y+=1){const ue=yl(q,U,Y);K[Y]?K[Y].p(ue,re):(K[Y]=vl(ue),K[Y].c(),K[Y].m(_.parentNode,_))}for(;Y<K.length;Y+=1)K[Y].d(1);K.length=U.length}},i(q){w||(Se(s.$$.fragment,q),Se(k.$$.fragment,q),w=!0)},o(q){Ie(s.$$.fragment,q),Ie(k.$$.fragment,q),w=!1},d(q){q&&me(t),N.d(),gt(s),q&&me(a),q&&me(o),q&&me(p),q&&me(g),gt(k),q&&me(v),dn(K,q),q&&me(_),I=!1,Cr(B)}}}function OS(e){let t,r,n,i,s,a,o,u,l,c,f,d;return l=new hr({props:{id:"login"}}),{c(){t=oe("h1"),t.textContent="Private groups",r=it(),n=oe("input"),i=it(),s=oe("div"),a=oe("input"),o=it(),u=oe("button"),_t(l.$$.fragment),ce(t,"class","svelte-1689pjd"),ce(n,"type","text"),ce(n,"placeholder","Your name"),ce(n,"class","svelte-1689pjd"),ce(a,"type","text"),ce(a,"placeholder","Name of a private group"),ce(a,"class","svelte-1689pjd"),ce(u,"class","svelte-1689pjd"),ce(s,"class","action svelte-1689pjd")},m(p,g){ye(p,t,g),ye(p,r,g),ye(p,n,g),kn(n,e[1]),ye(p,i,g),ye(p,s,g),se(s,a),kn(a,e[0]),se(s,o),se(s,u),pt(l,u,null),c=!0,f||(d=[Dt(n,"input",e[11]),Dt(a,"input",e[12]),Dt(u,"click",e[7])],f=!0)},p(p,g){g&2&&n.value!==p[1]&&kn(n,p[1]),g&1&&a.value!==p[0]&&kn(a,p[0])},i(p){c||(Se(l.$$.fragment,p),c=!0)},o(p){Ie(l.$$.fragment,p),c=!1},d(p){p&&me(t),p&&me(r),p&&me(n),p&&me(i),p&&me(s),gt(l),f=!1,Cr(d)}}}function MS(e){let t;return{c(){t=ft("Lead this group")},m(r,n){ye(r,t,n)},d(r){r&&me(t)}}}function PS(e){let t;return{c(){t=ft("Stop leading this group")},m(r,n){ye(r,t,n)},d(r){r&&me(t)}}}function vl(e){let t,r,n=e[16].username+"",i,s,a=e[16].message+"",o;return{c(){t=oe("p"),r=oe("em"),i=ft(n),s=ft(": "),o=ft(a),ce(t,"class","svelte-1689pjd")},m(u,l){ye(u,t,l),se(t,r),se(r,i),se(t,s),se(t,o)},p(u,l){l&8&&n!==(n=u[16].username+"")&&Gt(i,n),l&8&&a!==(a=u[16].message+"")&&Gt(o,a)},d(u){u&&me(t)}}}function bl(e){let t,r,n,i,s,a;const o=[OS,US],u=[];function l(c,f){return c[2]===null?0:1}return r=l(e),n=u[r]=o[r](e),{c(){t=oe("div"),n.c(),ce(t,"class","svelte-1689pjd")},m(c,f){ye(c,t,f),u[r].m(t,null),a=!0},p(c,f){let d=r;r=l(c),r===d?u[r].p(c,f):(Dr(),Ie(u[d],1,1,()=>{u[d]=null}),Lr(),n=u[r],n?n.p(c,f):(n=u[r]=o[r](c),n.c()),Se(n,1),n.m(t,null))},i(c){a||(Se(n),Qr(()=>{s&&s.end(1),i=Za(t,Pn,{delay:75,duration:75}),i.start()}),a=!0)},o(c){Ie(n),i&&i.invalidate(),s=eo(t,Pn,{duration:75}),a=!1},d(c){c&&me(t),u[r].d(),c&&s&&s.end()}}}function FS(e){let t,r=e[2],n,i=bl(e);return{c(){t=oe("div"),i.c(),ce(t,"class","groups svelte-1689pjd")},m(s,a){ye(s,t,a),i.m(t,null),n=!0},p(s,[a]){a&4&&Lt(r,r=s[2])?(Dr(),Ie(i,1,1,et),Lr(),i=bl(s),i.c(),Se(i,1),i.m(t,null)):i.p(s,a)},i(s){n||(Se(i),n=!0)},o(s){Ie(i),n=!1},d(s){s&&me(t),i.d(s)}}}function VS(e,t,r){let n,i,s;Xe(e,Tt,v=>r(14,n=v)),Xe(e,un,v=>r(6,i=v)),Xe(e,li,v=>r(1,s=v));let a=null,o={},u="",l="",c="";const f=()=>{if(u.length==0||(li.update(_=>_.trim()),s.length==0))return;un.set(!1),r(2,a=new LS(u)),r(3,o.awareness=[],o),r(3,o.chat=[],o);const v=a.enter(s,i,_=>{r(3,o.awareness=[..._],o),r(5,c=y())},_=>{(n.prayer!=_.prayer||n.lang!=_.lang||n.stage!=_.stage||n.step!=_.step)&&Tt.update(w=>(w.prayer=_.prayer,w.lang=_.lang,w.stage=_.stage,w.step=_.step,w.conf=_.conf,w))},_=>{r(3,o.chat=[_,...o.chat.slice(0,99)],o)});r(3,o.clientID=v.clientID,o),r(3,o.chat=v.messages.filter(_=>_!==null),o),r(4,l="")},d=()=>{a.leave(),r(2,a=null),r(3,o={}),un.set(!0)},p=()=>{r(4,l=l.trim()),l.length!=0&&(a.send(l),r(4,l=""))},g=()=>{un.update(v=>!v),a.setNavControl(i),i&&a.navigate(n)},y=()=>{const v=o.awareness.length-1;return v==0?"":"with "+v+" "+(v==1?"friend":"friends")+": "+o.awareness.filter(_=>_[0]!=o.clientID).map(_=>_[1].username+(_[1].navControl?" (leader)":"")).join(", ")};Tt.subscribe(v=>{a!==null&&a.navigate(v)});function T(){s=this.value,li.set(s)}function x(){u=this.value,r(0,u)}function k(){l=this.value,r(4,l)}return e.$$.update=()=>{e.$$.dirty&1&&r(0,u=u.toLowerCase().replace(RegExp(/[^\p{L}0-9\-]/,"gu"),"")),e.$$.dirty&2&&Ff(li,s=s.replace(RegExp(/[^\p{L} \.\-]/,"gu"),""),s)},[u,s,a,o,l,c,i,f,d,p,g,T,x,k]}class HS extends Sr{constructor(t){super(),Er(this,t,VS,FS,Lt,{})}}Tt.subscribe(e=>{localStorage.setItem("state",JSON.stringify(e))});li.subscribe(e=>{localStorage.setItem("privateName",e)});function KS(e){let t,r,n,i,s,a,o,u,l,c,f,d,p,g,y,T,x,k,v;return n=new ym({}),u=new _m({}),f=new Vm({}),g=new HS({}),k=new Cm({}),{c(){t=oe("div"),r=oe("header"),_t(n.$$.fragment),i=it(),s=oe("main"),a=oe("div"),o=oe("div"),_t(u.$$.fragment),l=it(),c=oe("div"),_t(f.$$.fragment),d=it(),p=oe("div"),_t(g.$$.fragment),T=it(),x=oe("footer"),_t(k.$$.fragment),ce(r,"class","svelte-114vc00"),ce(o,"data-tab","menu"),ce(o,"class","svelte-114vc00"),ce(c,"data-tab","prayer"),ce(c,"class","svelte-114vc00"),ce(p,"data-tab","groups"),ce(p,"class","svelte-114vc00"),ce(a,"class",y=Qo("tab-"+e[0])+" svelte-114vc00"),ce(s,"class","svelte-114vc00"),ce(x,"class","svelte-114vc00"),ce(t,"class","container svelte-114vc00")},m(_,w){ye(_,t,w),se(t,r),pt(n,r,null),se(t,i),se(t,s),se(s,a),se(a,o),pt(u,o,null),se(a,l),se(a,c),pt(f,c,null),se(a,d),se(a,p),pt(g,p,null),se(t,T),se(t,x),pt(k,x,null),v=!0},p(_,[w]){(!v||w&1&&y!==(y=Qo("tab-"+_[0])+" svelte-114vc00"))&&ce(a,"class",y)},i(_){v||(Se(n.$$.fragment,_),Se(u.$$.fragment,_),Se(f.$$.fragment,_),Se(g.$$.fragment,_),Se(k.$$.fragment,_),v=!0)},o(_){Ie(n.$$.fragment,_),Ie(u.$$.fragment,_),Ie(f.$$.fragment,_),Ie(g.$$.fragment,_),Ie(k.$$.fragment,_),v=!1},d(_){_&&me(t),gt(n),gt(u),gt(f),gt(g),gt(k)}}}function qS(e,t,r){let n;Xe(e,ss,s=>r(0,n=s)),ss.subscribe(s=>{for(const a of document.querySelectorAll("[data-tab]"))s==a.dataset.tab?a.scrollTo({top:0}):a.scrollTo({top:0,behavior:"smooth"})});const i=()=>{try{navigator.wakeLock.request("screen").then(s=>{s.addEventListener("release",()=>{setTimeout(i,3e3)})})}catch(s){s.message.includes("is undefined")||setTimeout(i,3e3)}};return i(),[n]}class $S extends Sr{constructor(t){super(),Er(this,t,qS,KS,Lt,{})}}new $S({target:document.getElementById("app")});
