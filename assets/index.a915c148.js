(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function We(){}const Xa=e=>e;function Eu(e){return e()}function Yo(){return Object.create(null)}function Sr(e){e.forEach(Eu)}function ks(e){return typeof e=="function"}function Nt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ff(e){return Object.keys(e).length===0}function Vf(e,...t){if(e==null)return We;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function tt(e,t,r){e.$$.on_destroy.push(Vf(t,r))}function Xo(e){return e==null?"":e}function Hf(e,t,r){return e.set(r),t}const Su=typeof window<"u";let wu=Su?()=>window.performance.now():()=>Date.now(),Za=Su?e=>requestAnimationFrame(e):We;const Nn=new Set;function _u(e){Nn.forEach(t=>{t.c(e)||(Nn.delete(t),t.f())}),Nn.size!==0&&Za(_u)}function Tu(e){let t;return Nn.size===0&&Za(_u),{promise:new Promise(r=>{Nn.add(t={c:e,f:r})}),abort(){Nn.delete(t)}}}function W(e,t){e.appendChild(t)}function xu(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function qf(e){const t=oe("style");return Kf(xu(e),t),t.sheet}function Kf(e,t){return W(e.head||e,t),t.sheet}function Se(e,t,r){e.insertBefore(t,r||null)}function Ce(e){e.parentNode&&e.parentNode.removeChild(e)}function dn(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function oe(e){return document.createElement(e)}function je(e){return document.createTextNode(e)}function Pe(){return je(" ")}function Rs(){return je("")}function Rt(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function re(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function Gf(e){return Array.from(e.childNodes)}function jt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function kn(e,t){e.value=t==null?"":t}function $t(e,t,r){e.classList[r?"add":"remove"](t)}function Qf(e,t,{bubbles:r=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,r,n,t),i}const ts=new Map;let rs=0;function jf(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}function $f(e,t){const r={stylesheet:qf(t),rules:{}};return ts.set(e,r),r}function Iu(e,t,r,n,i,s,a,o=0){const l=16.666/n;let u=`{
`;for(let _=0;_<=1;_+=l){const T=t+(r-t)*s(_);u+=_*100+`%{${a(T,1-T)}}
`}const c=u+`100% {${a(r,1-r)}}
}`,f=`__svelte_${jf(c)}_${o}`,d=xu(e),{stylesheet:p,rules:g}=ts.get(d)||$f(d,e);g[f]||(g[f]=!0,p.insertRule(`@keyframes ${f} ${c}`,p.cssRules.length));const A=e.style.animation||"";return e.style.animation=`${A?`${A}, `:""}${f} ${n}ms linear ${i}ms 1 both`,rs+=1,f}function Ca(e,t){const r=(e.style.animation||"").split(", "),n=r.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=r.length-n.length;i&&(e.style.animation=n.join(", "),rs-=i,rs||zf())}function zf(){Za(()=>{rs||(ts.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&Ce(t)}),ts.clear())})}let eo;function hi(e){eo=e}const li=[],Zo=[],ji=[],el=[],Jf=Promise.resolve();let ba=!1;function Wf(){ba||(ba=!0,Jf.then(Bu))}function Wr(e){ji.push(e)}const Zs=new Set;let Ui=0;function Bu(){const e=eo;do{for(;Ui<li.length;){const t=li[Ui];Ui++,hi(t),Yf(t.$$)}for(hi(null),li.length=0,Ui=0;Zo.length;)Zo.pop()();for(let t=0;t<ji.length;t+=1){const r=ji[t];Zs.has(r)||(Zs.add(r),r())}ji.length=0}while(li.length);for(;el.length;)el.pop()();ba=!1,Zs.clear(),hi(e)}function Yf(e){if(e.fragment!==null){e.update(),Sr(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Wr)}}let ii;function ku(){return ii||(ii=Promise.resolve(),ii.then(()=>{ii=null})),ii}function ns(e,t,r){e.dispatchEvent(Qf(`${t?"intro":"outro"}${r}`))}const $i=new Set;let qr;function Nr(){qr={r:0,c:[],p:qr}}function Mr(){qr.r||Sr(qr.c),qr=qr.p}function me(e,t){e&&e.i&&($i.delete(e),e.i(t))}function be(e,t,r,n){if(e&&e.o){if($i.has(e))return;$i.add(e),qr.c.push(()=>{$i.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}else n&&n()}const Ru={duration:0};function to(e,t,r){let n=t(e,r),i=!1,s,a,o=0;function l(){s&&Ca(e,s)}function u(){const{delay:f=0,duration:d=300,easing:p=Xa,tick:g=We,css:A}=n||Ru;A&&(s=Iu(e,0,1,d,f,p,A,o++)),g(0,1);const _=wu()+f,T=_+d;a&&a.abort(),i=!0,Wr(()=>ns(e,!0,"start")),a=Tu(k=>{if(i){if(k>=T)return g(1,0),ns(e,!0,"end"),l(),i=!1;if(k>=_){const y=p((k-_)/d);g(y,1-y)}}return i})}let c=!1;return{start(){c||(c=!0,Ca(e),ks(n)?(n=n(),ku().then(u)):u())},invalidate(){c=!1},end(){i&&(l(),i=!1)}}}function ro(e,t,r){let n=t(e,r),i=!0,s;const a=qr;a.r+=1;function o(){const{delay:l=0,duration:u=300,easing:c=Xa,tick:f=We,css:d}=n||Ru;d&&(s=Iu(e,1,0,u,l,c,d));const p=wu()+l,g=p+u;Wr(()=>ns(e,!1,"start")),Tu(A=>{if(i){if(A>=g)return f(0,1),ns(e,!1,"end"),--a.r||Sr(a.c),!1;if(A>=p){const _=c((A-p)/u);f(1-_,_)}}return i})}return ks(n)?ku().then(()=>{n=n(),o()}):o(),{end(l){l&&n.tick&&n.tick(1,0),i&&(s&&Ca(e,s),i=!1)}}}function ct(e){e&&e.c()}function at(e,t,r,n){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,r),n||Wr(()=>{const a=e.$$.on_mount.map(Eu).filter(ks);e.$$.on_destroy?e.$$.on_destroy.push(...a):Sr(a),e.$$.on_mount=[]}),s.forEach(Wr)}function ot(e,t){const r=e.$$;r.fragment!==null&&(Sr(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Xf(e,t){e.$$.dirty[0]===-1&&(li.push(e),Wf(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ar(e,t,r,n,i,s,a,o=[-1]){const l=eo;hi(e);const u=e.$$={fragment:null,ctx:[],props:s,update:We,not_equal:i,bound:Yo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Yo(),dirty:o,skip_bound:!1,root:t.target||l.$$.root};a&&a(u.root);let c=!1;if(u.ctx=r?r(e,t.props||{},(f,d,...p)=>{const g=p.length?p[0]:d;return u.ctx&&i(u.ctx[f],u.ctx[f]=g)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](g),c&&Xf(e,f)),d}):[],u.update(),c=!0,Sr(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const f=Gf(t.target);u.fragment&&u.fragment.l(f),f.forEach(Ce)}else u.fragment&&u.fragment.c();t.intro&&me(e.$$.fragment),at(e,t.target,t.anchor,t.customElement),Bu()}hi(l)}class or{$destroy(){ot(this,1),this.$destroy=We}$on(t,r){if(!ks(r))return We;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!Ff(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var rr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function eh(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var th={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"};const{webm:rh,mp4:nh}=th,ea=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,ta=()=>"wakeLock"in navigator;class ih{constructor(){if(this.enabled=!1,ta()){this._wakeLock=null;const t=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",t),document.addEventListener("fullscreenchange",t)}else ea()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",rh),this._addSourceToVideo(this.noSleepVideo,"mp4",nh),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(t,r,n){var i=document.createElement("source");i.src=n,i.type=`video/${r}`,t.appendChild(i)}get isEnabled(){return this.enabled}enable(){return ta()?navigator.wakeLock.request("screen").then(t=>{this._wakeLock=t,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(t=>{throw this.enabled=!1,console.error(`${t.name}, ${t.message}`),t}):ea()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(r=>(this.enabled=!0,r)).catch(r=>{throw this.enabled=!1,r})}disable(){ta()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):ea()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}var sh=ih;function ah(e){let t,r;return{c(){t=oe("span"),r=je(e[0]),re(t,"class","material-symbols-outlined svelte-a0zwop"),$t(t,"small",e[1])},m(n,i){Se(n,t,i),W(t,r)},p(n,[i]){i&1&&jt(r,n[0]),i&2&&$t(t,"small",n[1])},i:We,o:We,d(n){n&&Ce(t)}}}function oh(e,t,r){let{id:n}=t,{small:i=!1}=t;return e.$$set=s=>{"id"in s&&r(0,n=s.id),"small"in s&&r(1,i=s.small)},[n,i]}class Ft extends or{constructor(t){super(),ar(this,t,oh,ah,Nt,{id:0,small:1})}}const xn=[];function Du(e,t){return{subscribe:zn(e,t).subscribe}}function zn(e,t=We){let r;const n=new Set;function i(o){if(Nt(e,o)&&(e=o,r)){const l=!xn.length;for(const u of n)u[1](),xn.push(u,e);if(l){for(let u=0;u<xn.length;u+=2)xn[u][0](xn[u+1]);xn.length=0}}}function s(o){i(o(e))}function a(o,l=We){const u=[o,l];return n.add(u),n.size===1&&(r=t(i)||We),o(e),()=>{n.delete(u),n.size===0&&(r(),r=null)}}return{set:i,update:s,subscribe:a}}const Lu=["la","en","es","fr","lv"],lh=e=>[[["1"],"",["prayer"]],[["2"],"",[e.period,"dialogue"]],[["3"],"",[e.period,"prayer"]]],uh="Alma Redemptoris Mater",ch={name:uh},fh={description:["Period"],options:{before:"Up through the day before Christmas Eve",after:"From Christmas Eve on"}},hh={period:fh},dh="O Loving Mother of our Redeemer",ph=["Prayer","O loving Mother of our Redeemer, gate of heaven, star of the sea,","Hasten to aid thy fallen people who strive to rise once more.","Thou who brought forth thy holy Creator, all creation wond'ring,","Yet remainest ever Virgin, taking from Gabriel's lips",'that joyful "Hail!": be merciful to us sinners.'],gh={dialogue:["Dialogue","V. The Angel of the Lord declared unto Mary.","R. And she conceived by the Holy Spirit."],prayer:["Prayer","Let us pray. Pour forth, we beseech Thee, O Lord, Thy grace into our hearts, that we, to whom the incarnation of Christ, Thy Son, was made known by the message of an angel, may by His passion and cross be brought to the glory of His resurrection, through the same Christ our Lord. Amen."]},mh={dialogue:["Dialogue","V. Thou gavest birth without loss of thy virginity:","R. Intercede for us, O holy Mother of God."],prayer:["Prayer","Let us pray. O God, Who by the fruitful virginity of blessed Mary hast offered unto the human race the rewards of eternal salvation, grant, we beseech thee, that we may know the effects of her intercession, through whom we have deserved to receive the author of life, our Lord Jesus Christ, Thy Son. Amen."]},Ah={_name:dh,prayer:ph,before:gh,after:mh},yh="Alma Redemptoris Mater",vh=["Oratio","Alma Redemptoris Mater, quae pervia caeli","Porta manes, et stella maris, sucurre cadenti,","Surgere qui curat populo: tu quae genuisti,","Natura mirante, tuum sanctum Genitorem,","Virgo prius ac posterius, Gabrielis ab ore","Sumens illud Ave, peccatorum miserere."],Ch={dialogue:["Dialogus","V. Angelus Domini nuntiavit Mariae.","R. Et concepit de Spiritu Sancto."],prayer:["Oratio","Oremus. Gratiam tuam, quaesumus, Domine, mentibus nostris infunde; ut, qui, angelo nuntiante, Christi Filii tui incarnationem cognovimus, per passionem ejus et crucem, ad resurrectionis gloriam perducamur. Per eumdem Christum Dominum nostrum. Amen."]},bh={dialogue:["Dialogus","V. Post partum, Virgo, inviolata permansisti.","R. Dei Genitrix, intercede pro nobis."],prayer:["Oratio","Oremus. Deus, qui salutis aeternae, beatae Mariae virginitate fecudna, humano generi praemia praestitisti: tribue, quaesumus, ut ipsam pro nobis intercedere sentiamus, per quam meruimus auctorem vitae suscipere, Dominum nostrum Iesum Christum, Filium tuum. Amen."]},Eh={_name:yh,prayer:vh,before:Ch,after:bh},Sh={generate:lh,meta:ch,params:hh,languages:{en:Ah,la:Eh}},wh=e=>e.period=="regular"?[[["1"],"",["regular","dialogue-1"]],[["2"],"hail-mary",["formula"]],[["3"],"",["regular","dialogue-2"]],[["4"],"hail-mary",["formula"]],[["5"],"",["regular","dialogue-3"]],[["6"],"hail-mary",["formula"]],[["7"],"",["regular","dialogue-4"]],[["8"],"",["regular","prayer"]]]:[[["1"],"",["pascal-season","initial-prayer"]],[["2"],"",["pascal-season","dialogue"]],[["3"],"",["pascal-season","prayer"]]],_h="Angelus",Th={name:_h},xh={description:["Period"],options:{regular:"Outside the Pascal Season","pascal-season":"Pascal Season"}},Ih={period:xh},Bh="The Angelus",kh={"dialogue-1":["Dialogue","V. The angel of the Lord declared unto Mary;","R. And she conceived of the Holy Spirit."],"dialogue-2":["Dialogue","V. Behold the handmaid of the Lord:","R. Be it done unto me according to Thy word."],"dialogue-3":["Dialogue","V. And the Word was made flesh:","R. And dwelt among us."],"dialogue-4":["Dialogue","V. Pray for us, O Holy Mother of God.","R. That we may be made worthy of the promises of Christ."],prayer:["Prayer","Let us pray. Pour forth, we beseech Thee, O Lord, Thy grace into our hearts, that we, to whom the incarnation of Christ, Thy Son, was made known by the message of an angel, may by His passion and cross be brought to the glory of His resurrection, through the same Christ our Lord.","R. Amen."]},Rh={_name:Bh,regular:kh,"pascal-season":{"initial-prayer":["Prayer","Queen of Heaven rejoice, alleluia:","For He whom you merited to bear, alleluia,","Has risen as He said, alleluia.","Pray for us to God, alleluia."],dialogue:["Dialogue","V. Rejoice and be glad, O Virgin Mary, alleluia.","R. Because the Lord is truly risen, alleluia."],prayer:["Prayer","Let us pray. O God, who by the Resurrection of Thy Son, our Lord Jesus Christ, granted joy to the whole world: grant we beg Thee, that through the intercession of the Virgin Mary, His Mother, we may lay hold of the joys of eternal life. Through the same Christ our Lord.","R. Amen."]}},Dh="Angelus",Lh={"dialogue-1":["Dialogus","V. Angelus Domini nuntiavit Mariae;","R. Et concepit de Spiritu Sancto."],"dialogue-2":["Dialogus","V. Ecce ancilla Domini.","R. Fiat mihi secundum verbum tuum."],"dialogue-3":["Dialogus","V. Et Verbum caro factum est.","R. Et habitavit in nobis."],"dialogue-4":["Dialogus","V. Ora pro nobis, sancta Dei Genetrix.","R. Ut digni efficiamur promissionibus Christi."],prayer:["Oratio","Oremus. Gratiam tuam, quaesumus, Domine, mentibus nostris infunde; ut qui, Angelo nuntiante, Christi Filii tui incarnationem cognovimus, per passionem eius et crucem, ad resurrectionis gloriam perducamur. Per eundem Christum Dominum nostrum.","R. Amen."]},Nh={_name:Dh,regular:Lh,"pascal-season":{"initial-prayer":["Oratio","Regina caeli, laetare, alleluia:","Quia quem meruisti portare, alleluia.","Resurrexit sicut dixit, alleluia.","Ora pro nobis Deum, alleluia."],dialogue:["Dialogus","V. Gaude et laetare, Virgo Maria, Alleluia,","R. Quia surrexit Dominus vere, alleluia."],prayer:["Oratio","Oremus. Deus qui per resurrectionem Filii tui, Domini nostri Iesu Christi, mundum laetificare dignatus es: praesta, quaesumus, ut per eius Genetricem Virginem Mariam, perpetuae capiamus gaudia vitae. Per eundem Christum Dominum nostrum.","R. Amen."]}},Mh={generate:wh,meta:Th,params:Ih,languages:{en:Rh,la:Nh}},Oh=e=>[[["formula"],"",["formula"]]],Uh="Apostles' Creed",Ph={name:Uh},Fh={},Vh="The Apostles' Creed",Hh=["The Apostles' Creed","I believe in God the Father Almighty, Creator of heaven and earth; and in Jesus Christ, His only Son, our Lord; Who was conceived by the Holy Spirit, born of the Virgin Mary, suffered under Pontius Pilate, was crucified, died and was buried. He descended into hell; the third day He rose again from the dead; He ascended into heaven and sits at the right hand of God, the Father Almighty; from thence He shall come to judge the living and the dead.","I believe the Holy Spirit, the holy Catholic Church, the communion of saints, the forgiveness of sins, the resurrection of the body, and life everlasting. Amen."],qh={_name:Vh,formula:Hh},Kh="El Credo de los Ap\xF3stoles",Gh=["El Credo de los Ap\xF3stoles","Creo en Dios Padre, Todopoderoso, Creador del cielo y de la tierra. Y en Jesucristo, su \xFAnico Hijo, Nuestro Se\xF1or, que fue concebido por obra y gracia del Esp\xEDritu Santo, naci\xF3 de Santa Mar\xEDa Virgen, padeci\xF3 bajo el poder de Poncio Pilato, fue crucificado, muerto y sepultado, descendi\xF3 a los infiernos, al tercer d\xEDa resucit\xF3 entre los muertos, subi\xF3 a los cielos y est\xE1 sentado a la derecha de Dios Padre, Todopoderoso. Desde all\xED vendr\xE1 a juzgar a vivos y a muertos.","Creo en el Esp\xEDritu Santo, la Santa Iglesia Cat\xF3lica, la comuni\xF3n de los santos, el perd\xF3n de los pecados, la resurrecci\xF3n de la carne y la vida perdurable. Am\xE9n."],Qh={_name:Kh,formula:Gh},jh="Symbole des Ap\xF4tres",$h=["Symbole des Ap\xF4tres","Je crois en Dieu, le P\xE8re tout-puissant, Cr\xE9ateur du ciel et de la terre. Et en J\xE9sus Christ, son Fils unique, notre Seigneur ; qui a \xE9t\xE9 con\xE7u du Saint Esprit, est n\xE9 de la Vierge Marie, a souffert sous Ponce Pilate, a \xE9t\xE9 crucifi\xE9, est mort et a \xE9t\xE9 enseveli, est descendu aux enfers ; le troisi\xE8me jour est ressuscit\xE9 des morts, est mont\xE9 aux cieux, est assis \xE0 la droite de Dieu le P\xE8re tout-puissant, d\u2019o\xF9 il viendra juger les vivants et les morts.","Je crois en l\u2019Esprit Saint, \xE0 la sainte \xC9glise catholique, \xE0 la communion des saints, \xE0 la r\xE9mission des p\xE9ch\xE9s, \xE0 la r\xE9surrection de la chair, \xE0 la vie \xE9ternelle. Amen."],zh={_name:jh,formula:$h},Jh="Symbolum Apostolicum",Wh=["Symbolum Apostolicum","Credo in Deum, Patrem omnipotentem, creatorem caeli et terrae. Et in Iesum Christum, Filium eius unicum, Dominum nostrum, qui conceptus est de Spiritu Sancto, natus ex Maria Virgine, passus sub Pontio Pilato, crucifixus, mortuus et sepultus. Descendit ad inferos, tertia die resurrexit a mortuis. Ascendit ad caelos, sedet ad dextram Dei Patris omnipotentis. Inde venturus est iudicare vivos et mortuos.","Credo in Spiritum Sanctum, sanctam Ecclesiam catholicam, sanctorum communionem, remissionem peccatorum, carnis resurrectionem, vitam aeternam. Amen."],Yh={_name:Jh,formula:Wh},Xh="Tic\u012Bbas apliecin\u0101jums",Zh=["Tic\u012Bbas apliecin\u0101jums","Es ticu uz Dievu, visvareno T\u0113vu, debesu un zemes Rad\u012Bt\u0101ju, un uz J\u0113zu Kristu, Vi\u0146a vienpiedzimu\u0161o D\u0113lu, m\u016Bsu Kungu, kas ir ie\u0146emts no Sv\u0113t\u0101 Gara, piedzimis no Jaunavas Marijas, cietis zem Poncija Pil\u0101ta, krust\u0101 sists, nomiris un apbed\u012Bts, nok\u0101pis ell\u0113, tre\u0161aj\u0101 dien\u0101 aug\u0161\u0101mc\u0113lies no miru\u0161ajiem, uzk\u0101pis debes\u012Bs, s\u0113\u017E pie Dieva, visvaren\u0101 T\u0113va, lab\u0101s rokas, no kurienes Vi\u0146\u0161 atn\u0101ks ties\u0101t dz\u012Bvos un miru\u0161os.","Es ticu uz Sv\u0113to Garu, sv\u0113to katolisko Bazn\u012Bcu, sv\u0113to sadraudz\u012Bbu, gr\u0113ku piedo\u0161anu, miesas aug\u0161\u0101mcel\u0161anos un m\u016B\u017E\u012Bgo dz\u012Bvo\u0161anu. Amen."],ed={_name:Xh,formula:Zh},td={generate:Oh,meta:Ph,params:Fh,languages:{en:qh,es:Qh,fr:zh,la:Yh,lv:ed}},rd=e=>[[["1"],"",["prayer-1"]],[["2"],"",["prayer-2"]],[["3"],"",["dialogue"]],[["4"],"",["prayer"]]],nd="Ave Regina caelorum",id={name:nd},sd={},ad="Hail, O Queen of Heaven",od=["Dialogus","V. Allow me to praise thee, O sacred Virgin.","R. Against thy enemies give me strength."],ld=["Oratio","Let us pray. Grant unto us, O merciful God, a defense against our weakness, that we who remember the holy Mother of God, by the help of her intercession, may rise from our iniquities, through the same Christ our Lord. Amen."],ud={_name:ad,"prayer-1":["Prayer","Welcome, O Queen of Heaven.","Welcome, O Lady of Angels","Hail! thou root, hail! thou gate","From whom unto the world, a light has arisen:"],"prayer-2":["Prayer","Rejoice, O glorious Virgin,","Lovely beyond all others,","Farewell, most beautiful maiden,","And pray for us to Christ."],dialogue:od,prayer:ld},cd="Ave Regina caelorum",fd=["Dialogus","V. Dignare me laudare te, Virgo sacrata.","R. Da mihi virtutem contra hostes tuos."],hd=["Oratio","Oremus. Concede, misericors Deus, fragilitati nostrae praesidium: ut, qui sanctae Dei Genitricis memoriam agimus; intercessionis eius auxilio, a nostris iniquitatibus resurgamus. Per eundem Christum Dominum nostrum. Amen."],dd={_name:cd,"prayer-1":["Oratio","Ave, Regina caelorum,","Ave, Domina Angelorum:","Salve, radix, salve, porta","Ex qua mundo lux est orta:"],"prayer-2":["Oratio","Gaude, Virgo gloriosa,","Super omnes speciosa,","Vale, o valde decora,","Et pro nobis Christum exora."],dialogue:fd,prayer:hd},pd={generate:rd,meta:id,params:sd,languages:{en:ud,la:dd}},gd=e=>{let t=[[["1"],"",["prayer"]]];return e.time!="morning"&&t.push([["2"],"",[e.time]]),t},md="Blessing before meals",Ad={name:md},yd={description:["Time of day"],options:{morning:"Morning",midday:"Midday",evening:"Evening"}},vd={time:yd},Cd="Blessing before meals",bd=["Prayer","Bless us, O Lord, and these Thy gifts which we are about to receive from Thy bounty, through Christ our Lord. Amen."],Ed=["Prayer","May the King of everlasting glory make us partakers of the heavenly table. Amen."],Sd=["Prayer","May the King of ever-lasting glory lead us to the banquet of life eternal. Amen."],wd={_name:Cd,prayer:bd,midday:Ed,evening:Sd},_d="Benedictio ante mensam",Td=["Oratio","Benedic, Domine, nos et haec tua dona quae de tua largitate sumus sumpturi. Per Christum Dominum nostrum. Amen."],xd=["Oratio","Mensae caelestis participes faciat nos, Rex aeternae gloriae. Amen."],Id=["Oratio","Ad cenam vitae aeternae perducat nos, Rex aeternae gloriae. Amen."],Bd={_name:_d,prayer:Td,midday:xd,evening:Id},kd={generate:gd,meta:Ad,params:vd,languages:{en:wd,la:Bd}},Rd=e=>[[["1"],"",["prayer"]],[["2"],"",["dialogue"]]],Dd="Blessing after meals",Ld={name:Dd},Nd={},Md="Blessing after meals",Od=["Prayer","We give Thee thanks, almighty God, for all Thy benefits, who livest and reignest for ever and ever. Amen."],Ud=["Dialogue","V. May the Lord grant us His peace.","R. And life everlasting.","Amen."],Pd={_name:Md,prayer:Od,dialogue:Ud},Fd="Benedictio post mensam",Vd=["Oratio","Agimus tibi gratias, omnipotens Deus, pro universis beneficiis tuis, qui vivis et regnas in saecula saeculorum. Amen."],Hd=["Dialogus","V. Deus det nobis suam pacem.","R. Et vitam aeternam.","Amen."],qd={_name:Fd,prayer:Vd,dialogue:Hd},Kd={generate:Rd,meta:Ld,params:Nd,languages:{en:Pd,la:qd}},Gd=e=>{let t=[[["initial","1"],"lords-prayer",["formula"]],[["initial","2"],"hail-mary",["formula"]],[["initial","3"],"apostles-creed",["formula"]]];for(let r=0;r<5;r++){t.push([["decades",[r,5],"our-father-bead"],"",["our-father-bead"],"On the Our Father bead, say this prayer"]);for(let n=0;n<10;n++)t.push([["decades",[r,5],"hail-mary-bead",[n,10]],"",["hail-mary-bead"],"On the Hail Mary bead, say this prayer"])}for(let r=0;r<3;r++)t.push([["concluding",[r,3]],"",["concluding-prayer"]]);return t},Qd="Chaplet of Divine Mercy",jd={name:Qd},$d={},zd="The Chaplet of Divine Mercy",Jd={_name:zd,"our-father-bead":["Prayer","Eternal Father, I offer you the Body and Blood, Soul and Divinity of Your Dearly Beloved Son, Our Lord, Jesus Christ, in atonement for our sins and those of the whole world."],"hail-mary-bead":["Prayer","For the sake of His sorrowful Passion, have mercy on us and on the whole world."],"concluding-prayer":["Prayer","Holy God, Holy Mighty One, Holy Immortal One, have mercy on us and on the whole world."]},Wd="Corona Divinae Misericordiae",Yd={_name:Wd,"our-father-bead":["Oratio","Pater aeterne, offero tibi Corpus et Sanguinem, animam et divinitatem dilectissimi Filii Tui, Domini nostri, Iesu Christi, in propitiatione pro peccatis nostris et totius mundi."],"hail-mary-bead":["Oratio","Pro dolorosa Eius passione, miserere nobis et totius mundi."],"concluding-prayer":["Oratio","Sanctus Deus, Sanctus Fortis, Sanctus Immortalis, miserere nobis et totius mundi."]},Xd={generate:Gd,meta:jd,params:$d,languages:{en:Jd,la:Yd}},Zd=e=>[[["formula"],"",["formula"]]],e0="Confiteor",t0={name:e0},r0={},n0="I Confess",i0=["I Confess","I confess to almighty God, to blessed Mary ever Virgin, to blessed Michael the Archangel, to blessed John the Baptist, to the holy apostles Peter and Paul, and to all the saints that I have sinned exceedingly in thought, word, and deed, through my fault, through my fault, through my most grievous fault. Therefore, I beseech blessed Mary ever Virgin, blessed Michael the Archangel, blessed John the Baptist, the holy apostles Peter and Paul, and all the saints, to pray for me to the Lord our God. Amen."],s0={_name:n0,formula:i0},a0="Confiteor",o0=["Confiteor","Confiteor Deo omnipotenti, beatae Mariae semper Virgini, beato Michaeli Archangelo, beato Ioanni Baptistae, sanctis Apostolis Petro et Paulo, et omnibus Sanctis, quia peccavi nimis cogitatione, verbo et opere: mea culpa, mea culpa, mea maxima culpa. Ideo precor beatam Mariam semper Virginem, beatum Michaelem Archangelum, beatum Ioannem Baptistam, sanctos Apostolos Petrum et Paulum, et omnes Sanctos, orare pro me ad Dominum Deum nostrum. Amen."],l0={_name:a0,formula:o0},u0={generate:Zd,meta:t0,params:r0,languages:{en:s0,la:l0}},c0=e=>[[["formula"],"",["formula"]]],f0="Fatima Prayer",h0={name:f0},d0={},p0="Fatima Prayer",g0=["Fatima Prayer","O my Jesus, forgive us our sins, save us from the fires of hell, and lead all souls to heaven, especially those most in need of Thy mercy."],m0={_name:p0,formula:g0},A0="Oraci\xF3n de F\xE1tima",y0=["Oraci\xF3n de F\xE1tima","\xA1Oh! Jes\xFAs m\xEDo, perdona nuestros pecados, l\xEDbranos del fuego del infierno, lleva al cielo a todas las almas, especialmente a las m\xE1s necesitadas de Tu misericordia."],v0={_name:A0,formula:y0},C0="Pri\xE8re de Fatima",b0=["Pri\xE8re de Fatima","\xD4 mon J\xE9sus, pardonnez-nous nos p\xE9ch\xE9s, pr\xE9servez-nous du feu de l'enfer, et conduisez au Ciel toutes les \xE2mes, sp\xE9cialement celles qui ont le plus besoin de votre mis\xE9ricorde."],E0={_name:C0,formula:b0},S0="Oratio Fatima",w0=["Oratio Fatima","Domine Iesu, dimitte nobis debita nostra, salva nos ab igne inferiori, perduc in caelum omnes animas, praesertim eas quae misericordiae tuae maximae indigent."],_0={_name:S0,formula:w0},T0="Fatimas l\u016Bg\u0161ana",x0=["Fatimas l\u016Bg\u0161ana","Mans J\u0113zu, piedod mums m\u016Bsu vainas, pasargi m\u016Bs no elles uguns un aizved visas dv\u0113seles uz debes\u012Bm, it sevi\u0161\u0137i t\u0101s, kur\u0101m visvair\u0101k vajadz\u012Bga Tava \u017E\u0113lsird\u012Bba."],I0={_name:T0,formula:x0},B0={generate:c0,meta:h0,params:d0,languages:{en:m0,es:v0,fr:E0,la:_0,lv:I0}},k0=e=>[[["formula"],"",["formula"]]],R0="Glory Be",D0={name:R0},L0={},N0="Glory be to the Father",M0=["Glory be to the Father","Glory be to the Father, and to the Son, and to the Holy Spirit.","As it was in the beginning, is now, and ever shall be, world without end. Amen."],O0={_name:N0,formula:M0},U0="Gloria al Padre",P0=["Gloria al Padre","Gloria al Padre y al Hijo y al Esp\xEDritu Santo.","Como era en el principio, ahora y siempre, por los siglos de los siglos. Am\xE9n."],F0={_name:U0,formula:P0},V0="Gloire au P\xE8re",H0=["Gloire au P\xE8re","Gloire au P\xE8re et au Fils at au Saint-Esprit.","Comme il \xE9tait au commencement, maintenant et toujours, et dans les si\xE8cles des si\xE8cles. Amen."],q0={_name:V0,formula:H0},K0="Gloria Patri",G0=["Gloria Patri","Gloria Patri, et Filio, et Spiritui Sancto.","Sicut erat in principio, et nunc, et semper, et in saecula saeculorum. Amen."],Q0={_name:K0,formula:G0},j0="Gods lai ir T\u0113vam",$0=["Gods lai ir T\u0113vam","Gods lai ir T\u0113vam un D\u0113lam, un Sv\u0113tajam Garam.","K\u0101 tas no ies\u0101kuma bijis, t\u0101 tagad un vienm\u0113r, un m\u016B\u017E\u012Bgi m\u016B\u017Eam. Amen."],z0={_name:j0,formula:$0},J0={generate:k0,meta:D0,params:L0,languages:{en:O0,es:F0,fr:q0,la:Q0,lv:z0}},W0=e=>[[["formula"],"",["formula"]]],Y0="Hail Mary",X0={name:Y0},Z0={},ep="Hail Mary",tp=["Hail Mary","Hail, Mary, full of grace; the Lord is with thee; blessed art thou among women, and blessed is the fruit of thy womb, Jesus.","Holy Mary, Mother of God, pray for us sinners, now and at the hour of our death. Amen."],rp={_name:ep,formula:tp},np="Ave Mar\xEDa",ip=["Ave Mar\xEDa","Dios te salve, Mar\xEDa; llena eres de gracia; el Se\xF1or es contigo; bendita t\xFA eres entre todas las mujeres, y bendito es el fruto de tu vientre, Jes\xFAs.","Santa Mar\xEDa, Madre de Dios, ruega por nosotros, pecadores, ahora y en la hora de nuestra muerte. Am\xE9n."],sp={_name:np,formula:ip},ap="Je vous salue Marie",op=["Je vous salue Marie","Je vous salue, Marie, pleine de gr\xE2ces, le Seigneur est avec vous, vous \xEAtes b\xE9nie entre toutes les femmes, et J\xE9sus, le fruit de vos entrailles, est b\xE9ni.","Sainte Marie, M\xE8re de Dieu, priez pour nous, pauvres p\xE9cheurs, maintenant, et \xE0 l'heure de notre mort. Amen."],lp={_name:ap,formula:op},up="Ave Maria",cp=["Ave Maria","Ave Maria, gratia plena: Dominus tecum, benedicta tu in mulieribus, et benedictus fructus ventris tui, Iesus.","Sancta Maria, Mater Dei, ora pro nobis peccatoribus, nunc et in hora mortis nostrae. Amen."],fp={_name:up,formula:cp},hp="Esi sveicin\u0101ta, Marija",dp=["Esi sveicin\u0101ta, Marija","Esi sveicin\u0101ta, Marija, \u017E\u0113last\u012Bbas piln\u0101, Kungs ir ar Tevi; Tu esi sv\u0113t\u012Bta starp sieviet\u0113m, un sv\u0113t\u012Bts ir Tavas miesas auglis J\u0113zus.","Sv\u0113t\u0101 Marija, Dieva M\u0101te, l\u016Bdz par mums, gr\u0113ciniekiem, tagad un m\u016Bsu n\u0101ves stund\u0101. Amen."],pp={_name:hp,formula:dp},gp={generate:W0,meta:X0,params:Z0,languages:{en:rp,es:sp,fr:lp,la:fp,lv:pp}},mp=e=>[[["formula"],"",["formula"]]],Ap="Lord's Prayer",yp={name:Ap},vp={},Cp="Lord's Prayer",bp=["Lord's Prayer","Our Father, Who art in heaven, hallowed by Thy name, Thy kingdom come; Thy will be done on earth as it is in heaven.","Give us this day our daily bread; and forgive us our trespasses, as we forgive those who trespass against us. And lead us not into temptation; but deliver us from evil. Amen."],Ep={_name:Cp,formula:bp},Sp="Padrenuestro",wp=["Padrenuestro","Padre Nuestro, que est\xE1s en el cielo, santificado sea tu nombre venga a nosotros tu reino; h\xE1gase tu voluntad, en la tierra como en el cielo.","Danos hoy nuestro pan de cada d\xEDa; perdona nuestras ofensas, como tambi\xE9n nosotros perdonamos a los que nos ofenden; no nos dejes caer en la tentaci\xF3n, y l\xEDbranos del mal. Am\xE9n."],_p={_name:Sp,formula:wp},Tp="Notre P\xE8re",xp=["Notre P\xE8re","Notre P\xE8re, qui es aux cieux, que ton nom soit sanctifi\xE9, que ton r\xE8gne vienne, que ta volont\xE9 soit faite sur la terre comme au ciel.","Donne-nous aujourd'hui notre pain de ce jour, pardonne-nous nos offenses, comme nous pardonnons aussi \xE0 ceux qui nous ont offens\xE9s, et ne nous laisse pas entrer en tentation, mais d\xE9livre-nous du mal. Amen."],Ip={_name:Tp,formula:xp},Bp="Dominica oratio",kp=["Dominica oratio","Pater noster, qui es in caelis: Sanctificetur nomen tuum: Adveniat regnum tuum: Fiat voluntas tua, sicut in caelo, et in terra.","Panem nostrum quotidianum da nobis hodie: Et dimitte nobis debita nostra, sicut et nos dimittimus debitoribus nostris. Et ne nos inducas in tentationem, sed libera nos a malo. Amen."],Rp={_name:Bp,formula:kp},Dp="Kunga J\u0113zus l\u016Bg\u0161ana",Lp=["Kunga J\u0113zus l\u016Bg\u0161ana","T\u0113vs m\u016Bsu, kas esi debes\u012Bs, sv\u0113t\u012Bts lai top Tavs v\u0101rds, lai atn\u0101k Tava valst\u012Bba, Tavs pr\u0101ts lai notiek k\u0101 debes\u012Bs, t\u0101 ar\u012B virs zemes.","M\u016Bsu dieni\u0161\u0137o maizi dod mums \u0161odien un piedod mums m\u016Bsu par\u0101dus, k\u0101 ar\u012B m\u0113s piedodam saviem par\u0101dniekiem, un neieved m\u016Bs k\u0101rdin\u0101\u0161an\u0101, bet atpest\u012B m\u016Bs no \u013Cauna. Amen."],Np={_name:Dp,formula:Lp},Mp={generate:mp,meta:yp,params:vp,languages:{en:Ep,es:_p,fr:Ip,la:Rp,lv:Np}},Op=e=>[[["formula"],"",["formula"]]],Up="Prayer to Your Guardian Angel",Pp={name:Up},Fp={},Vp="Angel of God",Hp=["Angel of God","Angel of God,","my guardian dear,","To whom his love commits me here;","Ever this (day, night) be at my side,","To light and guard, to rule and guide.","Amen."],qp={_name:Vp,formula:Hp},Kp="Angele Dei",Gp=["Angele Dei","Angele Dei,","qui custos es mei,","To whom his love commits me here;","Me tibi commissum pietate superna;","(Hodie, Hac nocte) illumina, custodi, rege, et guberna.","Amen."],Qp={_name:Kp,formula:Gp},jp={generate:Op,meta:Pp,params:Fp,languages:{en:qp,la:Qp}},$p=e=>[[["1"],"",["dialogue"]],[["2"],"",["prayer"]]],zp="Regina caeli",Jp={name:zp},Wp={},Yp="Queen of Heaven",Xp=["Dialogue","V. Queen of Heaven, rejoice, alleluia.","R. For He whom you did merit to bear, alleluia.","V. Has risen, as he said, alleluia.","R. Pray for us to God, alleluia.","V. Rejoice and be glad, O Virgin Mary, alleluia.","R. For the Lord has truly risen, alleluia."],Zp=["Prayer","Let us pray. O God, who gave joy to the world through the resurrection of Thy Son, our Lord Jesus Christ, grant we beseech Thee, that through the intercession of the Virgin Mary, His Mother, we may obtain the joys of everlasting life. Through the same Christ our Lord. Amen."],eg={_name:Yp,dialogue:Xp,prayer:Zp},tg="Regina caeli",rg=["Dialogus","V. Regina caeli, laetare, alleluia.","R. Quia quem meruisti portare, alleluia.","V. Resurrexit, sicut dixit, alleluia.","R. Ora pro nobis Deum, alleluia.","V. Gaude et laetare, Virgo Maria, alleluia.","R. Quia surrexit Dominus vere, alleluia."],ng=["Oratio","Oremus. Deus, qui per resurrectionem Filii tui, Domini nostri Iesu Christi, mundum laetificare dignatus es: praesta, quaesumus; ut per eius Genetricem Virginem Mariam, perpetuae capiamus gaudia vitae. Per eundem Christum Dominum nostrum. Amen."],ig={_name:tg,dialogue:rg,prayer:ng},sg={generate:$p,meta:Jp,params:Wp,languages:{en:eg,la:ig}},ag=e=>{let t;e["glory-be"]=="good-friday"?t=["",["good-friday"]]:e["glory-be"]=="holy-saturday"?t=["",["holy-saturday"]]:t=["glory-be",["formula"]];let r;const n=e.weekday;n=="mon"||n=="sat"||n=="sun-advent-christmas"?r="joyful-mysteries":n=="tue"||n=="fri"||n=="sun-lent"?r="sorrowful-mysteries":n=="wed"||n=="sun"?r="glorious-mysteries":r="luminous-mysteries";let i=[[["initial","1"],"",[r,"introduction"]],[["initial","2"],"sign-of-the-cross",["formula"]],[["initial","3"],"apostles-creed",["formula"],"Holding the Crucifix, say the Apostles' Creed"],[["initial","4"],"lords-prayer",["formula"],"On the first bead, say an Our Father"]];for(let s=0;s<3;s++)i.push([["initial","5",[s,3]],"hail-mary",["formula"],"Say one Hail Mary on each of the next three beads"]);i.push([["initial","6"]].concat(t));for(let s=0;s<5;s++){i=i.concat([[["decades",[s,5],"introduction"],"",[r,(s+1).toString(),"introduction"],"Announce the Mystery"],[["decades",[s,5],"scripture"],"",[r,(s+1).toString(),"scripture"],"Optionally, have a brief reading from the Scripture"],[["decades",[s,5],"lords-prayer"],"lords-prayer",["formula"]]]);for(let a=0;a<10;a++)i.push([["decades",[s,5],"hail-mary",[a,10]],"hail-mary",["formula"],"Say ten Hail Marys while meditating on the Mystery"]);i=i.concat([[["decades",[s,5],"glory-be"]].concat(t),[["decades",[s,5],"fatima-prayer"],"fatima-prayer",["formula"],"Optionally, say the Fatima Prayer"]])}return i=i.concat([[["concluding","salve-regina","prayer"],"salve-regina",["prayer"]],[["concluding","salve-regina","dialogue"],"salve-regina",["dialogue"]],[["concluding","salve-regina","concluding-prayer"],"",["salve-regina-concluding-prayer"]],[["concluding","prayer-to-st-joseph"],"",["prayer-to-st-joseph"],"Optionally, say the prayer to St Joseph"],[["concluding","sign-of-the-cross"],"sign-of-the-cross",["formula"]]]),i},og="Rosary",lg={name:og},ug={description:["Day of the week"],options:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday","sun-advent-christmas":"Sunday of Advent or Christmas","sun-lent":"Sunday of Lent"}},cg={weekday:ug,"glory-be":{description:["Glory Be"],options:{regular:"Regular","good-friday":"Good Friday","holy-saturday":"Holy Saturday"}}},fg="The Rosary",hg={_name:fg,"salve-regina-concluding-prayer":["Prayer","Let us pray. O God, Whose Only-Begotten Son, by His life, death and resurrection, has purchased for us the rewards of eternal life: grant, we beseech Thee, that by meditating upon these mysteries of the most holy Rosary of the Blessed Virgin Mary, we may imitate what they contain, and obtain what they promise, through the same Christ our Lord. Amen."],"prayer-to-st-joseph":["Prayer to Saint Joseph","To you, O blessed Joseph, do we come in our tribulation, and having implored the help of your most holy Spouse, we confidently invoke your patronage also.","Through that charity which bound you to the Immaculate Virgin Mother of God and through the paternal love with which you embraced the Child Jesus, we humbly beg you graciously to regard the inheritance which Jesus Christ has purchased by his Blood, and with your power and strength to aid us in our necessities.","O most watchful guardian of the Holy Family, defend the chosen children of Jesus Christ; O most loving father, ward off from us every contagion of error and corrupting influence; O our most mighty protector, be kind to us and from heaven assist us in our struggle with the power of darkness.","As once you rescued the Child Jesus from deadly peril, so now protect God's Holy Church from the snares of the enemy and from all adversity; shield, too, each one of us by your constant protection, so that, supported by your example and your aid, we may be able to live piously, to die in holiness, and to obtain eternal happiness in heaven.","Amen."],"good-friday":["Dialogue","V. Christ became obedient for us unto death.","R. Even unto death on the Cross."],"holy-saturday":["Dialogue","V. Christ became obedient for us unto death, even unto death on the Cross.","R. For which God hath exalted Him and hath given Him a name which is above all names."],"joyful-mysteries":{1:{introduction:["The Annunciation","First Joyful Mystery","Him Whom thou didst conceive.","Fruit of the mystery: Humility"],scripture:["[Mt 1:18, Lk 1:26-38]"]},2:{introduction:["The Visitation","Second Joyful Mystery","Him Whom thou didst carry while visiting Elizabeth.","Fruit of the mystery: Love of Neighbor"],scripture:["[Lk 1:39-45]"]},3:{introduction:["The Nativity","Third Joyful Mystery","Him Whom thou didst give birth to.","Fruit of the mystery: Poverty"],scripture:["[Lk 2:6-12]"]},4:{introduction:["The Presentation in the Temple","Fourth Joyful Mystery","Him Whom thou didst present in the temple.","Fruit of the mystery: Purity of Heart and Body"],scripture:["[Lk 2:25-32]"]},5:{introduction:["The Finding in the Temple","Fifth Joyful Mystery","Him Whom thou didst find in the temple.","Fruit of the mystery: Devotion to Jesus"],scripture:["[Lk 2:41-50]"]},introduction:["Joyful Mysteries"]},"luminous-mysteries":{1:{introduction:["The Baptism of Christ in the Jordan","First Luminous Mystery","He Who was baptized in the Jordan.","Fruit of the mystery: Openness to the Holy Spirit"],scripture:["[Mt 3:13, Mk 1:9, Jn 1:29]"]},2:{introduction:["The Wedding Feast at Cana","Second Luminous Mystery","He Who revealed Himself at the wedding feast of Cana.","Fruit of the mystery: To Jesus through Mary"],scripture:["[Jn 2:1-11]"]},3:{introduction:["Jesus' Proclamation of the Coming of the Kingdom of God","Third Luminous Mystery","He who announced the Kingdom of God.","Fruit of the mystery: Conversion"],scripture:["[Mk 1:15, Lk 10:8-11]"]},4:{introduction:["The Transfiguration","Fourth Luminous Mystery","He Who was transfigured.","Fruit of the mystery: Desire for holiness"],scripture:["[Mt 17:1-8, Mk 9:2-9]"]},5:{introduction:["The Institution of the Eucharist","Fifth Luminous Mystery","He Who instituted the Eucharist.","Fruit of the mystery: Adoration"],scripture:["[Jn 6:27-59, Mt 26:26-29, Mk 14:22-24, Lk 22:15-20]"]},introduction:["Luminous Mysteries"]},"sorrowful-mysteries":{1:{introduction:["The Agony in the Garden","First Sorrowful Mystery","He Who sweated blood for us.","Fruit of the mystery: Obedience to God\u2019s Will"],scripture:["[Lc 22:39-46]"]},2:{introduction:["The Scourging at the Pillar","Second Sorrowful Mystery","He Who was scourged for us.","Fruit of the mystery: Mortification"],scripture:["[Mt 27:26, Mk 15:6-15, Jn 19:1]"]},3:{introduction:["The Crowning with Thorns","Third Sorrowful Mystery","He Who was crowned with thorns for us.","Fruit of the mystery: Courage"],scripture:["[Jn 19:1-8]"]},4:{introduction:["The Carrying of the Cross","Fourth Sorrowful Mystery","He Who carried the Cross for us.","Fruit of the mystery: Patience"],scripture:["[Jn 19:16-22]"]},5:{introduction:["The Crucifixion and Death","Fifth Sorrowful Mystery","He Who was crucified for us.","Fruit of the mystery: Sorrow for our Sins"],scripture:["[Jn 19:25-30]"]},introduction:["Sorrowful Mysteries"]},"glorious-mysteries":{1:{introduction:["The Resurrection","First Glorious Mystery","He Who arose from the dead.","Fruit of the mystery: Faith"],scripture:["[Mk 16:1-7]"]},2:{introduction:["The Ascension","Second Glorious Mystery","He Who ascended into heaven.","Fruit of the mystery: Hope"],scripture:["[Lk 24:46-53]"]},3:{introduction:["The Descent of the Holy Spirit","Third Glorious Mystery","He Who sent the Holy Spirit.","Fruit of the mystery: Wisdom"],scripture:["[Act 2:1-7]"]},4:{introduction:["The Assumption","Fourth Glorious Mystery","He Who assumed thee into heaven.","Fruit of the mystery: Devotion to Mary"],scripture:["[Ps 16:10]"]},5:{introduction:["The Coronation of Mary","Fifth Glorious Mystery","He Who crowned thee Queen of Heaven.","Fruit of the mystery: Grace of a happy death"],scripture:["[Rev 12:1]"]},introduction:["Glorious Mysteries"]}},dg="El Rosario",pg={_name:dg,"salve-regina-concluding-prayer":["Oraci\xF3n","Oremos. Te pedimos, Se\xF1or, nos concedas a nosotros tus siervos, gozar de perpetua salud de alma y cuerpo, y por la gloriosa intercesi\xF3n de la bienaventurada siempre Virgen Mar\xEDa, seamos librados de las tristezas presentes y gocemos de la eterna alegr\xEDa. Por Jesucristo, nuestro Se\xF1or. Am\xE9n."],"prayer-to-st-joseph":["Oraci\xF3n a San Jos\xE9","A ti, bienaventurado san Jos\xE9, acudimos en nuestra tribulaci\xF3n, y despu\xE9s de implorar el auxilio de tu sant\xEDsima esposa, solicitamos tambi\xE9n confiadamente tu patrocinio.","Con aquella caridad que te tuvo unido con la Inmaculada Virgen Mar\xEDa, Madre de Dios, y por el paterno amor con que abrazaste al Ni\xF1o Jes\xFAs, humildemente te suplicamos que vuelvas benigno los ojos a la herencia que con su Sangre adquiri\xF3 Jesucristo, y con tu poder y auxilio socorras nuestras necesidades.","Protege, oh provident\xEDsimo Custodio de la divina Familia, la escogida descendencia de Jesucristo; aleja de nosotros, oh padre amant\xEDsimo, este flagelo de errores y vicios.","As\xEDstenos propicio desde el cielo, en esta lucha contra el poder de las tinieblas; y como en otro tiempo libraste de la muerte la vida amenazada del Ni\xF1o Jes\xFAs, as\xED ahora defiende a la santa Iglesia de Dios de las hostiles insidias y de toda adversidad. Y a cada uno de nosotros prot\xE9genos con tu constante patrocinio, para que, a ejemplo tuyo, y sostenidos por tu auxilio, podamos vivir y morir santamente y alcanzar en los cielos la eterna bienaventuranza.","Am\xE9n."],"good-friday":["Di\xE1logo","V. Christ became obedient for us unto death.","R. Even unto death on the Cross."],"holy-saturday":["Di\xE1logo","V. Christ became obedient for us unto death, even unto death on the Cross.","R. For which God hath exalted Him and hath given Him a name which is above all names."],"joyful-mysteries":{1:{introduction:["La Encarnaci\xF3n del Hijo de Dios","Primer Misterio Gozoso","Him Whom thou didst conceive.","Fruit of the mystery: Humility"],scripture:["[Lc 1,26-27]"]},2:{introduction:["La Visitaci\xF3 de Nuestra Se\xF1ora a su prima Santa Isabel","Segundo Misterio Gozoso","Him Whom thou didst carry while visiting Elizabeth.","Fruit of the mystery: Love of Neighbor"],scripture:["[Lc 1, 39-42]"]},3:{introduction:["El Nacimiento del Hijo de Dios en el portal de Bel\xE9n","Tercer Misterio Gozoso","Him Whom thou didst give birth to.","Fruit of the mystery: Poverty"],scripture:["[Lc 2,1-7]"]},4:{introduction:["La presentaci\xF3n de Jes\xFAs en el Templo","Cuarto Misterio Gozoso","Him Whom thou didst present in the temple.","Fruit of the mystery: Purity of Heart and Body"],scripture:["[Lc 2, 21-24]"]},5:{introduction:["El Ni\xF1o Jes\xFAs perdido y hallado en el Templo","Quinto Misterio Gozoso","Him Whom thou didst find in the temple.","Fruit of the mystery: Devotion to Jesus"],scripture:["[Lc 2, 41-47]"]},introduction:["Misterios Gozosos"]},"luminous-mysteries":{1:{introduction:["El Bautismo en el Jord\xE1n","Primer Misterio Luminoso","He Who was baptized in the Jordan.","Fruit of the mystery: Openness to the Holy Spirit"],scripture:["[Mt 3,16-17]"]},2:{introduction:["Las bodas de Can\xE1","Segundo Misterio Luminoso","He Who revealed Himself at the wedding feast of Cana.","Fruit of the mystery: To Jesus through Mary"],scripture:["[Jn 2, 1-5]"]},3:{introduction:["El anuncio del Reino de Dios","Tercer Misterio Luminoso","He who announced the Kingdom of God.","Fruit of the mystery: Conversion"],scripture:["[Mc 1, 15]"]},4:{introduction:["La Transfiguraci\xF3n","Cuarto Misterio Luminoso","He Who was transfigured.","Fruit of the mystery: Desire for holiness"],scripture:["[Mt 17, 1-2]"]},5:{introduction:["La instituci\xF3n de la Eucarist\xEDa","Quinto Misterio Luminoso","He Who instituted the Eucharist.","Fruit of the mystery: Adoration"],scripture:["[Mt 26, 26]"]},introduction:["Misterios Luminosos"]},"sorrowful-mysteries":{1:{introduction:["La oraci\xF3n en el Huerto","Primer Misterio Doloroso","He Who sweated blood for us.","Fruit of the mystery: Obedience to God\u2019s Will"],scripture:["[Mt 26, 36-39]"]},2:{introduction:["La flagelaci\xF3n de Jes\xFAs atado a la columna","Segundo Misterio Doloroso","He Who was scourged for us.","Fruit of the mystery: Mortification"],scripture:["[Mt 27, 26]"]},3:{introduction:["La coronaci\xF3n de espinas","Tercer Misterio Doloroso","He Who was crowned with thorns for us.","Fruit of the mystery: Courage"],scripture:["[Mt 27, 27-29]"]},4:{introduction:["Jes\xFAs con la Cruz a cuestas camino del Calvario","Cuarto Misterio Doloroso","He Who carried the Cross for us.","Fruit of the mystery: Patience"],scripture:["[Mc 15, 21-22]"]},5:{introduction:["La crucifixi\xF3n y muerte de Jes\xFAs","Quinto Misterio Doloroso","He Who was crucified for us.","Fruit of the mystery: Sorrow for our Sins"],scripture:["[Lc  23, 33-46]"]},introduction:["Misterios Dolorosos"]},"glorious-mysteries":{1:{introduction:["La resurrecci\xF3n del Hijo de Dios","Primer Misterio Glorioso","He Who arose from the dead.","Fruit of the mystery: Faith"],scripture:["[Lc 24, 1-6]"]},2:{introduction:["La Ascensi\xF3n del Se\xF1or al cielo","Segundo Misterio Glorioso","He Who ascended into heaven.","Fruit of the mystery: Hope"],scripture:["[Mc 16, 19]"]},3:{introduction:["La venida del Esp\xEDritu Santo","Tercer Misterio Glorioso","He Who sent the Holy Spirit.","Fruit of the mystery: Wisdom"],scripture:["[Hch 2, 1-4]"]},4:{introduction:["La Asunci\xF3n de Mar\xEDa al cielo","Cuarto Misterio Glorioso","He Who assumed thee into heaven.","Fruit of the mystery: Devotion to Mary"],scripture:["[Lc 1, 48-49]"]},5:{introduction:["La coronaci\xF3n de Mar\xEDa como Reina y Se\xF1ora de todo lo creado","Quinto Misterio Glorioso","He Who crowned thee Queen of Heaven.","Fruit of the mystery: Grace of a happy death"],scripture:["[Ap 12, 1]"]},introduction:["Misterios Gloriosos"]}},gg="Le Rosaire",mg={_name:gg,"salve-regina-concluding-prayer":["Pri\xE8re","Prions: O Dieu dont le Fils unique, par sa vie, sa mort et sa r\xE9surrection, nous a m\xE9rit\xE9, les r\xE9compenses du salut \xE9ternel, faites que, m\xE9ditant ses myst\xE8res dans le tr\xE8s saint Rosaire de la bienheureuse Vierge Marie, nous mettions \xE0 profit les le\xE7ons qu'ils contiennent afin d'obtenir ce qu'ils nous font esp\xE9rer. Par la m\xE9me J\xE9sus-Christ, votre Fils notre Seigneur. Amen."],"prayer-to-st-joseph":["Prayer to Saint Joseph","\xD4 bienheureux Joseph, nous recourons \xE0 vous dans notre tribulation et, apr\xE8s avoir implor\xE9 le secours de votre tr\xE8s sainte Epouse, nous sollicitons aussi avec confiance votre protection.","Par l'affection qui vous a uni \xE0 la Vierge Immacul\xE9e M\xE8re de Dieu, par l'amour paternel dont vous avez entour\xE9 l'Enfant J\xE9sus, nous vous supplions de regarder avec bont\xE9 l'h\xE9ritage que J\xE9sus Christ s'est acquis au prix de son sang, et de nous assister de votre puissance et de votre secours dans nos besoins.","Prot\xE9gez, \xF4 Gardien vigilant de la divine Famille, la race \xE9lue de J\xE9sus Christ; pr\xE9servez-nous , \xF4 P\xE8re tr\xE8s aimant, de l'erreur et de la corruption; assistez-nous du haut du ciel, \xF4 protecteur tr\xE8s puissant, dans le combat contre la puissance des t\xE9n\xE8bres.","Et de m\xEAme qu'autrefois vous avez arrach\xE9 l'Enfant J\xE9sus au p\xE9ril de la mort, d\xE9fendez aujourd'hui la sainte \xC9glise de Dieu des emb\xFBches de l'ennemi et de toute adversit\xE9. Couvrez chacun de nous de votre constante protection, afin qu'\xE0 votre exemple et par votre secours nous puissions vivre saintement, mourir pieusement et obtenir la b\xE9atitude \xE9ternelle du ciel.","Amen."],"good-friday":["Dialogue","V. Christ became obedient for us unto death.","R. Even unto death on the Cross."],"holy-saturday":["Dialogue","V. Christ became obedient for us unto death, even unto death on the Cross.","R. For which God hath exalted Him and hath given Him a name which is above all names."],"joyful-mysteries":{1:{introduction:["L'Annonciation de l'Ange Gabriel \xE0 la Vierge Marie","1er Myst\xE8re Joyeux","Him Whom thou didst conceive.","Fruit of the mystery: Humility"],scripture:["[Lc 1,26-27]"]},2:{introduction:["Visite de la Vierge Marie \xE0 sa cousine \xC9lisabeth","2e Myst\xE8re Joyeux","Him Whom thou didst carry while visiting Elizabeth.","Fruit of the mystery: Love of Neighbor"],scripture:["[Lc 1, 39-42]"]},3:{introduction:["La naissance de J\xE9sus dans la grotte de Bethl\xE9em","3e Myst\xE8re Joyeux","Him Whom thou didst give birth to.","Fruit of the mystery: Poverty"],scripture:["[Lc 2,1-7]"]},4:{introduction:["J\xE9sus est pr\xE9sent\xE9 au temple par Marie et Joseph","4e Myst\xE8re Joyeux","Him Whom thou didst present in the temple.","Fruit of the mystery: Purity of Heart and Body"],scripture:["[Lc 2, 21-24]"]},5:{introduction:["J\xE9sus retrouv\xE9 dans le temple","5e Myst\xE8re Joyeux","Him Whom thou didst find in the temple.","Fruit of the mystery: Devotion to Jesus"],scripture:["[Lc 2, 41-47]"]},introduction:["Myst\xE8res joyeux"]},"luminous-mysteries":{1:{introduction:["Le Bapt\xEAme dans le Jourdain","1er Myst\xE8re Lumineux","He Who was baptized in the Jordan.","Fruit of the mystery: Openness to the Holy Spirit"],scripture:["[Mt 3,16-17]"]},2:{introduction:["Les noces de Cana","2e Myst\xE8re Lumineux","He Who revealed Himself at the wedding feast of Cana.","Fruit of the mystery: To Jesus through Mary"],scripture:["[Jn 2, 1-5]"]},3:{introduction:["L'annonce du Royaume de Dieu et l'invitation \xE0 la conversion","3e Myst\xE8re Lumineux","He who announced the Kingdom of God.","Fruit of the mystery: Conversion"],scripture:["[Mc 1, 15]"]},4:{introduction:["La transfiguration","4e Myst\xE8re Lumineux","He Who was transfigured.","Fruit of the mystery: Desire for holiness"],scripture:["[Mt 17, 1-2]"]},5:{introduction:["L'institution de l'Eucharistie","5e Myst\xE8re Lumineux","He Who instituted the Eucharist.","Fruit of the mystery: Adoration"],scripture:["[Mt 26, 26]"]},introduction:["Myst\xE8res lumineux"]},"sorrowful-mysteries":{1:{introduction:["L'agonie de J\xE9sus \xE0 Geths\xE9mani","1er Myst\xE8re Douloureux","He Who sweated blood for us.","Fruit of the mystery: Obedience to God\u2019s Will"],scripture:["[Mt 26, 36-39]"]},2:{introduction:["La flagellation de J\xE9sus","2e Myst\xE8re Douloureux","He Who was scourged for us.","Fruit of the mystery: Mortification"],scripture:["[Mt 27, 26]"]},3:{introduction:["Le couronnement d'\xE9pines","3e Myst\xE8re Douloureux","He Who was crowned with thorns for us.","Fruit of the mystery: Courage"],scripture:["[Mt 27, 27-29]"]},4:{introduction:["Le portement de la Croix","4e Myst\xE8re Douloureux","He Who carried the Cross for us.","Fruit of the mystery: Patience"],scripture:["[Mc 15, 21-22]"]},5:{introduction:["J\xE9sus est crucifi\xE9 et meurt sur la Croix","5e Myst\xE8re Douloureux","He Who was crucified for us.","Fruit of the mystery: Sorrow for our Sins"],scripture:["[Lc 23, 32-33, 44-46]"]},introduction:["Myst\xE8res douloureux"]},"glorious-mysteries":{1:{introduction:["La R\xE9surrection de J\xE9sus","1er Myst\xE8re Glorieux","He Who arose from the dead.","Fruit of the mystery: Faith"],scripture:["[Lc 24, 1-6]"]},2:{introduction:["L'Ascension du Seigneur au ciel","2e Myst\xE8re Glorieux","He Who ascended into heaven.","Fruit of the mystery: Hope"],scripture:["[Mc 16, 19]"]},3:{introduction:["La descente du Saint-Esprit au C\xE9nacle","3e Myst\xE8re Glorieux","He Who sent the Holy Spirit.","Fruit of the mystery: Wisdom"],scripture:["[Ac 2, 1-4]"]},4:{introduction:["L'Assomption de Marie au Ciel","4e Myst\xE8re Glorieux","He Who assumed thee into heaven.","Fruit of the mystery: Devotion to Mary"],scripture:["[Lc 1, 48-49]"]},5:{introduction:["Marie est couronn\xE9e Reine du ciel et de la terre","5e Myst\xE8re Glorieux","He Who crowned thee Queen of Heaven.","Fruit of the mystery: Grace of a happy death"],scripture:["[Ap 12, 1]"]},introduction:["Myst\xE8res glorieux"]}},Ag="Rosarium",yg={_name:Ag,"salve-regina-concluding-prayer":["Oratio","Oremus. Deus, cuius Unigenitus per vitam, mortem et resurrectionem suam nobis salutis aeternae praemia comparavit: concede, quaesumus; ut, haec mysteria sacratissimo beatae Mariae Virginis Rosario recolentes. et imitemur quod continent, et quod promittunt, assequamur. Per eundem Christum Dominum nostrum. Amen."],"prayer-to-st-joseph":["Oratio ad Sanctum Iosephum","Ad te beate Ioseph, in tribulatione nostra confugimus, atque, implorato Sponsae tuae sanctissimae auxilio, patrocinium quoque tuum fidenter exposcimus.","Per eam, quaesumus quae te cum immaculata Virgine Dei Genetrice coniunxit, caritatem, perque paternum, quo Puerum Iesum amplexus es, amorem, supplices deprecamur, ut ad hereditatem, quam Iesus Christus acquisivit Sanguine suo, benignus respicias, ac necessitatibus nostris tua virtute et ope succurras.","Tuere, o Custos providentissime divinae Familiae, Iesu Christi sobolem electam; prohibe a nobis, amantissime Pater, omnem errorum ac corruptelarum luem; propitius nobis, sospitator noster fortissime, in hoc cum potestate tenebrarum certamine e caelo adesto;","et sicut olim Puerum Iesum e summo eripuisti vitae discrimine, ita nunc Ecclesiam sanctam Dei ab hostilibus insidiis atque ab omni adversitate defende: nosque singulos perpetuo tege patrocinio, ut ad tui exemplar et ope tua suffulti, sancte vivere, pie emori, sempiternamque in caelis beatitudinem assequi possimus.","Amen."],"good-friday":["Dialogus","V. Christus factus est pro nobis oboediens usque ad mortem.","R. Mortem autem crucis."],"holy-saturday":["Dialogus","V. Christus factus est pro nobis oboediens usque ad mortem, mortem autem crucis.","R. Propter quod et Deus exaltavit illum: et dedit illi nomen, quod est super omne nomen."],"joyful-mysteries":{1:{introduction:["Annuntiatio","Primum mysterium gaudiosum","Quem, Virgo, concepisti.","Fruit of the mystery: Humility"],scripture:["[Mt 1:18, Lc 1:26-38]"]},2:{introduction:["Visitatio","Secundum mysterium gaudiosum","Quem visitando Elisabeth portasti.","Fruit of the mystery: Love of Neighbor"],scripture:["[Lc 1:39-45]"]},3:{introduction:["Nativitas","Tertium mysterium gaudiosum","Quem, Virgo, genuisti.","Fruit of the mystery: Poverty"],scripture:["[Lc 2:6-12]"]},4:{introduction:["Presentatio","Quartum mysterium gaudiosum","Quem in templo praesentasti.","Fruit of the mystery: Purity of Heart and Body"],scripture:["[Lc 2:25-32]"]},5:{introduction:["Inventionem Domini nostri Iesu Christi in templo","Quintum mysterium gaudiosum","Quem in templo invenisti.","Fruit of the mystery: Devotion to Jesus"],scripture:["[Lc 2:41-50]"]},introduction:["Mysteria gaudiosa"]},"luminous-mysteries":{1:{introduction:["Baptismus Iesu","Primum mysterium luminosum","Qui apud Iordanem baptizatus est.","Fruit of the mystery: Openness to the Holy Spirit"],scripture:["[Mt 3:13, Mc 1:9, Jn 1:29]"]},2:{introduction:["Miraculum ad nuptias in Cana","Secundum mysterium luminosum","Qui ipsum revelavit apud Canense matrimonium.","Fruit of the mystery: To Jesus through Mary"],scripture:["[In 2:1-11]"]},3:{introduction:["Proclamatio Regni Dei","Tertium mysterium luminosum","Qui Regnum Dei annuntiavit.","Fruit of the mystery: Conversion"],scripture:["[Mc 1:15, Lc 10:8-11]"]},4:{introduction:["Transfiguratum","Quartum mysterium luminosum","Qui transfiguratus est.","Fruit of the mystery: Desire for holiness"],scripture:["[Mt 17:1-8, Mc 9:2-9]"]},5:{introduction:["Ultima cena","Quintum mysterium luminosum","Qui Eucharistiam instituit.","Fruit of the mystery: Adoration"],scripture:["[In 6:27-59, Mt 26:26-29, Mc 14:22-24, Lc 22:15-20]"]},introduction:["Mysteria luminosa"]},"sorrowful-mysteries":{1:{introduction:["Cruciatus in Horto","Primum mysterium dolorosum","Qui pro nobis sanguinem sudavit.","Fruit of the mystery: Obedience to God\u2019s Will"],scripture:["[Lc 22:39-46]"]},2:{introduction:["Flagellatio Domini nostri Iesu Christi","Secundum mysterium dolorosum","Qui pro nobis flagellatus est.","Fruit of the mystery: Mortification"],scripture:["[Mt 27:26, Mc 15:6-15, In 19:1]"]},3:{introduction:["Coronatio cum Spinis","Tertium mysterium dolorosum","Qui pro nobis spinis coronatus est.","Fruit of the mystery: Courage"],scripture:["[In 19:1-8]"]},4:{introduction:["Baiulatio Crucis","Quartum mysterium dolorosum","Qui pro nobis crucem baiulavit.","Fruit of the mystery: Patience"],scripture:["[In 19:16-22]"]},5:{introduction:["Crucifixio","Quintum mysterium dolorosum","Qui pro nobis crucifixus est.","Fruit of the mystery: Sorrow for our Sins"],scripture:["[In 19:25-30]"]},introduction:["Mysteria dolorosa"]},"glorious-mysteries":{1:{introduction:["Resurrectio","Primum mysterium gloriosum","Qui resurrexit a mortuis.","Fruit of the mystery: Faith"],scripture:["[Mc 16:1-7]"]},2:{introduction:["Ascensio","Secundum mysterium gloriosum","Qui in caelum ascendit.","Fruit of the mystery: Hope"],scripture:["[Lc 24:46-53]"]},3:{introduction:["Descensus Spiritus Sancti","Tertium mysterium gloriosum","Qui Spiritum Sanctum misit.","Fruit of the mystery: Wisdom"],scripture:["[Acta 2:1-7]"]},4:{introduction:["Assumptio","Quartum mysterium gloriosum","Qui te assumpsit.","Fruit of the mystery: Devotion to Mary"],scripture:["[Ps 16:10]"]},5:{introduction:["Coronatio Beatae Mariae Virginis in caelum","Quintum mysterium gloriosum","Qui te in caelis coronavit.","Fruit of the mystery: Grace of a happy death"],scripture:["[Apoc 12:1]"]},introduction:["Mysteria gloriosa"]}},vg="Ro\u017Eukronis",Cg={_name:vg,"salve-regina-concluding-prayer":["L\u016Bg\u0161ana","Dievs, kura Viendzimtais D\u0113ls ar savu dz\u012Bvi, n\u0101vi un aug\u0161\u0101mcel\u0161anos mums sagatavoja m\u016B\u017E\u012Bg\u0101s pest\u012B\u0161anas algu, Tevi l\u016Bdzam, dod, ka m\u0113s, \u0161os nosl\u0113pumus Vissv\u0113t\u0101s Jaunavas Marijas Ro\u017Eukron\u012B apcer\u0113dami, sekotu tajos ietvertai m\u0101c\u012Bbai un sasniegtu algu, kas tajos apsol\u012Bta. Caur to pa\u0161u m\u016Bsu Kungu J\u0113zu Kristu, Tavu D\u0113lu, kas ar Tevi dz\u012Bvo un valda Sv\u0113t\u0101 Gara vien\u012Bb\u0101, Dievs no m\u016B\u017E\u012Bbas m\u016B\u017E\u012Bb\u0101. Amen."],"prayer-to-st-joseph":["L\u016Bg\u0161ana sv\u0113tajam J\u0101zepam","Pie Tevis, sv\u0113tais J\u0101zep, m\u0113s steidzamies sav\u0101s b\u0113d\u0101s un Tavas Vissv\u0113t\u0101k\u0101s L\u012Bgavas pal\u012Bdz\u012Bbu piesauku\u0161i, pa\u013C\u0101v\u012Bgi l\u016Bdzam ar\u012B Tavu aizbildn\u012Bbu.","T\u0101s m\u012Blest\u012Bbas d\u0113\u013C, kas Tevi vienoja ar bezvain\u012Bgo Jaunavu, Dieva Dzemd\u0113t\u0101ju, un t\u0101s t\u0113vi\u0161\u0137\u0101s g\u0101d\u012Bbas d\u0113\u013C, ar kuru Tu r\u016Bp\u0113jies par b\u0113rni\u0146u J\u0113zu, m\u0113s Tevi pazem\u012Bgi l\u016Bdzam, uzl\u016Bko \u017E\u0113l\u012Bgi J\u0113zus Kristus asin\u012Bm atpirkto mantojumu un pal\u012Bdzi mums ar savu sp\u0113c\u012Bgo p\u0101rst\u0101v\u012Bbu m\u016Bsu vajadz\u012Bb\u0101s.","Sargi, Dieva aizg\u0101d\u012Bbas dotais sv\u0113t\u0101s \u0123imenes sargs, izredz\u0113tos J\u0113zus Kristus b\u0113rnus, izgl\u0101b m\u016Bs, visum\u012B\u013Cais T\u0113vs, no ikvienas samait\u0101\u0161anas un maldiem, ar debesu sp\u0113ku stiprini m\u016Bs, sp\u0113c\u012Bgais pal\u012Bdz\u0113t\u0101j, c\u012B\u0146\u0101 ar tums\u012Bbas sp\u0113kiem.","Un k\u0101 Tu citk\u0101rt izgl\u0101bi b\u0113rni\u0146u J\u0113zu no draudo\u0161\u0101m n\u0101ves briesm\u0101m, t\u0101 tagad aizst\u0101vi sv\u0113to Dieva Bazn\u012Bcu pret ienaidnieku uzbrukumiem un ikvienu nelaimi. Uz\u0146em m\u016Bs visus sav\u0101 past\u0101v\u012Bg\u0101 patv\u0113rum\u0101, ka m\u0113s, p\u0113c Tava parauga dz\u012Bvodami, un Tavas pal\u012Bdz\u012Bbas sp\u0113cin\u0101ti, var\u0113tu dievbij\u012Bgi dz\u012Bvot, sv\u0113t\u012Bgi nomirt un iemantot m\u016B\u017E\u012Bgo l\u012Bksm\u012Bbu debes\u012Bs.","Amen."],"good-friday":["Dialogs","V. M\u016Bsu d\u0113\u013C Kristus k\u013Cuva paklaus\u012Bgs l\u012Bdz n\u0101vei","R. L\u012Bdz par krusta n\u0101vei."],"holy-saturday":["Dialogs","V. M\u016Bsu d\u0113\u013C Kristus k\u013Cuva paklaus\u012Bgs l\u012Bdz n\u0101vei, l\u012Bdz par krusta n\u0101vei.","R. T\u0101d\u0113\u013C Dievs Vi\u0146u paaugstin\u0101ja p\u0101ri visam un deva Vi\u0146am V\u0101rdu, kas ir p\u0101ri p\u0101r katru v\u0101rdu."],"joyful-mysteries":{1:{introduction:["E\u0146\u0123e\u013Ca pasludin\u0101jums Jaunavai Marijai","Pirmais priec\u012Bgais nosl\u0113pums","Him Whom thou didst conceive.","Fruit of the mystery: Humility"],scripture:["[Lk 1,26-31]"]},2:{introduction:["Marija apmekl\u0113 sv. Elizabeti","Otrais priec\u012Bgais nosl\u0113pums","Him Whom thou didst carry while visiting Elizabeth.","Fruit of the mystery: Love of Neighbor"],scripture:["[Lk 1,39-42]"]},3:{introduction:["Betl\u0113mes stall\u012Bt\u012B piedzimst J\u0113zus","Tre\u0161ais priec\u012Bgais nosl\u0113pums","Him Whom thou didst give birth to.","Fruit of the mystery: Poverty"],scripture:["[Lk 1,4-7]"]},4:{introduction:["B\u0113rna J\u0113zus upur\u0113\u0161ana templ\u012B","Ceturtais priec\u012Bgais nosl\u0113pums","Him Whom thou didst present in the temple.","Fruit of the mystery: Purity of Heart and Body"],scripture:["[Lk 2]"]},5:{introduction:["B\u0113rna J\u0113zus atra\u0161ana sv\u0113tn\u012Bc\u0101","Piektais priec\u012Bgais nosl\u0113pums","Him Whom thou didst find in the temple.","Fruit of the mystery: Devotion to Jesus"],scripture:["[Lk 2,42-46]"]},introduction:["Priec\u012Bgie nosl\u0113pumi"]},"luminous-mysteries":{1:{introduction:["J\u0113zus Krist\u012Bba Jord\u0101n\u0101","Pirmais gaismas nosl\u0113pums","He Who was baptized in the Jordan.","Fruit of the mystery: Openness to the Holy Spirit"],scripture:["[Mt 3]"]},2:{introduction:["J\u0113zus atkl\u0101\u0161an\u0101s k\u0101z\u0101s K\u0101n\u0101","Otrais gaismas nosl\u0113pums","He Who revealed Himself at the wedding feast of Cana.","Fruit of the mystery: To Jesus through Mary"],scripture:["[J\u0146 2]"]},3:{introduction:["Dieva valst\u012Bbas sludin\u0101\u0161ana un aicin\u0101jums atgriezties","Tre\u0161ais gaismas nosl\u0113pums","He who announced the Kingdom of God.","Fruit of the mystery: Conversion"],scripture:["[Mk 1; Mk 2,5.11-12]"]},4:{introduction:["P\u0101rveido\u0161an\u0101s Tabora kaln\u0101","Ceturtais gaismas nosl\u0113pums","He Who was transfigured.","Fruit of the mystery: Desire for holiness"],scripture:["[Lk 9,28-35]"]},5:{introduction:["Euharistijas iedibin\u0101\u0161ana","Piektais gaismas nosl\u0113pums","He Who instituted the Eucharist.","Fruit of the mystery: Adoration"],scripture:["[J\u0146 13,1; Mk 14,22-24]"]},introduction:["Gaismas nosl\u0113pumi"]},"sorrowful-mysteries":{1:{introduction:["Kungs J\u0113zus l\u016Bdzas Ol\u012Bvd\u0101rz\u0101","Pirmais s\u0101p\u012Bgais nosl\u0113pums","He Who sweated blood for us.","Fruit of the mystery: Obedience to God\u2019s Will"],scripture:["[Lk 22,41-44]"]},2:{introduction:["Kungs J\u0113zus tiek \u0161aust\u012Bts","Otrais s\u0101p\u012Bgais nosl\u0113pums","He Who was scourged for us.","Fruit of the mystery: Mortification"],scripture:["[Mk 15,12-15]"]},3:{introduction:["Kungam J\u0113zum uzliek galv\u0101 \u0113rk\u0161\u0137u kroni","Tre\u0161ais s\u0101p\u012Bgais nosl\u0113pums","He Who was crowned with thorns for us.","Fruit of the mystery: Courage"],scripture:["[Mt 27,29]"]},4:{introduction:["Kunga J\u0113zus ce\u013C\u0161 uz Golg\u0101tu","Ceturtais s\u0101p\u012Bgais nosl\u0113pums","He Who carried the Cross for us.","Fruit of the mystery: Patience"],scripture:["[J\u0146 19,17]"]},5:{introduction:["J\u0113zu pienaglo pie Krusta, un Vi\u0146\u0161 mirst \u0161ausm\u012Bg\u0101s cie\u0161an\u0101s","Piektais s\u0101p\u012Bgais nosl\u0113pums","He Who was crucified for us.","Fruit of the mystery: Sorrow for our Sins"],scripture:["[Lk 23,33.44-46]"]},introduction:["S\u0101p\u012Bgie nosl\u0113pumi"]},"glorious-mysteries":{1:{introduction:["Kungs J\u0113zus aug\u0161\u0101mce\u013Cas","Pirmais god\u012Bbas nosl\u0113pums","He Who arose from the dead.","Fruit of the mystery: Faith"],scripture:["[Mt 28,5-6]"]},2:{introduction:["Kungs J\u0113zus uzk\u0101pj debes\u012Bs","Otrais god\u012Bbas nosl\u0113pums","He Who ascended into heaven.","Fruit of the mystery: Hope"],scripture:["[Mk 16,19-20]"]},3:{introduction:["Sv\u0113tais Gars non\u0101k p\u0101r Jaunavu Mariju un apustu\u013Ciem","Tre\u0161ais god\u012Bbas nosl\u0113pums","He Who sent the Holy Spirit.","Fruit of the mystery: Wisdom"],scripture:["[Apd 2,1-4]"]},4:{introduction:["Vissv\u0113t\u0101 Jaunava Marija ar miesu un dv\u0113seli tiek uz\u0146emta debes\u012Bs","Ceturtais god\u012Bbas nosl\u0113pums","He Who assumed thee into heaven.","Fruit of the mystery: Devotion to Mary"],scripture:[""]},5:{introduction:["Marija tiek kron\u0113ta par debesu un zemes Karalieni","Piektais god\u012Bbas nosl\u0113pums","He Who crowned thee Queen of Heaven.","Fruit of the mystery: Grace of a happy death"],scripture:["[Atkl 12,1]"]},introduction:["God\u012Bbas nosl\u0113pumi"]}},bg={generate:ag,meta:lg,params:cg,languages:{en:hg,es:pg,fr:mg,la:yg,lv:Cg}},Eg=e=>[[["prayer"],"",["prayer"]],[["dialogue"],"",["dialogue"]],[["concluding-prayer"],"",["concluding-prayer"]]],Sg="Salve Regina",wg={name:Sg},_g={},Tg="Hail, holy Queen",xg=["Prayer","Hail, holy Queen, Mother of mercy, our life, our sweetness and our hope. To thee do we cry, poor banished children of Eve. To thee do we send up our sighs, mourning and weeping in this valley of tears. Turn, then, most gracious advocate, thine eyes of mercy toward us, and after this, our exile, show unto us the blessed fruit of thy womb, Jesus. O clement, O loving, O sweet Virgin Mary."],Ig=["Dialogue","V. Pray for us, O holy Mother of God.","R. That we may be made worthy of the promises of Christ."],Bg={_name:Tg,prayer:xg,dialogue:Ig,"concluding-prayer":["Prayer","Let us pray. Almighty and everlasting God, Who by the working of the Holy Spirit didst prepare both body and soul of the glorious Virgin Mother, Mary, that she might deserve to be made a worthy dwelling for Thy Son, grant that we who rejoice in her memory, may, by her loving intercession, be delivered from present evils and from lasting death, through the same Christ our Lord. Amen."]},kg="Salve Regina",Rg=["Oraci\xF3n","Dios te salve, Reina y Madre de misericordia, vida, dulzura y esperanza nuestra; Dios te salve. A Ti llamamos los desterrados hijos de Eva; a Ti suspiramos gimiendo y llorando, en este valle de l\xE1grimas. Ea, pues, Se\xF1ora, abogada nuestra, vuelve a nosotros esos tus ojos misericordiosos; y despu\xE9s de este destierro, mu\xE9stranos a Jes\xFAs, fruto bendito de tu vientre. \xA1Oh clement\xEDsima, oh piadosa, oh dulce siempre Virgen Mar\xEDa!"],Dg=["Di\xE1logo","V. Ruega por nosotros, Santa Madre de Dios.","R. Para que seamos dignos de alcanzar las promesas de Nuestro Se\xF1or Jesucristo."],Lg={_name:kg,prayer:Rg,dialogue:Dg,"concluding-prayer":["Prayer","Let us pray. Almighty and everlasting God, Who by the working of the Holy Spirit didst prepare both body and soul of the glorious Virgin Mother, Mary, that she might deserve to be made a worthy dwelling for Thy Son, grant that we who rejoice in her memory, may, by her loving intercession, be delivered from present evils and from lasting death, through the same Christ our Lord. Amen."]},Ng="Salut, \xF4 Reine",Mg=["Pri\xE8re","Salut, \xF4 Reine, m\xE8re de mis\xE9ricorde: notre vie, notre douceur et notre esp\xE9rance, salut! Enfants d'\xC8ve, exil\xE9s, nous crions vers toi; vers toi, nous soupirons, g\xE9missant et pleurant dans cette vall\xE9e de larmes. \xD4 toi, notre avocate, tourne vers nous ton regard mis\xE9ricordieux. Et apr\xE8s cet exil, montre-nous J\xE9sus, le fruit b\xE9ni de tes entrailles, \xF4 cl\xE9mente, \xF4 mis\xE9ricordieuse, \xF4 douce Vierge Marie!"],Og=["Dialogue","V. Priez pour nous, sainte M\xE8re de Dieu.","R. Afin que nous soyons rendus dignes des promesses de Notre-Seigneur J\xE9sus-Christ."],Ug={_name:Ng,prayer:Mg,dialogue:Og,"concluding-prayer":["Prayer","Let us pray. Almighty and everlasting God, Who by the working of the Holy Spirit didst prepare both body and soul of the glorious Virgin Mother, Mary, that she might deserve to be made a worthy dwelling for Thy Son, grant that we who rejoice in her memory, may, by her loving intercession, be delivered from present evils and from lasting death, through the same Christ our Lord. Amen."]},Pg="Salve, Regina",Fg=["Oratio","Salve, Regina, mater misericordiae;","vita, dulcedo et spes nostra, salve.","Ad te clamamus exsules filii Hevae.","Ad te suspiramus gementes et flentes","in hac lacrimarum valle.","Eia ergo, advocata nostra,","illos tuos misericordes oculos ad nos converte.","Et Iesum, benedictum fructum ventris tui,","nobis post hoc exsilium ostende.","O clemens, o pia, o dulcis Virgo Maria."],Vg=["Dialogus","V. Ora pro nobis, sancta Dei Genitrix.","R. Ut digni efficamur promissionibus Christi."],Hg={_name:Pg,prayer:Fg,dialogue:Vg,"concluding-prayer":["Oratio","Oremus. Omnipotens sempiterne Deus, qui gloriosae Virginis Matris Mariae corpus et animam, ut dignum Filii tui habitaculum effici mereretur, Spiritu Sancto cooperante, praeparasti, da, ut cuius commemoratione laetamur; eius pia intercessione, ab instantibus malis et a morte perpetua liberemur. Per eundem Christum Dominum nostrum. Amen."]},qg="Esi sveicin\u0101ta, Karaliene",Kg=["L\u016Bg\u0161ana","Esi sveicin\u0101ta, Karaliene, \u017E\u0113lsird\u012Bbas M\u0101te, Kas mums Pest\u012Bt\u0101ju devi, esi sveicin\u0101ta. M\u0113s, Ievas b\u0113rni, sve\u0161um\u0101 saucam uz Tevi. M\u0113s Tevi l\u016Bdzam, s\u0113rojot un raudot \u0161ai asaru ielej\u0101. T\u0101d\u0113\u013C, m\u016Bsu aizst\u0101ve, uzl\u016Bko m\u016Bs sav\u0101 \u017E\u0113lsird\u012Bb\u0101. Un p\u0113c \u0161\u012Bs dz\u012Bves ved m\u016Bs pie J\u0113zus, pie Tava dievi\u0161\u0137\u0101 D\u0113la. Tu \u017E\u0113l\u012Bg\u0101 un laipn\u0101, Vissv\u0113t\u0101k\u0101 Jaunava Marija."],Gg=["Dialogs","V. L\u016Bdz par mums, sv\u0113t\u0101 Dieva Dzemd\u0113t\u0101ja!","R. Lai m\u0113s Kristus sol\u012Bjumu cien\u012Bgi topam!"],Qg={_name:qg,prayer:Kg,dialogue:Gg,"concluding-prayer":["Prayer","Let us pray. Almighty and everlasting God, Who by the working of the Holy Spirit didst prepare both body and soul of the glorious Virgin Mother, Mary, that she might deserve to be made a worthy dwelling for Thy Son, grant that we who rejoice in her memory, may, by her loving intercession, be delivered from present evils and from lasting death, through the same Christ our Lord. Amen."]},jg={generate:Eg,meta:wg,params:_g,languages:{en:Bg,es:Lg,fr:Ug,la:Hg,lv:Qg}},$g=e=>[[["formula"],"",["formula"],"Make the Sign of the Cross"]],zg="Sign of the Cross",Jg={name:zg},Wg={},Yg="The Sign of the Cross",Xg=["The Sign of the Cross","In the name of the Father, and of the Son, and of the Holy Spirit. Amen."],Zg={_name:Yg,formula:Xg},em="La Se\xF1al de la Cruz",tm=["La Se\xF1al de la Cruz","En el nombre del Padre, y del Hijo, y del Esp\xEDritu Santo. Am\xE9n."],rm={_name:em,formula:tm},nm="Signe de croix",im=["Signe de croix","Au nom du P\xE8re et du Fils et du Saint-Esprit. Amen."],sm={_name:nm,formula:im},am="Signum Crucis",om=["Signum Crucis","In nomine Patris et Filii et Spiritus Sancti. Amen."],lm={_name:am,formula:om},um="Krusta z\u012Bme",cm=["Krusta z\u012Bme","Dieva T\u0113va un D\u0113la, un Sv\u0113t\u0101 Gara v\u0101rd\u0101. Amen."],fm={_name:um,formula:cm},hm={generate:$g,meta:Jg,params:Wg,languages:{en:Zg,es:rm,fr:sm,la:lm,lv:fm}},dm=e=>{let t=[[["initial","1"],"",["preparatory-prayer"]]];for(let r=0;r<14;r++)t=t.concat([[["stations",[r,14],"dialogue"],"",["station-dialogue"]],[["stations",[r,14],"station"],"",["stations",(r+1).toString()]],[["stations",[r,14],"lords-prayer"],"lords-prayer",["formula"]],[["stations",[r,14],"hail-mary"],"hail-mary",["formula"]],[["stations",[r,14],"glory-be"],"glory-be",["formula"]],[["stations",[r,14],"prayer"],"",["station-prayer"]]]);return t},pm="Stations of the Cross",gm={name:pm},mm={},Am="An Exercise in the Way of the Cross by St. Alphonsus Maria Liguori",ym={1:["First Station: Jesus Is Condemned to Death","Consider how Jesus, after having been scourged and crowned with thorns, was unjustly condemned by Pilate to die on the Cross.","My adorable Jesus, it was not Pilate; no, it was my sins that condemned Thee to die. I beseech Thee, by the merits of this sorrowful journey to assist my soul in its journey toward eternity. I love Thee, my beloved Jesus; I love Thee more than myself; I repent with my whole heart of having offended Thee. Never permit me to separate myself from Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],2:["Second Station: Jesus Is Made to Carry His Cross","Consider how Jesus, in making this journey with the Cross on His shoulders, thought of us, and offered for us to His Father the death He was about to undergo.","My most beloved Jesus, I embrace all the tribulations Thou hast destined for me until death. I beseech Thee, by the merits of the pain Thou did suffer in carrying Thy Cross, to give me the necessary help to carry mine with perfect patience and resignation. I love Thee, Jesus my love; I love Thee more than myself; I repent of having offended Thee. Never permit me to separate myself from Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],3:["Third Station: Jesus Falls the First Time","Consider this first fall of Jesus under His Cross. His flesh was torn by the scourges, His head crowned with thorns, and He had lost a great quantity of blood. He was so weakened that He could scarcely walk, and yet He had to carry this great load upon His shoulders. The soldiers struck Him rudely, and thus He fell several times in His journey.","My beloved Jesus, it is not the weight of the Cross, but my sins which hast made Thee suffer so much pain. By the merits of this first fall, deliver me from the misfortune of falling into mortal sin. I love Thee, Jesus, with my whole heart; I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],4:["Fourth Station: Jesus Meets His Afflicted Mother","Consider the meeting of the Son and the Mother, which took place on this journey. Jesus and Mary looked at each other, and their looks became as so many arrows to wound those hearts which loved each other so tenderly.","My most loving Jesus, by the sorrow that Thou didst experience in this meeting, grant me the grace of a truly devoted love for Thy most holy Mother. And thou, my Queen, who was overwhelmed with sorrow, obtain for me, by thy intercession, a continual and tender remembrance of the Passion of thy Son. I love Thee, Jesus my love; I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],5:["Fifth Station: Simon of Cyrene Helps Jesus Carry His Cross","Consider how the Jews, seeing that at each step, Jesus, from weakness, was on the point of expiring, and fearing that He would die on the way, when they wished Him to die the shameful death of the Cross, constrained Simon the Cyrenian to carry the Cross behind our Lord.","My most beloved Jesus, I will not refuse the Cross as the Cyrenian did; I accept it - I embrace it. I accept in particular the death Thou hast destined for me, with all the pains which may accompany it; I unite it to Thy death - I offer it to Thee. Thou hast died for love of me. I will die for love of Thee, and to please Thee. Help me by Thy grace. I love Thee Jesus my love; I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],6:["Sixth Station: Veronica Wipes the Face of Jesus","Consider how the holy woman named Veronica, seeing Jesus so afflicted, and His face bathed in sweat and blood, presented Him with a towel, with which He wiped His adorable face, leaving on it the impression of His holy countenance.","My most beloved Jesus, Thy face was beautiful before, but in this journey it hast lost all its beauty, and wounds and blood have disfigured it. Alas! my soul also was once beautiful, when it received Thy grace in Baptism; but I have disfigured it since by my sins. Thou alone, my Redeemer, can restore it to its former beauty. Do this by Thy Passion. I love Thee Jesus my love; I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],7:["Seventh Station: Jesus Falls the Second Time","Consider the second fall of Jesus under the Cross - a fall which renews the pain of all the wounds of the head and members of our afflicted Lord.","My most gentle Jesus, how many times Thou hast pardoned me, and how many times have I fallen again, and begun again to offend Thee! Oh! By the merits of this new fall, give me the necessary helps to persevere in Thy grace until death. Grant that in all temptations which assail me, I may always commend myself to Thee. I love Thee, Jesus my Love, with my whole heart; I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],8:["Eighth Station: Jesus Speaks to the Women of Jerusalem",'Consider how those women wept with compassion at seeing Jesus in such a pitiable state, streaming with Blood, as He walked along. But Jesus said to them: "Weep not for Me, but for your children."',"My Jesus, laden with sorrows, I weep for the offenses I have committed against Thee, because of the pains they have deserved, and still more because of the displeasure they have caused Thee, Who hast loved me so much. It is Thy love more than the fear of hell, which causes me to weep for my sins. My Jesus, I love Thee more than myself. I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],9:["Ninth Station: Jesus Falls the Third Time","Consider the third fall of Jesus Christ. His weakness was extreme, and the cruelty of His executioners excessive, who tried to hasten His steps when he had scarcely strength to move.","Ah, my outraged Jesus, by the merits of the weakness Thou didst suffer in going to Calvary, give me strength sufficient to conquer all human respect, and all my wicked passions, which have led me to despise Thy friendship. I love Thee, Jesus my love, with my whole heart. I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],10:["Tenth Station: Jesus Is Stripped of His Garments","Consider the violence with which the executioners stripped Jesus. His inner garments adhered to His torn flesh, and they dragged them off so roughly that the skin came with them. Compassionate your Savior thus cruelly treated, and say to Him:","My innocent Jesus, by the merits of the torments Thou hast felt, help me to strip myself of all affection to things of earth, in order that I may place all my love in Thee, Who art so worthy of my love. I love Thee, O Jesus, with my whole heart. I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],11:["Eleventh Station: Jesus Is Nailed to the Cross","Consider how Jesus, after being thrown on the Cross, extended His hands, and offered to His Eternal Father the sacrifice of His life for our salvation. These barbarians fastened him with nails, and then, raising the Cross, leave Him to die with anguish on this infamous gibbet.","My Jesus!, loaded with contempt, nail my heart to Thy feet, that it may ever remain there, to love Thee, and never quit Thee again. I love Thee more than myself. I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],12:["Twelfth Station: Jesus Dies on the Cross","Consider how thy Jesus, after three hours of agony on the Cross, consumed at length with anguish, abandons Himself to the weight of His Body, bows His Head, and dies.","O my dying Jesus, I kiss devoutly the Cross on which Thou did die for love of me. I have merited by my sins to die a miserable death, but Thy death is my hope, Ah, by the merits of Thy death, give me grace to die embracing Thy feet, and burning with love for Thee, I yield my soul into Thy hands. I love Thee with my whole heart; I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],13:["Thirteenth Station: Jesus is Taken Down from the Cross","Consider how, after the death of our Lord, two of His disciples, Joseph and Nicodemus, took Him down from the Cross, and placed Him in the arms of His afflicted Mother, who received Him with unutterable tenderness, and pressed Him to her bosom.","O Mother of Sorrows, for the love of this Son, accept me for thy servant, and pray to Him for me. And Thou, my Redeemer, since Thou hast died for me, permit me to love Thee; for I wish but Thee and nothing more. I love Thee, my Jesus, and I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."],14:["Fourteenth Station: Jesus Is Placed in the Sepulcher","Consider how the disciples carried the body of Jesus to bury it, accompanied by His holy Mother who arranged it in the sepulcher with her own hands. They then closed the tomb, and all withdrew.","Ah, my buried Jesus, I kiss the stone that encloses Thee. But Thou didst rise again the third day. I beseech Thee by Thy resurrection, make me rise glorious with Thee at the last day, to be always united with Thee in Heaven, to praise Thee and love Thee forever. I love Thee, and I repent of having offended Thee. Never permit me to offend Thee again. Grant that I may love Thee always, and then do with me what Thou wilt."]},vm={_name:Am,"preparatory-prayer":["Prayer","My Lord Jesus Christ, Thou hast made this journey to die for me with love unutterable, and I have so many times unworthily abandoned Thee; but now I love Thee with my whole heart, and because I love Thee I repent sincerely for having ever offended Thee. Pardon me, my God, and permit me to accompany Thee on this journey. Thou goest to die for love of me; I wish also, my beloved Redeemer, to die for love of Thee. My Jesus, I will live and die always united to Thee."],"station-dialogue":["Dialogue","V. We adore Thee, O Christ, and we praise Thee.","R. Because by Thy holy Cross Thou hast redeemed the world."],"station-prayer":["Prayer","Dear Jesus, Thou dost go to die","For very love of me;","Ah, let me bear Thee company,","I wish to die with Thee."],stations:ym},Cm="Exercitium Viae Crucis de Sancto Alphonso Maria de Ligorio",bm={1:["Statio I: Iesus condemnatur ad mortem","Considera quomodo Iesus Christus, iam flagellatus et spinis coronatus, iniuste tandem a Pilato ad mortem crucis condemnetur.","O adorande Iesu, non Pilatus, sed iniqua mea vita te ad mortem condemnavit. Per meritum laboriosissimi huius itineris, quod ad Calvariae montem instituis, precor te, ut me semper in via, qua anima mea in aeternitatem tendit, benigne comiteris. Amo te, o Iesu, mi Amor, magis quam meipsum, et ex intimo corde paenitet me quod tibi displicui. Ne sinas me iterum a te separari. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit. Quod tibi placitum est, hoc idem mihi est acceptum."],2:["Statio II: Iesus oneratur ligno crucis","Considera quomodo Iesus Christus, portans humeris crucem, fuerit inter eundum, memor tui, offerendo pro te aeterno Patri mortem, quam erat obiturus.","Amabilissime Iesu, amplector omnes res adversas, quas mihi usque ad obitum tolerandas praefixisti, et, per durum illum, quem in portanda tua cruce pertulisti, laborem, precor te, ut vires mihi subministres, quibus ego quoque crucem meam, aequo ac patienti animo, portare valeam. Amo te, o Iesu, mi Amor, paenitet me quod tibi displicui. Ne sinas me iterum separari a te. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],3:["Statio III: Iesus procumbit primum sub onere crucis","Considera primum hunc Iesu Christi sub cruce lapsum. Habebat carnem ex saeva flagellatione multifarie sauciam, caput redimitum spinarum corona: profuderat insuper cruorem in tanta copia, ut vix pedem prae virium defectione, movere posset. Et quoniam gravi crucis onere premebatur, et immisericorditer a militibus propellebatur, accidit ut pluries inter eundum humi procumberet.","O mi Iesu, non est onus crucis, sed peccatorum meorum pondus, quod tantis te afficit doloribus. Rogo te, per primum hunc tuum lapsum, ut ab omni in peccatum me lapsu tuearis. Amo te, o Iesu, ex toto corde meo; paenitet me quod tibi displicui. Ne sinas me iterum in peccatum prolabi. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],4:["Statio IV: Iesus fit perdolenti Matri obvius","Considera qualis fuerit, in hac via, Filii et Matris occursus. Iesus et Maria se mutuo aspexerunt, mutuique eorum aspectus, fuerunt totidem sagittae, quibus amantia eorum pectora transverberabantur.","Amantissime Iesu, per acerbum dolorem, quem in hoc occursu expertus es, redde me, precor, sanctissimae Matri tuae vere devotum. Tu vero, perdolens mea Regina, intercede pro me, et obtine mihi talem cruciatum Filii tui memoriam, ut mens mea in pia illorum contemplatione perpetuo detineatur. Amo te, o Iesu, mi Amor; paenitet me quod tibi displicui. Ne sinas me iterum in te peccare. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],5:["Statio V: Iesus in baiulanda cruce a Cyrenaeo adiuvatur","Considera quomodo Iudaei, videntes Iesum ad quemlibet passum animam propemodum prae lassitudine efflantem, et timentes ex altera parte ne, quem crucis supplicio affectum volebant, in via moreretur, compellant Simonem Cyrenaeum ad baiulandam crucem post Dominum.","O dulcissime Iesu, nolo sicut Cyrenaeus, repudiare crucem, libenter eam amplector in meque recipio, amplector speciatim quam mihi praefiniisti mortem cum omnibus, quos haec secum adductura est, doloribus. Coniungo eam cum morte tua, sicque coniunctam eam in sacrificium tibi offero. Tu amore mei mortuus es; volo ego quoque mori amore tui, ea mente ut rem tibi gratam faciam. Tu vero adiuva me tua gratia. Amo te, o Iesu, mi Amor, paenitet me quod tibi displicui. Ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],6:["Statio VI: Iesus Veronicae sudario abstergitur","Considera quomodo sancta illa femina Veronica, videns Iesum doloribus confectum eiusque vultum sudore ac sanguine madidum, porrigat ei linteolum in quo ipse, abstersa facie, sacram sui imaginem impressam relinquit.","O mi Iesu, formosa erat antea facies tua; verum hac in via non amplius formosa apparet, sed est vulneribus et cruore omnino deformis. Hei mihi! quam formosa quoque erat anima mea, cum gratiam tuam per baptismum recepisset: peccando eam postea deformem reddidi. Tu solus, mi Redemptor, pristinam venustatem ei restituere vales; quod ut facias, per tuae Passionis meritum te precor. Amo te Iesu, mi Amor; paenitet me quod tibi displicui; ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],7:["Statio VII: Iesus procumbit iterum sub onere crucis","Considera alterum Iesu Christi sub cruce lapsum, quo lapsu perdolenti Domino omnes venerandi capitis et totius corporis plagae recrudescunt, omnesque cruciatus renovantur.","Mansuetissime Iesu, quam frequenter concessisti mihi veniam! Ego vero in eadem relapsus sum peccata, measque in te offensas renovavi. Per meritum novi huius tui lapsus adiuva me, ut in gratia tua usque ad obitum perseverem. Fac ut in omnibus, quae me invasurae sunt, tentationibus me tibi semper commendem. Amo te ex toto corde meo, o Iesu, mi Amor; paenitet me quod tibi displicui: ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],8:["Statio VIII: Iesus plorantes mulieres alloquitur",'Considera quomodo mulieres, videntes Iesum lassitudine exanimatum et cruore inter eundum diffluentem, commiseratione permoveantur, lacrimasque profundant. Ad flentes autem conversus: "Nolite, inquit, flere super me, sed super vos ipsas flete et super filios vestros."',"O perdolens Iesu, defleo mea in te peccata ob poenas quidem quibus me dignum reddiderunt, sed maxime ob molestiam quam tibi intulerunt, tibi qui me tantopere amasti. Ad fletum minus infernus quam amor tui me excitat. O mi Iesu, amo te magis quam meipsum; paenitet me quod tibi displicui; ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],9:["Statio IX: Iesus procumbit tertium sub onere crucis","Considera tertium Iesu Christi sub cruce lapsum. Procumbit quia nimia erat eius debilitas, et nimia saevitia carnificum, qui volebant ut gressum acceleraret, dum vix unum gradum facere posset.","O inclementer habite Iesu, per meritum illius virium defectionis, qua in via ad Calvarium laborare voluisti, tanto, precor, me vigore conforta, ut nullum amplius ad humana iudicia respectum habeam, ac vitiosam meam naturam edomem: quod utrumque in causa fuit cur tuam olim amicitiam contempserim. Amo te, o Iesu, mi Amor, ex toto corde meo; paenitet me quod tibi displicui: ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],10:["Statio X: Iesus vestibus spoliatur","Considera quam violenter Iesus vestimentis suis spolietur. Cum enim vestis interior arcte carni flagellis dilaniatae adhaereret, carnifices, avellendo vestem, cutem ei quoque avellunt. Subeat te commiseratio Domini tui, eumque sic alloquere:","Innocentissime Iesu, per meritum doloris quem inter hanc spoliationem passus es, adiuva me, precor, ut omnem in res creatas affectum exuam, et tota voluntatis meae inclinatione ad te solum convertar, qui meo nimis dignus es amore. Amo te ex toto corde meo; paenitet me quod tibi displicui; ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],11:["Statio XI: Iesus clavis affigitur cruci","Considera quomodo Iesus in crucem coniciatur, et extensis brachiis, vitam suam in sacrificium pro nostra salute aeterno Patri offerat. Carnifices clavis eum affigunt, dein erigunt crucem, et infami patibulo suffixum saevae morti permittunt.","O contemptissime Iesu, affige pedibus tuis cor meum, ut amoris vinculo ligatum semper tecum remaneat, necque amplius a te avellatur. Amo te magis quam meipsum; paenitet me quod tibi displicui: ne permittas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],12:["Statio XII: Iesus moritur in cruce","Considera tuum cruci suffixum Iesum, qui post trium horarum cum morte luctam, doloribus tandem consumptus addicit corpus morti, et inclinato capite emittit spiritum.","O mortue Iesu, exosculor, pietatis sensu intime commotus, hanc crucem in qua tu, mei causa, vitae tuae finem implevisti. Ob commissa peccata infelicem mihi mortem promerui; sed mors tua est spes mea. Per mortis tuae merita, concede mihi precor, ut in amplexu pedum tuorum extremum spiritum, tui amore flagrans, aliquando reddam. In manus tuas commendo spiritum meum. Amo te ex toto corde meo; paenitet me quod tibi displicui: ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],13:["Statio XIII: Iesus deponitur de cruce","Considera quomodo duo ex Iesu discipulis, Iosephus nempe et Nicodemus, eum exanimatum de cruce tollant et inter brachia perdolentis Matris reponant, quae mortuum Filium peramanter recipit et arcte complectitur.","O moerens Mater, per amorem quo Filium tuum amas, accipe me in servum tuum et precare eum pro me. Tu vero, o mi Redemptor, quoniam pro me mortuus es, fac benigne ut amem te; te enim solum volo, nec extra te aliud quidpiam mihi opto. Amo te, o mi Iesu, paenitet me quod tibi displicui: ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."],14:["Statio XIV: Iesus sepulcro conditur","Considera quomodo discipuli exanimem Redemptorem ad locum sepulturae deferant. Moerens Mater eos comitatur, et propriis manibus corpus Filii sepulturae accommodat. Sepulchrum dein occluditur, et omnes a loco recedunt.","O sepulte Iesu, exosculor hunc, qui te recondit, lapidem; sed post triduum ex sepulcro resurges. Per tuam resurrectionem fac me, precor, extremo die gloriosum tecum resurgere, et venire in caelum, ubi tecum semper coniunctus, te laudabo et in aeternum amabo. Amo te, et doleo quod tibi displicui: ne sinas me iterum tibi displicere. Da mihi perpetuum amorem tui, et dein fac de me quidquid tibi placuerit."]},Em={_name:Cm,"preparatory-prayer":["Oratio","Domine Iesu Christe, tu tam amanter hanc viam ingressus es, ut mortem pro me obires; ego vero multoties eo deveni, ut te contemnerem. Nunc autem ex tota anima mea amo te, et quia te amo, paenitet me ex intimo corde quod tibi displicui. Ignosce mihi, et patere ut in hac via me tibi comitem adiungam. Tu, amore mei ductus, pergis ad locum ubi pro me moriturus es, et ego vicissim, tui amore ductus, desidero te comitari, ut una tecum, amantissime Redemptor, moriar. O mi Iesu, volo coniunctim tecum et vivere et mori."],"station-dialogue":["Dialogus","V. Adoramus te, Christe, et benedicimus tibi.","R. Quia per sanctam crucem tuam redemisti mundum."],"station-prayer":["Oratio","Tu, caritatis victima,","Petis, Redemptor, Golgotham;","Tuis inhaerens gressibus,","Tecum peropto commori."],stations:bm},Sm={generate:dm,meta:gm,params:mm,languages:{en:vm,la:Em}},Nu={"alma-redemptoris-mater":Sh,angelus:Mh,"apostles-creed":td,"ave-regina-caelorum":pd,"blessing-before-meals":kd,"blessing-after-meals":Kd,"chaplet-of-divine-mercy":Xd,confiteor:u0,"fatima-prayer":B0,"glory-be":J0,"hail-mary":gp,"lords-prayer":Mp,"prayer-to-your-guardian-angel":jp,"regina-caeli":sg,rosary:bg,"salve-regina":jg,"sign-of-the-cross":hm,"stations-of-the-cross":Sm},tl=JSON.parse(localStorage.getItem("state")),rl=localStorage.getItem("privateName"),is=zn("menu"),_t=zn(tl!==null?tl:{prayer:Object.keys(Nu)[0],lang:Lu[0],stage:0,step:0,conf:{}}),Mu=zn(!1),ui=zn(rl!==null?rl:""),ln=zn(!0),Ds=Du(Lu,()=>()=>{}),Jn=Du(Nu,()=>()=>{});function wm(e){let t,r,n,i,s,a,o,l,u,c,f,d,p,g,A;return n=new Ft({props:{id:"menu"}}),a=new Ft({props:{id:"import_contacts"}}),u=new Ft({props:{id:"groups"}}),d=new Ft({props:{id:"help"}}),{c(){t=oe("nav"),r=oe("div"),ct(n.$$.fragment),i=Pe(),s=oe("div"),ct(a.$$.fragment),o=Pe(),l=oe("div"),ct(u.$$.fragment),c=Pe(),f=oe("div"),ct(d.$$.fragment),re(r,"class","svelte-1uqidzq"),$t(r,"active",e[0]=="menu"),re(s,"class","svelte-1uqidzq"),$t(s,"active",e[0]=="prayer"),re(l,"class","svelte-1uqidzq"),$t(l,"active",e[0]=="groups"),re(f,"class","svelte-1uqidzq"),$t(f,"active",e[0]=="help"),re(t,"class","svelte-1uqidzq")},m(_,T){Se(_,t,T),W(t,r),at(n,r,null),W(t,i),W(t,s),at(a,s,null),W(t,o),W(t,l),at(u,l,null),W(t,c),W(t,f),at(d,f,null),p=!0,g||(A=[Rt(r,"click",e[2]),Rt(s,"click",e[3]),Rt(l,"click",e[4]),Rt(f,"click",e[5])],g=!0)},p(_,[T]){(!p||T&1)&&$t(r,"active",_[0]=="menu"),(!p||T&1)&&$t(s,"active",_[0]=="prayer"),(!p||T&1)&&$t(l,"active",_[0]=="groups"),(!p||T&1)&&$t(f,"active",_[0]=="help")},i(_){p||(me(n.$$.fragment,_),me(a.$$.fragment,_),me(u.$$.fragment,_),me(d.$$.fragment,_),p=!0)},o(_){be(n.$$.fragment,_),be(a.$$.fragment,_),be(u.$$.fragment,_),be(d.$$.fragment,_),p=!1},d(_){_&&Ce(t),ot(n),ot(a),ot(u),ot(d),g=!1,Sr(A)}}}function _m(e,t,r){let n;tt(e,is,u=>r(0,n=u));const i=u=>{is.set(u)};return[n,i,()=>{i("menu")},()=>{i("prayer")},()=>{i("groups")},()=>{i("help")}]}class Tm extends or{constructor(t){super(),ar(this,t,_m,wm,Nt,{})}}function Pn(e,{delay:t=0,duration:r=400,easing:n=Xa}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:n,css:s=>`opacity: ${s*i}`}}const ss=(e,t,r)=>{if(t in e)return[t,e[t]];for(const n of r)if(n in e)return[n,e[n]]};function nl(e){let t,r,n=e[1].toUpperCase()+"",i,s,a=e[2]._name+"",o,l,u,c;return{c(){t=oe("div"),r=oe("div"),i=je(n),s=je(": "),o=je(a),re(r,"class","ellipsis"),re(t,"class","svelte-134b3vf")},m(f,d){Se(f,t,d),W(t,r),W(r,i),W(r,s),W(r,o),c=!0},p(f,d){(!c||d&2)&&n!==(n=f[1].toUpperCase()+"")&&jt(i,n),(!c||d&4)&&a!==(a=f[2]._name+"")&&jt(o,a)},i(f){c||(Wr(()=>{u&&u.end(1),l=to(t,Pn,{delay:75,duration:75}),l.start()}),c=!0)},o(f){l&&l.invalidate(),u=ro(t,Pn,{duration:75}),c=!1},d(f){f&&Ce(t),f&&u&&u.end()}}}function il(e){let t=e[0].lang,r,n,i=nl(e);return{c(){i.c(),r=Rs()},m(s,a){i.m(s,a),Se(s,r,a),n=!0},p(s,a){a&1&&Nt(t,t=s[0].lang)?(Nr(),be(i,1,1,We),Mr(),i=nl(s),i.c(),me(i,1),i.m(r.parentNode,r)):i.p(s,a)},i(s){n||(me(i),n=!0)},o(s){be(i),n=!1},d(s){s&&Ce(r),i.d(s)}}}function xm(e){let t,r,n=e[0].prayer,i,s,a,o,l,u,c,f,d,p,g,A,_,T,k,y,w=il(e);return o=new Ft({props:{id:"restart_alt"}}),f=new Ft({props:{id:"arrow_back"}}),A=new Ft({props:{id:"arrow_forward"}}),{c(){t=oe("div"),r=oe("div"),w.c(),i=Pe(),s=oe("nav"),a=oe("button"),ct(o.$$.fragment),u=Pe(),c=oe("button"),ct(f.$$.fragment),p=Pe(),g=oe("button"),ct(A.$$.fragment),re(r,"class","svelte-134b3vf"),a.disabled=l=!e[3]||e[0].stage==0&&e[0].step==0,re(a,"class","svelte-134b3vf"),c.disabled=d=!e[3]||e[0].stage==0&&e[0].step==0,re(c,"class","svelte-134b3vf"),g.disabled=_=!e[3]||e[0].stage==1||e[0].stage==2&&e[4],re(g,"class","svelte-134b3vf"),re(s,"class","svelte-134b3vf"),re(t,"class","footer svelte-134b3vf")},m(S,x){Se(S,t,x),W(t,r),w.m(r,null),W(t,i),W(t,s),W(s,a),at(o,a,null),W(s,u),W(s,c),at(f,c,null),W(s,p),W(s,g),at(A,g,null),T=!0,k||(y=[Rt(a,"click",e[5]),Rt(c,"click",e[6]),Rt(g,"click",e[7])],k=!0)},p(S,[x]){x&1&&Nt(n,n=S[0].prayer)?(Nr(),be(w,1,1,We),Mr(),w=il(S),w.c(),me(w,1),w.m(r,null)):w.p(S,x),(!T||x&9&&l!==(l=!S[3]||S[0].stage==0&&S[0].step==0))&&(a.disabled=l),(!T||x&9&&d!==(d=!S[3]||S[0].stage==0&&S[0].step==0))&&(c.disabled=d),(!T||x&25&&_!==(_=!S[3]||S[0].stage==1||S[0].stage==2&&S[4]))&&(g.disabled=_)},i(S){T||(me(w),me(o.$$.fragment,S),me(f.$$.fragment,S),me(A.$$.fragment,S),T=!0)},o(S){be(w),be(o.$$.fragment,S),be(f.$$.fragment,S),be(A.$$.fragment,S),T=!1},d(S){S&&Ce(t),w.d(S),ot(o),ot(f),ot(A),k=!1,Sr(y)}}}function Im(e,t,r){let n,i,s,a,o;tt(e,_t,p=>r(0,n=p)),tt(e,Jn,p=>r(8,i=p)),tt(e,Ds,p=>r(9,s=p)),tt(e,ln,p=>r(3,a=p)),tt(e,Mu,p=>r(4,o=p));let l,u;const c=()=>{_t.update(p=>(p.stage=0,p.step=0,p))},f=()=>{_t.update(p=>{const g=Object.keys(i[n.prayer].params).length;return p.step==0?p.stage==2&&g==0?(p.stage=0,p.step=0):p.stage==2?(p.stage-=1,p.step=g-1):p.stage-=1:p.step-=1,p})},d=()=>{_t.update(p=>{const g=Object.keys(i[n.prayer].params).length;return p.stage==0&&g==0?p.stage=2:p.stage==0?p.stage+=1:p.stage==1&&p.step==g-1?(p.step=0,p.stage+=1):p.step+=1,p})};return e.$$.update=()=>{e.$$.dirty&769&&r(1,[l,u]=ss(i[n.prayer].languages,n.lang,s),l,(r(2,u),r(8,i),r(0,n),r(9,s)))},[n,l,u,a,o,c,f,d,i,s]}class Bm extends or{constructor(t){super(),ar(this,t,Im,xm,Nt,{})}}function sl(e,t,r){const n=e.slice();return n[8]=t[r],n}function al(e,t,r){const n=e.slice();return n[11]=t[r],n}function ol(e){let t,r=e[11].toUpperCase()+"",n,i,s,a;function o(){return e[6](e[11])}return{c(){t=oe("button"),n=je(r),t.disabled=i=!e[1]||e[2].lang==e[11],re(t,"class","svelte-1col42z")},m(l,u){Se(l,t,u),W(t,n),s||(a=Rt(t,"click",o),s=!0)},p(l,u){e=l,u&1&&r!==(r=e[11].toUpperCase()+"")&&jt(n,r),u&7&&i!==(i=!e[1]||e[2].lang==e[11])&&(t.disabled=i)},d(l){l&&Ce(t),s=!1,a()}}}function ll(e){let t,r=e[3][e[8]].meta.name+"",n,i,s,a;function o(){return e[7](e[8])}return{c(){t=oe("button"),n=je(r),t.disabled=i=!e[1]||e[2].prayer==e[8]},m(l,u){Se(l,t,u),W(t,n),s||(a=Rt(t,"click",o),s=!0)},p(l,u){e=l,u&8&&r!==(r=e[3][e[8]].meta.name+"")&&jt(n,r),u&14&&i!==(i=!e[1]||e[2].prayer==e[8])&&(t.disabled=i)},d(l){l&&Ce(t),s=!1,a()}}}function km(e){let t,r,n,i,s,a,o=e[0],l=[];for(let f=0;f<o.length;f+=1)l[f]=ol(al(e,o,f));let u=Object.keys(e[3]),c=[];for(let f=0;f<u.length;f+=1)c[f]=ll(sl(e,u,f));return{c(){t=oe("div"),r=oe("nav");for(let f=0;f<l.length;f+=1)l[f].c();n=Pe(),i=oe("h1"),i.textContent="Prayers",s=Pe(),a=oe("nav");for(let f=0;f<c.length;f+=1)c[f].c();re(r,"class","languages svelte-1col42z"),re(i,"class","svelte-1col42z"),re(a,"class","prayers svelte-1col42z"),re(t,"class","menu svelte-1col42z")},m(f,d){Se(f,t,d),W(t,r);for(let p=0;p<l.length;p+=1)l[p].m(r,null);W(t,n),W(t,i),W(t,s),W(t,a);for(let p=0;p<c.length;p+=1)c[p].m(a,null)},p(f,[d]){if(d&23){o=f[0];let p;for(p=0;p<o.length;p+=1){const g=al(f,o,p);l[p]?l[p].p(g,d):(l[p]=ol(g),l[p].c(),l[p].m(r,null))}for(;p<l.length;p+=1)l[p].d(1);l.length=o.length}if(d&46){u=Object.keys(f[3]);let p;for(p=0;p<u.length;p+=1){const g=sl(f,u,p);c[p]?c[p].p(g,d):(c[p]=ll(g),c[p].c(),c[p].m(a,null))}for(;p<c.length;p+=1)c[p].d(1);c.length=u.length}},i:We,o:We,d(f){f&&Ce(t),dn(l,f),dn(c,f)}}}function Rm(e,t,r){let n,i,s,a;tt(e,Ds,f=>r(0,n=f)),tt(e,ln,f=>r(1,i=f)),tt(e,_t,f=>r(2,s=f)),tt(e,Jn,f=>r(3,a=f));const o=f=>{_t.update(d=>(d.lang=f,d))},l=f=>{_t.update(d=>(d.prayer=f,d.stage=0,d.step=0,d.conf={},d))};return[n,i,s,a,o,l,f=>o(f),f=>l(f)]}class Dm extends or{constructor(t){super(),ar(this,t,Rm,km,Nt,{})}}function Lm(e){let t,r,n=ss(e[0][e[1].prayer].languages,e[1].lang,e[2])[1]._name+"",i;return{c(){t=oe("div"),r=oe("h1"),i=je(n),re(r,"class","svelte-z62x8s"),re(t,"class","view svelte-z62x8s")},m(s,a){Se(s,t,a),W(t,r),W(r,i)},p(s,[a]){a&7&&n!==(n=ss(s[0][s[1].prayer].languages,s[1].lang,s[2])[1]._name+"")&&jt(i,n)},i:We,o:We,d(s){s&&Ce(t)}}}function Nm(e,t,r){let n,i,s;return tt(e,Jn,a=>r(0,n=a)),tt(e,_t,a=>r(1,i=a)),tt(e,Ds,a=>r(2,s=a)),[n,i,s]}class Mm extends or{constructor(t){super(),ar(this,t,Nm,Lm,Nt,{})}}function ul(e,t,r){const n=e.slice();return n[7]=t[r],n}function cl(e){let t,r=e[7][1]+"",n,i,s,a;function o(){return e[4](e[7])}return{c(){t=oe("button"),n=je(r),t.disabled=i=!e[0]},m(l,u){Se(l,t,u),W(t,n),s||(a=Rt(t,"click",o),s=!0)},p(l,u){e=l,u&1&&i!==(i=!e[0])&&(t.disabled=i)},d(l){l&&Ce(t),s=!1,a()}}}function Om(e){let t,r,n,i,s=Object.entries(e[1][e[2]].options),a=[];for(let o=0;o<s.length;o+=1)a[o]=cl(ul(e,s,o));return{c(){t=oe("div"),r=oe("h1"),r.textContent=`${e[1][e[2]].description[0]}`,n=Pe(),i=oe("div");for(let o=0;o<a.length;o+=1)a[o].c();re(r,"class","svelte-rleh9b"),re(i,"class","options svelte-rleh9b"),re(t,"class","view svelte-rleh9b")},m(o,l){Se(o,t,l),W(t,r),W(t,n),W(t,i);for(let u=0;u<a.length;u+=1)a[u].m(i,null)},p(o,[l]){if(l&15){s=Object.entries(o[1][o[2]].options);let u;for(u=0;u<s.length;u+=1){const c=ul(o,s,u);a[u]?a[u].p(c,l):(a[u]=cl(c),a[u].c(),a[u].m(i,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=s.length}},i:We,o:We,d(o){o&&Ce(t),dn(a,o)}}}function Um(e,t,r){let n,i,s;tt(e,_t,c=>r(5,n=c)),tt(e,Jn,c=>r(6,i=c)),tt(e,ln,c=>r(0,s=c));const a=i[n.prayer].params,o=Object.keys(a)[n.step],l=c=>{_t.update(f=>(f.conf[o]=c,f.step==Object.keys(a).length-1?(f.step=0,f.stage+=1):f.step+=1,f))};return[s,a,o,l,c=>l(c[0])]}class Pm extends or{constructor(t){super(),ar(this,t,Um,Om,Nt,{})}}function fl(e,t,r){const n=e.slice();return n[7]=t[r],n[9]=r,n}function hl(e,t,r){const n=e.slice();return n[10]=t[r],n}function dl(e,t,r){const n=e.slice();return n[9]=t[r],n}function Fm(e){let t,r,n=e[2],i=[];for(let a=0;a<n.length;a+=1)i[a]=gl(hl(e,n,a));const s=a=>be(i[a],1,1,()=>{i[a]=null});return{c(){t=oe("div");for(let a=0;a<i.length;a+=1)i[a].c();re(t,"class","repetitions svelte-1ejj96m")},m(a,o){Se(a,t,o);for(let l=0;l<i.length;l+=1)i[l].m(t,null);r=!0},p(a,o){if(o&4){n=a[2];let l;for(l=0;l<n.length;l+=1){const u=hl(a,n,l);i[l]?(i[l].p(u,o),me(i[l],1)):(i[l]=gl(u),i[l].c(),me(i[l],1),i[l].m(t,null))}for(Nr(),l=n.length;l<i.length;l+=1)s(l);Mr()}},i(a){if(!r){for(let o=0;o<n.length;o+=1)me(i[o]);r=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)be(i[o]);r=!1},d(a){a&&Ce(t),dn(i,a)}}}function pl(e){let t,r,n;return r=new Ft({props:{id:"circle",small:!0}}),{c(){t=oe("div"),ct(r.$$.fragment),re(t,"class","svelte-1ejj96m"),$t(t,"muted",e[9]>e[10][0])},m(i,s){Se(i,t,s),at(r,t,null),n=!0},p(i,s){(!n||s&4)&&$t(t,"muted",i[9]>i[10][0])},i(i){n||(me(r.$$.fragment,i),n=!0)},o(i){be(r.$$.fragment,i),n=!1},d(i){i&&Ce(t),ot(r)}}}function gl(e){let t,r,n,i=[...Array(e[10][1]).keys()],s=[];for(let o=0;o<i.length;o+=1)s[o]=pl(dl(e,i,o));const a=o=>be(s[o],1,1,()=>{s[o]=null});return{c(){t=oe("div");for(let o=0;o<s.length;o+=1)s[o].c();r=Pe(),re(t,"class","svelte-1ejj96m")},m(o,l){Se(o,t,l);for(let u=0;u<s.length;u+=1)s[u].m(t,null);W(t,r),n=!0},p(o,l){if(l&4){i=[...Array(o[10][1]).keys()];let u;for(u=0;u<i.length;u+=1){const c=dl(o,i,u);s[u]?(s[u].p(c,l),me(s[u],1)):(s[u]=pl(c),s[u].c(),me(s[u],1),s[u].m(t,r))}for(Nr(),u=i.length;u<s.length;u+=1)a(u);Mr()}},i(o){if(!n){for(let l=0;l<i.length;l+=1)me(s[l]);n=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)be(s[l]);n=!1},d(o){o&&Ce(t),dn(s,o)}}}function ml(e){let t,r,n=e[0].instructions+"",i;return{c(){t=oe("p"),r=oe("em"),i=je(n),re(t,"class","svelte-1ejj96m")},m(s,a){Se(s,t,a),W(t,r),W(r,i)},p(s,a){a&1&&n!==(n=s[0].instructions+"")&&jt(i,n)},d(s){s&&Ce(t)}}}function Vm(e){let t,r=e[7]+"",n;return{c(){t=oe("p"),n=je(r),re(t,"class","svelte-1ejj96m")},m(i,s){Se(i,t,s),W(t,n)},p(i,s){s&2&&r!==(r=i[7]+"")&&jt(n,r)},d(i){i&&Ce(t)}}}function Al(e){let t,r=e[9]>0&&Vm(e);return{c(){r&&r.c(),t=Rs()},m(n,i){r&&r.m(n,i),Se(n,t,i)},p(n,i){n[9]>0&&r.p(n,i)},d(n){r&&r.d(n),n&&Ce(t)}}}function Hm(e){let t,r,n,i,s=e[1][0]+"",a,o,l,u=e[2].length>0&&Fm(e),c=e[0].instructions!==null&&ml(e),f=e[1],d=[];for(let p=0;p<f.length;p+=1)d[p]=Al(fl(e,f,p));return{c(){t=oe("div"),u&&u.c(),r=Pe(),c&&c.c(),n=Pe(),i=oe("h1"),a=je(s),o=Pe();for(let p=0;p<d.length;p+=1)d[p].c();re(i,"class","svelte-1ejj96m"),re(t,"class","view svelte-1ejj96m")},m(p,g){Se(p,t,g),u&&u.m(t,null),W(t,r),c&&c.m(t,null),W(t,n),W(t,i),W(i,a),W(t,o);for(let A=0;A<d.length;A+=1)d[A].m(t,null);l=!0},p(p,[g]){if(p[2].length>0&&u.p(p,g),p[0].instructions!==null?c?c.p(p,g):(c=ml(p),c.c(),c.m(t,n)):c&&(c.d(1),c=null),(!l||g&2)&&s!==(s=p[1][0]+"")&&jt(a,s),g&2){f=p[1];let A;for(A=0;A<f.length;A+=1){const _=fl(p,f,A);d[A]?d[A].p(_,g):(d[A]=Al(_),d[A].c(),d[A].m(t,null))}for(;A<d.length;A+=1)d[A].d(1);d.length=f.length}},i(p){l||(me(u),l=!0)},o(p){be(u),l=!1},d(p){p&&Ce(t),u&&u.d(),c&&c.d(),dn(d,p)}}}function qm(e,t,r){let n,i,s;tt(e,Ds,c=>r(3,n=c)),tt(e,_t,c=>r(4,i=c)),tt(e,Jn,c=>r(5,s=c));let{item:a}=t;const o=a.id.filter(c=>typeof c!="string"&&c[1]>1),l=()=>{let c=ss(s[a.prayer].languages,i.lang,n)[1];for(const f of a.key)c=c[f];return c};let u=l();return _t.subscribe(c=>{r(1,u=l())}),e.$$set=c=>{"item"in c&&r(0,a=c.item)},[a,u,o]}class Km extends or{constructor(t){super(),ar(this,t,qm,Hm,Nt,{item:0})}}function Gm(e){let t,r;return t=new Km({props:{item:e[0][e[1].step]}}),{c(){ct(t.$$.fragment)},m(n,i){at(t,n,i),r=!0},p(n,i){const s={};i&3&&(s.item=n[0][n[1].step]),t.$set(s)},i(n){r||(me(t.$$.fragment,n),r=!0)},o(n){be(t.$$.fragment,n),r=!1},d(n){ot(t,n)}}}function Qm(e){let t,r;return t=new Pm({}),{c(){ct(t.$$.fragment)},m(n,i){at(t,n,i),r=!0},p:We,i(n){r||(me(t.$$.fragment,n),r=!0)},o(n){be(t.$$.fragment,n),r=!1},d(n){ot(t,n)}}}function jm(e){let t,r;return t=new Mm({}),{c(){ct(t.$$.fragment)},m(n,i){at(t,n,i),r=!0},p:We,i(n){r||(me(t.$$.fragment,n),r=!0)},o(n){be(t.$$.fragment,n),r=!1},d(n){ot(t,n)}}}function yl(e){let t,r,n,i,s,a;const o=[jm,Qm,Gm],l=[];function u(c,f){return c[1].stage==0?0:c[1].stage==1?1:2}return r=u(e),n=l[r]=o[r](e),{c(){t=oe("div"),n.c(),re(t,"class","svelte-1jow9f")},m(c,f){Se(c,t,f),l[r].m(t,null),a=!0},p(c,f){let d=r;r=u(c),r===d?l[r].p(c,f):(Nr(),be(l[d],1,1,()=>{l[d]=null}),Mr(),n=l[r],n?n.p(c,f):(n=l[r]=o[r](c),n.c()),me(n,1),n.m(t,null))},i(c){a||(me(n),Wr(()=>{s&&s.end(1),i=to(t,Pn,{delay:75,duration:75}),i.start()}),a=!0)},o(c){be(n),i&&i.invalidate(),s=ro(t,Pn,{duration:75}),a=!1},d(c){c&&Ce(t),l[r].d(),c&&s&&s.end()}}}function vl(e){let t=e[1].step,r,n,i=yl(e);return{c(){i.c(),r=Rs()},m(s,a){i.m(s,a),Se(s,r,a),n=!0},p(s,a){a&2&&Nt(t,t=s[1].step)?(Nr(),be(i,1,1,We),Mr(),i=yl(s),i.c(),me(i,1),i.m(r.parentNode,r)):i.p(s,a)},i(s){n||(me(i),n=!0)},o(s){be(i),n=!1},d(s){s&&Ce(r),i.d(s)}}}function $m(e){let t,r=e[1].stage,n,i=vl(e);return{c(){t=oe("div"),i.c(),re(t,"class","prayer svelte-1jow9f")},m(s,a){Se(s,t,a),i.m(t,null),n=!0},p(s,[a]){a&2&&Nt(r,r=s[1].stage)?(Nr(),be(i,1,1,We),Mr(),i=vl(s),i.c(),me(i,1),i.m(t,null)):i.p(s,a)},i(s){n||(me(i),n=!0)},o(s){be(i),n=!1},d(s){s&&Ce(t),i.d(s)}}}function zm(e,t,r){let n,i;tt(e,_t,o=>r(1,n=o)),tt(e,Jn,o=>r(2,i=o));let s=[];const a=()=>{r(0,s=i[n.prayer].generate(n.conf).map(o=>({id:o[0],prayer:o[1].length>0?o[1]:n.prayer,key:o[2],instructions:o.length>3?o[3]:null})))};return a(),_t.subscribe(o=>{o.stage==2&&(o.step==0&&a(),Mu.set(o.step==s.length-1))}),[s,n]}class Jm extends or{constructor(t){super(),ar(this,t,zm,$m,Nt,{})}}const mr=()=>new Map,as=e=>{const t=mr();return e.forEach((r,n)=>{t.set(n,r)}),t},tr=(e,t,r)=>{let n=e.get(t);return n===void 0&&e.set(t,n=r()),n},Wm=(e,t)=>{const r=[];for(const[n,i]of e)r.push(t(i,n));return r},Ym=(e,t)=>{for(const[r,n]of e)if(t(n,r))return!0;return!1},yi=()=>new Set,ra=e=>e[e.length-1],Xm=(e,t)=>{for(let r=0;r<t.length;r++)e.push(t[r])},Ou=Array.from,eS=Array.isArray;class Ls{constructor(){this._observers=mr()}on(t,r){tr(this._observers,t,yi).add(r)}once(t,r){const n=(...i)=>{this.off(t,n),r(...i)};this.on(t,n)}off(t,r){const n=this._observers.get(t);n!==void 0&&(n.delete(r),n.size===0&&this._observers.delete(t))}emit(t,r){return Ou((this._observers.get(t)||mr()).values()).forEach(n=>n(...r))}destroy(){this._observers=mr()}}const vr=Math.floor,zi=Math.abs,Zm=Math.log10,no=(e,t)=>e<t?e:t,vn=(e,t)=>e>t?e:t,Uu=e=>e!==0?e<0:1/e<0,eA=String.fromCharCode,tA=e=>e.toLowerCase(),rA=/^\s*/g,nA=e=>e.replace(rA,""),iA=/([A-Z])/g,Cl=(e,t)=>nA(e.replace(iA,r=>`${t}${tA(r)}`)),sA=e=>{const t=unescape(encodeURIComponent(e)),r=t.length,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=t.codePointAt(i);return n},vi=typeof TextEncoder<"u"?new TextEncoder:null,aA=e=>vi.encode(e),Ea=vi?aA:sA;let di=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});di&&di.decode(new Uint8Array).length===1&&(di=null);const bl=e=>e===void 0?null:e;class oA{constructor(){this.map=new Map}setItem(t,r){this.map.set(t,r)}getItem(t){return this.map.get(t)}}let Pu=new oA,Fu=!0;try{typeof localStorage<"u"&&(Pu=localStorage,Fu=!1)}catch{}const Vu=Pu,lA=e=>Fu||addEventListener("storage",e),uA=Object.keys,os=e=>uA(e).length,cA=(e,t)=>{for(const r in e)if(!t(e[r],r))return!1;return!0},Hu=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),fA=(e,t)=>e===t||os(e)===os(t)&&cA(e,(r,n)=>(r!==void 0||Hu(t,n))&&t[n]===r),io=(e,t,r=0)=>{try{for(;r<e.length;r++)e[r](...t)}finally{r<e.length&&io(e,t,r+1)}},hA=()=>{},dA=(e,t)=>e===t,pi=(e,t)=>{if(e==null||t==null)return dA(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const r of e.keys())if(!t.has(r)||!pi(e.get(r),t.get(r)))return!1;break}case Object:if(os(e)!==os(t))return!1;for(const r in e)if(!Hu(e,r)||!pi(e[r],t[r]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!pi(e[r],t[r]))return!1;break;default:return!1}return!0},pA=(e,t)=>t.includes(e),pn=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name),qu=typeof window<"u"&&!pn;typeof navigator<"u"&&/Mac/.test(navigator.platform);let lr;const gA=()=>{if(lr===void 0)if(pn){lr=mr();const e=process.argv;let t=null;for(let r=0;r<e.length;r++){const n=e[r];n[0]==="-"?(t!==null&&lr.set(t,""),t=n):t!==null&&(lr.set(t,n),t=null)}t!==null&&lr.set(t,"")}else typeof location=="object"?(lr=mr(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,r]=e.split("=");lr.set(`--${Cl(t,"-")}`,r),lr.set(`-${Cl(t,"-")}`,r)}})):lr=mr();return lr},Sa=e=>gA().has(e),ls=e=>bl(pn?process.env[e.toUpperCase()]:Vu.getItem(e)),mA=e=>Sa("--"+e)||ls(e)!==null;mA("production");const El=pn&&pA(process.env.FORCE_COLOR,["true","1","2"]),AA=!Sa("no-colors")&&(!pn||process.stdout.isTTY||El)&&(!pn||Sa("color")||El||ls("COLORTERM")!==null||(ls("TERM")||"").includes("color")),Sl=1,wl=2,na=4,ia=8,Ci=32,kr=64,Qt=128,Ns=31,wa=63,cn=127,yA=2147483647,Ku=Number.MAX_SAFE_INTEGER,vA=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&vr(e)===e),tn=e=>new Error(e),Ar=()=>{throw tn("Method unimplemented")},Cr=()=>{throw tn("Unexpected case")},Gu=tn("Unexpected end of array"),Qu=tn("Integer out of Range");class Ms{constructor(t){this.arr=t,this.pos=0}}const wr=e=>new Ms(e),CA=e=>e.pos!==e.arr.length,bA=(e,t)=>{const r=oo(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,r},bt=e=>bA(e,ve(e)),gn=e=>e.arr[e.pos++],ve=e=>{let t=0,r=1;const n=e.arr.length;for(;e.pos<n;){const i=e.arr[e.pos++];if(t=t+(i&cn)*r,r*=128,i<Qt)return t;if(t>Ku)throw Qu}throw Gu},so=e=>{let t=e.arr[e.pos++],r=t&wa,n=64;const i=(t&kr)>0?-1:1;if((t&Qt)===0)return i*r;const s=e.arr.length;for(;e.pos<s;){if(t=e.arr[e.pos++],r=r+(t&cn)*n,n*=128,t<Qt)return i*r;if(r>Ku)throw Qu}throw Gu},EA=e=>{let t=ve(e);if(t===0)return"";{let r=String.fromCodePoint(gn(e));if(--t<100)for(;t--;)r+=String.fromCodePoint(gn(e));else for(;t>0;){const n=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+n);e.pos+=n,r+=String.fromCodePoint.apply(null,i),t-=n}return decodeURIComponent(escape(r))}},SA=e=>di.decode(bt(e)),Rr=di?SA:EA,ao=(e,t)=>{const r=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,r},wA=e=>ao(e,4).getFloat32(0,!1),_A=e=>ao(e,8).getFloat64(0,!1),TA=e=>ao(e,8).getBigInt64(0,!1),xA=[e=>{},e=>null,so,wA,_A,TA,e=>!1,e=>!0,Rr,e=>{const t=ve(e),r={};for(let n=0;n<t;n++){const i=Rr(e);r[i]=Fn(e)}return r},e=>{const t=ve(e),r=[];for(let n=0;n<t;n++)r.push(Fn(e));return r},bt],Fn=e=>xA[127-gn(e)](e);class _l extends Ms{constructor(t,r){super(t),this.reader=r,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),CA(this)?this.count=ve(this)+1:this.count=-1),this.count--,this.s}}class Ji extends Ms{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=so(this);const t=Uu(this.s);this.count=1,t&&(this.s=-this.s,this.count=ve(this)+2)}return this.count--,this.s}}class sa extends Ms{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=so(this),r=t&1;this.diff=vr(t/2),this.count=1,r&&(this.count=ve(this)+2)}return this.s+=this.diff,this.count--,this.s}}class IA{constructor(t){this.decoder=new Ji(t),this.str=Rr(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),r=this.str.slice(this.spos,t);return this.spos=t,r}}const ju=e=>new Uint8Array(e),oo=(e,t,r)=>new Uint8Array(e,t,r),BA=e=>new Uint8Array(e),kA=e=>{let t="";for(let r=0;r<e.byteLength;r++)t+=eA(e[r]);return btoa(t)},RA=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),DA=e=>{const t=atob(e),r=ju(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},LA=e=>{const t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},$u=qu?kA:RA,zu=qu?DA:LA,NA=e=>{const t=ju(e.byteLength);return t.set(e),t};class Ii{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const St=()=>new Ii,MA=e=>{let t=e.cpos;for(let r=0;r<e.bufs.length;r++)t+=e.bufs[r].length;return t},ut=e=>{const t=new Uint8Array(MA(e));let r=0;for(let n=0;n<e.bufs.length;n++){const i=e.bufs[n];t.set(i,r),r+=i.length}return t.set(oo(e.cbuf.buffer,0,e.cpos),r),t},OA=(e,t)=>{const r=e.cbuf.length;r-e.cpos<t&&(e.bufs.push(oo(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(vn(r,t)*2),e.cpos=0)},Ct=(e,t)=>{const r=e.cbuf.length;e.cpos===r&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(r*2),e.cpos=0),e.cbuf[e.cpos++]=t},bi=Ct,he=(e,t)=>{for(;t>cn;)Ct(e,Qt|cn&t),t=vr(t/128);Ct(e,cn&t)},lo=(e,t)=>{const r=Uu(t);for(r&&(t=-t),Ct(e,(t>wa?Qt:0)|(r?kr:0)|wa&t),t=vr(t/64);t>0;)Ct(e,(t>cn?Qt:0)|cn&t),t=vr(t/128)},_a=new Uint8Array(3e4),UA=_a.length/3,PA=(e,t)=>{if(t.length<UA){const r=vi.encodeInto(t,_a).written||0;he(e,r);for(let n=0;n<r;n++)Ct(e,_a[n])}else pt(e,Ea(t))},FA=(e,t)=>{const r=unescape(encodeURIComponent(t)),n=r.length;he(e,n);for(let i=0;i<n;i++)Ct(e,r.codePointAt(i))},yr=vi&&vi.encodeInto?PA:FA,Os=(e,t)=>{const r=e.cbuf.length,n=e.cpos,i=no(r-n,t.length),s=t.length-i;e.cbuf.set(t.subarray(0,i),n),e.cpos+=i,s>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(vn(r*2,s)),e.cbuf.set(t.subarray(i)),e.cpos=s)},pt=(e,t)=>{he(e,t.byteLength),Os(e,t)},uo=(e,t)=>{OA(e,t);const r=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,r},VA=(e,t)=>uo(e,4).setFloat32(0,t,!1),HA=(e,t)=>uo(e,8).setFloat64(0,t,!1),qA=(e,t)=>uo(e,8).setBigInt64(0,t,!1),Tl=new DataView(new ArrayBuffer(4)),KA=e=>(Tl.setFloat32(0,e),Tl.getFloat32(0)===e),Vn=(e,t)=>{switch(typeof t){case"string":Ct(e,119),yr(e,t);break;case"number":vA(t)&&zi(t)<=yA?(Ct(e,125),lo(e,t)):KA(t)?(Ct(e,124),VA(e,t)):(Ct(e,123),HA(e,t));break;case"bigint":Ct(e,122),qA(e,t);break;case"object":if(t===null)Ct(e,126);else if(t instanceof Array){Ct(e,117),he(e,t.length);for(let r=0;r<t.length;r++)Vn(e,t[r])}else if(t instanceof Uint8Array)Ct(e,116),pt(e,t);else{Ct(e,118);const r=Object.keys(t);he(e,r.length);for(let n=0;n<r.length;n++){const i=r[n];yr(e,i),Vn(e,t[i])}}break;case"boolean":Ct(e,t?120:121);break;default:Ct(e,127)}};class xl extends Ii{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&he(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const Il=e=>{e.count>0&&(lo(e.encoder,e.count===1?e.s:-e.s),e.count>1&&he(e.encoder,e.count-2))};class Wi{constructor(){this.encoder=new Ii,this.s=0,this.count=0}write(t){this.s===t?this.count++:(Il(this),this.count=1,this.s=t)}toUint8Array(){return Il(this),ut(this.encoder)}}const Bl=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);lo(e.encoder,t),e.count>1&&he(e.encoder,e.count-2)}};class aa{constructor(){this.encoder=new Ii,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(Bl(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return Bl(this),ut(this.encoder)}}class GA{constructor(){this.sarr=[],this.s="",this.lensE=new Wi}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new Ii;return this.sarr.push(this.s),this.s="",yr(t,this.sarr.join("")),Os(t,this.lensE.toUint8Array()),ut(t)}}const kl=typeof crypto>"u"?null:crypto,QA=kl!==null?e=>{const t=new ArrayBuffer(e),r=new Uint8Array(t);return kl.getRandomValues(r),t}:e=>{const t=new ArrayBuffer(e),r=new Uint8Array(t);for(let n=0;n<e;n++)r[n]=Math.ceil(Math.random()*4294967295>>>0);return t},jA=Math.random,Ju=()=>new Uint32Array(QA(4))[0],$A=[1e7]+-1e3+-4e3+-8e3+-1e11,Wu=()=>$A.replace(/[018]/g,e=>(e^Ju()&15>>e/4).toString(16)),Lr=Date.now,zA=e=>new Promise(e),JA=e=>Promise.reject(e),co=e=>Promise.resolve(e),Or=Symbol;class WA{constructor(t,r){this.left=t,this.right=r}}const Tr=(e,t)=>new WA(e,t),Cn=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const YA=e=>Wm(e,(t,r)=>`${r}:${t};`).join("");Cn.ELEMENT_NODE;Cn.TEXT_NODE;Cn.CDATA_SECTION_NODE;Cn.COMMENT_NODE;Cn.DOCUMENT_NODE;Cn.DOCUMENT_TYPE_NODE;Cn.DOCUMENT_FRAGMENT_NODE;const Gt=Or(),Yr=Or(),fo=Or(),Us=Or(),ho=Or(),po=Or(),go=Or(),Ps=Or(),Bi=Or(),XA={[Gt]:Tr("font-weight","bold"),[Yr]:Tr("font-weight","normal"),[fo]:Tr("color","blue"),[ho]:Tr("color","green"),[Us]:Tr("color","grey"),[po]:Tr("color","red"),[go]:Tr("color","purple"),[Ps]:Tr("color","orange"),[Bi]:Tr("color","black")},Yu={[Gt]:"\x1B[1m",[Yr]:"\x1B[2m",[fo]:"\x1B[34m",[ho]:"\x1B[32m",[Us]:"\x1B[37m",[po]:"\x1B[31m",[go]:"\x1B[35m",[Ps]:"\x1B[38;5;208m",[Bi]:"\x1B[0m"},ZA=e=>{const t=[],r=[],n=mr();let i=[],s=0;for(;s<e.length;s++){const a=e[s],o=XA[a];if(o!==void 0)n.set(o.left,o.right);else if(a.constructor===String||a.constructor===Number){const l=YA(n);s>0||l.length>0?(t.push("%c"+a),r.push(l)):t.push(a)}else break}for(s>0&&(i=r,i.unshift(t.join("")));s<e.length;s++){const a=e[s];a instanceof Symbol||i.push(a)}return i},ey=e=>{const t=[],r=[];let n=0;for(;n<e.length;n++){const i=e[n];if(Yu[i]===void 0)if(i.constructor===String||i.constructor===Number)t.push(i);else break}for(n>0&&r.push(t.join(""));n<e.length;n++){const i=e[n];i instanceof Symbol||(i.constructor===Object?r.push(JSON.stringify(i)):r.push(i))}return r},ty=e=>{const t=[],r=[];let n=0;for(;n<e.length;n++){const i=e[n],s=Yu[i];if(s!==void 0)t.push(s);else if(i.constructor===String||i.constructor===Number)t.push(i);else break}for(n>0&&(t.push("\x1B[0m"),r.push(t.join("")));n<e.length;n++){const i=e[n];i instanceof Symbol||r.push(i)}return r},ry=AA?pn?ty:ZA:ey,Xu=(...e)=>{console.log(...ry(e)),ny.forEach(t=>t.print(e))},ny=new Set,Rl=[ho,go,Ps,fo];let oa=0,Dl=Lr();const iy=e=>{const t=Rl[oa],r=ls("log"),n=r!==null&&(r==="*"||r==="true"||new RegExp(r,"gi").test(e));return oa=(oa+1)%Rl.length,e+=": ",n?(...i)=>{const s=Lr(),a=s-Dl;Dl=s,Xu(t,e,Bi,...i.map(o=>typeof o=="string"||typeof o=="symbol"?o:JSON.stringify(o)),t," +"+a+"ms")}:hA},Zu=e=>({[Symbol.iterator](){return this},next:e}),sy=(e,t)=>Zu(()=>{let r;do r=e.next();while(!r.done&&!t(r.value));return r}),la=(e,t)=>Zu(()=>{const{done:r,value:n}=e.next();return{done:r,value:r?void 0:t(n)}});class mo{constructor(t,r){this.clock=t,this.len=r}}class ki{constructor(){this.clients=new Map}}const Ta=(e,t,r)=>t.clients.forEach((n,i)=>{const s=e.doc.store.clients.get(i);for(let a=0;a<n.length;a++){const o=n[a];dc(e,s,o.clock,o.len,r)}}),ay=(e,t)=>{let r=0,n=e.length-1;for(;r<=n;){const i=vr((r+n)/2),s=e[i],a=s.clock;if(a<=t){if(t<a+s.len)return i;r=i+1}else n=i-1}return null},ec=(e,t)=>{const r=e.clients.get(t.client);return r!==void 0&&ay(r,t.clock)!==null},Ao=e=>{e.clients.forEach(t=>{t.sort((i,s)=>i.clock-s.clock);let r,n;for(r=1,n=1;r<t.length;r++){const i=t[n-1],s=t[r];i.clock+i.len>=s.clock?i.len=vn(i.len,s.clock+s.len-i.clock):(n<r&&(t[n]=s),n++)}t.length=n})},oy=e=>{const t=new ki;for(let r=0;r<e.length;r++)e[r].clients.forEach((n,i)=>{if(!t.clients.has(i)){const s=n.slice();for(let a=r+1;a<e.length;a++)Xm(s,e[a].clients.get(i)||[]);t.clients.set(i,s)}});return Ao(t),t},us=(e,t,r,n)=>{tr(e.clients,t,()=>[]).push(new mo(r,n))},tc=()=>new ki,ly=e=>{const t=tc();return e.clients.forEach((r,n)=>{const i=[];for(let s=0;s<r.length;s++){const a=r[s];if(a.deleted){const o=a.id.clock;let l=a.length;if(s+1<r.length)for(let u=r[s+1];s+1<r.length&&u.deleted;u=r[++s+1])l+=u.length;i.push(new mo(o,l))}}i.length>0&&t.clients.set(n,i)}),t},Wn=(e,t)=>{he(e.restEncoder,t.clients.size),t.clients.forEach((r,n)=>{e.resetDsCurVal(),he(e.restEncoder,n);const i=r.length;he(e.restEncoder,i);for(let s=0;s<i;s++){const a=r[s];e.writeDsClock(a.clock),e.writeDsLen(a.len)}})},yo=e=>{const t=new ki,r=ve(e.restDecoder);for(let n=0;n<r;n++){e.resetDsCurVal();const i=ve(e.restDecoder),s=ve(e.restDecoder);if(s>0){const a=tr(t.clients,i,()=>[]);for(let o=0;o<s;o++)a.push(new mo(e.readDsClock(),e.readDsLen()))}}return t},Ll=(e,t,r)=>{const n=new ki,i=ve(e.restDecoder);for(let s=0;s<i;s++){e.resetDsCurVal();const a=ve(e.restDecoder),o=ve(e.restDecoder),l=r.clients.get(a)||[],u=Tt(r,a);for(let c=0;c<o;c++){const f=e.readDsClock(),d=f+e.readDsLen();if(f<u){u<d&&us(n,a,u,d-u);let p=br(l,f),g=l[p];for(!g.deleted&&g.id.clock<f&&(l.splice(p+1,0,ms(t,g,f-g.id.clock)),p++);p<l.length&&(g=l[p++],g.id.clock<d);)g.deleted||(d<g.id.clock+g.length&&l.splice(p,0,ms(t,g,d-g.id.clock)),g.delete(t))}else us(n,a,f,d-f)}}if(n.clients.size>0){const s=new mn;return he(s.restEncoder,0),Wn(s,n),s.toUint8Array()}return null},rc=Ju;class Yn extends Ls{constructor({guid:t=Wu(),collectionid:r=null,gc:n=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:a=!1,shouldLoad:o=!0}={}){super(),this.gc=n,this.gcFilter=i,this.clientID=rc(),this.guid=t,this.collectionid=r,this.share=new Map,this.store=new fc,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=a,this.meta=s,this.isLoaded=!1,this.whenLoaded=zA(l=>{this.on("load",()=>{this.isLoaded=!0,l(this)})})}load(){const t=this._item;t!==null&&!this.shouldLoad&&$e(t.parent.doc,r=>{r.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map(t=>t.guid))}transact(t,r=null){$e(this,t,r)}get(t,r=Lt){const n=tr(this.share,t,()=>{const s=new r;return s._integrate(this,null),s}),i=n.constructor;if(r!==Lt&&i!==r)if(i===Lt){const s=new r;s._map=n._map,n._map.forEach(a=>{for(;a!==null;a=a.left)a.parent=s}),s._start=n._start;for(let a=s._start;a!==null;a=a.right)a.parent=s;return s._length=n._length,this.share.set(t,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return n}getArray(t=""){return this.get(t,On)}getText(t=""){return this.get(t,Kn)}getMap(t=""){return this.get(t,qn)}getXmlFragment(t=""){return this.get(t,An)}toJSON(){const t={};return this.share.forEach((r,n)=>{t[n]=r.toJSON()}),t}destroy(){Ou(this.subdocs).forEach(r=>r.destroy());const t=this._item;if(t!==null){this._item=null;const r=t.content;r.doc=new Yn({guid:this.guid,...r.opts,shouldLoad:!1}),r.doc._item=t,$e(t.parent.doc,n=>{const i=r.doc;t.deleted||n.subdocsAdded.add(i),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,r){super.on(t,r)}off(t,r){super.off(t,r)}}class nc{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return ve(this.restDecoder)}readDsLen(){return ve(this.restDecoder)}}class ic extends nc{readLeftID(){return Le(ve(this.restDecoder),ve(this.restDecoder))}readRightID(){return Le(ve(this.restDecoder),ve(this.restDecoder))}readClient(){return ve(this.restDecoder)}readInfo(){return gn(this.restDecoder)}readString(){return Rr(this.restDecoder)}readParentInfo(){return ve(this.restDecoder)===1}readTypeRef(){return ve(this.restDecoder)}readLen(){return ve(this.restDecoder)}readAny(){return Fn(this.restDecoder)}readBuf(){return NA(bt(this.restDecoder))}readJSON(){return JSON.parse(Rr(this.restDecoder))}readKey(){return Rr(this.restDecoder)}}class uy{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ve(this.restDecoder),this.dsCurrVal}readDsLen(){const t=ve(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class Hn extends uy{constructor(t){super(t),this.keys=[],ve(t),this.keyClockDecoder=new sa(bt(t)),this.clientDecoder=new Ji(bt(t)),this.leftClockDecoder=new sa(bt(t)),this.rightClockDecoder=new sa(bt(t)),this.infoDecoder=new _l(bt(t),gn),this.stringDecoder=new IA(bt(t)),this.parentInfoDecoder=new _l(bt(t),gn),this.typeRefDecoder=new Ji(bt(t)),this.lenDecoder=new Ji(bt(t))}readLeftID(){return new Mn(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Mn(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Fn(this.restDecoder)}readBuf(){return bt(this.restDecoder)}readJSON(){return Fn(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const r=this.stringDecoder.read();return this.keys.push(r),r}}}class sc{constructor(){this.restEncoder=St()}toUint8Array(){return ut(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){he(this.restEncoder,t)}writeDsLen(t){he(this.restEncoder,t)}}class Ri extends sc{writeLeftID(t){he(this.restEncoder,t.client),he(this.restEncoder,t.clock)}writeRightID(t){he(this.restEncoder,t.client),he(this.restEncoder,t.clock)}writeClient(t){he(this.restEncoder,t)}writeInfo(t){bi(this.restEncoder,t)}writeString(t){yr(this.restEncoder,t)}writeParentInfo(t){he(this.restEncoder,t?1:0)}writeTypeRef(t){he(this.restEncoder,t)}writeLen(t){he(this.restEncoder,t)}writeAny(t){Vn(this.restEncoder,t)}writeBuf(t){pt(this.restEncoder,t)}writeJSON(t){yr(this.restEncoder,JSON.stringify(t))}writeKey(t){yr(this.restEncoder,t)}}class ac{constructor(){this.restEncoder=St(),this.dsCurrVal=0}toUint8Array(){return ut(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const r=t-this.dsCurrVal;this.dsCurrVal=t,he(this.restEncoder,r)}writeDsLen(t){t===0&&Cr(),he(this.restEncoder,t-1),this.dsCurrVal+=t}}class mn extends ac{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new aa,this.clientEncoder=new Wi,this.leftClockEncoder=new aa,this.rightClockEncoder=new aa,this.infoEncoder=new xl(bi),this.stringEncoder=new GA,this.parentInfoEncoder=new xl(bi),this.typeRefEncoder=new Wi,this.lenEncoder=new Wi}toUint8Array(){const t=St();return he(t,0),pt(t,this.keyClockEncoder.toUint8Array()),pt(t,this.clientEncoder.toUint8Array()),pt(t,this.leftClockEncoder.toUint8Array()),pt(t,this.rightClockEncoder.toUint8Array()),pt(t,ut(this.infoEncoder)),pt(t,this.stringEncoder.toUint8Array()),pt(t,ut(this.parentInfoEncoder)),pt(t,this.typeRefEncoder.toUint8Array()),pt(t,this.lenEncoder.toUint8Array()),Os(t,ut(this.restEncoder)),ut(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){Vn(this.restEncoder,t)}writeBuf(t){pt(this.restEncoder,t)}writeJSON(t){Vn(this.restEncoder,t)}writeKey(t){const r=this.keyMap.get(t);r===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(r)}}const cy=(e,t,r,n)=>{n=vn(n,t[0].id.clock);const i=br(t,n);he(e.restEncoder,t.length-i),e.writeClient(r),he(e.restEncoder,n);const s=t[i];s.write(e,n-s.id.clock);for(let a=i+1;a<t.length;a++)t[a].write(e,0)},vo=(e,t,r)=>{const n=new Map;r.forEach((i,s)=>{Tt(t,s)>i&&n.set(s,i)}),Fs(t).forEach((i,s)=>{r.has(s)||n.set(s,0)}),he(e.restEncoder,n.size),Array.from(n.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{cy(e,t.clients.get(i),i,s)})},fy=(e,t)=>{const r=mr(),n=ve(e.restDecoder);for(let i=0;i<n;i++){const s=ve(e.restDecoder),a=new Array(s),o=e.readClient();let l=ve(e.restDecoder);r.set(o,{i:0,refs:a});for(let u=0;u<s;u++){const c=e.readInfo();switch(Ns&c){case 0:{const f=e.readLen();a[u]=new Jt(Le(o,l),f),l+=f;break}case 10:{const f=ve(e.restDecoder);a[u]=new Wt(Le(o,l),f),l+=f;break}default:{const f=(c&(kr|Qt))===0,d=new At(Le(o,l),null,(c&Qt)===Qt?e.readLeftID():null,null,(c&kr)===kr?e.readRightID():null,f?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,f&&(c&Ci)===Ci?e.readString():null,Dc(e,c));a[u]=d,l+=d.length}}}}return r},hy=(e,t,r)=>{const n=[];let i=Array.from(r.keys()).sort((p,g)=>p-g);if(i.length===0)return null;const s=()=>{if(i.length===0)return null;let p=r.get(i[i.length-1]);for(;p.refs.length===p.i;)if(i.pop(),i.length>0)p=r.get(i[i.length-1]);else return null;return p};let a=s();if(a===null&&n.length===0)return null;const o=new fc,l=new Map,u=(p,g)=>{const A=l.get(p);(A==null||A>g)&&l.set(p,g)};let c=a.refs[a.i++];const f=new Map,d=()=>{for(const p of n){const g=p.id.client,A=r.get(g);A?(A.i--,o.clients.set(g,A.refs.slice(A.i)),r.delete(g),A.i=0,A.refs=[]):o.clients.set(g,[p]),i=i.filter(_=>_!==g)}n.length=0};for(;;){if(c.constructor!==Wt){const g=tr(f,c.id.client,()=>Tt(t,c.id.client))-c.id.clock;if(g<0)n.push(c),u(c.id.client,c.id.clock-1),d();else{const A=c.getMissing(e,t);if(A!==null){n.push(c);const _=r.get(A)||{refs:[],i:0};if(_.refs.length===_.i)u(A,Tt(t,A)),d();else{c=_.refs[_.i++];continue}}else(g===0||g<c.length)&&(c.integrate(e,g),f.set(c.id.client,c.id.clock+c.length))}}if(n.length>0)c=n.pop();else if(a!==null&&a.i<a.refs.length)c=a.refs[a.i++];else{if(a=s(),a===null)break;c=a.refs[a.i++]}}if(o.clients.size>0){const p=new mn;return vo(p,o,new Map),he(p.restEncoder,0),{missing:l,update:p.toUint8Array()}}return null},dy=(e,t)=>vo(e,t.doc.store,t.beforeState),py=(e,t,r,n=new Hn(e))=>$e(t,i=>{i.local=!1;let s=!1;const a=i.doc,o=a.store,l=fy(n,a),u=hy(i,o,l),c=o.pendingStructs;if(c){for(const[d,p]of c.missing)if(p<Tt(o,d)){s=!0;break}if(u){for(const[d,p]of u.missing){const g=c.missing.get(d);(g==null||g>p)&&c.missing.set(d,p)}c.update=cs([c.update,u.update])}}else o.pendingStructs=u;const f=Ll(n,i,o);if(o.pendingDs){const d=new Hn(wr(o.pendingDs));ve(d.restDecoder);const p=Ll(d,i,o);f&&p?o.pendingDs=cs([f,p]):o.pendingDs=f||p}else o.pendingDs=f;if(s){const d=o.pendingStructs.update;o.pendingStructs=null,oc(i.doc,d)}},r,!1),oc=(e,t,r,n=Hn)=>{const i=wr(t);py(i,e,r,new n(i))},gy=(e,t,r)=>oc(e,t,r,ic),my=(e,t,r=new Map)=>{vo(e,t.store,r),Wn(e,ly(t.store))},Ay=(e,t=new Uint8Array([0]),r=new mn)=>{const n=lc(t);my(r,e,n);const i=[r.toUint8Array()];if(e.store.pendingDs&&i.push(e.store.pendingDs),e.store.pendingStructs&&i.push(My(e.store.pendingStructs.update,t)),i.length>1){if(r.constructor===Ri)return Ly(i.map((s,a)=>a===0?s:Uy(s)));if(r.constructor===mn)return cs(i)}return i[0]},yy=(e,t)=>Ay(e,t,new Ri),vy=e=>{const t=new Map,r=ve(e.restDecoder);for(let n=0;n<r;n++){const i=ve(e.restDecoder),s=ve(e.restDecoder);t.set(i,s)}return t},lc=e=>vy(new nc(wr(e))),uc=(e,t)=>(he(e.restEncoder,t.size),Array.from(t.entries()).sort((r,n)=>n[0]-r[0]).forEach(([r,n])=>{he(e.restEncoder,r),he(e.restEncoder,n)}),e),Cy=(e,t)=>uc(e,Fs(t.store)),by=(e,t=new ac)=>(e instanceof Map?uc(t,e):Cy(t,e),t.toUint8Array()),Ey=e=>by(e,new sc);class Sy{constructor(){this.l=[]}}const Nl=()=>new Sy,Ml=(e,t)=>e.l.push(t),Ol=(e,t)=>{const r=e.l,n=r.length;e.l=r.filter(i=>t!==i),n===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},cc=(e,t,r)=>io(e.l,[t,r]);class Mn{constructor(t,r){this.client=t,this.clock=r}}const Pi=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,Le=(e,t)=>new Mn(e,t),wy=e=>{for(const[t,r]of e.doc.share.entries())if(r===e)return t;throw Cr()};class _y{constructor(t,r){this.ds=t,this.sv=r}}const Ty=(e,t)=>new _y(e,t);Ty(tc(),new Map);const si=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!ec(t.ds,e.id),xa=(e,t)=>{const r=tr(e.meta,xa,yi),n=e.doc.store;r.has(t)||(t.sv.forEach((i,s)=>{i<Tt(n,s)&&Xr(e,Le(s,i))}),Ta(e,t.ds,i=>{}),r.add(t))};class fc{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Fs=e=>{const t=new Map;return e.clients.forEach((r,n)=>{const i=r[r.length-1];t.set(n,i.id.clock+i.length)}),t},Tt=(e,t)=>{const r=e.clients.get(t);if(r===void 0)return 0;const n=r[r.length-1];return n.id.clock+n.length},hc=(e,t)=>{let r=e.clients.get(t.id.client);if(r===void 0)r=[],e.clients.set(t.id.client,r);else{const n=r[r.length-1];if(n.id.clock+n.length!==t.id.clock)throw Cr()}r.push(t)},br=(e,t)=>{let r=0,n=e.length-1,i=e[n],s=i.id.clock;if(s===t)return n;let a=vr(t/(s+i.length-1)*n);for(;r<=n;){if(i=e[a],s=i.id.clock,s<=t){if(t<s+i.length)return a;r=a+1}else n=a-1;a=vr((r+n)/2)}throw Cr()},xy=(e,t)=>{const r=e.clients.get(t.client);return r[br(r,t.clock)]},ua=xy,Ia=(e,t,r)=>{const n=br(t,r),i=t[n];return i.id.clock<r&&i instanceof At?(t.splice(n+1,0,ms(e,i,r-i.id.clock)),n+1):n},Xr=(e,t)=>{const r=e.doc.store.clients.get(t.client);return r[Ia(e,r,t.clock)]},Ul=(e,t,r)=>{const n=t.clients.get(r.client),i=br(n,r.clock),s=n[i];return r.clock!==s.id.clock+s.length-1&&s.constructor!==Jt&&n.splice(i+1,0,ms(e,s,r.clock-s.id.clock+1)),s},Iy=(e,t,r)=>{const n=e.clients.get(t.id.client);n[br(n,t.id.clock)]=r},dc=(e,t,r,n,i)=>{if(n===0)return;const s=r+n;let a=Ia(e,t,r),o;do o=t[a++],s<o.id.clock+o.length&&Ia(e,t,s),i(o);while(a<t.length&&t[a].id.clock<s)};class By{constructor(t,r,n){this.doc=t,this.deleteSet=new ki,this.beforeState=Fs(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=r,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const Pl=(e,t)=>t.deleteSet.clients.size===0&&!Ym(t.afterState,(r,n)=>t.beforeState.get(n)!==r)?!1:(Ao(t.deleteSet),dy(e,t),Wn(e,t.deleteSet),!0),Fl=(e,t,r)=>{const n=t._item;(n===null||n.id.clock<(e.beforeState.get(n.id.client)||0)&&!n.deleted)&&tr(e.changed,t,yi).add(r)},Yi=(e,t)=>{const r=e[t-1],n=e[t];r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)&&(e.splice(t,1),n instanceof At&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r))},ky=(e,t,r)=>{for(const[n,i]of e.clients.entries()){const s=t.clients.get(n);for(let a=i.length-1;a>=0;a--){const o=i[a],l=o.clock+o.len;for(let u=br(s,o.clock),c=s[u];u<s.length&&c.id.clock<l;c=s[++u]){const f=s[u];if(o.clock+o.len<=f.id.clock)break;f instanceof At&&f.deleted&&!f.keep&&r(f)&&f.gc(t,!1)}}}},Ry=(e,t)=>{e.clients.forEach((r,n)=>{const i=t.clients.get(n);for(let s=r.length-1;s>=0;s--){const a=r[s],o=no(i.length-1,1+br(i,a.clock+a.len-1));for(let l=o,u=i[l];l>0&&u.id.clock>=a.clock;u=i[--l])Yi(i,l)}})},pc=(e,t)=>{if(t<e.length){const r=e[t],n=r.doc,i=n.store,s=r.deleteSet,a=r._mergeStructs;try{Ao(s),r.afterState=Fs(r.doc.store),n.emit("beforeObserverCalls",[r,n]);const o=[];r.changed.forEach((l,u)=>o.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(r,l)})),o.push(()=>{r.changedParentTypes.forEach((l,u)=>o.push(()=>{(u._item===null||!u._item.deleted)&&(l=l.filter(c=>c.target._item===null||!c.target._item.deleted),l.forEach(c=>{c.currentTarget=u}),l.sort((c,f)=>c.path.length-f.path.length),cc(u._dEH,l,r))})),o.push(()=>n.emit("afterTransaction",[r,n]))}),io(o,[])}finally{n.gc&&ky(s,i,n.gcFilter),Ry(s,i),r.afterState.forEach((c,f)=>{const d=r.beforeState.get(f)||0;if(d!==c){const p=i.clients.get(f),g=vn(br(p,d),1);for(let A=p.length-1;A>=g;A--)Yi(p,A)}});for(let c=0;c<a.length;c++){const{client:f,clock:d}=a[c].id,p=i.clients.get(f),g=br(p,d);g+1<p.length&&Yi(p,g+1),g>0&&Yi(p,g)}if(!r.local&&r.afterState.get(n.clientID)!==r.beforeState.get(n.clientID)&&(Xu(Ps,Gt,"[yjs] ",Yr,po,"Changed the client-id because another client seems to be using it."),n.clientID=rc()),n.emit("afterTransactionCleanup",[r,n]),n._observers.has("update")){const c=new Ri;Pl(c,r)&&n.emit("update",[c.toUint8Array(),r.origin,n,r])}if(n._observers.has("updateV2")){const c=new mn;Pl(c,r)&&n.emit("updateV2",[c.toUint8Array(),r.origin,n,r])}const{subdocsAdded:o,subdocsLoaded:l,subdocsRemoved:u}=r;(o.size>0||u.size>0||l.size>0)&&(o.forEach(c=>{c.clientID=n.clientID,c.collectionid==null&&(c.collectionid=n.collectionid),n.subdocs.add(c)}),u.forEach(c=>n.subdocs.delete(c)),n.emit("subdocs",[{loaded:l,added:o,removed:u},n,r]),u.forEach(c=>c.destroy())),e.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,e])):pc(e,t+1)}}},$e=(e,t,r=null,n=!0)=>{const i=e._transactionCleanups;let s=!1;e._transaction===null&&(s=!0,e._transaction=new By(e,r,n),i.push(e._transaction),i.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{t(e._transaction)}finally{if(s){const a=e._transaction===i[0];e._transaction=null,a&&pc(i,0)}}};function*Dy(e){const t=ve(e.restDecoder);for(let r=0;r<t;r++){const n=ve(e.restDecoder),i=e.readClient();let s=ve(e.restDecoder);for(let a=0;a<n;a++){const o=e.readInfo();if(o===10){const l=ve(e.restDecoder);yield new Wt(Le(i,s),l),s+=l}else if((Ns&o)!==0){const l=(o&(kr|Qt))===0,u=new At(Le(i,s),null,(o&Qt)===Qt?e.readLeftID():null,null,(o&kr)===kr?e.readRightID():null,l?e.readParentInfo()?e.readString():e.readLeftID():null,l&&(o&Ci)===Ci?e.readString():null,Dc(e,o));yield u,s+=u.length}else{const l=e.readLen();yield new Jt(Le(i,s),l),s+=l}}}}class Co{constructor(t,r){this.gen=Dy(t),this.curr=null,this.done=!1,this.filterSkips=r,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Wt);return this.curr}}class bo{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Ly=e=>cs(e,ic,Ri),Ny=(e,t)=>{if(e.constructor===Jt){const{client:r,clock:n}=e.id;return new Jt(Le(r,n+t),e.length-t)}else if(e.constructor===Wt){const{client:r,clock:n}=e.id;return new Wt(Le(r,n+t),e.length-t)}else{const r=e,{client:n,clock:i}=r.id;return new At(Le(n,i+t),null,Le(n,i+t-1),null,r.rightOrigin,r.parent,r.parentSub,r.content.splice(t))}},cs=(e,t=Hn,r=mn)=>{if(e.length===1)return e[0];const n=e.map(c=>new t(wr(c)));let i=n.map(c=>new Co(c,!0)),s=null;const a=new r,o=new bo(a);for(;i=i.filter(d=>d.curr!==null),i.sort((d,p)=>{if(d.curr.id.client===p.curr.id.client){const g=d.curr.id.clock-p.curr.id.clock;return g===0?d.curr.constructor===p.curr.constructor?0:d.curr.constructor===Wt?1:-1:g}else return p.curr.id.client-d.curr.id.client}),i.length!==0;){const c=i[0],f=c.curr.id.client;if(s!==null){let d=c.curr,p=!1;for(;d!==null&&d.id.clock+d.length<=s.struct.id.clock+s.struct.length&&d.id.client>=s.struct.id.client;)d=c.next(),p=!0;if(d===null||d.id.client!==f||p&&d.id.clock>s.struct.id.clock+s.struct.length)continue;if(f!==s.struct.id.client)Hr(o,s.struct,s.offset),s={struct:d,offset:0},c.next();else if(s.struct.id.clock+s.struct.length<d.id.clock)if(s.struct.constructor===Wt)s.struct.length=d.id.clock+d.length-s.struct.id.clock;else{Hr(o,s.struct,s.offset);const g=d.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Wt(Le(f,s.struct.id.clock+s.struct.length),g),offset:0}}else{const g=s.struct.id.clock+s.struct.length-d.id.clock;g>0&&(s.struct.constructor===Wt?s.struct.length-=g:d=Ny(d,g)),s.struct.mergeWith(d)||(Hr(o,s.struct,s.offset),s={struct:d,offset:0},c.next())}}else s={struct:c.curr,offset:0},c.next();for(let d=c.curr;d!==null&&d.id.client===f&&d.id.clock===s.struct.id.clock+s.struct.length&&d.constructor!==Wt;d=c.next())Hr(o,s.struct,s.offset),s={struct:d,offset:0}}s!==null&&(Hr(o,s.struct,s.offset),s=null),Eo(o);const l=n.map(c=>yo(c)),u=oy(l);return Wn(a,u),a.toUint8Array()},My=(e,t,r=Hn,n=mn)=>{const i=lc(t),s=new n,a=new bo(s),o=new r(wr(e)),l=new Co(o,!1);for(;l.curr;){const c=l.curr,f=c.id.client,d=i.get(f)||0;if(l.curr.constructor===Wt){l.next();continue}if(c.id.clock+c.length>d)for(Hr(a,c,vn(d-c.id.clock,0)),l.next();l.curr&&l.curr.id.client===f;)Hr(a,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===f&&l.curr.id.clock+l.curr.length<=d;)l.next()}Eo(a);const u=yo(o);return Wn(s,u),s.toUint8Array()},gc=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:ut(e.encoder.restEncoder)}),e.encoder.restEncoder=St(),e.written=0)},Hr=(e,t,r)=>{e.written>0&&e.currClient!==t.id.client&&gc(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),he(e.encoder.restEncoder,t.id.clock+r)),t.write(e.encoder,r),e.written++},Eo=e=>{gc(e);const t=e.encoder.restEncoder;he(t,e.clientStructs.length);for(let r=0;r<e.clientStructs.length;r++){const n=e.clientStructs[r];he(t,n.written),Os(t,n.restEncoder)}},Oy=(e,t,r)=>{const n=new t(wr(e)),i=new Co(n,!1),s=new r,a=new bo(s);for(let l=i.curr;l!==null;l=i.next())Hr(a,l,0);Eo(a);const o=yo(n);return Wn(s,o),s.toUint8Array()},Uy=e=>Oy(e,Hn,Ri);class Vs{constructor(t,r){this.target=t,this.currentTarget=t,this.transaction=r,this._changes=null,this._keys=null,this._delta=null}get path(){return Py(this.currentTarget,this.target)}deletes(t){return ec(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){const t=new Map,r=this.target;this.transaction.changed.get(r).forEach(i=>{if(i!==null){const s=r._map.get(i);let a,o;if(this.adds(s)){let l=s.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(s))if(l!==null&&this.deletes(l))a="delete",o=ra(l.content.getContent());else return;else l!==null&&this.deletes(l)?(a="update",o=ra(l.content.getContent())):(a="add",o=void 0)}else if(this.deletes(s))a="delete",o=ra(s.content.getContent());else return;t.set(i,{action:a,oldValue:o})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){const r=this.target,n=yi(),i=yi(),s=[];if(t={added:n,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(r).has(null)){let o=null;const l=()=>{o&&s.push(o)};for(let u=r._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((o===null||o.delete===void 0)&&(l(),o={delete:0}),o.delete+=u.length,i.add(u)):this.adds(u)?((o===null||o.insert===void 0)&&(l(),o={insert:[]}),o.insert=o.insert.concat(u.content.getContent()),n.add(u)):((o===null||o.retain===void 0)&&(l(),o={retain:0}),o.retain+=u.length);o!==null&&o.retain===void 0&&l()}this._changes=t}return t}}const Py=(e,t)=>{const r=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)r.unshift(t._item.parentSub);else{let n=0,i=t._item.parent._start;for(;i!==t._item&&i!==null;)i.deleted||n++,i=i.right;r.unshift(n)}t=t._item.parent}return r},mc=80;let So=0;class Fy{constructor(t,r){t.marker=!0,this.p=t,this.index=r,this.timestamp=So++}}const Vy=e=>{e.timestamp=So++},Ac=(e,t,r)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=r,e.timestamp=So++},Hy=(e,t,r)=>{if(e.length>=mc){const n=e.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return Ac(n,t,r),n}else{const n=new Fy(t,r);return e.push(n),n}},Hs=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const r=e._searchMarker.length===0?null:e._searchMarker.reduce((s,a)=>zi(t-s.index)<zi(t-a.index)?s:a);let n=e._start,i=0;for(r!==null&&(n=r.p,i=r.index,Vy(r));n.right!==null&&i<t;){if(!n.deleted&&n.countable){if(t<i+n.length)break;i+=n.length}n=n.right}for(;n.left!==null&&i>t;)n=n.left,!n.deleted&&n.countable&&(i-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(i-=n.length);return r!==null&&zi(r.index-i)<n.parent.length/mc?(Ac(r,n,i),r):Hy(e._searchMarker,n,i)},Ei=(e,t,r)=>{for(let n=e.length-1;n>=0;n--){const i=e[n];if(r>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){e.splice(n,1);continue}i.p=s,s.marker=!0}(t<i.index||r>0&&t===i.index)&&(i.index=vn(t,i.index+r))}},qs=(e,t,r)=>{const n=e,i=t.changedParentTypes;for(;tr(i,e,()=>[]).push(r),e._item!==null;)e=e._item.parent;cc(n._eH,r,t)};class Lt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Nl(),this._dEH=Nl(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,r){this.doc=t,this._item=r}_copy(){throw Ar()}clone(){throw Ar()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,r){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Ml(this._eH,t)}observeDeep(t){Ml(this._dEH,t)}unobserve(t){Ol(this._eH,t)}unobserveDeep(t){Ol(this._dEH,t)}toJSON(){}}const yc=(e,t,r)=>{t<0&&(t=e._length+t),r<0&&(r=e._length+r);let n=r-t;const i=[];let s=e._start;for(;s!==null&&n>0;){if(s.countable&&!s.deleted){const a=s.content.getContent();if(a.length<=t)t-=a.length;else{for(let o=t;o<a.length&&n>0;o++)i.push(a[o]),n--;t=0}}s=s.right}return i},vc=e=>{const t=[];let r=e._start;for(;r!==null;){if(r.countable&&!r.deleted){const n=r.content.getContent();for(let i=0;i<n.length;i++)t.push(n[i])}r=r.right}return t},Si=(e,t)=>{let r=0,n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const i=n.content.getContent();for(let s=0;s<i.length;s++)t(i[s],r++,e)}n=n.right}},Cc=(e,t)=>{const r=[];return Si(e,(n,i)=>{r.push(t(n,i,e))}),r},qy=e=>{let t=e._start,r=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(r===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};r=t.content.getContent(),n=0,t=t.right}const i=r[n++];return r.length<=n&&(r=null),{done:!1,value:i}}}},bc=(e,t)=>{const r=Hs(e,t);let n=e._start;for(r!==null&&(n=r.p,t-=r.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},fs=(e,t,r,n)=>{let i=r;const s=e.doc,a=s.clientID,o=s.store,l=r===null?t._start:r.right;let u=[];const c=()=>{u.length>0&&(i=new At(Le(a,Tt(o,a)),i,i&&i.lastId,l,l&&l.id,t,null,new yn(u)),i.integrate(e,0),u=[])};n.forEach(f=>{if(f===null)u.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(f);break;default:switch(c(),f.constructor){case Uint8Array:case ArrayBuffer:i=new At(Le(a,Tt(o,a)),i,i&&i.lastId,l,l&&l.id,t,null,new Di(new Uint8Array(f))),i.integrate(e,0);break;case Yn:i=new At(Le(a,Tt(o,a)),i,i&&i.lastId,l,l&&l.id,t,null,new Li(f)),i.integrate(e,0);break;default:if(f instanceof Lt)i=new At(Le(a,Tt(o,a)),i,i&&i.lastId,l,l&&l.id,t,null,new Ur(f)),i.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),c()},Ec=tn("Length exceeded!"),Sc=(e,t,r,n)=>{if(r>t._length)throw Ec;if(r===0)return t._searchMarker&&Ei(t._searchMarker,r,n.length),fs(e,t,null,n);const i=r,s=Hs(t,r);let a=t._start;for(s!==null&&(a=s.p,r-=s.index,r===0&&(a=a.prev,r+=a&&a.countable&&!a.deleted?a.length:0));a!==null;a=a.right)if(!a.deleted&&a.countable){if(r<=a.length){r<a.length&&Xr(e,Le(a.id.client,a.id.clock+r));break}r-=a.length}return t._searchMarker&&Ei(t._searchMarker,i,n.length),fs(e,t,a,n)},Ky=(e,t,r)=>{let i=(t._searchMarker||[]).reduce((s,a)=>a.index>s.index?a:s,{index:0,p:t._start}).p;if(i)for(;i.right;)i=i.right;return fs(e,t,i,r)},wc=(e,t,r,n)=>{if(n===0)return;const i=r,s=n,a=Hs(t,r);let o=t._start;for(a!==null&&(o=a.p,r-=a.index);o!==null&&r>0;o=o.right)!o.deleted&&o.countable&&(r<o.length&&Xr(e,Le(o.id.client,o.id.clock+r)),r-=o.length);for(;n>0&&o!==null;)o.deleted||(n<o.length&&Xr(e,Le(o.id.client,o.id.clock+n)),o.delete(e),n-=o.length),o=o.right;if(n>0)throw Ec;t._searchMarker&&Ei(t._searchMarker,i,-s+n)},hs=(e,t,r)=>{const n=t._map.get(r);n!==void 0&&n.delete(e)},wo=(e,t,r,n)=>{const i=t._map.get(r)||null,s=e.doc,a=s.clientID;let o;if(n==null)o=new yn([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:o=new yn([n]);break;case Uint8Array:o=new Di(n);break;case Yn:o=new Li(n);break;default:if(n instanceof Lt)o=new Ur(n);else throw new Error("Unexpected content type")}new At(Le(a,Tt(s.store,a)),i,i&&i.lastId,null,null,t,r,o).integrate(e,0)},_o=(e,t)=>{const r=e._map.get(t);return r!==void 0&&!r.deleted?r.content.getContent()[r.length-1]:void 0},_c=e=>{const t={};return e._map.forEach((r,n)=>{r.deleted||(t[n]=r.content.getContent()[r.length-1])}),t},Tc=(e,t)=>{const r=e._map.get(t);return r!==void 0&&!r.deleted},Fi=e=>sy(e.entries(),t=>!t[1].deleted);class Gy extends Vs{constructor(t,r){super(t,r),this._transaction=r}}class On extends Lt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const r=new On;return r.push(t),r}_integrate(t,r){super._integrate(t,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new On}clone(){const t=new On;return t.insert(0,this.toArray().map(r=>r instanceof Lt?r.clone():r)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(t,r){super._callObserver(t,r),qs(this,t,new Gy(this,t))}insert(t,r){this.doc!==null?$e(this.doc,n=>{Sc(n,this,t,r)}):this._prelimContent.splice(t,0,...r)}push(t){this.doc!==null?$e(this.doc,r=>{Ky(r,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,r=1){this.doc!==null?$e(this.doc,n=>{wc(n,this,t,r)}):this._prelimContent.splice(t,r)}get(t){return bc(this,t)}toArray(){return vc(this)}slice(t=0,r=this.length){return yc(this,t,r)}toJSON(){return this.map(t=>t instanceof Lt?t.toJSON():t)}map(t){return Cc(this,t)}forEach(t){Si(this,t)}[Symbol.iterator](){return qy(this)}_write(t){t.writeTypeRef(dv)}}const Qy=e=>new On;class jy extends Vs{constructor(t,r,n){super(t,r),this.keysChanged=n}}class qn extends Lt{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,r){super._integrate(t,r),this._prelimContent.forEach((n,i)=>{this.set(i,n)}),this._prelimContent=null}_copy(){return new qn}clone(){const t=new qn;return this.forEach((r,n)=>{t.set(n,r instanceof Lt?r.clone():r)}),t}_callObserver(t,r){qs(this,t,new jy(this,t,r))}toJSON(){const t={};return this._map.forEach((r,n)=>{if(!r.deleted){const i=r.content.getContent()[r.length-1];t[n]=i instanceof Lt?i.toJSON():i}}),t}get size(){return[...Fi(this._map)].length}keys(){return la(Fi(this._map),t=>t[0])}values(){return la(Fi(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return la(Fi(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this._map.forEach((r,n)=>{r.deleted||t(r.content.getContent()[r.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?$e(this.doc,r=>{hs(r,this,t)}):this._prelimContent.delete(t)}set(t,r){return this.doc!==null?$e(this.doc,n=>{wo(n,this,t,r)}):this._prelimContent.set(t,r),r}get(t){return _o(this,t)}has(t){return Tc(this,t)}clear(){this.doc!==null?$e(this.doc,t=>{this.forEach(function(r,n,i){hs(t,i,n)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(pv)}}const $y=e=>new qn,Kr=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&fA(e,t);class Ba{constructor(t,r,n,i){this.left=t,this.right=r,this.index=n,this.currentAttributes=i}forward(){switch(this.right===null&&Cr(),this.right.content.constructor){case yt:this.right.deleted||Xn(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Vl=(e,t,r)=>{for(;t.right!==null&&r>0;){switch(t.right.content.constructor){case yt:t.right.deleted||Xn(t.currentAttributes,t.right.content);break;default:t.right.deleted||(r<t.right.length&&Xr(e,Le(t.right.id.client,t.right.id.clock+r)),t.index+=t.right.length,r-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Vi=(e,t,r)=>{const n=new Map,i=Hs(t,r);if(i){const s=new Ba(i.p.left,i.p,i.index,n);return Vl(e,s,r-i.index)}else{const s=new Ba(null,t._start,0,n);return Vl(e,s,r)}},xc=(e,t,r,n)=>{for(;r.right!==null&&(r.right.deleted===!0||r.right.content.constructor===yt&&Kr(n.get(r.right.content.key),r.right.content.value));)r.right.deleted||n.delete(r.right.content.key),r.forward();const i=e.doc,s=i.clientID;n.forEach((a,o)=>{const l=r.left,u=r.right,c=new At(Le(s,Tt(i.store,s)),l,l&&l.lastId,u,u&&u.id,t,null,new yt(o,a));c.integrate(e,0),r.right=c,r.forward()})},Xn=(e,t)=>{const{key:r,value:n}=t;n===null?e.delete(r):e.set(r,n)},Ic=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===yt&&Kr(t[e.right.content.key]||null,e.right.content.value)))break;e.forward()}},Bc=(e,t,r,n)=>{const i=e.doc,s=i.clientID,a=new Map;for(const o in n){const l=n[o],u=r.currentAttributes.get(o)||null;if(!Kr(u,l)){a.set(o,u);const{left:c,right:f}=r;r.right=new At(Le(s,Tt(i.store,s)),c,c&&c.lastId,f,f&&f.id,t,null,new yt(o,l)),r.right.integrate(e,0),r.forward()}}return a},ca=(e,t,r,n,i)=>{r.currentAttributes.forEach((d,p)=>{i[p]===void 0&&(i[p]=null)});const s=e.doc,a=s.clientID;Ic(r,i);const o=Bc(e,t,r,i),l=n.constructor===String?new Er(n):n instanceof Lt?new Ur(n):new bn(n);let{left:u,right:c,index:f}=r;t._searchMarker&&Ei(t._searchMarker,r.index,l.getLength()),c=new At(Le(a,Tt(s.store,a)),u,u&&u.lastId,c,c&&c.id,t,null,l),c.integrate(e,0),r.right=c,r.index=f,r.forward(),xc(e,t,r,o)},Hl=(e,t,r,n,i)=>{const s=e.doc,a=s.clientID;Ic(r,i);const o=Bc(e,t,r,i);e:for(;r.right!==null&&(n>0||o.size>0&&(r.right.deleted||r.right.content.constructor===yt));){if(!r.right.deleted)switch(r.right.content.constructor){case yt:{const{key:l,value:u}=r.right.content,c=i[l];if(c!==void 0){if(Kr(c,u))o.delete(l);else{if(n===0)break e;o.set(l,u)}r.right.delete(e)}else r.currentAttributes.set(l,u);break}default:n<r.right.length&&Xr(e,Le(r.right.id.client,r.right.id.clock+n)),n-=r.right.length;break}r.forward()}if(n>0){let l="";for(;n>0;n--)l+=`
`;r.right=new At(Le(a,Tt(s.store,a)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,t,null,new Er(l)),r.right.integrate(e,0),r.forward()}xc(e,t,r,o)},kc=(e,t,r,n,i)=>{let s=r;const a=as(i);for(;s&&(!s.countable||s.deleted);)!s.deleted&&s.content.constructor===yt&&Xn(a,s.content),s=s.right;let o=0,l=!1;for(;t!==s;){if(r===t&&(l=!0),!t.deleted){const u=t.content;switch(u.constructor){case yt:{const{key:c,value:f}=u;((a.get(c)||null)!==f||(n.get(c)||null)===f)&&(t.delete(e),o++,!l&&(i.get(c)||null)===f&&(n.get(c)||null)!==f&&i.delete(c));break}}}t=t.right}return o},zy=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const r=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===yt){const n=t.content.key;r.has(n)?t.delete(e):r.add(n)}t=t.left}},Jy=e=>{let t=0;return $e(e.doc,r=>{let n=e._start,i=e._start,s=mr();const a=as(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case yt:Xn(a,i.content);break;default:t+=kc(r,n,i,s,a),s=as(a),n=i;break}i=i.right}}),t},ql=(e,t,r)=>{const n=r,i=as(t.currentAttributes),s=t.right;for(;r>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case Ur:case bn:case Er:r<t.right.length&&Xr(e,Le(t.right.id.client,t.right.id.clock+r)),r-=t.right.length,t.right.delete(e);break}t.forward()}s&&kc(e,s,t.right,i,t.currentAttributes);const a=(t.left||t.right).parent;return a._searchMarker&&Ei(a._searchMarker,t.index,-n+r),t};class Wy extends Vs{constructor(t,r,n){super(t,r),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,r=[];$e(t,n=>{const i=new Map,s=new Map;let a=this.target._start,o=null;const l={};let u="",c=0,f=0;const d=()=>{if(o!==null){let p;switch(o){case"delete":p={delete:f},f=0;break;case"insert":p={insert:u},i.size>0&&(p.attributes={},i.forEach((g,A)=>{g!==null&&(p.attributes[A]=g)})),u="";break;case"retain":if(p={retain:c},Object.keys(l).length>0){p.attributes={};for(const g in l)p.attributes[g]=l[g]}c=0;break}r.push(p),o=null}};for(;a!==null;){switch(a.content.constructor){case Ur:case bn:this.adds(a)?this.deletes(a)||(d(),o="insert",u=a.content.getContent()[0],d()):this.deletes(a)?(o!=="delete"&&(d(),o="delete"),f+=1):a.deleted||(o!=="retain"&&(d(),o="retain"),c+=1);break;case Er:this.adds(a)?this.deletes(a)||(o!=="insert"&&(d(),o="insert"),u+=a.content.str):this.deletes(a)?(o!=="delete"&&(d(),o="delete"),f+=a.length):a.deleted||(o!=="retain"&&(d(),o="retain"),c+=a.length);break;case yt:{const{key:p,value:g}=a.content;if(this.adds(a)){if(!this.deletes(a)){const A=i.get(p)||null;Kr(A,g)?g!==null&&a.delete(n):(o==="retain"&&d(),Kr(g,s.get(p)||null)?delete l[p]:l[p]=g)}}else if(this.deletes(a)){s.set(p,g);const A=i.get(p)||null;Kr(A,g)||(o==="retain"&&d(),l[p]=A)}else if(!a.deleted){s.set(p,g);const A=l[p];A!==void 0&&(Kr(A,g)?A!==null&&a.delete(n):(o==="retain"&&d(),g===null?delete l[p]:l[p]=g))}a.deleted||(o==="insert"&&d(),Xn(i,a.content));break}}a=a.right}for(d();r.length>0;){const p=r[r.length-1];if(p.retain!==void 0&&p.attributes===void 0)r.pop();else break}}),this._delta=r}return this._delta}}class Kn extends Lt{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(t,r){super._integrate(t,r);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new Kn}clone(){const t=new Kn;return t.applyDelta(this.toDelta()),t}_callObserver(t,r){super._callObserver(t,r);const n=new Wy(this,t,r),i=t.doc;if(qs(this,t,n),!t.local){let s=!1;for(const[a,o]of t.afterState.entries()){const l=t.beforeState.get(a)||0;if(o!==l&&(dc(t,i.store.clients.get(a),l,o,u=>{!u.deleted&&u.content.constructor===yt&&(s=!0)}),s))break}s||Ta(t,t.deleteSet,a=>{a instanceof Jt||s||a.parent===this&&a.content.constructor===yt&&(s=!0)}),$e(i,a=>{s?Jy(this):Ta(a,a.deleteSet,o=>{o instanceof Jt||o.parent===this&&zy(a,o)})})}}toString(){let t="",r=this._start;for(;r!==null;)!r.deleted&&r.countable&&r.content.constructor===Er&&(t+=r.content.str),r=r.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:r=!0}={}){this.doc!==null?$e(this.doc,n=>{const i=new Ba(null,this._start,0,new Map);for(let s=0;s<t.length;s++){const a=t[s];if(a.insert!==void 0){const o=!r&&typeof a.insert=="string"&&s===t.length-1&&i.right===null&&a.insert.slice(-1)===`
`?a.insert.slice(0,-1):a.insert;(typeof o!="string"||o.length>0)&&ca(n,this,i,o,a.attributes||{})}else a.retain!==void 0?Hl(n,this,i,a.retain,a.attributes||{}):a.delete!==void 0&&ql(n,i,a.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,r,n){const i=[],s=new Map,a=this.doc;let o="",l=this._start;function u(){if(o.length>0){const c={};let f=!1;s.forEach((p,g)=>{f=!0,c[g]=p});const d={insert:o};f&&(d.attributes=c),i.push(d),o=""}}return $e(a,c=>{for(t&&xa(c,t),r&&xa(c,r);l!==null;){if(si(l,t)||r!==void 0&&si(l,r))switch(l.content.constructor){case Er:{const f=s.get("ychange");t!==void 0&&!si(l,t)?(f===void 0||f.user!==l.id.client||f.type!=="removed")&&(u(),s.set("ychange",n?n("removed",l.id):{type:"removed"})):r!==void 0&&!si(l,r)?(f===void 0||f.user!==l.id.client||f.type!=="added")&&(u(),s.set("ychange",n?n("added",l.id):{type:"added"})):f!==void 0&&(u(),s.delete("ychange")),o+=l.content.str;break}case Ur:case bn:{u();const f={insert:l.content.getContent()[0]};if(s.size>0){const d={};f.attributes=d,s.forEach((p,g)=>{d[g]=p})}i.push(f);break}case yt:si(l,t)&&(u(),Xn(s,l.content));break}l=l.right}u()},"cleanup"),i}insert(t,r,n){if(r.length<=0)return;const i=this.doc;i!==null?$e(i,s=>{const a=Vi(s,this,t);n||(n={},a.currentAttributes.forEach((o,l)=>{n[l]=o})),ca(s,this,a,r,n)}):this._pending.push(()=>this.insert(t,r,n))}insertEmbed(t,r,n={}){const i=this.doc;i!==null?$e(i,s=>{const a=Vi(s,this,t);ca(s,this,a,r,n)}):this._pending.push(()=>this.insertEmbed(t,r,n))}delete(t,r){if(r===0)return;const n=this.doc;n!==null?$e(n,i=>{ql(i,Vi(i,this,t),r)}):this._pending.push(()=>this.delete(t,r))}format(t,r,n){if(r===0)return;const i=this.doc;i!==null?$e(i,s=>{const a=Vi(s,this,t);a.right!==null&&Hl(s,this,a,r,n)}):this._pending.push(()=>this.format(t,r,n))}removeAttribute(t){this.doc!==null?$e(this.doc,r=>{hs(r,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,r){this.doc!==null?$e(this.doc,n=>{wo(n,this,t,r)}):this._pending.push(()=>this.setAttribute(t,r))}getAttribute(t){return _o(this,t)}getAttributes(t){return _c(this)}_write(t){t.writeTypeRef(gv)}}const Yy=e=>new Kn;class fa{constructor(t,r=()=>!0){this._filter=r,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,r=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(r)))do if(r=t.content.type,!t.deleted&&(r.constructor===wi||r.constructor===An)&&r._start!==null)t=r._start;else for(;t!==null;)if(t.right!==null){t=t.right;break}else t.parent===this._root?t=null:t=t.parent._item;while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class An extends Lt{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,r){super._integrate(t,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new An}clone(){const t=new An;return t.insert(0,this.toArray().map(r=>r instanceof Lt?r.clone():r)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new fa(this,t)}querySelector(t){t=t.toUpperCase();const n=new fa(this,i=>i.nodeName&&i.nodeName.toUpperCase()===t).next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),Array.from(new fa(this,r=>r.nodeName&&r.nodeName.toUpperCase()===t))}_callObserver(t,r){qs(this,t,new ev(this,r,t))}toString(){return Cc(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,r={},n){const i=t.createDocumentFragment();return n!==void 0&&n._createAssociation(i,this),Si(this,s=>{i.insertBefore(s.toDOM(t,r,n),null)}),i}insert(t,r){this.doc!==null?$e(this.doc,n=>{Sc(n,this,t,r)}):this._prelimContent.splice(t,0,...r)}insertAfter(t,r){if(this.doc!==null)$e(this.doc,n=>{const i=t&&t instanceof Lt?t._item:t;fs(n,this,i,r)});else{const n=this._prelimContent,i=t===null?0:n.findIndex(s=>s===t)+1;if(i===0&&t!==null)throw tn("Reference item not found");n.splice(i,0,...r)}}delete(t,r=1){this.doc!==null?$e(this.doc,n=>{wc(n,this,t,r)}):this._prelimContent.splice(t,r)}toArray(){return vc(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return bc(this,t)}slice(t=0,r=this.length){return yc(this,t,r)}forEach(t){Si(this,t)}_write(t){t.writeTypeRef(Av)}}const Xy=e=>new An;class wi extends An{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,r){super._integrate(t,r),this._prelimAttrs.forEach((n,i)=>{this.setAttribute(i,n)}),this._prelimAttrs=null}_copy(){return new wi(this.nodeName)}clone(){const t=new wi(this.nodeName),r=this.getAttributes();for(const n in r)t.setAttribute(n,r[n]);return t.insert(0,this.toArray().map(n=>n instanceof Lt?n.clone():n)),t}toString(){const t=this.getAttributes(),r=[],n=[];for(const o in t)n.push(o);n.sort();const i=n.length;for(let o=0;o<i;o++){const l=n[o];r.push(l+'="'+t[l]+'"')}const s=this.nodeName.toLocaleLowerCase(),a=r.length>0?" "+r.join(" "):"";return`<${s}${a}>${super.toString()}</${s}>`}removeAttribute(t){this.doc!==null?$e(this.doc,r=>{hs(r,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,r){this.doc!==null?$e(this.doc,n=>{wo(n,this,t,r)}):this._prelimAttrs.set(t,r)}getAttribute(t){return _o(this,t)}hasAttribute(t){return Tc(this,t)}getAttributes(){return _c(this)}toDOM(t=document,r={},n){const i=t.createElement(this.nodeName),s=this.getAttributes();for(const a in s)i.setAttribute(a,s[a]);return Si(this,a=>{i.appendChild(a.toDOM(t,r,n))}),n!==void 0&&n._createAssociation(i,this),i}_write(t){t.writeTypeRef(mv),t.writeKey(this.nodeName)}}const Zy=e=>new wi(e.readKey());class ev extends Vs{constructor(t,r,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class ds extends qn{constructor(t){super(),this.hookName=t}_copy(){return new ds(this.hookName)}clone(){const t=new ds(this.hookName);return this.forEach((r,n)=>{t.set(n,r)}),t}toDOM(t=document,r={},n){const i=r[this.hookName];let s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(s,this),s}_write(t){t.writeTypeRef(yv),t.writeKey(this.hookName)}}const tv=e=>new ds(e.readKey());class ps extends Kn{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new ps}clone(){const t=new ps;return t.applyDelta(this.toDelta()),t}toDOM(t=document,r,n){const i=t.createTextNode(this.toString());return n!==void 0&&n._createAssociation(i,this),i}toString(){return this.toDelta().map(t=>{const r=[];for(const i in t.attributes){const s=[];for(const a in t.attributes[i])s.push({key:a,value:t.attributes[i][a]});s.sort((a,o)=>a.key<o.key?-1:1),r.push({nodeName:i,attrs:s})}r.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let n="";for(let i=0;i<r.length;i++){const s=r[i];n+=`<${s.nodeName}`;for(let a=0;a<s.attrs.length;a++){const o=s.attrs[a];n+=` ${o.key}="${o.value}"`}n+=">"}n+=t.insert;for(let i=r.length-1;i>=0;i--)n+=`</${r[i].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(vv)}}const rv=e=>new ps;class To{constructor(t,r){this.id=t,this.length=r}get deleted(){throw Ar()}mergeWith(t){return!1}write(t,r,n){throw Ar()}integrate(t,r){throw Ar()}}const nv=0;class Jt extends To{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,r){r>0&&(this.id.clock+=r,this.length-=r),hc(t.doc.store,this)}write(t,r){t.writeInfo(nv),t.writeLen(this.length-r)}getMissing(t,r){return null}}class Di{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Di(this.content)}splice(t){throw Ar()}mergeWith(t){return!1}integrate(t,r){}delete(t){}gc(t){}write(t,r){t.writeBuf(this.content)}getRef(){return 3}}const iv=e=>new Di(e.readBuf());class _i{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new _i(this.len)}splice(t){const r=new _i(this.len-t);return this.len=t,r}mergeWith(t){return this.len+=t.len,!0}integrate(t,r){us(t.deleteSet,r.id.client,r.id.clock,this.len),r.markDeleted()}delete(t){}gc(t){}write(t,r){t.writeLen(this.len-r)}getRef(){return 1}}const sv=e=>new _i(e.readLen()),Rc=(e,t)=>new Yn({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class Li{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const r={};this.opts=r,t.gc||(r.gc=!1),t.autoLoad&&(r.autoLoad=!0),t.meta!==null&&(r.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Li(Rc(this.doc.guid,this.opts))}splice(t){throw Ar()}mergeWith(t){return!1}integrate(t,r){this.doc._item=r,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,r){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const av=e=>new Li(Rc(e.readString(),e.readAny()));class bn{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new bn(this.embed)}splice(t){throw Ar()}mergeWith(t){return!1}integrate(t,r){}delete(t){}gc(t){}write(t,r){t.writeJSON(this.embed)}getRef(){return 5}}const ov=e=>new bn(e.readJSON());class yt{constructor(t,r){this.key=t,this.value=r}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new yt(this.key,this.value)}splice(t){throw Ar()}mergeWith(t){return!1}integrate(t,r){r.parent._searchMarker=null}delete(t){}gc(t){}write(t,r){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const lv=e=>new yt(e.readKey(),e.readJSON());class gs{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new gs(this.arr)}splice(t){const r=new gs(this.arr.slice(t));return this.arr=this.arr.slice(0,t),r}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,r){}delete(t){}gc(t){}write(t,r){const n=this.arr.length;t.writeLen(n-r);for(let i=r;i<n;i++){const s=this.arr[i];t.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const uv=e=>{const t=e.readLen(),r=[];for(let n=0;n<t;n++){const i=e.readString();i==="undefined"?r.push(void 0):r.push(JSON.parse(i))}return new gs(r)};class yn{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new yn(this.arr)}splice(t){const r=new yn(this.arr.slice(t));return this.arr=this.arr.slice(0,t),r}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,r){}delete(t){}gc(t){}write(t,r){const n=this.arr.length;t.writeLen(n-r);for(let i=r;i<n;i++){const s=this.arr[i];t.writeAny(s)}}getRef(){return 8}}const cv=e=>{const t=e.readLen(),r=[];for(let n=0;n<t;n++)r.push(e.readAny());return new yn(r)};class Er{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Er(this.str)}splice(t){const r=new Er(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"\uFFFD",r.str="\uFFFD"+r.str.slice(1)),r}mergeWith(t){return this.str+=t.str,!0}integrate(t,r){}delete(t){}gc(t){}write(t,r){t.writeString(r===0?this.str:this.str.slice(r))}getRef(){return 4}}const fv=e=>new Er(e.readString()),hv=[Qy,$y,Yy,Zy,Xy,tv,rv],dv=0,pv=1,gv=2,mv=3,Av=4,yv=5,vv=6;class Ur{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Ur(this.type._copy())}splice(t){throw Ar()}mergeWith(t){return!1}integrate(t,r){this.type._integrate(t.doc,r)}delete(t){let r=this.type._start;for(;r!==null;)r.deleted?t._mergeStructs.push(r):r.delete(t),r=r.right;this.type._map.forEach(n=>{n.deleted?t._mergeStructs.push(n):n.delete(t)}),t.changed.delete(this.type)}gc(t){let r=this.type._start;for(;r!==null;)r.gc(t,!0),r=r.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(t,!0),n=n.left}),this.type._map=new Map}write(t,r){this.type._write(t)}getRef(){return 7}}const Cv=e=>new Ur(hv[e.readTypeRef()](e));const ms=(e,t,r)=>{const{client:n,clock:i}=t.id,s=new At(Le(n,i+r),t,Le(n,i+r-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(r));return t.deleted&&s.markDeleted(),t.keep&&(s.keep=!0),t.redone!==null&&(s.redone=Le(t.redone.client,t.redone.clock+r)),t.right=s,s.right!==null&&(s.right.left=s),e._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),t.length=r,s};class At extends To{constructor(t,r,n,i,s,a,o,l){super(t,l.getLength()),this.origin=n,this.left=r,this.right=i,this.rightOrigin=s,this.parent=a,this.parentSub=o,this.redone=null,this.content=l,this.info=this.content.isCountable()?wl:0}set marker(t){(this.info&ia)>0!==t&&(this.info^=ia)}get marker(){return(this.info&ia)>0}get keep(){return(this.info&Sl)>0}set keep(t){this.keep!==t&&(this.info^=Sl)}get countable(){return(this.info&wl)>0}get deleted(){return(this.info&na)>0}set deleted(t){this.deleted!==t&&(this.info^=na)}markDeleted(){this.info|=na}getMissing(t,r){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Tt(r,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Tt(r,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Mn&&this.id.client!==this.parent.client&&this.parent.clock>=Tt(r,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Ul(t,r,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Xr(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===Jt||this.right&&this.right.constructor===Jt)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===At&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===At&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Mn){const n=ua(r,this.parent);n.constructor===Jt?this.parent=null:this.parent=n.content.type}return null}integrate(t,r){if(r>0&&(this.id.clock+=r,this.left=Ul(t,t.doc.store,Le(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(r),this.length-=r),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,i;if(n!==null)i=n.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,a=new Set;for(;i!==null&&i!==this.right;){if(a.add(i),s.add(i),Pi(this.origin,i.origin)){if(i.id.client<this.id.client)n=i,s.clear();else if(Pi(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&a.has(ua(t.doc.store,i.origin)))s.has(ua(t.doc.store,i.origin))||(n=i,s.clear());else break;i=i.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),hc(t.doc.store,this),this.content.integrate(t,this),Fl(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new Jt(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:Le(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Pi(t.origin,this.lastId)&&this.right===t&&Pi(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const r=this.parent._searchMarker;return r&&r.forEach(n=>{n.p===t&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const r=this.parent;this.countable&&this.parentSub===null&&(r._length-=this.length),this.markDeleted(),us(t.deleteSet,this.id.client,this.id.clock,this.length),Fl(t,r,this.parentSub),this.content.delete(t)}}gc(t,r){if(!this.deleted)throw Cr();this.content.gc(t),r?Iy(t,this,new Jt(this.id,this.length)):this.content=new _i(this.length)}write(t,r){const n=r>0?Le(this.id.client,this.id.clock+r-1):this.origin,i=this.rightOrigin,s=this.parentSub,a=this.content.getRef()&Ns|(n===null?0:Qt)|(i===null?0:kr)|(s===null?0:Ci);if(t.writeInfo(a),n!==null&&t.writeLeftID(n),i!==null&&t.writeRightID(i),n===null&&i===null){const o=this.parent;if(o._item!==void 0){const l=o._item;if(l===null){const u=wy(o);t.writeParentInfo(!0),t.writeString(u)}else t.writeParentInfo(!1),t.writeLeftID(l.id)}else o.constructor===String?(t.writeParentInfo(!0),t.writeString(o)):o.constructor===Mn?(t.writeParentInfo(!1),t.writeLeftID(o)):Cr();s!==null&&t.writeString(s)}this.content.write(t,r)}}const Dc=(e,t)=>bv[t&Ns](e),bv=[()=>{Cr()},sv,uv,iv,fv,ov,lv,Cv,cv,av,()=>{Cr()}],Ev=10;class Wt extends To{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,r){Cr()}write(t,r){t.writeInfo(Ev),he(t.restEncoder,this.length-r)}getMissing(t,r){return null}}const Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Nc="__ $YJS$ __";Lc[Nc]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Lc[Nc]=!0;const Sv=1200,wv=2500,As=3e4,ka=e=>{if(e.shouldConnect&&e.ws===null){const t=new WebSocket(e.url),r=e.binaryType;let n=null;r&&(t.binaryType=r),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=a=>{e.lastMessageReceived=Lr();const o=a.data,l=typeof o=="string"?JSON.parse(o):o;l&&l.type==="pong"&&(clearTimeout(n),n=setTimeout(s,As/2)),e.emit("message",[l,e])};const i=a=>{e.ws!==null&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:a},e])):e.unsuccessfulReconnects++,setTimeout(ka,no(Zm(e.unsuccessfulReconnects+1)*Sv,wv),e)),clearTimeout(n)},s=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>i(null),t.onerror=a=>i(a),t.onopen=()=>{e.lastMessageReceived=Lr(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),n=setTimeout(s,As/2)}}};class _v extends Ls{constructor(t,{binaryType:r}={}){super(),this.url=t,this.ws=null,this.binaryType=r||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&As<Lr()-this.lastMessageReceived&&this.ws.close()},As/2),ka(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&ka(this)}}const Tv=new Map;class xv{constructor(t){this.room=t,this.onmessage=null,lA(r=>r.key===t&&this.onmessage!==null&&this.onmessage({data:zu(r.newValue||"")}))}postMessage(t){Vu.setItem(this.room,$u(BA(t)))}}const Iv=typeof BroadcastChannel>"u"?xv:BroadcastChannel,xo=e=>tr(Tv,e,()=>{const t=new Set,r=new Iv(e);return r.onmessage=n=>t.forEach(i=>i(n.data,"broadcastchannel")),{bc:r,subs:t}}),Bv=(e,t)=>xo(e).subs.add(t),kv=(e,t)=>xo(e).subs.delete(t),Rv=(e,t,r=null)=>{const n=xo(e);n.bc.postMessage(t),n.subs.forEach(i=>i(t,r))},Dv=()=>{let e=!0;return(t,r)=>{if(e){e=!1;try{t()}finally{e=!0}}else r!==void 0&&r()}};function Hi(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mc={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){var r=Math.floor,n=Math.abs,i=Math.pow;return function(){function s(a,o,l){function u(d,p){if(!o[d]){if(!a[d]){var g=typeof Hi=="function"&&Hi;if(!p&&g)return g(d,!0);if(c)return c(d,!0);var A=new Error("Cannot find module '"+d+"'");throw A.code="MODULE_NOT_FOUND",A}var _=o[d]={exports:{}};a[d][0].call(_.exports,function(T){var k=a[d][1][T];return u(k||T)},_,_.exports,s,a,o,l)}return o[d].exports}for(var c=typeof Hi=="function"&&Hi,f=0;f<l.length;f++)u(l[f]);return u}return s}()({1:[function(s,a,o){function l(w){var S=w.length;if(0<S%4)throw new Error("Invalid string. Length must be a multiple of 4");var x=w.indexOf("=");x===-1&&(x=S);var I=x===S?0:4-x%4;return[x,I]}function u(w,S,x){return 3*(S+x)/4-x}function c(w){var S,x,I=l(w),U=I[0],H=I[1],D=new _(u(w,U,H)),M=0,q=0<H?U-4:U;for(x=0;x<q;x+=4)S=A[w.charCodeAt(x)]<<18|A[w.charCodeAt(x+1)]<<12|A[w.charCodeAt(x+2)]<<6|A[w.charCodeAt(x+3)],D[M++]=255&S>>16,D[M++]=255&S>>8,D[M++]=255&S;return H===2&&(S=A[w.charCodeAt(x)]<<2|A[w.charCodeAt(x+1)]>>4,D[M++]=255&S),H===1&&(S=A[w.charCodeAt(x)]<<10|A[w.charCodeAt(x+1)]<<4|A[w.charCodeAt(x+2)]>>2,D[M++]=255&S>>8,D[M++]=255&S),D}function f(w){return g[63&w>>18]+g[63&w>>12]+g[63&w>>6]+g[63&w]}function d(w,S,x){for(var I,U=[],H=S;H<x;H+=3)I=(16711680&w[H]<<16)+(65280&w[H+1]<<8)+(255&w[H+2]),U.push(f(I));return U.join("")}function p(w){for(var S,x=w.length,I=x%3,U=[],H=16383,D=0,M=x-I;D<M;D+=H)U.push(d(w,D,D+H>M?M:D+H));return I===1?(S=w[x-1],U.push(g[S>>2]+g[63&S<<4]+"==")):I===2&&(S=(w[x-2]<<8)+w[x-1],U.push(g[S>>10]+g[63&S>>4]+g[63&S<<2]+"=")),U.join("")}o.byteLength=function(w){var S=l(w),x=S[0],I=S[1];return 3*(x+I)/4-I},o.toByteArray=c,o.fromByteArray=p;for(var g=[],A=[],_=typeof Uint8Array>"u"?Array:Uint8Array,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=0,y=T.length;k<y;++k)g[k]=T[k],A[T.charCodeAt(k)]=k;A[45]=62,A[95]=63},{}],2:[function(){},{}],3:[function(s,a,o){(function(){(function(){var l=String.fromCharCode,u=Math.min;function c(h){if(2147483647<h)throw new RangeError('The value "'+h+'" is invalid for option "size"');var m=new Uint8Array(h);return m.__proto__=f.prototype,m}function f(h,m,v){if(typeof h=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(h)}return d(h,m,v)}function d(h,m,v){if(typeof h=="string")return _(h,m);if(ArrayBuffer.isView(h))return T(h);if(h==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(P(h,ArrayBuffer)||h&&P(h.buffer,ArrayBuffer))return k(h,m,v);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var N=h.valueOf&&h.valueOf();if(N!=null&&N!==h)return f.from(N,m,v);var F=y(h);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return f.from(h[Symbol.toPrimitive]("string"),m,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}function p(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(0>h)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function g(h,m,v){return p(h),0>=h||m===void 0?c(h):typeof v=="string"?c(h).fill(m,v):c(h).fill(m)}function A(h){return p(h),c(0>h?0:0|w(h))}function _(h,m){if((typeof m!="string"||m==="")&&(m="utf8"),!f.isEncoding(m))throw new TypeError("Unknown encoding: "+m);var v=0|S(h,m),N=c(v),F=N.write(h,m);return F!==v&&(N=N.slice(0,F)),N}function T(h){for(var m=0>h.length?0:0|w(h.length),v=c(m),N=0;N<m;N+=1)v[N]=255&h[N];return v}function k(h,m,v){if(0>m||h.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<m+(v||0))throw new RangeError('"length" is outside of buffer bounds');var N;return N=m===void 0&&v===void 0?new Uint8Array(h):v===void 0?new Uint8Array(h,m):new Uint8Array(h,m,v),N.__proto__=f.prototype,N}function y(h){if(f.isBuffer(h)){var m=0|w(h.length),v=c(m);return v.length===0||h.copy(v,0,0,m),v}return h.length===void 0?h.type==="Buffer"&&Array.isArray(h.data)?T(h.data):void 0:typeof h.length!="number"||G(h.length)?c(0):T(h)}function w(h){if(h>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|h}function S(h,m){if(f.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||P(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);var v=h.length,N=2<arguments.length&&arguments[2]===!0;if(!N&&v===0)return 0;for(var F=!1;;)switch(m){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return it(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*v;case"hex":return v>>>1;case"base64":return qe(h).length;default:if(F)return N?-1:it(h).length;m=(""+m).toLowerCase(),F=!0}}function x(h,m,v){var N=!1;if((m===void 0||0>m)&&(m=0),m>this.length||((v===void 0||v>this.length)&&(v=this.length),0>=v)||(v>>>=0,m>>>=0,v<=m))return"";for(h||(h="utf8");;)switch(h){case"hex":return Ue(this,m,v);case"utf8":case"utf-8":return te(this,m,v);case"ascii":return pe(this,m,v);case"latin1":case"binary":return Ge(this,m,v);case"base64":return ue(this,m,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ve(this,m,v);default:if(N)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),N=!0}}function I(h,m,v){var N=h[m];h[m]=h[v],h[v]=N}function U(h,m,v,N,F){if(h.length===0)return-1;if(typeof v=="string"?(N=v,v=0):2147483647<v?v=2147483647:-2147483648>v&&(v=-2147483648),v=+v,G(v)&&(v=F?0:h.length-1),0>v&&(v=h.length+v),v>=h.length){if(F)return-1;v=h.length-1}else if(0>v)if(F)v=0;else return-1;if(typeof m=="string"&&(m=f.from(m,N)),f.isBuffer(m))return m.length===0?-1:H(h,m,v,N,F);if(typeof m=="number")return m&=255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(h,m,v):Uint8Array.prototype.lastIndexOf.call(h,m,v):H(h,[m],v,N,F);throw new TypeError("val must be string, number or Buffer")}function H(h,m,v,N,F){function Q(wn,ni){return le===1?wn[ni]:wn.readUInt16BE(ni*le)}var le=1,ke=h.length,st=m.length;if(N!==void 0&&(N=(N+"").toLowerCase(),N==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(2>h.length||2>m.length)return-1;le=2,ke/=2,st/=2,v/=2}var Re;if(F){var Te=-1;for(Re=v;Re<ke;Re++)if(Q(h,Re)!==Q(m,Te===-1?0:Re-Te))Te!==-1&&(Re-=Re-Te),Te=-1;else if(Te===-1&&(Te=Re),Re-Te+1===st)return Te*le}else for(v+st>ke&&(v=ke-st),Re=v;0<=Re;Re--){for(var It=!0,rn=0;rn<st;rn++)if(Q(h,Re+rn)!==Q(m,rn)){It=!1;break}if(It)return Re}return-1}function D(h,m,v,N){v=+v||0;var F=h.length-v;N?(N=+N,N>F&&(N=F)):N=F;var Q=m.length;N>Q/2&&(N=Q/2);for(var le,ke=0;ke<N;++ke){if(le=parseInt(m.substr(2*ke,2),16),G(le))return ke;h[v+ke]=le}return ke}function M(h,m,v,N){return Ke(it(m,h.length-v),h,v,N)}function q(h,m,v,N){return Ke(dt(m),h,v,N)}function K(h,m,v,N){return q(h,m,v,N)}function ie(h,m,v,N){return Ke(qe(m),h,v,N)}function X(h,m,v,N){return Ke(Ze(m,h.length-v),h,v,N)}function ue(h,m,v){return m===0&&v===h.length?Y.fromByteArray(h):Y.fromByteArray(h.slice(m,v))}function te(h,m,v){v=u(h.length,v);for(var N=[],F=m;F<v;){var Q=h[F],le=null,ke=239<Q?4:223<Q?3:191<Q?2:1;if(F+ke<=v){var st,Re,Te,It;ke===1?128>Q&&(le=Q):ke===2?(st=h[F+1],(192&st)==128&&(It=(31&Q)<<6|63&st,127<It&&(le=It))):ke===3?(st=h[F+1],Re=h[F+2],(192&st)==128&&(192&Re)==128&&(It=(15&Q)<<12|(63&st)<<6|63&Re,2047<It&&(55296>It||57343<It)&&(le=It))):ke===4&&(st=h[F+1],Re=h[F+2],Te=h[F+3],(192&st)==128&&(192&Re)==128&&(192&Te)==128&&(It=(15&Q)<<18|(63&st)<<12|(63&Re)<<6|63&Te,65535<It&&1114112>It&&(le=It)))}le===null?(le=65533,ke=1):65535<le&&(le-=65536,N.push(55296|1023&le>>>10),le=56320|1023&le),N.push(le),F+=ke}return ft(N)}function ft(h){var m=h.length;if(m<=4096)return l.apply(String,h);for(var v="",N=0;N<m;)v+=l.apply(String,h.slice(N,N+=4096));return v}function pe(h,m,v){var N="";v=u(h.length,v);for(var F=m;F<v;++F)N+=l(127&h[F]);return N}function Ge(h,m,v){var N="";v=u(h.length,v);for(var F=m;F<v;++F)N+=l(h[F]);return N}function Ue(h,m,v){var N=h.length;(!m||0>m)&&(m=0),(!v||0>v||v>N)&&(v=N);for(var F="",Q=m;Q<v;++Q)F+=nt(h[Q]);return F}function Ve(h,m,v){for(var N=h.slice(m,v),F="",Q=0;Q<N.length;Q+=2)F+=l(N[Q]+256*N[Q+1]);return F}function we(h,m,v){if(h%1!=0||0>h)throw new RangeError("offset is not uint");if(h+m>v)throw new RangeError("Trying to access beyond buffer length")}function Ae(h,m,v,N,F,Q){if(!f.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>F||m<Q)throw new RangeError('"value" argument is out of bounds');if(v+N>h.length)throw new RangeError("Index out of range")}function He(h,m,v,N){if(v+N>h.length)throw new RangeError("Index out of range");if(0>v)throw new RangeError("Index out of range")}function Ye(h,m,v,N,F){return m=+m,v>>>=0,F||He(h,m,v,4),ce.write(h,m,v,N,23,4),v+4}function Xe(h,m,v,N,F){return m=+m,v>>>=0,F||He(h,m,v,8),ce.write(h,m,v,N,52,8),v+8}function ht(h){if(h=h.split("=")[0],h=h.trim().replace(B,""),2>h.length)return"";for(;h.length%4!=0;)h+="=";return h}function nt(h){return 16>h?"0"+h.toString(16):h.toString(16)}function it(h,m){m=m||1/0;for(var v,N=h.length,F=null,Q=[],le=0;le<N;++le){if(v=h.charCodeAt(le),55295<v&&57344>v){if(!F){if(56319<v){-1<(m-=3)&&Q.push(239,191,189);continue}else if(le+1===N){-1<(m-=3)&&Q.push(239,191,189);continue}F=v;continue}if(56320>v){-1<(m-=3)&&Q.push(239,191,189),F=v;continue}v=(F-55296<<10|v-56320)+65536}else F&&-1<(m-=3)&&Q.push(239,191,189);if(F=null,128>v){if(0>(m-=1))break;Q.push(v)}else if(2048>v){if(0>(m-=2))break;Q.push(192|v>>6,128|63&v)}else if(65536>v){if(0>(m-=3))break;Q.push(224|v>>12,128|63&v>>6,128|63&v)}else if(1114112>v){if(0>(m-=4))break;Q.push(240|v>>18,128|63&v>>12,128|63&v>>6,128|63&v)}else throw new Error("Invalid code point")}return Q}function dt(h){for(var m=[],v=0;v<h.length;++v)m.push(255&h.charCodeAt(v));return m}function Ze(h,m){for(var v,N,F,Q=[],le=0;le<h.length&&!(0>(m-=2));++le)v=h.charCodeAt(le),N=v>>8,F=v%256,Q.push(F),Q.push(N);return Q}function qe(h){return Y.toByteArray(ht(h))}function Ke(h,m,v,N){for(var F=0;F<N&&!(F+v>=m.length||F>=h.length);++F)m[F+v]=h[F];return F}function P(h,m){return h instanceof m||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===m.name}function G(h){return h!==h}var Y=s("base64-js"),ce=s("ieee754");o.Buffer=f,o.SlowBuffer=function(h){return+h!=h&&(h=0),f.alloc(+h)},o.INSPECT_MAX_BYTES=50,o.kMaxLength=2147483647,f.TYPED_ARRAY_SUPPORT=function(){try{var h=new Uint8Array(1);return h.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},h.foo()===42}catch{return!1}}(),f.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){return f.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){return f.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=function(h,m,v){return d(h,m,v)},f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(h,m,v){return g(h,m,v)},f.allocUnsafe=function(h){return A(h)},f.allocUnsafeSlow=function(h){return A(h)},f.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==f.prototype},f.compare=function(h,m){if(P(h,Uint8Array)&&(h=f.from(h,h.offset,h.byteLength)),P(m,Uint8Array)&&(m=f.from(m,m.offset,m.byteLength)),!f.isBuffer(h)||!f.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===m)return 0;for(var v=h.length,N=m.length,F=0,Q=u(v,N);F<Q;++F)if(h[F]!==m[F]){v=h[F],N=m[F];break}return v<N?-1:N<v?1:0},f.isEncoding=function(h){switch((h+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(h,m){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return f.alloc(0);var v;if(m===void 0)for(m=0,v=0;v<h.length;++v)m+=h[v].length;var N=f.allocUnsafe(m),F=0;for(v=0;v<h.length;++v){var Q=h[v];if(P(Q,Uint8Array)&&(Q=f.from(Q)),!f.isBuffer(Q))throw new TypeError('"list" argument must be an Array of Buffers');Q.copy(N,F),F+=Q.length}return N},f.byteLength=S,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var h=this.length;if(h%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<h;m+=2)I(this,m,m+1);return this},f.prototype.swap32=function(){var h=this.length;if(h%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<h;m+=4)I(this,m,m+3),I(this,m+1,m+2);return this},f.prototype.swap64=function(){var h=this.length;if(h%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<h;m+=8)I(this,m,m+7),I(this,m+1,m+6),I(this,m+2,m+5),I(this,m+3,m+4);return this},f.prototype.toString=function(){var h=this.length;return h===0?"":arguments.length===0?te(this,0,h):x.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(h){if(!f.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h||f.compare(this,h)===0},f.prototype.inspect=function(){var h="",m=o.INSPECT_MAX_BYTES;return h=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(h+=" ... "),"<Buffer "+h+">"},f.prototype.compare=function(h,m,v,N,F){if(P(h,Uint8Array)&&(h=f.from(h,h.offset,h.byteLength)),!f.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(m===void 0&&(m=0),v===void 0&&(v=h?h.length:0),N===void 0&&(N=0),F===void 0&&(F=this.length),0>m||v>h.length||0>N||F>this.length)throw new RangeError("out of range index");if(N>=F&&m>=v)return 0;if(N>=F)return-1;if(m>=v)return 1;if(m>>>=0,v>>>=0,N>>>=0,F>>>=0,this===h)return 0;for(var Q=F-N,le=v-m,ke=u(Q,le),st=this.slice(N,F),Re=h.slice(m,v),Te=0;Te<ke;++Te)if(st[Te]!==Re[Te]){Q=st[Te],le=Re[Te];break}return Q<le?-1:le<Q?1:0},f.prototype.includes=function(h,m,v){return this.indexOf(h,m,v)!==-1},f.prototype.indexOf=function(h,m,v){return U(this,h,m,v,!0)},f.prototype.lastIndexOf=function(h,m,v){return U(this,h,m,v,!1)},f.prototype.write=function(h,m,v,N){if(m===void 0)N="utf8",v=this.length,m=0;else if(v===void 0&&typeof m=="string")N=m,v=this.length,m=0;else if(isFinite(m))m>>>=0,isFinite(v)?(v>>>=0,N===void 0&&(N="utf8")):(N=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var F=this.length-m;if((v===void 0||v>F)&&(v=F),0<h.length&&(0>v||0>m)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");for(var Q=!1;;)switch(N){case"hex":return D(this,h,m,v);case"utf8":case"utf-8":return M(this,h,m,v);case"ascii":return q(this,h,m,v);case"latin1":case"binary":return K(this,h,m,v);case"base64":return ie(this,h,m,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,h,m,v);default:if(Q)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),Q=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(h,m){var v=this.length;h=~~h,m=m===void 0?v:~~m,0>h?(h+=v,0>h&&(h=0)):h>v&&(h=v),0>m?(m+=v,0>m&&(m=0)):m>v&&(m=v),m<h&&(m=h);var N=this.subarray(h,m);return N.__proto__=f.prototype,N},f.prototype.readUIntLE=function(h,m,v){h>>>=0,m>>>=0,v||we(h,m,this.length);for(var N=this[h],F=1,Q=0;++Q<m&&(F*=256);)N+=this[h+Q]*F;return N},f.prototype.readUIntBE=function(h,m,v){h>>>=0,m>>>=0,v||we(h,m,this.length);for(var N=this[h+--m],F=1;0<m&&(F*=256);)N+=this[h+--m]*F;return N},f.prototype.readUInt8=function(h,m){return h>>>=0,m||we(h,1,this.length),this[h]},f.prototype.readUInt16LE=function(h,m){return h>>>=0,m||we(h,2,this.length),this[h]|this[h+1]<<8},f.prototype.readUInt16BE=function(h,m){return h>>>=0,m||we(h,2,this.length),this[h]<<8|this[h+1]},f.prototype.readUInt32LE=function(h,m){return h>>>=0,m||we(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+16777216*this[h+3]},f.prototype.readUInt32BE=function(h,m){return h>>>=0,m||we(h,4,this.length),16777216*this[h]+(this[h+1]<<16|this[h+2]<<8|this[h+3])},f.prototype.readIntLE=function(h,m,v){h>>>=0,m>>>=0,v||we(h,m,this.length);for(var N=this[h],F=1,Q=0;++Q<m&&(F*=256);)N+=this[h+Q]*F;return F*=128,N>=F&&(N-=i(2,8*m)),N},f.prototype.readIntBE=function(h,m,v){h>>>=0,m>>>=0,v||we(h,m,this.length);for(var N=m,F=1,Q=this[h+--N];0<N&&(F*=256);)Q+=this[h+--N]*F;return F*=128,Q>=F&&(Q-=i(2,8*m)),Q},f.prototype.readInt8=function(h,m){return h>>>=0,m||we(h,1,this.length),128&this[h]?-1*(255-this[h]+1):this[h]},f.prototype.readInt16LE=function(h,m){h>>>=0,m||we(h,2,this.length);var v=this[h]|this[h+1]<<8;return 32768&v?4294901760|v:v},f.prototype.readInt16BE=function(h,m){h>>>=0,m||we(h,2,this.length);var v=this[h+1]|this[h]<<8;return 32768&v?4294901760|v:v},f.prototype.readInt32LE=function(h,m){return h>>>=0,m||we(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},f.prototype.readInt32BE=function(h,m){return h>>>=0,m||we(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},f.prototype.readFloatLE=function(h,m){return h>>>=0,m||we(h,4,this.length),ce.read(this,h,!0,23,4)},f.prototype.readFloatBE=function(h,m){return h>>>=0,m||we(h,4,this.length),ce.read(this,h,!1,23,4)},f.prototype.readDoubleLE=function(h,m){return h>>>=0,m||we(h,8,this.length),ce.read(this,h,!0,52,8)},f.prototype.readDoubleBE=function(h,m){return h>>>=0,m||we(h,8,this.length),ce.read(this,h,!1,52,8)},f.prototype.writeUIntLE=function(h,m,v,N){if(h=+h,m>>>=0,v>>>=0,!N){var F=i(2,8*v)-1;Ae(this,h,m,v,F,0)}var Q=1,le=0;for(this[m]=255&h;++le<v&&(Q*=256);)this[m+le]=255&h/Q;return m+v},f.prototype.writeUIntBE=function(h,m,v,N){if(h=+h,m>>>=0,v>>>=0,!N){var F=i(2,8*v)-1;Ae(this,h,m,v,F,0)}var Q=v-1,le=1;for(this[m+Q]=255&h;0<=--Q&&(le*=256);)this[m+Q]=255&h/le;return m+v},f.prototype.writeUInt8=function(h,m,v){return h=+h,m>>>=0,v||Ae(this,h,m,1,255,0),this[m]=255&h,m+1},f.prototype.writeUInt16LE=function(h,m,v){return h=+h,m>>>=0,v||Ae(this,h,m,2,65535,0),this[m]=255&h,this[m+1]=h>>>8,m+2},f.prototype.writeUInt16BE=function(h,m,v){return h=+h,m>>>=0,v||Ae(this,h,m,2,65535,0),this[m]=h>>>8,this[m+1]=255&h,m+2},f.prototype.writeUInt32LE=function(h,m,v){return h=+h,m>>>=0,v||Ae(this,h,m,4,4294967295,0),this[m+3]=h>>>24,this[m+2]=h>>>16,this[m+1]=h>>>8,this[m]=255&h,m+4},f.prototype.writeUInt32BE=function(h,m,v){return h=+h,m>>>=0,v||Ae(this,h,m,4,4294967295,0),this[m]=h>>>24,this[m+1]=h>>>16,this[m+2]=h>>>8,this[m+3]=255&h,m+4},f.prototype.writeIntLE=function(h,m,v,N){if(h=+h,m>>>=0,!N){var F=i(2,8*v-1);Ae(this,h,m,v,F-1,-F)}var Q=0,le=1,ke=0;for(this[m]=255&h;++Q<v&&(le*=256);)0>h&&ke===0&&this[m+Q-1]!==0&&(ke=1),this[m+Q]=255&(h/le>>0)-ke;return m+v},f.prototype.writeIntBE=function(h,m,v,N){if(h=+h,m>>>=0,!N){var F=i(2,8*v-1);Ae(this,h,m,v,F-1,-F)}var Q=v-1,le=1,ke=0;for(this[m+Q]=255&h;0<=--Q&&(le*=256);)0>h&&ke===0&&this[m+Q+1]!==0&&(ke=1),this[m+Q]=255&(h/le>>0)-ke;return m+v},f.prototype.writeInt8=function(h,m,v){return h=+h,m>>>=0,v||Ae(this,h,m,1,127,-128),0>h&&(h=255+h+1),this[m]=255&h,m+1},f.prototype.writeInt16LE=function(h,m,v){return h=+h,m>>>=0,v||Ae(this,h,m,2,32767,-32768),this[m]=255&h,this[m+1]=h>>>8,m+2},f.prototype.writeInt16BE=function(h,m,v){return h=+h,m>>>=0,v||Ae(this,h,m,2,32767,-32768),this[m]=h>>>8,this[m+1]=255&h,m+2},f.prototype.writeInt32LE=function(h,m,v){return h=+h,m>>>=0,v||Ae(this,h,m,4,2147483647,-2147483648),this[m]=255&h,this[m+1]=h>>>8,this[m+2]=h>>>16,this[m+3]=h>>>24,m+4},f.prototype.writeInt32BE=function(h,m,v){return h=+h,m>>>=0,v||Ae(this,h,m,4,2147483647,-2147483648),0>h&&(h=4294967295+h+1),this[m]=h>>>24,this[m+1]=h>>>16,this[m+2]=h>>>8,this[m+3]=255&h,m+4},f.prototype.writeFloatLE=function(h,m,v){return Ye(this,h,m,!0,v)},f.prototype.writeFloatBE=function(h,m,v){return Ye(this,h,m,!1,v)},f.prototype.writeDoubleLE=function(h,m,v){return Xe(this,h,m,!0,v)},f.prototype.writeDoubleBE=function(h,m,v){return Xe(this,h,m,!1,v)},f.prototype.copy=function(h,m,v,N){if(!f.isBuffer(h))throw new TypeError("argument should be a Buffer");if(v||(v=0),N||N===0||(N=this.length),m>=h.length&&(m=h.length),m||(m=0),0<N&&N<v&&(N=v),N===v||h.length===0||this.length===0)return 0;if(0>m)throw new RangeError("targetStart out of bounds");if(0>v||v>=this.length)throw new RangeError("Index out of range");if(0>N)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),h.length-m<N-v&&(N=h.length-m+v);var F=N-v;if(this===h&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(m,v,N);else if(this===h&&v<m&&m<N)for(var Q=F-1;0<=Q;--Q)h[Q+m]=this[Q+v];else Uint8Array.prototype.set.call(h,this.subarray(v,N),m);return F},f.prototype.fill=function(h,m,v,N){if(typeof h=="string"){if(typeof m=="string"?(N=m,m=0,v=this.length):typeof v=="string"&&(N=v,v=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!f.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(h.length===1){var F=h.charCodeAt(0);(N==="utf8"&&128>F||N==="latin1")&&(h=F)}}else typeof h=="number"&&(h&=255);if(0>m||this.length<m||this.length<v)throw new RangeError("Out of range index");if(v<=m)return this;m>>>=0,v=v===void 0?this.length:v>>>0,h||(h=0);var Q;if(typeof h=="number")for(Q=m;Q<v;++Q)this[Q]=h;else{var le=f.isBuffer(h)?h:f.from(h,N),ke=le.length;if(ke===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(Q=0;Q<v-m;++Q)this[Q+m]=le[Q%ke]}return this};var B=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,s("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(s,a,o){(function(l){(function(){function u(){let f;try{f=o.storage.getItem("debug")}catch{}return!f&&typeof l<"u"&&"env"in l&&(f=l.env.DEBUG),f}o.formatArgs=function(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;f.splice(1,0,d,"color: inherit");let p=0,g=0;f[0].replace(/%[a-zA-Z%]/g,A=>{A==="%%"||(p++,A==="%c"&&(g=p))}),f.splice(g,0,d)},o.save=function(f){try{f?o.storage.setItem("debug",f):o.storage.removeItem("debug")}catch{}},o.load=u,o.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},o.storage=function(){try{return localStorage}catch{}}(),o.destroy=(()=>{let f=!1;return()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.log=console.debug||console.log||(()=>{}),a.exports=s("./common")(o);const{formatters:c}=a.exports;c.j=function(f){try{return JSON.stringify(f)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}}).call(this)}).call(this,s("_process"))},{"./common":5,_process:12}],5:[function(s,a){a.exports=function(o){function l(f){function d(...A){if(!d.enabled)return;const _=d,T=+new Date,k=T-(p||T);_.diff=k,_.prev=p,_.curr=T,p=T,A[0]=l.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let y=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(S,x)=>{if(S==="%%")return"%";y++;const I=l.formatters[x];if(typeof I=="function"){const U=A[y];S=I.call(_,U),A.splice(y,1),y--}return S}),l.formatArgs.call(_,A),(_.log||l.log).apply(_,A)}let p,g=null;return d.namespace=f,d.useColors=l.useColors(),d.color=l.selectColor(f),d.extend=u,d.destroy=l.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>g===null?l.enabled(f):g,set:A=>{g=A}}),typeof l.init=="function"&&l.init(d),d}function u(f,d){const p=l(this.namespace+(typeof d>"u"?":":d)+f);return p.log=this.log,p}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}return l.debug=l,l.default=l,l.coerce=function(f){return f instanceof Error?f.stack||f.message:f},l.disable=function(){const f=[...l.names.map(c),...l.skips.map(c).map(d=>"-"+d)].join(",");return l.enable(""),f},l.enable=function(f){l.save(f),l.names=[],l.skips=[];let d;const p=(typeof f=="string"?f:"").split(/[\s,]+/),g=p.length;for(d=0;d<g;d++)p[d]&&(f=p[d].replace(/\*/g,".*?"),f[0]==="-"?l.skips.push(new RegExp("^"+f.substr(1)+"$")):l.names.push(new RegExp("^"+f+"$")))},l.enabled=function(f){if(f[f.length-1]==="*")return!0;let d,p;for(d=0,p=l.skips.length;d<p;d++)if(l.skips[d].test(f))return!1;for(d=0,p=l.names.length;d<p;d++)if(l.names[d].test(f))return!0;return!1},l.humanize=s("ms"),l.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(o).forEach(f=>{l[f]=o[f]}),l.names=[],l.skips=[],l.formatters={},l.selectColor=function(f){let d=0;for(let p=0;p<f.length;p++)d=(d<<5)-d+f.charCodeAt(p),d|=0;return l.colors[n(d)%l.colors.length]},l.enable(l.load()),l}},{ms:11}],6:[function(s,a){function o(l,u){for(const c in u)Object.defineProperty(l,c,{value:u[c],enumerable:!0,configurable:!0});return l}a.exports=function(l,u,c){if(!l||typeof l=="string")throw new TypeError("Please pass an Error to err-code");c||(c={}),typeof u=="object"&&(c=u,u=""),u&&(c.code=u);try{return o(l,c)}catch{c.message=l.message,c.stack=l.stack;const d=function(){};return d.prototype=Object.create(Object.getPrototypeOf(l)),o(new d,c)}}},{}],7:[function(s,a){function o(D){console&&console.warn&&console.warn(D)}function l(){l.init.call(this)}function u(D){if(typeof D!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof D)}function c(D){return D._maxListeners===void 0?l.defaultMaxListeners:D._maxListeners}function f(D,M,q,K){var ie,X,ue;if(u(q),X=D._events,X===void 0?(X=D._events=Object.create(null),D._eventsCount=0):(X.newListener!==void 0&&(D.emit("newListener",M,q.listener?q.listener:q),X=D._events),ue=X[M]),ue===void 0)ue=X[M]=q,++D._eventsCount;else if(typeof ue=="function"?ue=X[M]=K?[q,ue]:[ue,q]:K?ue.unshift(q):ue.push(q),ie=c(D),0<ie&&ue.length>ie&&!ue.warned){ue.warned=!0;var te=new Error("Possible EventEmitter memory leak detected. "+ue.length+" "+(M+" listeners added. Use emitter.setMaxListeners() to increase limit"));te.name="MaxListenersExceededWarning",te.emitter=D,te.type=M,te.count=ue.length,o(te)}return D}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(D,M,q){var K={fired:!1,wrapFn:void 0,target:D,type:M,listener:q},ie=d.bind(K);return ie.listener=q,K.wrapFn=ie,ie}function g(D,M,q){var K=D._events;if(K===void 0)return[];var ie=K[M];return ie===void 0?[]:typeof ie=="function"?q?[ie.listener||ie]:[ie]:q?k(ie):_(ie,ie.length)}function A(D){var M=this._events;if(M!==void 0){var q=M[D];if(typeof q=="function")return 1;if(q!==void 0)return q.length}return 0}function _(D,M){for(var q=Array(M),K=0;K<M;++K)q[K]=D[K];return q}function T(D,M){for(;M+1<D.length;M++)D[M]=D[M+1];D.pop()}function k(D){for(var M=Array(D.length),q=0;q<M.length;++q)M[q]=D[q].listener||D[q];return M}function y(D,M,q){typeof D.on=="function"&&w(D,"error",M,q)}function w(D,M,q,K){if(typeof D.on=="function")K.once?D.once(M,q):D.on(M,q);else if(typeof D.addEventListener=="function")D.addEventListener(M,function ie(X){K.once&&D.removeEventListener(M,ie),q(X)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof D)}var S,x=typeof Reflect=="object"?Reflect:null,I=x&&typeof x.apply=="function"?x.apply:function(D,M,q){return Function.prototype.apply.call(D,M,q)};S=x&&typeof x.ownKeys=="function"?x.ownKeys:Object.getOwnPropertySymbols?function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:function(D){return Object.getOwnPropertyNames(D)};var U=Number.isNaN||function(D){return D!==D};a.exports=l,a.exports.once=function(D,M){return new Promise(function(q,K){function ie(ue){D.removeListener(M,X),K(ue)}function X(){typeof D.removeListener=="function"&&D.removeListener("error",ie),q([].slice.call(arguments))}w(D,M,X,{once:!0}),M!=="error"&&y(D,ie,{once:!0})})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var H=10;Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return H},set:function(D){if(typeof D!="number"||0>D||U(D))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+D+".");H=D}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(D){if(typeof D!="number"||0>D||U(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this},l.prototype.getMaxListeners=function(){return c(this)},l.prototype.emit=function(D){for(var M=[],q=1;q<arguments.length;q++)M.push(arguments[q]);var K=D==="error",ie=this._events;if(ie!==void 0)K=K&&ie.error===void 0;else if(!K)return!1;if(K){var X;if(0<M.length&&(X=M[0]),X instanceof Error)throw X;var ue=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw ue.context=X,ue}var te=ie[D];if(te===void 0)return!1;if(typeof te=="function")I(te,this,M);else for(var ft=te.length,pe=_(te,ft),q=0;q<ft;++q)I(pe[q],this,M);return!0},l.prototype.addListener=function(D,M){return f(this,D,M,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(D,M){return f(this,D,M,!0)},l.prototype.once=function(D,M){return u(M),this.on(D,p(this,D,M)),this},l.prototype.prependOnceListener=function(D,M){return u(M),this.prependListener(D,p(this,D,M)),this},l.prototype.removeListener=function(D,M){var q,K,ie,X,ue;if(u(M),K=this._events,K===void 0)return this;if(q=K[D],q===void 0)return this;if(q===M||q.listener===M)--this._eventsCount==0?this._events=Object.create(null):(delete K[D],K.removeListener&&this.emit("removeListener",D,q.listener||M));else if(typeof q!="function"){for(ie=-1,X=q.length-1;0<=X;X--)if(q[X]===M||q[X].listener===M){ue=q[X].listener,ie=X;break}if(0>ie)return this;ie===0?q.shift():T(q,ie),q.length===1&&(K[D]=q[0]),K.removeListener!==void 0&&this.emit("removeListener",D,ue||M)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(D){var M,q,K;if(q=this._events,q===void 0)return this;if(q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):q[D]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete q[D]),this;if(arguments.length===0){var ie,X=Object.keys(q);for(K=0;K<X.length;++K)ie=X[K],ie!=="removeListener"&&this.removeAllListeners(ie);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=q[D],typeof M=="function")this.removeListener(D,M);else if(M!==void 0)for(K=M.length-1;0<=K;K--)this.removeListener(D,M[K]);return this},l.prototype.listeners=function(D){return g(this,D,!0)},l.prototype.rawListeners=function(D){return g(this,D,!1)},l.listenerCount=function(D,M){return typeof D.listenerCount=="function"?D.listenerCount(M):A.call(D,M)},l.prototype.listenerCount=A,l.prototype.eventNames=function(){return 0<this._eventsCount?S(this._events):[]}},{}],8:[function(s,a){a.exports=function(){if(typeof globalThis>"u")return null;var o={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return o.RTCPeerConnection?o:null}},{}],9:[function(s,a,o){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */o.read=function(l,u,c,f,d){var p,g,A=8*d-f-1,_=(1<<A)-1,T=_>>1,k=-7,y=c?d-1:0,w=c?-1:1,S=l[u+y];for(y+=w,p=S&(1<<-k)-1,S>>=-k,k+=A;0<k;p=256*p+l[u+y],y+=w,k-=8);for(g=p&(1<<-k)-1,p>>=-k,k+=f;0<k;g=256*g+l[u+y],y+=w,k-=8);if(p===0)p=1-T;else{if(p===_)return g?NaN:(S?-1:1)*(1/0);g+=i(2,f),p-=T}return(S?-1:1)*g*i(2,p-f)},o.write=function(l,u,c,f,d,p){var g,A,_,T=Math.LN2,k=Math.log,y=8*p-d-1,w=(1<<y)-1,S=w>>1,x=d===23?i(2,-24)-i(2,-77):0,I=f?0:p-1,U=f?1:-1,H=0>u||u===0&&0>1/u?1:0;for(u=n(u),isNaN(u)||u===1/0?(A=isNaN(u)?1:0,g=w):(g=r(k(u)/T),1>u*(_=i(2,-g))&&(g--,_*=2),u+=1<=g+S?x/_:x*i(2,1-S),2<=u*_&&(g++,_/=2),g+S>=w?(A=0,g=w):1<=g+S?(A=(u*_-1)*i(2,d),g+=S):(A=u*i(2,S-1)*i(2,d),g=0));8<=d;l[c+I]=255&A,I+=U,A/=256,d-=8);for(g=g<<d|A,y+=d;0<y;l[c+I]=255&g,I+=U,g/=256,y-=8);l[c+I-U]|=128*H}},{}],10:[function(s,a){a.exports=typeof Object.create=="function"?function(o,l){l&&(o.super_=l,o.prototype=Object.create(l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:function(o,l){if(l){o.super_=l;var u=function(){};u.prototype=l.prototype,o.prototype=new u,o.prototype.constructor=o}}},{}],11:[function(s,a){var o=Math.round;function l(d){if(d+="",!(100<d.length)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(p){var g=parseFloat(p[1]),A=(p[2]||"ms").toLowerCase();return A==="years"||A==="year"||A==="yrs"||A==="yr"||A==="y"?315576e5*g:A==="weeks"||A==="week"||A==="w"?6048e5*g:A==="days"||A==="day"||A==="d"?864e5*g:A==="hours"||A==="hour"||A==="hrs"||A==="hr"||A==="h"?36e5*g:A==="minutes"||A==="minute"||A==="mins"||A==="min"||A==="m"?6e4*g:A==="seconds"||A==="second"||A==="secs"||A==="sec"||A==="s"?1e3*g:A==="milliseconds"||A==="millisecond"||A==="msecs"||A==="msec"||A==="ms"?g:void 0}}}function u(d){var p=n(d);return 864e5<=p?o(d/864e5)+"d":36e5<=p?o(d/36e5)+"h":6e4<=p?o(d/6e4)+"m":1e3<=p?o(d/1e3)+"s":d+"ms"}function c(d){var p=n(d);return 864e5<=p?f(d,p,864e5,"day"):36e5<=p?f(d,p,36e5,"hour"):6e4<=p?f(d,p,6e4,"minute"):1e3<=p?f(d,p,1e3,"second"):d+" ms"}function f(d,p,g,A){return o(d/g)+" "+A+(p>=1.5*g?"s":"")}a.exports=function(d,p){p=p||{};var g=typeof d;if(g=="string"&&0<d.length)return l(d);if(g==="number"&&isFinite(d))return p.long?c(d):u(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))}},{}],12:[function(s,a){function o(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function u(x){if(A===setTimeout)return setTimeout(x,0);if((A===o||!A)&&setTimeout)return A=setTimeout,setTimeout(x,0);try{return A(x,0)}catch{try{return A.call(null,x,0)}catch{return A.call(this,x,0)}}}function c(x){if(_===clearTimeout)return clearTimeout(x);if((_===l||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(x);try{return _(x)}catch{try{return _.call(null,x)}catch{return _.call(this,x)}}}function f(){w&&k&&(w=!1,k.length?y=k.concat(y):S=-1,y.length&&d())}function d(){if(!w){var x=u(f);w=!0;for(var I=y.length;I;){for(k=y,y=[];++S<I;)k&&k[S].run();S=-1,I=y.length}k=null,w=!1,c(x)}}function p(x,I){this.fun=x,this.array=I}function g(){}var A,_,T=a.exports={};(function(){try{A=typeof setTimeout=="function"?setTimeout:o}catch{A=o}try{_=typeof clearTimeout=="function"?clearTimeout:l}catch{_=l}})();var k,y=[],w=!1,S=-1;T.nextTick=function(x){var I=Array(arguments.length-1);if(1<arguments.length)for(var U=1;U<arguments.length;U++)I[U-1]=arguments[U];y.push(new p(x,I)),y.length!==1||w||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={},T.on=g,T.addListener=g,T.once=g,T.off=g,T.removeListener=g,T.removeAllListeners=g,T.emit=g,T.prependListener=g,T.prependOnceListener=g,T.listeners=function(){return[]},T.binding=function(){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},{}],13:[function(s,a){(function(o){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let l;a.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?o:window):u=>(l||(l=Promise.resolve())).then(u).catch(c=>setTimeout(()=>{throw c},0))}).call(this)}).call(this,typeof rr>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:rr)},{}],14:[function(s,a){(function(o,l){(function(){var u=s("safe-buffer").Buffer,c=l.crypto||l.msCrypto;a.exports=c&&c.getRandomValues?function(f,d){if(f>4294967295)throw new RangeError("requested too many random bytes");var p=u.allocUnsafe(f);if(0<f)if(65536<f)for(var g=0;g<f;g+=65536)c.getRandomValues(p.slice(g,g+65536));else c.getRandomValues(p);return typeof d=="function"?o.nextTick(function(){d(null,p)}):p}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,s("_process"),typeof rr>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:rr)},{_process:12,"safe-buffer":30}],15:[function(s,a){function o(g,A){g.prototype=Object.create(A.prototype),g.prototype.constructor=g,g.__proto__=A}function l(g,A,_){function T(y,w,S){return typeof A=="string"?A:A(y,w,S)}_||(_=Error);var k=function(y){function w(S,x,I){return y.call(this,T(S,x,I))||this}return o(w,y),w}(_);k.prototype.name=_.name,k.prototype.code=g,p[g]=k}function u(g,A){if(Array.isArray(g)){var _=g.length;return g=g.map(function(T){return T+""}),2<_?"one of ".concat(A," ").concat(g.slice(0,_-1).join(", "),", or ")+g[_-1]:_===2?"one of ".concat(A," ").concat(g[0]," or ").concat(g[1]):"of ".concat(A," ").concat(g[0])}return"of ".concat(A," ").concat(g+"")}function c(g,A,_){return g.substr(!_||0>_?0:+_,A.length)===A}function f(g,A,_){return(_===void 0||_>g.length)&&(_=g.length),g.substring(_-A.length,_)===A}function d(g,A,_){return typeof _!="number"&&(_=0),!(_+A.length>g.length)&&g.indexOf(A,_)!==-1}var p={};l("ERR_INVALID_OPT_VALUE",function(g,A){return'The value "'+A+'" is invalid for option "'+g+'"'},TypeError),l("ERR_INVALID_ARG_TYPE",function(g,A,_){var T;typeof A=="string"&&c(A,"not ")?(T="must not be",A=A.replace(/^not /,"")):T="must be";var k;if(f(g," argument"))k="The ".concat(g," ").concat(T," ").concat(u(A,"type"));else{var y=d(g,".")?"property":"argument";k='The "'.concat(g,'" ').concat(y," ").concat(T," ").concat(u(A,"type"))}return k+=". Received type ".concat(typeof _),k},TypeError),l("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),l("ERR_METHOD_NOT_IMPLEMENTED",function(g){return"The "+g+" method is not implemented"}),l("ERR_STREAM_PREMATURE_CLOSE","Premature close"),l("ERR_STREAM_DESTROYED",function(g){return"Cannot call "+g+" after a stream was destroyed"}),l("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),l("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),l("ERR_STREAM_WRITE_AFTER_END","write after end"),l("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),l("ERR_UNKNOWN_ENCODING",function(g){return"Unknown encoding: "+g},TypeError),l("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),a.exports.codes=p},{}],16:[function(s,a){(function(o){(function(){function l(T){return this instanceof l?(d.call(this,T),p.call(this,T),this.allowHalfOpen=!0,void(T&&(T.readable===!1&&(this.readable=!1),T.writable===!1&&(this.writable=!1),T.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u))))):new l(T)}function u(){this._writableState.ended||o.nextTick(c,this)}function c(T){T.end()}var f=Object.keys||function(T){var k=[];for(var y in T)k.push(y);return k};a.exports=l;var d=s("./_stream_readable"),p=s("./_stream_writable");s("inherits")(l,d);for(var g,A=f(p.prototype),_=0;_<A.length;_++)g=A[_],l.prototype[g]||(l.prototype[g]=p.prototype[g]);Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(T){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=T,this._writableState.destroyed=T)}})}).call(this)}).call(this,s("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(s,a){function o(u){return this instanceof o?void l.call(this,u):new o(u)}a.exports=o;var l=s("./_stream_transform");s("inherits")(o,l),o.prototype._transform=function(u,c,f){f(null,u)}},{"./_stream_transform":19,inherits:10}],18:[function(s,a){(function(o,l){(function(){function u(B){return Ve.from(B)}function c(B){return Ve.isBuffer(B)||B instanceof we}function f(B,h,m){return typeof B.prependListener=="function"?B.prependListener(h,m):void(B._events&&B._events[h]?Array.isArray(B._events[h])?B._events[h].unshift(m):B._events[h]=[m,B._events[h]]:B.on(h,m))}function d(B,h,m){ft=ft||s("./_stream_duplex"),B=B||{},typeof m!="boolean"&&(m=h instanceof ft),this.objectMode=!!B.objectMode,m&&(this.objectMode=this.objectMode||!!B.readableObjectMode),this.highWaterMark=dt(this,B,"readableHighWaterMark",m),this.buffer=new ht,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=B.emitClose!==!1,this.autoDestroy=!!B.autoDestroy,this.destroyed=!1,this.defaultEncoding=B.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,B.encoding&&(!He&&(He=s("string_decoder/").StringDecoder),this.decoder=new He(B.encoding),this.encoding=B.encoding)}function p(B){if(ft=ft||s("./_stream_duplex"),!(this instanceof p))return new p(B);var h=this instanceof ft;this._readableState=new d(B,this,h),this.readable=!0,B&&(typeof B.read=="function"&&(this._read=B.read),typeof B.destroy=="function"&&(this._destroy=B.destroy)),Ue.call(this)}function g(B,h,m,v,N){pe("readableAddChunk",h);var F=B._readableState;if(h===null)F.reading=!1,y(B,F);else{var Q;if(N||(Q=_(F,h)),Q)Y(B,Q);else if(!(F.objectMode||h&&0<h.length))v||(F.reading=!1,x(B,F));else if(typeof h=="string"||F.objectMode||Object.getPrototypeOf(h)===Ve.prototype||(h=u(h)),v)F.endEmitted?Y(B,new G):A(B,F,h,!0);else if(F.ended)Y(B,new Ke);else{if(F.destroyed)return!1;F.reading=!1,F.decoder&&!m?(h=F.decoder.write(h),F.objectMode||h.length!==0?A(B,F,h,!1):x(B,F)):A(B,F,h,!1)}}return!F.ended&&(F.length<F.highWaterMark||F.length===0)}function A(B,h,m,v){h.flowing&&h.length===0&&!h.sync?(h.awaitDrain=0,B.emit("data",m)):(h.length+=h.objectMode?1:m.length,v?h.buffer.unshift(m):h.buffer.push(m),h.needReadable&&w(B)),x(B,h)}function _(B,h){var m;return c(h)||typeof h=="string"||h===void 0||B.objectMode||(m=new qe("chunk",["string","Buffer","Uint8Array"],h)),m}function T(B){return 1073741824<=B?B=1073741824:(B--,B|=B>>>1,B|=B>>>2,B|=B>>>4,B|=B>>>8,B|=B>>>16,B++),B}function k(B,h){return 0>=B||h.length===0&&h.ended?0:h.objectMode?1:B===B?(B>h.highWaterMark&&(h.highWaterMark=T(B)),B<=h.length?B:h.ended?h.length:(h.needReadable=!0,0)):h.flowing&&h.length?h.buffer.head.data.length:h.length}function y(B,h){if(pe("onEofChunk"),!h.ended){if(h.decoder){var m=h.decoder.end();m&&m.length&&(h.buffer.push(m),h.length+=h.objectMode?1:m.length)}h.ended=!0,h.sync?w(B):(h.needReadable=!1,!h.emittedReadable&&(h.emittedReadable=!0,S(B)))}}function w(B){var h=B._readableState;pe("emitReadable",h.needReadable,h.emittedReadable),h.needReadable=!1,h.emittedReadable||(pe("emitReadable",h.flowing),h.emittedReadable=!0,o.nextTick(S,B))}function S(B){var h=B._readableState;pe("emitReadable_",h.destroyed,h.length,h.ended),!h.destroyed&&(h.length||h.ended)&&(B.emit("readable"),h.emittedReadable=!1),h.needReadable=!h.flowing&&!h.ended&&h.length<=h.highWaterMark,K(B)}function x(B,h){h.readingMore||(h.readingMore=!0,o.nextTick(I,B,h))}function I(B,h){for(;!h.reading&&!h.ended&&(h.length<h.highWaterMark||h.flowing&&h.length===0);){var m=h.length;if(pe("maybeReadMore read 0"),B.read(0),m===h.length)break}h.readingMore=!1}function U(B){return function(){var h=B._readableState;pe("pipeOnDrain",h.awaitDrain),h.awaitDrain&&h.awaitDrain--,h.awaitDrain===0&&Ge(B,"data")&&(h.flowing=!0,K(B))}}function H(B){var h=B._readableState;h.readableListening=0<B.listenerCount("readable"),h.resumeScheduled&&!h.paused?h.flowing=!0:0<B.listenerCount("data")&&B.resume()}function D(B){pe("readable nexttick read 0"),B.read(0)}function M(B,h){h.resumeScheduled||(h.resumeScheduled=!0,o.nextTick(q,B,h))}function q(B,h){pe("resume",h.reading),h.reading||B.read(0),h.resumeScheduled=!1,B.emit("resume"),K(B),h.flowing&&!h.reading&&B.read(0)}function K(B){var h=B._readableState;for(pe("flow",h.flowing);h.flowing&&B.read()!==null;);}function ie(B,h){if(h.length===0)return null;var m;return h.objectMode?m=h.buffer.shift():!B||B>=h.length?(m=h.decoder?h.buffer.join(""):h.buffer.length===1?h.buffer.first():h.buffer.concat(h.length),h.buffer.clear()):m=h.buffer.consume(B,h.decoder),m}function X(B){var h=B._readableState;pe("endReadable",h.endEmitted),h.endEmitted||(h.ended=!0,o.nextTick(ue,h,B))}function ue(B,h){if(pe("endReadableNT",B.endEmitted,B.length),!B.endEmitted&&B.length===0&&(B.endEmitted=!0,h.readable=!1,h.emit("end"),B.autoDestroy)){var m=h._writableState;(!m||m.autoDestroy&&m.finished)&&h.destroy()}}function te(B,h){for(var m=0,v=B.length;m<v;m++)if(B[m]===h)return m;return-1}a.exports=p;var ft;p.ReadableState=d;var pe;s("events").EventEmitter;var Ge=function(B,h){return B.listeners(h).length},Ue=s("./internal/streams/stream"),Ve=s("buffer").Buffer,we=l.Uint8Array||function(){},Ae=s("util");pe=Ae&&Ae.debuglog?Ae.debuglog("stream"):function(){};var He,Ye,Xe,ht=s("./internal/streams/buffer_list"),nt=s("./internal/streams/destroy"),it=s("./internal/streams/state"),dt=it.getHighWaterMark,Ze=s("../errors").codes,qe=Ze.ERR_INVALID_ARG_TYPE,Ke=Ze.ERR_STREAM_PUSH_AFTER_EOF,P=Ze.ERR_METHOD_NOT_IMPLEMENTED,G=Ze.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;s("inherits")(p,Ue);var Y=nt.errorOrDestroy,ce=["error","close","destroy","pause","resume"];Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(B){this._readableState&&(this._readableState.destroyed=B)}}),p.prototype.destroy=nt.destroy,p.prototype._undestroy=nt.undestroy,p.prototype._destroy=function(B,h){h(B)},p.prototype.push=function(B,h){var m,v=this._readableState;return v.objectMode?m=!0:typeof B=="string"&&(h=h||v.defaultEncoding,h!==v.encoding&&(B=Ve.from(B,h),h=""),m=!0),g(this,B,h,!1,m)},p.prototype.unshift=function(B){return g(this,B,null,!0,!1)},p.prototype.isPaused=function(){return this._readableState.flowing===!1},p.prototype.setEncoding=function(B){He||(He=s("string_decoder/").StringDecoder);var h=new He(B);this._readableState.decoder=h,this._readableState.encoding=this._readableState.decoder.encoding;for(var m=this._readableState.buffer.head,v="";m!==null;)v+=h.write(m.data),m=m.next;return this._readableState.buffer.clear(),v!==""&&this._readableState.buffer.push(v),this._readableState.length=v.length,this},p.prototype.read=function(B){pe("read",B),B=parseInt(B,10);var h=this._readableState,m=B;if(B!==0&&(h.emittedReadable=!1),B===0&&h.needReadable&&((h.highWaterMark===0?0<h.length:h.length>=h.highWaterMark)||h.ended))return pe("read: emitReadable",h.length,h.ended),h.length===0&&h.ended?X(this):w(this),null;if(B=k(B,h),B===0&&h.ended)return h.length===0&&X(this),null;var v=h.needReadable;pe("need readable",v),(h.length===0||h.length-B<h.highWaterMark)&&(v=!0,pe("length less than watermark",v)),h.ended||h.reading?(v=!1,pe("reading or ended",v)):v&&(pe("do read"),h.reading=!0,h.sync=!0,h.length===0&&(h.needReadable=!0),this._read(h.highWaterMark),h.sync=!1,!h.reading&&(B=k(m,h)));var N;return N=0<B?ie(B,h):null,N===null?(h.needReadable=h.length<=h.highWaterMark,B=0):(h.length-=B,h.awaitDrain=0),h.length===0&&(!h.ended&&(h.needReadable=!0),m!==B&&h.ended&&X(this)),N!==null&&this.emit("data",N),N},p.prototype._read=function(){Y(this,new P("_read()"))},p.prototype.pipe=function(B,h){function m(_n,Tn){pe("onunpipe"),_n===Re&&Tn&&Tn.hasUnpiped===!1&&(Tn.hasUnpiped=!0,N())}function v(){pe("onend"),B.end()}function N(){pe("cleanup"),B.removeListener("close",le),B.removeListener("finish",ke),B.removeListener("drain",wn),B.removeListener("error",Q),B.removeListener("unpipe",m),Re.removeListener("end",v),Re.removeListener("end",st),Re.removeListener("data",F),ni=!0,Te.awaitDrain&&(!B._writableState||B._writableState.needDrain)&&wn()}function F(_n){pe("ondata");var Tn=B.write(_n);pe("dest.write",Tn),Tn===!1&&((Te.pipesCount===1&&Te.pipes===B||1<Te.pipesCount&&te(Te.pipes,B)!==-1)&&!ni&&(pe("false write response, pause",Te.awaitDrain),Te.awaitDrain++),Re.pause())}function Q(_n){pe("onerror",_n),st(),B.removeListener("error",Q),Ge(B,"error")===0&&Y(B,_n)}function le(){B.removeListener("finish",ke),st()}function ke(){pe("onfinish"),B.removeListener("close",le),st()}function st(){pe("unpipe"),Re.unpipe(B)}var Re=this,Te=this._readableState;switch(Te.pipesCount){case 0:Te.pipes=B;break;case 1:Te.pipes=[Te.pipes,B];break;default:Te.pipes.push(B)}Te.pipesCount+=1,pe("pipe count=%d opts=%j",Te.pipesCount,h);var It=(!h||h.end!==!1)&&B!==o.stdout&&B!==o.stderr,rn=It?v:st;Te.endEmitted?o.nextTick(rn):Re.once("end",rn),B.on("unpipe",m);var wn=U(Re);B.on("drain",wn);var ni=!1;return Re.on("data",F),f(B,"error",Q),B.once("close",le),B.once("finish",ke),B.emit("pipe",Re),Te.flowing||(pe("pipe resume"),Re.resume()),B},p.prototype.unpipe=function(B){var h=this._readableState,m={hasUnpiped:!1};if(h.pipesCount===0)return this;if(h.pipesCount===1)return B&&B!==h.pipes?this:(B||(B=h.pipes),h.pipes=null,h.pipesCount=0,h.flowing=!1,B&&B.emit("unpipe",this,m),this);if(!B){var v=h.pipes,N=h.pipesCount;h.pipes=null,h.pipesCount=0,h.flowing=!1;for(var F=0;F<N;F++)v[F].emit("unpipe",this,{hasUnpiped:!1});return this}var Q=te(h.pipes,B);return Q===-1?this:(h.pipes.splice(Q,1),h.pipesCount-=1,h.pipesCount===1&&(h.pipes=h.pipes[0]),B.emit("unpipe",this,m),this)},p.prototype.on=function(B,h){var m=Ue.prototype.on.call(this,B,h),v=this._readableState;return B==="data"?(v.readableListening=0<this.listenerCount("readable"),v.flowing!==!1&&this.resume()):B=="readable"&&!v.endEmitted&&!v.readableListening&&(v.readableListening=v.needReadable=!0,v.flowing=!1,v.emittedReadable=!1,pe("on readable",v.length,v.reading),v.length?w(this):!v.reading&&o.nextTick(D,this)),m},p.prototype.addListener=p.prototype.on,p.prototype.removeListener=function(B,h){var m=Ue.prototype.removeListener.call(this,B,h);return B==="readable"&&o.nextTick(H,this),m},p.prototype.removeAllListeners=function(B){var h=Ue.prototype.removeAllListeners.apply(this,arguments);return(B==="readable"||B===void 0)&&o.nextTick(H,this),h},p.prototype.resume=function(){var B=this._readableState;return B.flowing||(pe("resume"),B.flowing=!B.readableListening,M(this,B)),B.paused=!1,this},p.prototype.pause=function(){return pe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(pe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},p.prototype.wrap=function(B){var h=this,m=this._readableState,v=!1;for(var N in B.on("end",function(){if(pe("wrapped end"),m.decoder&&!m.ended){var Q=m.decoder.end();Q&&Q.length&&h.push(Q)}h.push(null)}),B.on("data",function(Q){if(pe("wrapped data"),m.decoder&&(Q=m.decoder.write(Q)),!(m.objectMode&&Q==null)&&(m.objectMode||Q&&Q.length)){var le=h.push(Q);le||(v=!0,B.pause())}}),B)this[N]===void 0&&typeof B[N]=="function"&&(this[N]=function(Q){return function(){return B[Q].apply(B,arguments)}}(N));for(var F=0;F<ce.length;F++)B.on(ce[F],this.emit.bind(this,ce[F]));return this._read=function(Q){pe("wrapped _read",Q),v&&(v=!1,B.resume())},this},typeof Symbol=="function"&&(p.prototype[Symbol.asyncIterator]=function(){return Ye===void 0&&(Ye=s("./internal/streams/async_iterator")),Ye(this)}),Object.defineProperty(p.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(p.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(p.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(B){this._readableState&&(this._readableState.flowing=B)}}),p._fromList=ie,Object.defineProperty(p.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(p.from=function(B,h){return Xe===void 0&&(Xe=s("./internal/streams/from")),Xe(p,B,h)})}).call(this)}).call(this,s("_process"),typeof rr>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:rr)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(s,a){function o(T,k){var y=this._transformState;y.transforming=!1;var w=y.writecb;if(w===null)return this.emit("error",new p);y.writechunk=null,y.writecb=null,k!=null&&this.push(k),w(T);var S=this._readableState;S.reading=!1,(S.needReadable||S.length<S.highWaterMark)&&this._read(S.highWaterMark)}function l(T){return this instanceof l?(_.call(this,T),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,T&&(typeof T.transform=="function"&&(this._transform=T.transform),typeof T.flush=="function"&&(this._flush=T.flush)),void this.on("prefinish",u)):new l(T)}function u(){var T=this;typeof this._flush!="function"||this._readableState.destroyed?c(this,null,null):this._flush(function(k,y){c(T,k,y)})}function c(T,k,y){if(k)return T.emit("error",k);if(y!=null&&T.push(y),T._writableState.length)throw new A;if(T._transformState.transforming)throw new g;return T.push(null)}a.exports=l;var f=s("../errors").codes,d=f.ERR_METHOD_NOT_IMPLEMENTED,p=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_TRANSFORM_ALREADY_TRANSFORMING,A=f.ERR_TRANSFORM_WITH_LENGTH_0,_=s("./_stream_duplex");s("inherits")(l,_),l.prototype.push=function(T,k){return this._transformState.needTransform=!1,_.prototype.push.call(this,T,k)},l.prototype._transform=function(T,k,y){y(new d("_transform()"))},l.prototype._write=function(T,k,y){var w=this._transformState;if(w.writecb=y,w.writechunk=T,w.writeencoding=k,!w.transforming){var S=this._readableState;(w.needTransform||S.needReadable||S.length<S.highWaterMark)&&this._read(S.highWaterMark)}},l.prototype._read=function(){var T=this._transformState;T.writechunk===null||T.transforming?T.needTransform=!0:(T.transforming=!0,this._transform(T.writechunk,T.writeencoding,T.afterTransform))},l.prototype._destroy=function(T,k){_.prototype._destroy.call(this,T,function(y){k(y)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(s,a){(function(o,l){(function(){function u(P){var G=this;this.next=null,this.entry=null,this.finish=function(){X(G,P)}}function c(P){return pe.from(P)}function f(P){return pe.isBuffer(P)||P instanceof Ge}function d(){}function p(P,G,Y){ue=ue||s("./_stream_duplex"),P=P||{},typeof Y!="boolean"&&(Y=G instanceof ue),this.objectMode=!!P.objectMode,Y&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=we(this,P,"writableHighWaterMark",Y),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ce=P.decodeStrings===!1;this.decodeStrings=!ce,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(B){x(G,B)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function g(P){ue=ue||s("./_stream_duplex");var G=this instanceof ue;return G||Ke.call(g,this)?(this._writableState=new p(P,this,G),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),void ft.call(this)):new g(P)}function A(P,G){var Y=new dt;qe(P,Y),o.nextTick(G,Y)}function _(P,G,Y,ce){var B;return Y===null?B=new it:typeof Y!="string"&&!G.objectMode&&(B=new He("chunk",["string","Buffer"],Y)),!B||(qe(P,B),o.nextTick(ce,B),!1)}function T(P,G,Y){return P.objectMode||P.decodeStrings===!1||typeof G!="string"||(G=pe.from(G,Y)),G}function k(P,G,Y,ce,B,h){if(!Y){var m=T(G,ce,B);ce!==m&&(Y=!0,B="buffer",ce=m)}var v=G.objectMode?1:ce.length;G.length+=v;var N=G.length<G.highWaterMark;if(N||(G.needDrain=!0),G.writing||G.corked){var F=G.lastBufferedRequest;G.lastBufferedRequest={chunk:ce,encoding:B,isBuf:Y,callback:h,next:null},F?F.next=G.lastBufferedRequest:G.bufferedRequest=G.lastBufferedRequest,G.bufferedRequestCount+=1}else y(P,G,!1,v,ce,B,h);return N}function y(P,G,Y,ce,B,h,m){G.writelen=ce,G.writecb=m,G.writing=!0,G.sync=!0,G.destroyed?G.onwrite(new nt("write")):Y?P._writev(B,G.onwrite):P._write(B,h,G.onwrite),G.sync=!1}function w(P,G,Y,ce,B){--G.pendingcb,Y?(o.nextTick(B,ce),o.nextTick(K,P,G),P._writableState.errorEmitted=!0,qe(P,ce)):(B(ce),P._writableState.errorEmitted=!0,qe(P,ce),K(P,G))}function S(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}function x(P,G){var Y=P._writableState,ce=Y.sync,B=Y.writecb;if(typeof B!="function")throw new Xe;if(S(Y),G)w(P,Y,ce,G,B);else{var h=D(Y)||P.destroyed;h||Y.corked||Y.bufferProcessing||!Y.bufferedRequest||H(P,Y),ce?o.nextTick(I,P,Y,h,B):I(P,Y,h,B)}}function I(P,G,Y,ce){Y||U(P,G),G.pendingcb--,ce(),K(P,G)}function U(P,G){G.length===0&&G.needDrain&&(G.needDrain=!1,P.emit("drain"))}function H(P,G){G.bufferProcessing=!0;var Y=G.bufferedRequest;if(P._writev&&Y&&Y.next){var ce=G.bufferedRequestCount,B=Array(ce),h=G.corkedRequestsFree;h.entry=Y;for(var m=0,v=!0;Y;)B[m]=Y,Y.isBuf||(v=!1),Y=Y.next,m+=1;B.allBuffers=v,y(P,G,!0,G.length,B,"",h.finish),G.pendingcb++,G.lastBufferedRequest=null,h.next?(G.corkedRequestsFree=h.next,h.next=null):G.corkedRequestsFree=new u(G),G.bufferedRequestCount=0}else{for(;Y;){var N=Y.chunk,F=Y.encoding,Q=Y.callback,le=G.objectMode?1:N.length;if(y(P,G,!1,le,N,F,Q),Y=Y.next,G.bufferedRequestCount--,G.writing)break}Y===null&&(G.lastBufferedRequest=null)}G.bufferedRequest=Y,G.bufferProcessing=!1}function D(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function M(P,G){P._final(function(Y){G.pendingcb--,Y&&qe(P,Y),G.prefinished=!0,P.emit("prefinish"),K(P,G)})}function q(P,G){G.prefinished||G.finalCalled||(typeof P._final!="function"||G.destroyed?(G.prefinished=!0,P.emit("prefinish")):(G.pendingcb++,G.finalCalled=!0,o.nextTick(M,P,G)))}function K(P,G){var Y=D(G);if(Y&&(q(P,G),G.pendingcb===0&&(G.finished=!0,P.emit("finish"),G.autoDestroy))){var ce=P._readableState;(!ce||ce.autoDestroy&&ce.endEmitted)&&P.destroy()}return Y}function ie(P,G,Y){G.ending=!0,K(P,G),Y&&(G.finished?o.nextTick(Y):P.once("finish",Y)),G.ended=!0,P.writable=!1}function X(P,G,Y){var ce=P.entry;for(P.entry=null;ce;){var B=ce.callback;G.pendingcb--,B(Y),ce=ce.next}G.corkedRequestsFree.next=P}a.exports=g;var ue;g.WritableState=p;var te={deprecate:s("util-deprecate")},ft=s("./internal/streams/stream"),pe=s("buffer").Buffer,Ge=l.Uint8Array||function(){},Ue=s("./internal/streams/destroy"),Ve=s("./internal/streams/state"),we=Ve.getHighWaterMark,Ae=s("../errors").codes,He=Ae.ERR_INVALID_ARG_TYPE,Ye=Ae.ERR_METHOD_NOT_IMPLEMENTED,Xe=Ae.ERR_MULTIPLE_CALLBACK,ht=Ae.ERR_STREAM_CANNOT_PIPE,nt=Ae.ERR_STREAM_DESTROYED,it=Ae.ERR_STREAM_NULL_VALUES,dt=Ae.ERR_STREAM_WRITE_AFTER_END,Ze=Ae.ERR_UNKNOWN_ENCODING,qe=Ue.errorOrDestroy;s("inherits")(g,ft),p.prototype.getBuffer=function(){for(var P=this.bufferedRequest,G=[];P;)G.push(P),P=P.next;return G},function(){try{Object.defineProperty(p.prototype,"buffer",{get:te.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Ke;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ke=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(P){return!!Ke.call(this,P)||this===g&&P&&P._writableState instanceof p}})):Ke=function(P){return P instanceof this},g.prototype.pipe=function(){qe(this,new ht)},g.prototype.write=function(P,G,Y){var ce=this._writableState,B=!1,h=!ce.objectMode&&f(P);return h&&!pe.isBuffer(P)&&(P=c(P)),typeof G=="function"&&(Y=G,G=null),h?G="buffer":!G&&(G=ce.defaultEncoding),typeof Y!="function"&&(Y=d),ce.ending?A(this,Y):(h||_(this,ce,P,Y))&&(ce.pendingcb++,B=k(this,ce,h,P,G,Y)),B},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,!P.writing&&!P.corked&&!P.bufferProcessing&&P.bufferedRequest&&H(this,P))},g.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())))throw new Ze(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(P,G,Y){Y(new Ye("_write()"))},g.prototype._writev=null,g.prototype.end=function(P,G,Y){var ce=this._writableState;return typeof P=="function"?(Y=P,P=null,G=null):typeof G=="function"&&(Y=G,G=null),P!=null&&this.write(P,G),ce.corked&&(ce.corked=1,this.uncork()),ce.ending||ie(this,ce,Y),this},Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),g.prototype.destroy=Ue.destroy,g.prototype._undestroy=Ue.undestroy,g.prototype._destroy=function(P,G){G(P)}}).call(this)}).call(this,s("_process"),typeof rr>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:rr)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(s,a){(function(o){(function(){function l(U,H,D){return H in U?Object.defineProperty(U,H,{value:D,enumerable:!0,configurable:!0,writable:!0}):U[H]=D,U}function u(U,H){return{value:U,done:H}}function c(U){var H=U[A];if(H!==null){var D=U[S].read();D!==null&&(U[y]=null,U[A]=null,U[_]=null,H(u(D,!1)))}}function f(U){o.nextTick(c,U)}function d(U,H){return function(D,M){U.then(function(){return H[k]?void D(u(void 0,!0)):void H[w](D,M)},M)}}var p,g=s("./end-of-stream"),A=Symbol("lastResolve"),_=Symbol("lastReject"),T=Symbol("error"),k=Symbol("ended"),y=Symbol("lastPromise"),w=Symbol("handlePromise"),S=Symbol("stream"),x=Object.getPrototypeOf(function(){}),I=Object.setPrototypeOf((p={get stream(){return this[S]},next:function(){var U=this,H=this[T];if(H!==null)return Promise.reject(H);if(this[k])return Promise.resolve(u(void 0,!0));if(this[S].destroyed)return new Promise(function(K,ie){o.nextTick(function(){U[T]?ie(U[T]):K(u(void 0,!0))})});var D,M=this[y];if(M)D=new Promise(d(M,this));else{var q=this[S].read();if(q!==null)return Promise.resolve(u(q,!1));D=new Promise(this[w])}return this[y]=D,D}},l(p,Symbol.asyncIterator,function(){return this}),l(p,"return",function(){var U=this;return new Promise(function(H,D){U[S].destroy(null,function(M){return M?void D(M):void H(u(void 0,!0))})})}),p),x);a.exports=function(U){var H,D=Object.create(I,(H={},l(H,S,{value:U,writable:!0}),l(H,A,{value:null,writable:!0}),l(H,_,{value:null,writable:!0}),l(H,T,{value:null,writable:!0}),l(H,k,{value:U._readableState.endEmitted,writable:!0}),l(H,w,{value:function(M,q){var K=D[S].read();K?(D[y]=null,D[A]=null,D[_]=null,M(u(K,!1))):(D[A]=M,D[_]=q)},writable:!0}),H));return D[y]=null,g(U,function(M){if(M&&M.code!=="ERR_STREAM_PREMATURE_CLOSE"){var q=D[_];return q!==null&&(D[y]=null,D[A]=null,D[_]=null,q(M)),void(D[T]=M)}var K=D[A];K!==null&&(D[y]=null,D[A]=null,D[_]=null,K(u(void 0,!0))),D[k]=!0}),U.on("readable",f.bind(null,D)),D}}).call(this)}).call(this,s("_process"))},{"./end-of-stream":24,_process:12}],22:[function(s,a){function o(y,w){var S=Object.keys(y);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(y);w&&(x=x.filter(function(I){return Object.getOwnPropertyDescriptor(y,I).enumerable})),S.push.apply(S,x)}return S}function l(y){for(var w,S=1;S<arguments.length;S++)w=arguments[S]==null?{}:arguments[S],S%2?o(Object(w),!0).forEach(function(x){u(y,x,w[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(w)):o(Object(w)).forEach(function(x){Object.defineProperty(y,x,Object.getOwnPropertyDescriptor(w,x))});return y}function u(y,w,S){return w in y?Object.defineProperty(y,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[w]=S,y}function c(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function f(y,w){for(var S,x=0;x<w.length;x++)S=w[x],S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}function d(y,w,S){return w&&f(y.prototype,w),S&&f(y,S),y}function p(y,w,S){A.prototype.copy.call(y,w,S)}var g=s("buffer"),A=g.Buffer,_=s("util"),T=_.inspect,k=T&&T.custom||"inspect";a.exports=function(){function y(){c(this,y),this.head=null,this.tail=null,this.length=0}return d(y,[{key:"push",value:function(w){var S={data:w,next:null};0<this.length?this.tail.next=S:this.head=S,this.tail=S,++this.length}},{key:"unshift",value:function(w){var S={data:w,next:this.head};this.length===0&&(this.tail=S),this.head=S,++this.length}},{key:"shift",value:function(){if(this.length!==0){var w=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,w}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(w){if(this.length===0)return"";for(var S=this.head,x=""+S.data;S=S.next;)x+=w+S.data;return x}},{key:"concat",value:function(w){if(this.length===0)return A.alloc(0);for(var S=A.allocUnsafe(w>>>0),x=this.head,I=0;x;)p(x.data,S,I),I+=x.data.length,x=x.next;return S}},{key:"consume",value:function(w,S){var x;return w<this.head.data.length?(x=this.head.data.slice(0,w),this.head.data=this.head.data.slice(w)):w===this.head.data.length?x=this.shift():x=S?this._getString(w):this._getBuffer(w),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(w){var S=this.head,x=1,I=S.data;for(w-=I.length;S=S.next;){var U=S.data,H=w>U.length?U.length:w;if(I+=H===U.length?U:U.slice(0,w),w-=H,w===0){H===U.length?(++x,this.head=S.next?S.next:this.tail=null):(this.head=S,S.data=U.slice(H));break}++x}return this.length-=x,I}},{key:"_getBuffer",value:function(w){var S=A.allocUnsafe(w),x=this.head,I=1;for(x.data.copy(S),w-=x.data.length;x=x.next;){var U=x.data,H=w>U.length?U.length:w;if(U.copy(S,S.length-w,0,H),w-=H,w===0){H===U.length?(++I,this.head=x.next?x.next:this.tail=null):(this.head=x,x.data=U.slice(H));break}++I}return this.length-=I,S}},{key:k,value:function(w,S){return T(this,l({},S,{depth:0,customInspect:!1}))}}]),y}()},{buffer:3,util:2}],23:[function(s,a){(function(o){(function(){function l(f,d){c(f,d),u(f)}function u(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function c(f,d){f.emit("error",d)}a.exports={destroy:function(f,d){var p=this,g=this._readableState&&this._readableState.destroyed,A=this._writableState&&this._writableState.destroyed;return g||A?(d?d(f):f&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,o.nextTick(c,this,f)):o.nextTick(c,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(_){!d&&_?p._writableState?p._writableState.errorEmitted?o.nextTick(u,p):(p._writableState.errorEmitted=!0,o.nextTick(l,p,_)):o.nextTick(l,p,_):d?(o.nextTick(u,p),d(_)):o.nextTick(u,p)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(f,d){var p=f._readableState,g=f._writableState;p&&p.autoDestroy||g&&g.autoDestroy?f.destroy(d):f.emit("error",d)}}}).call(this)}).call(this,s("_process"))},{_process:12}],24:[function(s,a){function o(d){var p=!1;return function(){if(!p){p=!0;for(var g=arguments.length,A=Array(g),_=0;_<g;_++)A[_]=arguments[_];d.apply(this,A)}}}function l(){}function u(d){return d.setHeader&&typeof d.abort=="function"}function c(d,p,g){if(typeof p=="function")return c(d,null,p);p||(p={}),g=o(g||l);var A=p.readable||p.readable!==!1&&d.readable,_=p.writable||p.writable!==!1&&d.writable,T=function(){d.writable||y()},k=d._writableState&&d._writableState.finished,y=function(){_=!1,k=!0,A||g.call(d)},w=d._readableState&&d._readableState.endEmitted,S=function(){A=!1,w=!0,_||g.call(d)},x=function(H){g.call(d,H)},I=function(){var H;return A&&!w?(d._readableState&&d._readableState.ended||(H=new f),g.call(d,H)):_&&!k?(d._writableState&&d._writableState.ended||(H=new f),g.call(d,H)):void 0},U=function(){d.req.on("finish",y)};return u(d)?(d.on("complete",y),d.on("abort",I),d.req?U():d.on("request",U)):_&&!d._writableState&&(d.on("end",T),d.on("close",T)),d.on("end",S),d.on("finish",y),p.error!==!1&&d.on("error",x),d.on("close",I),function(){d.removeListener("complete",y),d.removeListener("abort",I),d.removeListener("request",U),d.req&&d.req.removeListener("finish",y),d.removeListener("end",T),d.removeListener("close",T),d.removeListener("finish",y),d.removeListener("end",S),d.removeListener("error",x),d.removeListener("close",I)}}var f=s("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;a.exports=c},{"../../../errors":15}],25:[function(s,a){a.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(s,a){function o(k){var y=!1;return function(){y||(y=!0,k.apply(void 0,arguments))}}function l(k){if(k)throw k}function u(k){return k.setHeader&&typeof k.abort=="function"}function c(k,y,w,S){S=o(S);var x=!1;k.on("close",function(){x=!0}),g===void 0&&(g=s("./end-of-stream")),g(k,{readable:y,writable:w},function(U){return U?S(U):(x=!0,void S())});var I=!1;return function(U){if(!x)return I?void 0:(I=!0,u(k)?k.abort():typeof k.destroy=="function"?k.destroy():void S(U||new T("pipe")))}}function f(k){k()}function d(k,y){return k.pipe(y)}function p(k){return k.length&&typeof k[k.length-1]=="function"?k.pop():l}var g,A=s("../../../errors").codes,_=A.ERR_MISSING_ARGS,T=A.ERR_STREAM_DESTROYED;a.exports=function(){for(var k=arguments.length,y=Array(k),w=0;w<k;w++)y[w]=arguments[w];var S=p(y);if(Array.isArray(y[0])&&(y=y[0]),2>y.length)throw new _("streams");var x,I=y.map(function(U,H){var D=H<y.length-1;return c(U,D,0<H,function(M){x||(x=M),M&&I.forEach(f),D||(I.forEach(f),S(x))})});return y.reduce(d)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(s,a){function o(u,c,f){return u.highWaterMark==null?c?u[f]:null:u.highWaterMark}var l=s("../../../errors").codes.ERR_INVALID_OPT_VALUE;a.exports={getHighWaterMark:function(u,c,f,d){var p=o(c,d,f);if(p!=null){if(!(isFinite(p)&&r(p)===p)||0>p){var g=d?f:"highWaterMark";throw new l(g,p)}return r(p)}return u.objectMode?16:16384}}},{"../../../errors":15}],28:[function(s,a){a.exports=s("events").EventEmitter},{events:7}],29:[function(s,a,o){o=a.exports=s("./lib/_stream_readable.js"),o.Stream=o,o.Readable=o,o.Writable=s("./lib/_stream_writable.js"),o.Duplex=s("./lib/_stream_duplex.js"),o.Transform=s("./lib/_stream_transform.js"),o.PassThrough=s("./lib/_stream_passthrough.js"),o.finished=s("./lib/internal/streams/end-of-stream.js"),o.pipeline=s("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(s,a,o){function l(d,p){for(var g in d)p[g]=d[g]}function u(d,p,g){return f(d,p,g)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var c=s("buffer"),f=c.Buffer;f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?a.exports=c:(l(c,o),o.Buffer=u),u.prototype=Object.create(f.prototype),l(f,u),u.from=function(d,p,g){if(typeof d=="number")throw new TypeError("Argument must not be a number");return f(d,p,g)},u.alloc=function(d,p,g){if(typeof d!="number")throw new TypeError("Argument must be a number");var A=f(d);return p===void 0?A.fill(0):typeof g=="string"?A.fill(p,g):A.fill(p),A},u.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return f(d)},u.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return c.SlowBuffer(d)}},{buffer:3}],31:[function(s,a,o){function l(I){if(!I)return"utf8";for(var U;;)switch(I){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return I;default:if(U)return;I=(""+I).toLowerCase(),U=!0}}function u(I){var U=l(I);if(typeof U!="string"&&(S.isEncoding===x||!x(I)))throw new Error("Unknown encoding: "+I);return U||I}function c(I){this.encoding=u(I);var U;switch(this.encoding){case"utf16le":this.text=A,this.end=_,U=4;break;case"utf8":this.fillLast=g,U=4;break;case"base64":this.text=T,this.end=k,U=3;break;default:return this.write=y,void(this.end=w)}this.lastNeed=0,this.lastTotal=0,this.lastChar=S.allocUnsafe(U)}function f(I){return 127>=I?0:I>>5==6?2:I>>4==14?3:I>>3==30?4:I>>6==2?-1:-2}function d(I,U,H){var D=U.length-1;if(D<H)return 0;var M=f(U[D]);return 0<=M?(0<M&&(I.lastNeed=M-1),M):--D<H||M===-2?0:(M=f(U[D]),0<=M?(0<M&&(I.lastNeed=M-2),M):--D<H||M===-2?0:(M=f(U[D]),0<=M?(0<M&&(M===2?M=0:I.lastNeed=M-3),M):0))}function p(I,U){if((192&U[0])!=128)return I.lastNeed=0,"\uFFFD";if(1<I.lastNeed&&1<U.length){if((192&U[1])!=128)return I.lastNeed=1,"\uFFFD";if(2<I.lastNeed&&2<U.length&&(192&U[2])!=128)return I.lastNeed=2,"\uFFFD"}}function g(I){var U=this.lastTotal-this.lastNeed,H=p(this,I);return H===void 0?this.lastNeed<=I.length?(I.copy(this.lastChar,U,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(I.copy(this.lastChar,U,0,I.length),void(this.lastNeed-=I.length)):H}function A(I,U){if((I.length-U)%2==0){var H=I.toString("utf16le",U);if(H){var D=H.charCodeAt(H.length-1);if(55296<=D&&56319>=D)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1],H.slice(0,-1)}return H}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=I[I.length-1],I.toString("utf16le",U,I.length-1)}function _(I){var U=I&&I.length?this.write(I):"";if(this.lastNeed){var H=this.lastTotal-this.lastNeed;return U+this.lastChar.toString("utf16le",0,H)}return U}function T(I,U){var H=(I.length-U)%3;return H==0?I.toString("base64",U):(this.lastNeed=3-H,this.lastTotal=3,H==1?this.lastChar[0]=I[I.length-1]:(this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1]),I.toString("base64",U,I.length-H))}function k(I){var U=I&&I.length?this.write(I):"";return this.lastNeed?U+this.lastChar.toString("base64",0,3-this.lastNeed):U}function y(I){return I.toString(this.encoding)}function w(I){return I&&I.length?this.write(I):""}var S=s("safe-buffer").Buffer,x=S.isEncoding||function(I){switch(I=""+I,I&&I.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};o.StringDecoder=c,c.prototype.write=function(I){if(I.length===0)return"";var U,H;if(this.lastNeed){if(U=this.fillLast(I),U===void 0)return"";H=this.lastNeed,this.lastNeed=0}else H=0;return H<I.length?U?U+this.text(I,H):this.text(I,H):U||""},c.prototype.end=function(I){var U=I&&I.length?this.write(I):"";return this.lastNeed?U+"\uFFFD":U},c.prototype.text=function(I,U){var H=d(this,I,U);if(!this.lastNeed)return I.toString("utf8",U);this.lastTotal=H;var D=I.length-(H-this.lastNeed);return I.copy(this.lastChar,0,D),I.toString("utf8",U,D)},c.prototype.fillLast=function(I){return this.lastNeed<=I.length?(I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,I.length),void(this.lastNeed-=I.length))}},{"safe-buffer":30}],32:[function(s,a){(function(o){(function(){function l(u){try{if(!o.localStorage)return!1}catch{return!1}var c=o.localStorage[u];return c!=null&&(c+"").toLowerCase()==="true"}a.exports=function(u,c){function f(){if(!d){if(l("throwDeprecation"))throw new Error(c);l("traceDeprecation")?console.trace(c):console.warn(c),d=!0}return u.apply(this,arguments)}if(l("noDeprecation"))return u;var d=!1;return f}}).call(this)}).call(this,typeof rr>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:rr)},{}],"/":[function(s,a){function o(k){return k.replace(/a=ice-options:trickle\s\n/g,"")}function l(k){console.warn(k)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const u=s("debug")("simple-peer"),c=s("get-browser-rtc"),f=s("randombytes"),d=s("readable-stream"),p=s("queue-microtask"),g=s("err-code"),{Buffer:A}=s("buffer"),_=65536;class T extends d.Duplex{constructor(y){if(y=Object.assign({allowHalfOpen:!1},y),super(y),this._id=f(4).toString("hex").slice(0,7),this._debug("new peer %o",y),this.channelName=y.initiator?y.channelName||f(20).toString("hex"):null,this.initiator=y.initiator||!1,this.channelConfig=y.channelConfig||T.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},T.config,y.config),this.offerOptions=y.offerOptions||{},this.answerOptions=y.answerOptions||{},this.sdpTransform=y.sdpTransform||(w=>w),this.streams=y.streams||(y.stream?[y.stream]:[]),this.trickle=y.trickle===void 0||y.trickle,this.allowHalfTrickle=y.allowHalfTrickle!==void 0&&y.allowHalfTrickle,this.iceCompleteTimeout=y.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=y.wrtc&&typeof y.wrtc=="object"?y.wrtc:c(),!this._wrtc)throw g(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(w){return void this.destroy(g(w,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=w=>{this._onIceCandidate(w)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(w=>{this.destroy(g(w,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=w=>{this._setupData(w)},this.streams&&this.streams.forEach(w=>{this.addStream(w)}),this._pc.ontrack=w=>{this._onTrack(w)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(y){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof y=="string")try{y=JSON.parse(y)}catch{y={}}this._debug("signal()"),y.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),y.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(y.transceiverRequest.kind,y.transceiverRequest.init)),y.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(y.candidate):this._pendingCandidates.push(y.candidate)),y.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(y)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(w=>{this._addIceCandidate(w)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(w=>{this.destroy(g(w,"ERR_SET_REMOTE_DESCRIPTION"))}),y.sdp||y.candidate||y.renegotiate||y.transceiverRequest||this.destroy(g(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(y){const w=new this._wrtc.RTCIceCandidate(y);this._pc.addIceCandidate(w).catch(S=>{!w.address||w.address.endsWith(".local")?l("Ignoring unsupported ICE candidate."):this.destroy(g(S,"ERR_ADD_ICE_CANDIDATE"))})}send(y){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(y)}}addTransceiver(y,w){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(y,w),this._needsNegotiation()}catch(S){this.destroy(g(S,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:y,init:w}})}}addStream(y){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),y.getTracks().forEach(w=>{this.addTrack(w,y)})}}addTrack(y,w){if(this.destroying)return;if(this.destroyed)throw g(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const S=this._senderMap.get(y)||new Map;let x=S.get(w);if(!x)x=this._pc.addTrack(y,w),S.set(w,x),this._senderMap.set(y,S),this._needsNegotiation();else throw x.removed?g(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):g(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(y,w,S){if(this.destroying)return;if(this.destroyed)throw g(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const x=this._senderMap.get(y),I=x?x.get(S):null;if(!I)throw g(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");w&&this._senderMap.set(w,x),I.replaceTrack==null?this.destroy(g(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):I.replaceTrack(w)}removeTrack(y,w){if(this.destroying)return;if(this.destroyed)throw g(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const S=this._senderMap.get(y),x=S?S.get(w):null;if(!x)throw g(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{x.removed=!0,this._pc.removeTrack(x)}catch(I){I.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(x):this.destroy(g(I,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(y){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),y.getTracks().forEach(w=>{this.removeTrack(w,y)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,p(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(y){this._destroy(y,()=>{})}_destroy(y,w){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",y&&(y.message||y)),p(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",y&&(y.message||y)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,y&&this.emit("error",y),this.emit("close"),w()}))}_setupData(y){if(!y.channel)return this.destroy(g(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=y.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=_),this.channelName=this._channel.label,this._channel.onmessage=S=>{this._onChannelMessage(S)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=S=>{const x=S.error instanceof Error?S.error:new Error(`Datachannel error: ${S.message} ${S.filename}:${S.lineno}:${S.colno}`);this.destroy(g(x,"ERR_DATA_CHANNEL"))};let w=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(w&&this._onChannelClose(),w=!0):w=!1},5e3)}_read(){}_write(y,w,S){if(this.destroyed)return S(g(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(y)}catch(x){return this.destroy(g(x,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>_?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=S):S(null)}else this._debug("write before connect"),this._chunk=y,this._cb=S}_onFinish(){if(!this.destroyed){const y=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?y():this.once("connect",y)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(y=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(y.sdp=o(y.sdp)),y.sdp=this.sdpTransform(y.sdp);const w=()=>{if(!this.destroyed){const S=this._pc.localDescription||y;this._debug("signal"),this.emit("signal",{type:S.type,sdp:S.sdp})}};this._pc.setLocalDescription(y).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?w():this.once("_iceComplete",w))}).catch(S=>{this.destroy(g(S,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(y=>{this.destroy(g(y,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(y=>{y.mid||!y.sender.track||y.requested||(y.requested=!0,this.addTransceiver(y.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(y=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(y.sdp=o(y.sdp)),y.sdp=this.sdpTransform(y.sdp);const w=()=>{if(!this.destroyed){const S=this._pc.localDescription||y;this._debug("signal"),this.emit("signal",{type:S.type,sdp:S.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(y).then(()=>{this.destroyed||(this.trickle||this._iceComplete?w():this.once("_iceComplete",w))}).catch(S=>{this.destroy(g(S,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(y=>{this.destroy(g(y,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(g(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const y=this._pc.iceConnectionState,w=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",y,w),this.emit("iceStateChange",y,w),(y==="connected"||y==="completed")&&(this._pcReady=!0,this._maybeReady()),y==="failed"&&this.destroy(g(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),y==="closed"&&this.destroy(g(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(y){const w=S=>(Object.prototype.toString.call(S.values)==="[object Array]"&&S.values.forEach(x=>{Object.assign(S,x)}),S);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(S=>{const x=[];S.forEach(I=>{x.push(w(I))}),y(null,x)},S=>y(S)):0<this._pc.getStats.length?this._pc.getStats(S=>{if(this.destroyed)return;const x=[];S.result().forEach(I=>{const U={};I.names().forEach(H=>{U[H]=I.stat(H)}),U.id=I.id,U.type=I.type,U.timestamp=I.timestamp,x.push(w(U))}),y(null,x)},S=>y(S)):y(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const y=()=>{this.destroyed||this.getStats((w,S)=>{if(this.destroyed)return;w&&(S=[]);const x={},I={},U={};let H=!1;S.forEach(M=>{(M.type==="remotecandidate"||M.type==="remote-candidate")&&(x[M.id]=M),(M.type==="localcandidate"||M.type==="local-candidate")&&(I[M.id]=M),(M.type==="candidatepair"||M.type==="candidate-pair")&&(U[M.id]=M)});const D=M=>{H=!0;let q=I[M.localCandidateId];q&&(q.ip||q.address)?(this.localAddress=q.ip||q.address,this.localPort=+q.port):q&&q.ipAddress?(this.localAddress=q.ipAddress,this.localPort=+q.portNumber):typeof M.googLocalAddress=="string"&&(q=M.googLocalAddress.split(":"),this.localAddress=q[0],this.localPort=+q[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let K=x[M.remoteCandidateId];K&&(K.ip||K.address)?(this.remoteAddress=K.ip||K.address,this.remotePort=+K.port):K&&K.ipAddress?(this.remoteAddress=K.ipAddress,this.remotePort=+K.portNumber):typeof M.googRemoteAddress=="string"&&(K=M.googRemoteAddress.split(":"),this.remoteAddress=K[0],this.remotePort=+K[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(S.forEach(M=>{M.type==="transport"&&M.selectedCandidatePairId&&D(U[M.selectedCandidatePairId]),(M.type==="googCandidatePair"&&M.googActiveConnection==="true"||(M.type==="candidatepair"||M.type==="candidate-pair")&&M.selected)&&D(M)}),!H&&(!Object.keys(U).length||Object.keys(I).length))return void setTimeout(y,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(q){return this.destroy(g(q,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const M=this._cb;this._cb=null,M(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};y()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>_)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(y=>{this._pc.removeTrack(y),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(y){this.destroyed||(y.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:y.candidate.candidate,sdpMLineIndex:y.candidate.sdpMLineIndex,sdpMid:y.candidate.sdpMid}}):!y.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),y.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(y){if(this.destroyed)return;let w=y.data;w instanceof ArrayBuffer&&(w=A.from(w)),this.push(w)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const y=this._cb;this._cb=null,y(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(y){this.destroyed||y.streams.forEach(w=>{this._debug("on track"),this.emit("track",y.track,w),this._remoteTracks.push({track:y.track,stream:w}),this._remoteStreams.some(S=>S.id===w.id)||(this._remoteStreams.push(w),p(()=>{this._debug("on stream"),this.emit("stream",w)}))})}_debug(){const y=[].slice.call(arguments);y[0]="["+this._id+"] "+y[0],u.apply(null,y)}}T.WEBRTC_SUPPORT=!!c(),T.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},T.channelConfig={},a.exports=T},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(Mc);const Lv=Mc.exports,Io=0,Bo=1,Oc=2,Uc=(e,t)=>{he(e,Io);const r=Ey(t);pt(e,r)},Pc=(e,t,r)=>{he(e,Bo),pt(e,yy(t,r))},Nv=(e,t,r)=>Pc(t,r,bt(e)),Fc=(e,t,r)=>{try{gy(t,bt(e),r)}catch(n){console.error("Caught error while handling a Yjs update",n)}},Mv=(e,t)=>{he(e,Oc),pt(e,t)},Ov=Fc,Uv=(e,t,r,n)=>{const i=ve(e);switch(i){case Io:Nv(e,t,r);break;case Bo:Fc(e,r,n);break;case Oc:Ov(e,r,n);break;default:throw new Error("Unknown message type")}return i},ha=3e4;class Pv extends Ls{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const r=Lr();this.getLocalState()!==null&&ha/2<=r-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const n=[];this.meta.forEach((i,s)=>{s!==this.clientID&&ha<=r-i.lastUpdated&&this.states.has(s)&&n.push(s)}),n.length>0&&Ra(this,n,"timeout")},vr(ha/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const r=this.clientID,n=this.meta.get(r),i=n===void 0?0:n.clock+1,s=this.states.get(r);t===null?this.states.delete(r):this.states.set(r,t),this.meta.set(r,{clock:i,lastUpdated:Lr()});const a=[],o=[],l=[],u=[];t===null?u.push(r):s==null?t!=null&&a.push(r):(o.push(r),pi(s,t)||l.push(r)),(a.length>0||l.length>0||u.length>0)&&this.emit("change",[{added:a,updated:l,removed:u},"local"]),this.emit("update",[{added:a,updated:o,removed:u},"local"])}setLocalStateField(t,r){const n=this.getLocalState();n!==null&&this.setLocalState({...n,[t]:r})}getStates(){return this.states}}const Ra=(e,t,r)=>{const n=[];for(let i=0;i<t.length;i++){const s=t[i];if(e.states.has(s)){if(e.states.delete(s),s===e.clientID){const a=e.meta.get(s);e.meta.set(s,{clock:a.clock+1,lastUpdated:Lr()})}n.push(s)}}n.length>0&&(e.emit("change",[{added:[],updated:[],removed:n},r]),e.emit("update",[{added:[],updated:[],removed:n},r]))},ys=(e,t,r=e.states)=>{const n=t.length,i=St();he(i,n);for(let s=0;s<n;s++){const a=t[s],o=r.get(a)||null,l=e.meta.get(a).clock;he(i,a),he(i,l),yr(i,JSON.stringify(o))}return ut(i)},Fv=(e,t,r)=>{const n=wr(t),i=Lr(),s=[],a=[],o=[],l=[],u=ve(n);for(let c=0;c<u;c++){const f=ve(n);let d=ve(n);const p=JSON.parse(Rr(n)),g=e.meta.get(f),A=e.states.get(f),_=g===void 0?0:g.clock;(_<d||_===d&&p===null&&e.states.has(f))&&(p===null?f===e.clientID&&e.getLocalState()!=null?d++:e.states.delete(f):e.states.set(f,p),e.meta.set(f,{clock:d,lastUpdated:i}),g===void 0&&p!==null?s.push(f):g!==void 0&&p===null?l.push(f):p!==null&&(pi(p,A)||o.push(f),a.push(f)))}(s.length>0||o.length>0||l.length>0)&&e.emit("change",[{added:s,updated:o,removed:l},r]),(s.length>0||a.length>0||l.length>0)&&e.emit("update",[{added:s,updated:a,removed:l},r])},Vv=(e,t)=>{const r=Ea(e).buffer,n=Ea(t).buffer;return crypto.subtle.importKey("raw",r,"PBKDF2",!1,["deriveKey"]).then(i=>crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},Vc=(e,t)=>{if(!t)return co(e);const r=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,e).then(n=>{const i=St();return yr(i,"AES-GCM"),pt(i,r),pt(i,new Uint8Array(n)),ut(i)})},Hv=(e,t)=>{const r=St();return Vn(r,e),Vc(ut(r),t)},Hc=(e,t)=>{if(!t)return co(e);const r=wr(e);Rr(r)!=="AES-GCM"&&JA(tn("Unknown encryption algorithm"));const i=bt(r),s=bt(r);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},t,s).then(a=>new Uint8Array(a))},qv=(e,t)=>Hc(e,t).then(r=>Fn(wr(new Uint8Array(r)))),ir=iy("y-webrtc"),Un=0,qc=3,Ti=1,ko=4,vs=new Map,fn=new Map,Kc=e=>{let t=!0;e.webrtcConns.forEach(r=>{r.synced||(t=!1)}),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),ir("synced ",Gt,e.name,Yr," with all peers"))},Gc=(e,t,r)=>{const n=wr(t),i=St(),s=ve(n);if(e===void 0)return null;const a=e.awareness,o=e.doc;let l=!1;switch(s){case Un:{he(i,Un);const u=Uv(n,i,o,e);u===Bo&&!e.synced&&r(),u===Io&&(l=!0);break}case qc:he(i,Ti),pt(i,ys(a,Array.from(a.getStates().keys()))),l=!0;break;case Ti:Fv(a,bt(n),e);break;case ko:{const u=gn(n)===1,c=Rr(n);if(c!==e.peerId&&(e.bcConns.has(c)&&!u||!e.bcConns.has(c)&&u)){const f=[],d=[];u?(e.bcConns.add(c),d.push(c)):(e.bcConns.delete(c),f.push(c)),e.provider.emit("peers",[{added:d,removed:f,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),Qc(e)}break}default:return console.error("Unable to compute message"),i}return l?i:null},Kv=(e,t)=>{const r=e.room;return ir("received message from ",Gt,e.remotePeerId,Us," (",r.name,")",Yr,Bi),Gc(r,t,()=>{e.synced=!0,ir("synced ",Gt,r.name,Yr," with ",Gt,e.remotePeerId),Kc(r)})},da=(e,t)=>{ir("send message to ",Gt,e.remotePeerId,Yr,Us," (",e.room.name,")",Bi);try{e.peer.send(ut(t))}catch{}},Gv=(e,t)=>{ir("broadcast message in ",Gt,e.name,Yr),e.webrtcConns.forEach(r=>{try{r.peer.send(t)}catch{}})};class Kl{constructor(t,r,n,i){ir("establishing connection to ",Gt,n),this.room=i,this.remotePeerId=n,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new Lv({initiator:r,...i.provider.peerOpts}),this.peer.on("signal",s=>{Ro(t,i,{to:n,from:i.peerId,type:"signal",signal:s})}),this.peer.on("connect",()=>{ir("connected to ",Gt,n),this.connected=!0;const a=i.provider.doc,o=i.awareness,l=St();he(l,Un),Uc(l,a),da(this,l);const u=o.getStates();if(u.size>0){const c=St();he(c,Ti),pt(c,ys(o,Array.from(u.keys()))),da(this,c)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,i.webrtcConns.has(this.remotePeerId)&&(i.webrtcConns.delete(this.remotePeerId),i.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}])),Kc(i),this.peer.destroy(),ir("closed connection to ",Gt,n),Da(i)}),this.peer.on("error",s=>{ir("Error in connection to ",Gt,n,": ",s),Da(i)}),this.peer.on("data",s=>{const a=Kv(this,s);a!==null&&da(this,a)})}destroy(){this.peer.destroy()}}const Vr=(e,t)=>Vc(t,e.key).then(r=>e.mux(()=>Rv(e.name,r))),Gl=(e,t)=>{e.bcconnected&&Vr(e,t),Gv(e,t)},Da=e=>{vs.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&Ro(t,e,{type:"announce",from:e.peerId}))})},Qc=e=>{if(e.provider.filterBcConns){const t=St();he(t,ko),bi(t,1),yr(t,e.peerId),Vr(e,ut(t))}};class Qv{constructor(t,r,n,i){this.peerId=Wu(),this.doc=t,this.awareness=r.awareness,this.provider=r,this.synced=!1,this.name=n,this.key=i,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=Dv(),this.bcconnected=!1,this._bcSubscriber=s=>Hc(new Uint8Array(s),i).then(a=>this.mux(()=>{const o=Gc(this,a,()=>{});o&&Vr(this,ut(o))})),this._docUpdateHandler=(s,a)=>{const o=St();he(o,Un),Mv(o,s),Gl(this,ut(o))},this._awarenessUpdateHandler=({added:s,updated:a,removed:o},l)=>{const u=s.concat(a).concat(o),c=St();he(c,Ti),pt(c,ys(this.awareness,u)),Gl(this,ut(c))},this._beforeUnloadHandler=()=>{Ra(this.awareness,[t.clientID],"window unload"),fn.forEach(s=>{s.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),Da(this);const t=this.name;Bv(t,this._bcSubscriber),this.bcconnected=!0,Qc(this);const r=St();he(r,Un),Uc(r,this.doc),Vr(this,ut(r));const n=St();he(n,Un),Pc(n,this.doc),Vr(this,ut(n));const i=St();he(i,qc),Vr(this,ut(i));const s=St();he(s,Ti),pt(s,ys(this.awareness,[this.doc.clientID])),Vr(this,ut(s))}disconnect(){vs.forEach(r=>{r.connected&&r.send({type:"unsubscribe",topics:[this.name]})}),Ra(this.awareness,[this.doc.clientID],"disconnect");const t=St();he(t,ko),bi(t,0),yr(t,this.peerId),Vr(this,ut(t)),kv(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(r=>r.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const jv=(e,t,r,n)=>{if(fn.has(r))throw tn(`A Yjs Doc connected to room "${r}" already exists!`);const i=new Qv(e,t,r,n);return fn.set(r,i),i},Ro=(e,t,r)=>{t.key?Hv(r,t.key).then(n=>{e.send({type:"publish",topic:t.name,data:$u(n)})}):e.send({type:"publish",topic:t.name,data:r})};class $v extends _v{constructor(t){super(t),this.providers=new Set,this.on("connect",()=>{ir(`connected (${t})`);const r=Array.from(fn.keys());this.send({type:"subscribe",topics:r}),fn.forEach(n=>Ro(this,n,{type:"announce",from:n.peerId}))}),this.on("message",r=>{switch(r.type){case"publish":{const n=r.topic,i=fn.get(n);if(i==null||typeof n!="string")return;const s=a=>{const o=i.webrtcConns,l=i.peerId;if(a==null||a.from===l||a.to!==void 0&&a.to!==l||i.bcConns.has(a.from))return;const u=o.has(a.from)?()=>{}:()=>i.provider.emit("peers",[{removed:[],added:[a.from],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}]);switch(a.type){case"announce":o.size<i.provider.maxConns&&(tr(o,a.from,()=>new Kl(this,!0,a.from,i)),u());break;case"signal":a.to===l&&(tr(o,a.from,()=>new Kl(this,!1,a.from,i)).peer.signal(a.signal),u());break}};i.key?typeof r.data=="string"&&qv(zu(r.data),i.key).then(s):s(r.data)}}}),this.on("disconnect",()=>ir(`disconnect (${t})`))}}class zv extends Ls{constructor(t,r,{signaling:n=["wss://signaling.yjs.dev","wss://y-webrtc-signaling-eu.herokuapp.com","wss://y-webrtc-signaling-us.herokuapp.com"],password:i=null,awareness:s=new Pv(r),maxConns:a=20+vr(jA()*15),filterBcConns:o=!0,peerOpts:l={}}={}){super(),this.roomName=t,this.doc=r,this.filterBcConns=o,this.awareness=s,this.shouldConnect=!1,this.signalingUrls=n,this.signalingConns=[],this.maxConns=a,this.peerOpts=l,this.key=i?Vv(i,t):co(null),this.room=null,this.key.then(u=>{this.room=jv(r,this,t,u),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),r.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(t=>{const r=tr(vs,t,()=>new $v(t));this.signalingConns.push(r),r.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(t=>{t.providers.delete(this),t.providers.size===0&&(t.destroy(),vs.delete(t.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),fn.delete(this.roomName)}),super.destroy()}}var jc={exports:{}},_e={options:{usePureJavaScript:!1}},Do={},Jv=Do,Ql={};Do.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=Wv(e,t);else{var i=0,s=t.length,a=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var l=0,u=e[i];l<o.length;++l)u+=o[l]<<8,o[l]=u%s,u=u/s|0;for(;u>0;)o.push(u%s),u=u/s|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=a;for(i=o.length-1;i>=0;--i)n+=t[o[i]]}if(r){var c=new RegExp(".{1,"+r+"}","g");n=n.match(c).join(`\r
`)}return n};Do.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=Ql[t];if(!r){r=Ql[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,s=t.charAt(0),a=[0],n=0;n<e.length;n++){var o=r[e.charCodeAt(n)];if(o===void 0)return;for(var l=0,u=o;l<a.length;++l)u+=a[l]*i,a[l]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var c=0;e[c]===s&&c<e.length-1;++c)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function Wv(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var a=0,o=e.at(r);a<s.length;++a)o+=s[a]<<8,s[a]=o%n,o=o/n|0;for(;o>0;)s.push(o%n),o=o/n|0}var l="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)l+=i;for(r=s.length-1;r>=0;--r)l+=t[s[r]];return l}var jl=_e,$l=Jv,O=jl.util=jl.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){O.nextTick=process.nextTick,typeof setImmediate=="function"?O.setImmediate=setImmediate:O.setImmediate=O.nextTick;return}if(typeof setImmediate=="function"){O.setImmediate=function(){return setImmediate.apply(void 0,arguments)},O.nextTick=function(o){return setImmediate(o)};return}if(O.setImmediate=function(o){setTimeout(o,0)},typeof window<"u"&&typeof window.postMessage=="function"){let o=function(l){if(l.source===window&&l.data===e){l.stopPropagation();var u=t.slice();t.length=0,u.forEach(function(c){c()})}};var a=o,e="forge.setImmediate",t=[];O.setImmediate=function(l){t.push(l),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var l=t.slice();t.length=0,l.forEach(function(u){u()})}).observe(i,{attributes:!0});var s=O.setImmediate;O.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),s(l)):(t.push(l),t.length===1&&i.setAttribute("a",n=!n))}}O.nextTick=O.setImmediate})();O.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;O.globalScope=function(){return O.isNodejs?rr:typeof self>"u"?window:self}();O.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};O.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};O.isArrayBufferView=function(e){return e&&O.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function Ni(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}O.ByteBuffer=Lo;function Lo(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(O.isArrayBuffer(e)||O.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof Lo||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}O.ByteStringBuffer=Lo;var Yv=4096;O.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>Yv&&(this.data.substr(0,1),this._constructedStringLength=0)};O.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};O.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};O.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};O.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};O.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};O.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(O.encodeUtf8(e))};O.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};O.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};O.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};O.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};O.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};O.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};O.ByteStringBuffer.prototype.putInt=function(e,t){Ni(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};O.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};O.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};O.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};O.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};O.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};O.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};O.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};O.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};O.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};O.ByteStringBuffer.prototype.getInt=function(e){Ni(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};O.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};O.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};O.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};O.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};O.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};O.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};O.ByteStringBuffer.prototype.copy=function(){var e=O.createBuffer(this.data);return e.read=this.read,e};O.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};O.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};O.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};O.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};O.ByteStringBuffer.prototype.toString=function(){return O.decodeUtf8(this.bytes())};function Xv(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=O.isArrayBuffer(e),n=O.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}O.DataBuffer=Xv;O.DataBuffer.prototype.length=function(){return this.write-this.read};O.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};O.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};O.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};O.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};O.DataBuffer.prototype.putBytes=function(e,t){if(O.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(O.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof O.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&O.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof O.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var s;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=O.binary.hex.decode(e,s,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=O.binary.base64.decode(e,s,this.write),this;if(t==="utf8"&&(e=O.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=O.binary.raw.decode(s),this;if(t==="utf16")return this.accommodate(e.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=O.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};O.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};O.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};O.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};O.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};O.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};O.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};O.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};O.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};O.DataBuffer.prototype.putInt=function(e,t){Ni(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};O.DataBuffer.prototype.putSignedInt=function(e,t){return Ni(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};O.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};O.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};O.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};O.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};O.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};O.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};O.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};O.DataBuffer.prototype.getInt=function(e){Ni(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};O.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};O.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};O.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};O.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};O.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};O.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};O.DataBuffer.prototype.copy=function(){return new O.DataBuffer(this)};O.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};O.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};O.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};O.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};O.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return O.binary.raw.encode(t);if(e==="hex")return O.binary.hex.encode(t);if(e==="base64")return O.binary.base64.encode(t);if(e==="utf8")return O.text.utf8.decode(t);if(e==="utf16")return O.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};O.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=O.encodeUtf8(e)),new O.ByteBuffer(e)};O.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};O.xorBytes=function(e,t,r){for(var n="",i="",s="",a=0,o=0;r>0;--r,++a)i=e.charCodeAt(a)^t.charCodeAt(a),o>=10&&(n+=s,s="",o=0),s+=String.fromCharCode(i),++o;return n+=s,n};O.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};O.bytesToHex=function(e){return O.createBuffer(e).toHex()};O.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var Gr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Qr=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],$c="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";O.encode64=function(e,t){for(var r="",n="",i,s,a,o=0;o<e.length;)i=e.charCodeAt(o++),s=e.charCodeAt(o++),a=e.charCodeAt(o++),r+=Gr.charAt(i>>2),r+=Gr.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Gr.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":Gr.charAt(a&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};O.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,s,a=0;a<e.length;)r=Qr[e.charCodeAt(a++)-43],n=Qr[e.charCodeAt(a++)-43],i=Qr[e.charCodeAt(a++)-43],s=Qr[e.charCodeAt(a++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t};O.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};O.decodeUtf8=function(e){return decodeURIComponent(escape(e))};O.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:$l.encode,decode:$l.decode}};O.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};O.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};O.binary.hex.encode=O.bytesToHex;O.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,s=r;for(e.length&1&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n};O.binary.base64.encode=function(e,t){for(var r="",n="",i,s,a,o=0;o<e.byteLength;)i=e[o++],s=e[o++],a=e[o++],r+=Gr.charAt(i>>2),r+=Gr.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Gr.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":Gr.charAt(a&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};O.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,a,o,l=0,u=r;l<e.length;)i=Qr[e.charCodeAt(l++)-43],s=Qr[e.charCodeAt(l++)-43],a=Qr[e.charCodeAt(l++)-43],o=Qr[e.charCodeAt(l++)-43],n[u++]=i<<2|s>>4,a!==64&&(n[u++]=(s&15)<<4|a>>2,o!==64&&(n[u++]=(a&3)<<6|o));return t?u-r:n.subarray(0,u)};O.binary.base58.encode=function(e,t){return O.binary.baseN.encode(e,$c,t)};O.binary.base58.decode=function(e,t){return O.binary.baseN.decode(e,$c,t)};O.text={utf8:{},utf16:{}};O.text.utf8.encode=function(e,t,r){e=O.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};O.text.utf8.decode=function(e){return O.decodeUtf8(String.fromCharCode.apply(null,e))};O.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,a=r,o=0;o<e.length;++o)i[a++]=e.charCodeAt(o),s+=2;return t?s-r:n};O.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};O.deflate=function(e,t,r){if(t=O.decode64(e.deflate(O.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};O.inflate=function(e,t,r){var n=e.inflate(O.encode64(t)).rval;return n===null?null:O.decode64(n)};var No=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=O.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},Mo=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(O.decode64(r))),r},Zv=function(e,t,r,n){var i=Mo(e,t);i===null&&(i={}),i[r]=n,No(e,t,i)},e1=function(e,t,r){var n=Mo(e,t);return n!==null&&(n=r in n?n[r]:null),n},t1=function(e,t,r){var n=Mo(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),No(e,t,n)}},r1=function(e,t){No(e,t,null)},Ks=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,a=null;for(var o in r){i=r[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),s=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),s=!0)}catch(l){a=l}if(s)break}if(!s)throw a;return n};O.setItem=function(e,t,r,n,i){Ks(Zv,arguments,i)};O.getItem=function(e,t,r,n){return Ks(e1,arguments,n)};O.removeItem=function(e,t,r,n){Ks(t1,arguments,n)};O.clearItems=function(e,t,r){Ks(r1,arguments,r)};O.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};O.format=function(e){for(var t=/%./g,r,n,i=0,s=[],a=0;r=t.exec(e);){n=e.substring(a,t.lastIndex-2),n.length>0&&s.push(n),a=t.lastIndex;var o=r[0][1];switch(o){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>")}}return s.push(e.substring(a)),s.join("")};O.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,a=r===void 0?",":r,o=n===void 0?".":n,l=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",c=u.length>3?u.length%3:0;return l+(c?u.substr(0,c)+o:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(i-u).toFixed(s).slice(2):"")};O.formatSize=function(e){return e>=1073741824?e=O.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=O.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=O.formatNumber(e/1024,0)+" KiB":e=O.formatNumber(e,0)+" bytes",e};O.bytesFromIP=function(e){return e.indexOf(".")!==-1?O.bytesFromIPv4(e):e.indexOf(":")!==-1?O.bytesFromIPv6(e):null};O.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=O.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};O.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(a){return a.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=O.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=O.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};O.bytesToIP=function(e){return e.length===4?O.bytesToIPv4(e):e.length===16?O.bytesToIPv6(e):null};O.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};O.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=O.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var a=r[r.length-1],o=t.length;!a||o!==a.end+1?r.push({start:o,end:o}):(a.end=o,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(s)}if(r.length>0){var l=r[n];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),l.start===0&&t.unshift(""),l.end===7&&t.push(""))}return t.join(":")};O.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in O&&!e.update)return t(null,O.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return O.cores=navigator.hardwareConcurrency,t(null,O.cores);if(typeof Worker>"u")return O.cores=1,t(null,O.cores);if(typeof Blob>"u")return O.cores=2,t(null,O.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){var o=Date.now(),l=o+4;self.postMessage({st:o,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,o,l){if(o===0){var u=Math.floor(a.reduce(function(c,f){return c+f},0)/a.length);return O.cores=Math.max(1,u),URL.revokeObjectURL(r),t(null,O.cores)}i(l,function(c,f){a.push(s(l,f)),n(a,o-1,l)})}function i(a,o){for(var l=[],u=[],c=0;c<a;++c){var f=new Worker(r);f.addEventListener("message",function(d){if(u.push(d.data),u.length===a){for(var p=0;p<a;++p)l[p].terminate();o(null,u)}}),l.push(f)}for(var c=0;c<a;++c)l[c].postMessage(c)}function s(a,o){for(var l=[],u=0;u<a;++u)for(var c=o[u],f=l[u]=[],d=0;d<a;++d)if(u!==d){var p=o[d];(c.st>p.st&&c.st<p.et||p.st>c.st&&p.st<c.et)&&f.push(d)}return l.reduce(function(g,A){return Math.max(g,A.length)},0)}};var xt=_e;xt.cipher=xt.cipher||{};xt.cipher.algorithms=xt.cipher.algorithms||{};xt.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=xt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new xt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};xt.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=xt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new xt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};xt.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),xt.cipher.algorithms[e]=t};xt.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in xt.cipher.algorithms?xt.cipher.algorithms[e]:null};var Oo=xt.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};Oo.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=xt.util.createBuffer(),this.output=e.output||xt.util.createBuffer(),this.mode.start(t)};Oo.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Oo.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))};var wt=_e;wt.cipher=wt.cipher||{};var Be=wt.cipher.modes=wt.cipher.modes||{};Be.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Be.ecb.prototype.start=function(e){};Be.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Be.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Be.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Be.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Be.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Be.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=Gs(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Be.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};Be.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Be.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Be.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Be.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=wt.util.createBuffer(),this._partialBytes=0};Be.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Gs(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Be.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Be.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Be.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=wt.util.createBuffer(),this._partialBytes=0};Be.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Gs(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Be.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Be.ofb.prototype.decrypt=Be.ofb.prototype.encrypt;Be.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=wt.util.createBuffer(),this._partialBytes=0};Be.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Gs(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Be.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Qs(this._inBlock)};Be.ctr.prototype.decrypt=Be.ctr.prototype.encrypt;Be.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=wt.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Be.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=wt.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=wt.util.createBuffer(e.additionalData):r=wt.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=wt.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(La(n*8)))}this._inBlock=this._j0.slice(0),Qs(this._inBlock),this._partialBytes=0,r=wt.util.createBuffer(r),this._aDataLength=La(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Be.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Qs(this._inBlock)};Be.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Qs(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Be.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=wt.util.createBuffer();var n=this._aDataLength.concat(La(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Be.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Be.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};Be.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,s=this._m[r][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t};Be.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};Be.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),a=0;a<i;++a){var o=[0,0,0,0],l=a/n|0,u=(n-1-a%n)*t;o[l]=1<<t-1<<u,s[a]=this.generateSubHashTable(this.multiply(o,e),t)}return s};Be.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var a=1;a<s;++a){var o=i[s],l=i[a];i[s+a]=[o[0]^l[0],o[1]^l[1],o[2]^l[2],o[3]^l[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var u=i[s^n];i[s]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i};function Gs(e,t){if(typeof e=="string"&&(e=wt.util.createBuffer(e)),wt.util.isArray(e)&&e.length>4){var r=e;e=wt.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!wt.util.isArray(e)){for(var i=[],s=t/4,n=0;n<s;++n)i.push(e.getInt32());e=i}return e}function Qs(e){e[e.length-1]=e[e.length-1]+1&4294967295}function La(e){return[e/4294967296|0,e&4294967295]}var Je=_e;Je.aes=Je.aes||{};Je.aes.startEncrypting=function(e,t,r,n){var i=js({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};Je.aes.createEncryptionCipher=function(e,t){return js({key:e,output:null,decrypt:!1,mode:t})};Je.aes.startDecrypting=function(e,t,r,n){var i=js({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};Je.aes.createDecryptionCipher=function(e,t){return js({key:e,output:null,decrypt:!0,mode:t})};Je.aes.Algorithm=function(e,t){Uo||Jc();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return Ma(r._w,n,i,!1)},decrypt:function(n,i){return Ma(r._w,n,i,!0)}}}),r._init=!1};Je.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=Je.util.createBuffer(t);else if(Je.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=Je.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!Je.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!Je.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=Wc(t,e.decrypt&&!a),this._init=!0}};Je.aes._expandKey=function(e,t){return Uo||Jc(),Wc(e,t)};Je.aes._updateBlock=Ma;Zn("AES-ECB",Je.cipher.modes.ecb);Zn("AES-CBC",Je.cipher.modes.cbc);Zn("AES-CFB",Je.cipher.modes.cfb);Zn("AES-OFB",Je.cipher.modes.ofb);Zn("AES-CTR",Je.cipher.modes.ctr);Zn("AES-GCM",Je.cipher.modes.gcm);function Zn(e,t){var r=function(){return new Je.aes.Algorithm(e,t)};Je.cipher.registerAlgorithm(e,r)}var Uo=!1,In=4,Mt,Na,zc,un,sr;function Jc(){Uo=!0,zc=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;Mt=new Array(256),Na=new Array(256),un=new Array(4),sr=new Array(4);for(var t=0;t<4;++t)un[t]=new Array(256),sr[t]=new Array(256);for(var r=0,n=0,i,s,a,o,l,u,c,t=0;t<256;++t){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,Mt[r]=o,Na[o]=r,l=e[o],i=e[r],s=e[i],a=e[s],u=l<<24^o<<16^o<<8^(o^l),c=(i^s^a)<<24^(r^a)<<16^(r^s^a)<<8^(r^i^a);for(var f=0;f<4;++f)un[f][r]=u,sr[f][o]=c,u=u<<24|u>>>8,c=c<<24|c>>>8;r===0?r=n=1:(r=i^e[e[e[i^a]]],n^=e[e[n]])}}function Wc(e,t){for(var r=e.slice(0),n,i=1,s=r.length,a=s+6+1,o=In*a,l=s;l<o;++l)n=r[l-1],l%s===0?(n=Mt[n>>>16&255]<<24^Mt[n>>>8&255]<<16^Mt[n&255]<<8^Mt[n>>>24]^zc[i]<<24,i++):s>6&&l%s===4&&(n=Mt[n>>>24]<<24^Mt[n>>>16&255]<<16^Mt[n>>>8&255]<<8^Mt[n&255]),r[l]=r[l-s]^n;if(t){var u,c=sr[0],f=sr[1],d=sr[2],p=sr[3],g=r.slice(0);o=r.length;for(var l=0,A=o-In;l<o;l+=In,A-=In)if(l===0||l===o-In)g[l]=r[A],g[l+1]=r[A+3],g[l+2]=r[A+2],g[l+3]=r[A+1];else for(var _=0;_<In;++_)u=r[A+_],g[l+(3&-_)]=c[Mt[u>>>24]]^f[Mt[u>>>16&255]]^d[Mt[u>>>8&255]]^p[Mt[u&255]];r=g}return r}function Ma(e,t,r,n){var i=e.length/4-1,s,a,o,l,u;n?(s=sr[0],a=sr[1],o=sr[2],l=sr[3],u=Na):(s=un[0],a=un[1],o=un[2],l=un[3],u=Mt);var c,f,d,p,g,A,_;c=t[0]^e[0],f=t[n?3:1]^e[1],d=t[2]^e[2],p=t[n?1:3]^e[3];for(var T=3,k=1;k<i;++k)g=s[c>>>24]^a[f>>>16&255]^o[d>>>8&255]^l[p&255]^e[++T],A=s[f>>>24]^a[d>>>16&255]^o[p>>>8&255]^l[c&255]^e[++T],_=s[d>>>24]^a[p>>>16&255]^o[c>>>8&255]^l[f&255]^e[++T],p=s[p>>>24]^a[c>>>16&255]^o[f>>>8&255]^l[d&255]^e[++T],c=g,f=A,d=_;r[0]=u[c>>>24]<<24^u[f>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^e[++T],r[n?3:1]=u[f>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[c&255]^e[++T],r[2]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[c>>>8&255]<<8^u[f&255]^e[++T],r[n?1:3]=u[p>>>24]<<24^u[c>>>16&255]<<16^u[f>>>8&255]<<8^u[d&255]^e[++T]}function js(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=Je.cipher.createDecipher(r,e.key):n=Je.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,a){var o=null;a instanceof Je.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(n,a)},n}var gi=_e;gi.pki=gi.pki||{};var Oa=gi.pki.oids=gi.oids=gi.oids||{};function J(e,t){Oa[e]=t,Oa[t]=e}function Fe(e,t){Oa[e]=t}J("1.2.840.113549.1.1.1","rsaEncryption");J("1.2.840.113549.1.1.4","md5WithRSAEncryption");J("1.2.840.113549.1.1.5","sha1WithRSAEncryption");J("1.2.840.113549.1.1.7","RSAES-OAEP");J("1.2.840.113549.1.1.8","mgf1");J("1.2.840.113549.1.1.9","pSpecified");J("1.2.840.113549.1.1.10","RSASSA-PSS");J("1.2.840.113549.1.1.11","sha256WithRSAEncryption");J("1.2.840.113549.1.1.12","sha384WithRSAEncryption");J("1.2.840.113549.1.1.13","sha512WithRSAEncryption");J("1.3.101.112","EdDSA25519");J("1.2.840.10040.4.3","dsa-with-sha1");J("1.3.14.3.2.7","desCBC");J("1.3.14.3.2.26","sha1");J("1.3.14.3.2.29","sha1WithRSASignature");J("2.16.840.1.101.3.4.2.1","sha256");J("2.16.840.1.101.3.4.2.2","sha384");J("2.16.840.1.101.3.4.2.3","sha512");J("2.16.840.1.101.3.4.2.4","sha224");J("2.16.840.1.101.3.4.2.5","sha512-224");J("2.16.840.1.101.3.4.2.6","sha512-256");J("1.2.840.113549.2.2","md2");J("1.2.840.113549.2.5","md5");J("1.2.840.113549.1.7.1","data");J("1.2.840.113549.1.7.2","signedData");J("1.2.840.113549.1.7.3","envelopedData");J("1.2.840.113549.1.7.4","signedAndEnvelopedData");J("1.2.840.113549.1.7.5","digestedData");J("1.2.840.113549.1.7.6","encryptedData");J("1.2.840.113549.1.9.1","emailAddress");J("1.2.840.113549.1.9.2","unstructuredName");J("1.2.840.113549.1.9.3","contentType");J("1.2.840.113549.1.9.4","messageDigest");J("1.2.840.113549.1.9.5","signingTime");J("1.2.840.113549.1.9.6","counterSignature");J("1.2.840.113549.1.9.7","challengePassword");J("1.2.840.113549.1.9.8","unstructuredAddress");J("1.2.840.113549.1.9.14","extensionRequest");J("1.2.840.113549.1.9.20","friendlyName");J("1.2.840.113549.1.9.21","localKeyId");J("1.2.840.113549.1.9.22.1","x509Certificate");J("1.2.840.113549.1.12.10.1.1","keyBag");J("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");J("1.2.840.113549.1.12.10.1.3","certBag");J("1.2.840.113549.1.12.10.1.4","crlBag");J("1.2.840.113549.1.12.10.1.5","secretBag");J("1.2.840.113549.1.12.10.1.6","safeContentsBag");J("1.2.840.113549.1.5.13","pkcs5PBES2");J("1.2.840.113549.1.5.12","pkcs5PBKDF2");J("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");J("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");J("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");J("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");J("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");J("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");J("1.2.840.113549.2.7","hmacWithSHA1");J("1.2.840.113549.2.8","hmacWithSHA224");J("1.2.840.113549.2.9","hmacWithSHA256");J("1.2.840.113549.2.10","hmacWithSHA384");J("1.2.840.113549.2.11","hmacWithSHA512");J("1.2.840.113549.3.7","des-EDE3-CBC");J("2.16.840.1.101.3.4.1.2","aes128-CBC");J("2.16.840.1.101.3.4.1.22","aes192-CBC");J("2.16.840.1.101.3.4.1.42","aes256-CBC");J("2.5.4.3","commonName");J("2.5.4.4","surname");J("2.5.4.5","serialNumber");J("2.5.4.6","countryName");J("2.5.4.7","localityName");J("2.5.4.8","stateOrProvinceName");J("2.5.4.9","streetAddress");J("2.5.4.10","organizationName");J("2.5.4.11","organizationalUnitName");J("2.5.4.12","title");J("2.5.4.13","description");J("2.5.4.15","businessCategory");J("2.5.4.17","postalCode");J("2.5.4.42","givenName");J("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");J("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");J("2.16.840.1.113730.1.1","nsCertType");J("2.16.840.1.113730.1.13","nsComment");Fe("2.5.29.1","authorityKeyIdentifier");Fe("2.5.29.2","keyAttributes");Fe("2.5.29.3","certificatePolicies");Fe("2.5.29.4","keyUsageRestriction");Fe("2.5.29.5","policyMapping");Fe("2.5.29.6","subtreesConstraint");Fe("2.5.29.7","subjectAltName");Fe("2.5.29.8","issuerAltName");Fe("2.5.29.9","subjectDirectoryAttributes");Fe("2.5.29.10","basicConstraints");Fe("2.5.29.11","nameConstraints");Fe("2.5.29.12","policyConstraints");Fe("2.5.29.13","basicConstraints");J("2.5.29.14","subjectKeyIdentifier");J("2.5.29.15","keyUsage");Fe("2.5.29.16","privateKeyUsagePeriod");J("2.5.29.17","subjectAltName");J("2.5.29.18","issuerAltName");J("2.5.29.19","basicConstraints");Fe("2.5.29.20","cRLNumber");Fe("2.5.29.21","cRLReason");Fe("2.5.29.22","expirationDate");Fe("2.5.29.23","instructionCode");Fe("2.5.29.24","invalidityDate");Fe("2.5.29.25","cRLDistributionPoints");Fe("2.5.29.26","issuingDistributionPoint");Fe("2.5.29.27","deltaCRLIndicator");Fe("2.5.29.28","issuingDistributionPoint");Fe("2.5.29.29","certificateIssuer");Fe("2.5.29.30","nameConstraints");J("2.5.29.31","cRLDistributionPoints");J("2.5.29.32","certificatePolicies");Fe("2.5.29.33","policyMappings");Fe("2.5.29.34","policyConstraints");J("2.5.29.35","authorityKeyIdentifier");Fe("2.5.29.36","policyConstraints");J("2.5.29.37","extKeyUsage");Fe("2.5.29.46","freshestCRL");Fe("2.5.29.54","inhibitAnyPolicy");J("1.3.6.1.4.1.11129.2.4.2","timestampList");J("1.3.6.1.5.5.7.1.1","authorityInfoAccess");J("1.3.6.1.5.5.7.3.1","serverAuth");J("1.3.6.1.5.5.7.3.2","clientAuth");J("1.3.6.1.5.5.7.3.3","codeSigning");J("1.3.6.1.5.5.7.3.4","emailProtection");J("1.3.6.1.5.5.7.3.8","timeStamping");var et=_e,ne=et.asn1=et.asn1||{};ne.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};ne.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};ne.create=function(e,t,r,n,i){if(et.util.isArray(n)){for(var s=[],a=0;a<n.length;++a)n[a]!==void 0&&s.push(n[a]);n=s}var o={tagClass:e,type:t,constructed:r,composed:r||et.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=ne.copy(o)),o};ne.copy=function(e,t){var r;if(et.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(ne.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:ne.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};ne.equals=function(e,t,r){if(et.util.isArray(e)){if(!et.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!ne.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&ne.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};ne.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function ci(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var n1=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;ci(e,t,s),n=e.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};ne.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=et.util.createBuffer(e));var r=e.length(),n=Xi(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function Xi(e,t,r,n){var i;ci(e,t,2);var s=e.getByte();t--;var a=s&192,o=s&31;i=e.length();var l=n1(e,t);if(t-=i-e.length(),l!==void 0&&l>t){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=e.length(),u.remaining=t,u.requested=l,u}l=t}var c,f,d=(s&32)===32;if(d)if(c=[],l===void 0)for(;;){if(ci(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),c.push(Xi(e,t,r+1,n)),t-=i-e.length()}else for(;l>0;)i=e.length(),c.push(Xi(e,l,r+1,n)),t-=i-e.length(),l-=i-e.length();if(c===void 0&&a===ne.Class.UNIVERSAL&&o===ne.Type.BITSTRING&&(f=e.bytes(l)),c===void 0&&n.decodeBitStrings&&a===ne.Class.UNIVERSAL&&o===ne.Type.BITSTRING&&l>1){var p=e.read,g=t,A=0;if(o===ne.Type.BITSTRING&&(ci(e,t,1),A=e.getByte(),t--),A===0)try{i=e.length();var _={strict:!0,decodeBitStrings:!0},T=Xi(e,t,r+1,_),k=i-e.length();t-=k,o==ne.Type.BITSTRING&&k++;var y=T.tagClass;k===l&&(y===ne.Class.UNIVERSAL||y===ne.Class.CONTEXT_SPECIFIC)&&(c=[T])}catch{}c===void 0&&(e.read=p,t=g)}if(c===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=t}if(o===ne.Type.BMPSTRING)for(c="";l>0;l-=2)ci(e,t,2),c+=String.fromCharCode(e.getInt16()),t-=2;else c=e.getBytes(l),t-=l}var w=f===void 0?null:{bitStringContents:f};return ne.create(a,o,d,c,w)}ne.toDer=function(e){var t=et.util.createBuffer(),r=e.tagClass|e.type,n=et.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=ne.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&n.putBuffer(ne.toDer(e.value[s]))}else if(e.type===ne.Type.BMPSTRING)for(var s=0;s<e.value.length;++s)n.putInt16(e.value.charCodeAt(s));else e.type===ne.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&(e.value.charCodeAt(1)&128)===0||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var a=n.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);t.putByte(o.length|128);for(var s=o.length-1;s>=0;--s)t.putByte(o.charCodeAt(s))}return t.putBuffer(n),t};ne.oidToDer=function(e){var t=e.split("."),r=et.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,s,a,o=2;o<t.length;++o){n=!0,i=[],s=parseInt(t[o],10);do a=s&127,s=s>>>7,n||(a|=128),i.push(a),n=!1;while(s>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};ne.derToOid=function(e){var t;typeof e=="string"&&(e=et.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};ne.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var l=e.charAt(10),u=10;l!=="+"&&l!=="-"&&(o=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,a,o,0),u&&(l=e.charAt(u),l==="+"||l==="-")){var c=parseInt(e.substr(u+1,2),10),f=parseInt(e.substr(u+4,2),10),d=c*60+f;d*=6e4,l==="+"?t.setTime(+t-d):t.setTime(+t+d)}return t};ne.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),l=0,u=0,c=!1;e.charAt(e.length-1)==="Z"&&(c=!0);var f=e.length-5,d=e.charAt(f);if(d==="+"||d==="-"){var p=parseInt(e.substr(f+1,2),10),g=parseInt(e.substr(f+4,2),10);u=p*60+g,u*=6e4,d==="+"&&(u*=-1),c=!0}return e.charAt(14)==="."&&(l=parseFloat(e.substr(14),10)*1e3),c?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,a,o,l),t.setTime(+t+u)):(t.setFullYear(r,n,i),t.setHours(s,a,o,l)),t};ne.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};ne.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};ne.integerToDer=function(e){var t=et.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};ne.derToInteger=function(e){typeof e=="string"&&(e=et.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};ne.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&et.util.isArray(t.value))for(var s=0,a=0;i&&a<t.value.length;++a)i=t.value[a].optional||!1,e.value[s]&&(i=ne.validate(e.value[s],t.value[a],r,n),i?++s:t.value[a].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var o=e.bitStringContents.charCodeAt(0);if(o!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var zl=/[^\\u0000-\\u00ff]/;ne.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",s=0;s<t*r;++s)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case ne.Class.UNIVERSAL:n+="Universal:";break;case ne.Class.APPLICATION:n+="Application:";break;case ne.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case ne.Class.PRIVATE:n+="Private:";break}if(e.tagClass===ne.Class.UNIVERSAL)switch(n+=e.type,e.type){case ne.Type.NONE:n+=" (None)";break;case ne.Type.BOOLEAN:n+=" (Boolean)";break;case ne.Type.INTEGER:n+=" (Integer)";break;case ne.Type.BITSTRING:n+=" (Bit string)";break;case ne.Type.OCTETSTRING:n+=" (Octet string)";break;case ne.Type.NULL:n+=" (Null)";break;case ne.Type.OID:n+=" (Object Identifier)";break;case ne.Type.ODESC:n+=" (Object Descriptor)";break;case ne.Type.EXTERNAL:n+=" (External or Instance of)";break;case ne.Type.REAL:n+=" (Real)";break;case ne.Type.ENUMERATED:n+=" (Enumerated)";break;case ne.Type.EMBEDDED:n+=" (Embedded PDV)";break;case ne.Type.UTF8:n+=" (UTF8)";break;case ne.Type.ROID:n+=" (Relative Object Identifier)";break;case ne.Type.SEQUENCE:n+=" (Sequence)";break;case ne.Type.SET:n+=" (Set)";break;case ne.Type.PRINTABLESTRING:n+=" (Printable String)";break;case ne.Type.IA5String:n+=" (IA5String (ASCII))";break;case ne.Type.UTCTIME:n+=" (UTC time)";break;case ne.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case ne.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var a=0,o="",s=0;s<e.value.length;++s)e.value[s]!==void 0&&(a+=1,o+=ne.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(o+=","));n+=i+"Sub values: "+a+o}else{if(n+=i+"Value: ",e.type===ne.Type.OID){var l=ne.derToOid(e.value);n+=l,et.pki&&et.pki.oids&&l in et.pki.oids&&(n+=" ("+et.pki.oids[l]+") ")}if(e.type===ne.Type.INTEGER)try{n+=ne.derToInteger(e.value)}catch{n+="0x"+et.util.bytesToHex(e.value)}else if(e.type===ne.Type.BITSTRING){if(e.value.length>1?n+="0x"+et.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var u=e.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(e.type===ne.Type.OCTETSTRING)zl.test(e.value)||(n+="("+e.value+") "),n+="0x"+et.util.bytesToHex(e.value);else if(e.type===ne.Type.UTF8)try{n+=et.util.decodeUtf8(e.value)}catch(c){if(c.message==="URI malformed")n+="0x"+et.util.bytesToHex(e.value)+" (malformed UTF8)";else throw c}else e.type===ne.Type.PRINTABLESTRING||e.type===ne.Type.IA5String?n+=e.value:zl.test(e.value)?n+="0x"+et.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n};var Cs=_e,i1=Cs.md=Cs.md||{};Cs.md.algorithms=Cs.md.algorithms||{};var Ir=_e,s1=Ir.hmac=Ir.hmac||{};s1.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(s,a){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Ir.md.algorithms)t=Ir.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else t=s;if(a===null)a=e;else{if(typeof a=="string")a=Ir.util.createBuffer(a);else if(Ir.util.isArray(a)){var o=a;a=Ir.util.createBuffer();for(var l=0;l<o.length;++l)a.putByte(o[l])}var u=a.length();u>t.blockLength&&(t.start(),t.update(a.bytes()),a=t.digest()),r=Ir.util.createBuffer(),n=Ir.util.createBuffer(),u=a.length();for(var l=0;l<u;++l){var o=a.at(l);r.putByte(54^o),n.putByte(92^o)}if(u<t.blockLength)for(var o=t.blockLength-u,l=0;l<o;++l)r.putByte(54),n.putByte(92);e=a,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(s){t.update(s)},i.getMac=function(){var s=t.digest().bytes();return t.start(),t.update(n),t.update(s),t.digest()},i.digest=i.getMac,i};var hr=_e,Yc=hr.md5=hr.md5||{};hr.md.md5=hr.md.algorithms.md5=Yc;Yc.create=function(){Xc||a1();var e=null,t=hr.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=hr.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=hr.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),Jl(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=hr.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(Ua.substr(0,n.blockLength-a));for(var o,l=0,u=n.fullMessageLength.length-1;u>=0;--u)o=n.fullMessageLength[u]*8+l,l=o/4294967296>>>0,i.putInt32Le(o>>>0);var c={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};Jl(c,r,i);var f=hr.util.createBuffer();return f.putInt32Le(c.h0),f.putInt32Le(c.h1),f.putInt32Le(c.h2),f.putInt32Le(c.h3),f},n};var Ua=null,Zi=null,fi=null,Rn=null,Xc=!1;function a1(){Ua=String.fromCharCode(128),Ua+=hr.util.fillString(String.fromCharCode(0),64),Zi=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],fi=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],Rn=new Array(64);for(var e=0;e<64;++e)Rn[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);Xc=!0}function Jl(e,t,r){for(var n,i,s,a,o,l,u,c,f=r.length();f>=64;){for(i=e.h0,s=e.h1,a=e.h2,o=e.h3,c=0;c<16;++c)t[c]=r.getInt32Le(),l=o^s&(a^o),n=i+l+Rn[c]+t[c],u=fi[c],i=o,o=a,a=s,s+=n<<u|n>>>32-u;for(;c<32;++c)l=a^o&(s^a),n=i+l+Rn[c]+t[Zi[c]],u=fi[c],i=o,o=a,a=s,s+=n<<u|n>>>32-u;for(;c<48;++c)l=s^a^o,n=i+l+Rn[c]+t[Zi[c]],u=fi[c],i=o,o=a,a=s,s+=n<<u|n>>>32-u;for(;c<64;++c)l=a^(s|~o),n=i+l+Rn[c]+t[Zi[c]],u=fi[c],i=o,o=a,a=s,s+=n<<u|n>>>32-u;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+a|0,e.h3=e.h3+o|0,f-=64}}var bs=_e,Zc=bs.pem=bs.pem||{};Zc.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=qi(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=qi(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=qi(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=qi(e.headers[i]);return e.procType&&(r+=`\r
`),r+=bs.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};Zc.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(e),!!s;){var a=s[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var o={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:bs.util.decode64(s[3])};if(t.push(o),!!s[2]){for(var l=s[2].split(i),u=0;s&&u<l.length;){for(var c=l[u].replace(/\s+$/,""),f=u+1;f<l.length;++f){var d=l[f];if(!/\s/.test(d[0]))break;c+=d,u=f}if(s=c.match(n),s){for(var p={name:s[1],values:[]},g=s[2].split(","),A=0;A<g.length;++A)p.values.push(o1(g[A]));if(o.procType)if(!o.contentDomain&&p.name==="Content-Domain")o.contentDomain=g[0]||"";else if(!o.dekInfo&&p.name==="DEK-Info"){if(p.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:g[0],parameters:g[1]||null}}else o.headers.push(p);else{if(p.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(p.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:g[0],type:g[1]}}}++u}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function qi(e){for(var t=e.name+": ",r=[],n=function(l,u){return" "+u},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var s=0,a=-1,i=0;i<t.length;++i,++s)if(s>65&&a!==-1){var o=t[a];o===","?(++a,t=t.substr(0,a)+`\r
 `+t.substr(a)):t=t.substr(0,a)+`\r
`+o+t.substr(a+1),s=i-a-1,a=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(a=i);return t}function o1(e){return e.replace(/^\s+/,"")}var lt=_e;lt.des=lt.des||{};lt.des.startEncrypting=function(e,t,r,n){var i=$s({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};lt.des.createEncryptionCipher=function(e,t){return $s({key:e,output:null,decrypt:!1,mode:t})};lt.des.startDecrypting=function(e,t,r,n){var i=$s({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};lt.des.createDecryptionCipher=function(e,t){return $s({key:e,output:null,decrypt:!0,mode:t})};lt.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return Wl(r._keys,n,i,!1)},decrypt:function(n,i){return Wl(r._keys,n,i,!0)}}}),r._init=!1};lt.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=lt.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=m1(t),this._init=!0}};_r("DES-ECB",lt.cipher.modes.ecb);_r("DES-CBC",lt.cipher.modes.cbc);_r("DES-CFB",lt.cipher.modes.cfb);_r("DES-OFB",lt.cipher.modes.ofb);_r("DES-CTR",lt.cipher.modes.ctr);_r("3DES-ECB",lt.cipher.modes.ecb);_r("3DES-CBC",lt.cipher.modes.cbc);_r("3DES-CFB",lt.cipher.modes.cfb);_r("3DES-OFB",lt.cipher.modes.ofb);_r("3DES-CTR",lt.cipher.modes.ctr);function _r(e,t){var r=function(){return new lt.des.Algorithm(e,t)};lt.cipher.registerAlgorithm(e,r)}var l1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],u1=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],c1=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],f1=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],h1=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],d1=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],p1=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],g1=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function m1(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],c=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],A=e.length()>8?3:1,_=[],T=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],k=0,y,w=0;w<A;w++){var S=e.getInt32(),x=e.getInt32();y=(S>>>4^x)&252645135,x^=y,S^=y<<4,y=(x>>>-16^S)&65535,S^=y,x^=y<<-16,y=(S>>>2^x)&858993459,x^=y,S^=y<<2,y=(x>>>-16^S)&65535,S^=y,x^=y<<-16,y=(S>>>1^x)&1431655765,x^=y,S^=y<<1,y=(x>>>8^S)&16711935,S^=y,x^=y<<8,y=(S>>>1^x)&1431655765,x^=y,S^=y<<1,y=S<<8|x>>>20&240,S=x<<24|x<<8&16711680|x>>>8&65280|x>>>24&240,x=y;for(var I=0;I<T.length;++I){T[I]?(S=S<<2|S>>>26,x=x<<2|x>>>26):(S=S<<1|S>>>27,x=x<<1|x>>>27),S&=-15,x&=-15;var U=t[S>>>28]|r[S>>>24&15]|n[S>>>20&15]|i[S>>>16&15]|s[S>>>12&15]|a[S>>>8&15]|o[S>>>4&15],H=l[x>>>28]|u[x>>>24&15]|c[x>>>20&15]|f[x>>>16&15]|d[x>>>12&15]|p[x>>>8&15]|g[x>>>4&15];y=(H>>>16^U)&65535,_[k++]=U^y,_[k++]=H^y<<16}}return _}function Wl(e,t,r,n){var i=e.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=t[0],l=t[1];a=(o>>>4^l)&252645135,l^=a,o^=a<<4,a=(o>>>16^l)&65535,l^=a,o^=a<<16,a=(l>>>2^o)&858993459,o^=a,l^=a<<2,a=(l>>>8^o)&16711935,o^=a,l^=a<<8,a=(o>>>1^l)&1431655765,l^=a,o^=a<<1,o=o<<1|o>>>31,l=l<<1|l>>>31;for(var u=0;u<i;u+=3){for(var c=s[u+1],f=s[u+2],d=s[u];d!=c;d+=f){var p=l^e[d],g=(l>>>4|l<<28)^e[d+1];a=o,o=l,l=a^(u1[p>>>24&63]|f1[p>>>16&63]|d1[p>>>8&63]|g1[p&63]|l1[g>>>24&63]|c1[g>>>16&63]|h1[g>>>8&63]|p1[g&63])}a=o,o=l,l=a}o=o>>>1|o<<31,l=l>>>1|l<<31,a=(o>>>1^l)&1431655765,l^=a,o^=a<<1,a=(l>>>8^o)&16711935,o^=a,l^=a<<8,a=(l>>>2^o)&858993459,o^=a,l^=a<<2,a=(o>>>16^l)&65535,l^=a,o^=a<<16,a=(o>>>4^l)&252645135,l^=a,o^=a<<4,r[0]=o,r[1]=l}function $s(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=lt.cipher.createDecipher(r,e.key):n=lt.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,a){var o=null;a instanceof lt.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(n,a)},n}const A1={},y1=Object.freeze(Object.defineProperty({__proto__:null,default:A1},Symbol.toStringTag,{value:"Module"})),Po=eh(y1);var Ot=_e,v1=Ot.pkcs5=Ot.pkcs5||{},xr;Ot.util.isNodejs&&!Ot.options.usePureJavaScript&&(xr=Po);Ot.pbkdf2=v1.pbkdf2=function(e,t,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),Ot.util.isNodejs&&!Ot.options.usePureJavaScript&&xr.pbkdf2&&(i===null||typeof i!="object")&&(xr.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?xr.pbkdf2Sync.length===4?xr.pbkdf2(e,t,r,n,function(y,w){if(y)return s(y);s(null,w.toString("binary"))}):xr.pbkdf2(e,t,r,n,i,function(y,w){if(y)return s(y);s(null,w.toString("binary"))}):xr.pbkdf2Sync.length===4?xr.pbkdf2Sync(e,t,r,n).toString("binary"):xr.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Ot.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Ot.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var o=new Error("Derived key is too long.");if(s)return s(o);throw o}var l=Math.ceil(n/a),u=n-(l-1)*a,c=Ot.hmac.create();c.start(i,e);var f="",d,p,g;if(!s){for(var A=1;A<=l;++A){c.start(null,null),c.update(t),c.update(Ot.util.int32ToBytes(A)),d=g=c.digest().getBytes();for(var _=2;_<=r;++_)c.start(null,null),c.update(g),p=c.digest().getBytes(),d=Ot.util.xorBytes(d,p,a),g=p;f+=A<l?d:d.substr(0,u)}return f}var A=1,_;function T(){if(A>l)return s(null,f);c.start(null,null),c.update(t),c.update(Ot.util.int32ToBytes(A)),d=g=c.digest().getBytes(),_=2,k()}function k(){if(_<=r)return c.start(null,null),c.update(g),p=c.digest().getBytes(),d=Ot.util.xorBytes(d,p,a),g=p,++_,Ot.util.setImmediate(k);f+=A<l?d:d.substr(0,u),++A,T()}T()};var dr=_e,ef=dr.sha256=dr.sha256||{};dr.md.sha256=dr.md.algorithms.sha256=ef;ef.create=function(){tf||C1();var e=null,t=dr.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=dr.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=dr.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),Yl(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=dr.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(Pa.substr(0,n.blockLength-a));for(var o,l,u=n.fullMessageLength[0]*8,c=0;c<n.fullMessageLength.length-1;++c)o=n.fullMessageLength[c+1]*8,l=o/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};Yl(f,r,i);var d=dr.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d.putInt32(f.h5),d.putInt32(f.h6),d.putInt32(f.h7),d},n};var Pa=null,tf=!1,rf=null;function C1(){Pa=String.fromCharCode(128),Pa+=dr.util.fillString(String.fromCharCode(0),64),rf=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],tf=!0}function Yl(e,t,r){for(var n,i,s,a,o,l,u,c,f,d,p,g,A,_,T,k=r.length();k>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=t[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[u]=n+t[u-7]+i+t[u-16]|0;for(c=e.h0,f=e.h1,d=e.h2,p=e.h3,g=e.h4,A=e.h5,_=e.h6,T=e.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),o=_^g&(A^_),s=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),l=c&f|d&(c^f),n=T+a+o+rf[u]+t[u],i=s+l,T=_,_=A,A=g,g=p+n>>>0,p=d,d=f,f=c,c=n+i>>>0;e.h0=e.h0+c|0,e.h1=e.h1+f|0,e.h2=e.h2+d|0,e.h3=e.h3+p|0,e.h4=e.h4+g|0,e.h5=e.h5+A|0,e.h6=e.h6+_|0,e.h7=e.h7+T|0,k-=64}}var cr=_e,es=null;cr.util.isNodejs&&!cr.options.usePureJavaScript&&!process.versions["node-webkit"]&&(es=Po);var b1=cr.prng=cr.prng||{};b1.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(u,c){if(!c)return t.generateSync(u);var f=t.plugin.cipher,d=t.plugin.increment,p=t.plugin.formatKey,g=t.plugin.formatSeed,A=cr.util.createBuffer();t.key=null,_();function _(T){if(T)return c(T);if(A.length()>=u)return c(null,A.getBytes(u));if(t.generated>1048575&&(t.key=null),t.key===null)return cr.util.nextTick(function(){s(_)});var k=f(t.key,t.seed);t.generated+=k.length,A.putBytes(k),t.key=p(f(t.key,d(t.seed))),t.seed=g(f(t.key,t.seed)),cr.util.setImmediate(_)}},t.generateSync=function(u){var c=t.plugin.cipher,f=t.plugin.increment,d=t.plugin.formatKey,p=t.plugin.formatSeed;t.key=null;for(var g=cr.util.createBuffer();g.length()<u;){t.generated>1048575&&(t.key=null),t.key===null&&a();var A=c(t.key,t.seed);t.generated+=A.length,g.putBytes(A),t.key=d(c(t.key,f(t.seed))),t.seed=p(c(t.key,t.seed))}return g.getBytes(u)};function s(u){if(t.pools[0].messageLength>=32)return o(),u();var c=32-t.pools[0].messageLength<<5;t.seedFile(c,function(f,d){if(f)return u(f);t.collect(d),o(),u()})}function a(){if(t.pools[0].messageLength>=32)return o();var u=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(u)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var u=t.plugin.md.create();u.update(t.keyBytes);for(var c=1,f=0;f<32;++f)t.reseeds%c===0&&(u.update(t.pools[f].digest().getBytes()),t.pools[f].start()),c=c<<1;t.keyBytes=u.digest().getBytes(),u.start(),u.update(t.keyBytes);var d=u.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(d),t.generated=0}function l(u){var c=null,f=cr.util.globalScope,d=f.crypto||f.msCrypto;d&&d.getRandomValues&&(c=function(S){return d.getRandomValues(S)});var p=cr.util.createBuffer();if(c)for(;p.length()<u;){var g=Math.max(1,Math.min(u-p.length(),65536)/4),A=new Uint32Array(Math.floor(g));try{c(A);for(var _=0;_<A.length;++_)p.putInt32(A[_])}catch(S){if(!(typeof QuotaExceededError<"u"&&S instanceof QuotaExceededError))throw S}}if(p.length()<u)for(var T,k,y,w=Math.floor(Math.random()*65536);p.length()<u;){k=16807*(w&65535),T=16807*(w>>16),k+=(T&32767)<<16,k+=T>>15,k=(k&2147483647)+(k>>31),w=k&4294967295;for(var _=0;_<3;++_)y=w>>>(_<<3),y^=Math.floor(Math.random()*256),p.putByte(y&255)}return p.getBytes(u)}return es?(t.seedFile=function(u,c){es.randomBytes(u,function(f,d){if(f)return c(f);c(null,d.toString())})},t.seedFileSync=function(u){return es.randomBytes(u).toString()}):(t.seedFile=function(u,c){try{c(null,l(u))}catch(f){c(f)}},t.seedFileSync=l),t.collect=function(u){for(var c=u.length,f=0;f<c;++f)t.pools[t.pool].update(u.substr(f,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(u,c){for(var f="",d=0;d<c;d+=8)f+=String.fromCharCode(u>>d&255);t.collect(f)},t.registerWorker=function(u){if(u===self)t.seedFile=function(f,d){function p(g){var A=g.data;A.forge&&A.forge.prng&&(self.removeEventListener("message",p),d(A.forge.prng.err,A.forge.prng.bytes))}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:f}}})};else{var c=function(f){var d=f.data;d.forge&&d.forge.prng&&t.seedFile(d.forge.prng.needed,function(p,g){u.postMessage({forge:{prng:{err:p,bytes:g}}})})};u.addEventListener("message",c)}},t};var vt=_e;(function(){if(vt.random&&vt.random.getBytes){vt.random;return}(function(e){var t={},r=new Array(4),n=vt.util.createBuffer();t.formatKey=function(f){var d=vt.util.createBuffer(f);return f=new Array(4),f[0]=d.getInt32(),f[1]=d.getInt32(),f[2]=d.getInt32(),f[3]=d.getInt32(),vt.aes._expandKey(f,!1)},t.formatSeed=function(f){var d=vt.util.createBuffer(f);return f=new Array(4),f[0]=d.getInt32(),f[1]=d.getInt32(),f[2]=d.getInt32(),f[3]=d.getInt32(),f},t.cipher=function(f,d){return vt.aes._updateBlock(f,d,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(f){return++f[3],f},t.md=vt.md.sha256;function i(){var f=vt.prng.create(t);return f.getBytes=function(d,p){return f.generate(d,p)},f.getBytesSync=function(d){return f.generate(d)},f}var s=i(),a=null,o=vt.util.globalScope,l=o.crypto||o.msCrypto;if(l&&l.getRandomValues&&(a=function(f){return l.getRandomValues(f)}),vt.options.usePureJavaScript||!vt.util.isNodejs&&!a){if(s.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var c in navigator)try{typeof navigator[c]=="string"&&(u+=navigator[c])}catch{}s.collect(u),u=null}e&&(e().mousemove(function(f){s.collectInt(f.clientX,16),s.collectInt(f.clientY,16)}),e().keypress(function(f){s.collectInt(f.charCode,8)}))}if(!vt.random)vt.random=s;else for(var c in s)vt.random[c]=s[c];vt.random.createInstance=i,vt.random})(typeof jQuery<"u"?jQuery:null)})();var Vt=_e,pa=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Xl=[1,2,3,5],E1=function(e,t){return e<<t&65535|(e&65535)>>16-t},S1=function(e,t){return(e&65535)>>t|e<<16-t&65535};Vt.rc2=Vt.rc2||{};Vt.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Vt.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,s=Math.ceil(i/8),a=255>>(i&7),o;for(o=n;o<128;o++)r.putByte(pa[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-s,pa[r.at(128-s)&a]),o=127-s;o>=0;o--)r.setAt(o,pa[r.at(o+1)^r.at(o+s)]);return r};var nf=function(e,t,r){var n=!1,i=null,s=null,a=null,o,l,u,c,f=[];for(e=Vt.rc2.expandKey(e,t),u=0;u<64;u++)f.push(e.getInt16Le());r?(o=function(g){for(u=0;u<4;u++)g[u]+=f[c]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=E1(g[u],Xl[u]),c++},l=function(g){for(u=0;u<4;u++)g[u]+=f[g[(u+3)%4]&63]}):(o=function(g){for(u=3;u>=0;u--)g[u]=S1(g[u],Xl[u]),g[u]-=f[c]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),c--},l=function(g){for(u=3;u>=0;u--)g[u]-=f[g[(u+3)%4]&63]});var d=function(g){var A=[];for(u=0;u<4;u++){var _=i.getInt16Le();a!==null&&(r?_^=a.getInt16Le():a.putInt16Le(_)),A.push(_&65535)}c=r?0:63;for(var T=0;T<g.length;T++)for(var k=0;k<g[T][0];k++)g[T][1](A);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(A[u]):A[u]^=a.getInt16Le()),s.putInt16Le(A[u])},p=null;return p={start:function(g,A){g&&typeof g=="string"&&(g=Vt.util.createBuffer(g)),n=!1,i=Vt.util.createBuffer(),s=A||new Vt.util.createBuffer,a=g,p.output=s},update:function(g){for(n||i.putBuffer(g);i.length()>=8;)d([[5,o],[1,l],[6,o],[1,l],[5,o]])},finish:function(g){var A=!0;if(r)if(g)A=g(8,i,!r);else{var _=i.length()===8?8:8-i.length();i.fillWithByte(_,_)}if(A&&(n=!0,p.update()),!r&&(A=i.length()===0,A))if(g)A=g(8,s,!r);else{var T=s.length(),k=s.at(T-1);k>T?A=!1:s.truncate(k)}return A}},p};Vt.rc2.startEncrypting=function(e,t,r){var n=Vt.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Vt.rc2.createEncryptionCipher=function(e,t){return nf(e,t,!0)};Vt.rc2.startDecrypting=function(e,t,r){var n=Vt.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Vt.rc2.createDecryptionCipher=function(e,t){return nf(e,t,!1)};var Fa=_e;Fa.jsbn=Fa.jsbn||{};var Br;function z(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}Fa.jsbn.BigInteger=z;function Oe(){return new z(null)}function w1(e,t,r,n,i,s){for(;--s>=0;){var a=t*this.data[e++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}function _1(e,t,r,n,i,s){for(var a=t&32767,o=t>>15;--s>=0;){var l=this.data[e]&32767,u=this.data[e++]>>15,c=o*l+u*a;l=a*l+((c&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(c>>>15)+o*u+(i>>>30),r.data[n++]=l&1073741823}return i}function Zl(e,t,r,n,i,s){for(var a=t&16383,o=t>>14;--s>=0;){var l=this.data[e]&16383,u=this.data[e++]>>14,c=o*l+u*a;l=a*l+((c&16383)<<14)+r.data[n]+i,i=(l>>28)+(c>>14)+o*u,r.data[n++]=l&268435455}return i}typeof navigator>"u"?(z.prototype.am=Zl,Br=28):navigator.appName=="Microsoft Internet Explorer"?(z.prototype.am=_1,Br=30):navigator.appName!="Netscape"?(z.prototype.am=w1,Br=26):(z.prototype.am=Zl,Br=28);z.prototype.DB=Br;z.prototype.DM=(1<<Br)-1;z.prototype.DV=1<<Br;var Fo=52;z.prototype.FV=Math.pow(2,Fo);z.prototype.F1=Fo-Br;z.prototype.F2=2*Br-Fo;var T1="0123456789abcdefghijklmnopqrstuvwxyz",zs=new Array,ei,Yt;ei="0".charCodeAt(0);for(Yt=0;Yt<=9;++Yt)zs[ei++]=Yt;ei="a".charCodeAt(0);for(Yt=10;Yt<36;++Yt)zs[ei++]=Yt;ei="A".charCodeAt(0);for(Yt=10;Yt<36;++Yt)zs[ei++]=Yt;function eu(e){return T1.charAt(e)}function sf(e,t){var r=zs[e.charCodeAt(t)];return r==null?-1:r}function x1(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function I1(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function jr(e){var t=Oe();return t.fromInt(e),t}function B1(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var a=r==8?e[n]&255:sf(e,n);if(a<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&z.ZERO.subTo(this,this)}function k1(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function R1(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,s="",a=this.t,o=this.DB-a*this.DB%t;if(a-- >0)for(o<this.DB&&(n=this.data[a]>>o)>0&&(i=!0,s=eu(n));a>=0;)o<t?(n=(this.data[a]&(1<<o)-1)<<t-o,n|=this.data[--a]>>(o+=this.DB-t)):(n=this.data[a]>>(o-=t)&r,o<=0&&(o+=this.DB,--a)),n>0&&(i=!0),i&&(s+=eu(n));return i?s:"0"}function D1(){var e=Oe();return z.ZERO.subTo(this,e),e}function L1(){return this.s<0?this.negate():this}function N1(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function Js(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function M1(){return this.t<=0?0:this.DB*(this.t-1)+Js(this.data[this.t-1]^this.s&this.DM)}function O1(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function U1(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function P1(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+s+1]=this.data[o]>>n|a,a=(this.data[o]&i)<<r;for(o=s-1;o>=0;--o)t.data[o]=0;t.data[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()}function F1(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)t.data[a-r-1]|=(this.data[a]&s)<<i,t.data[a-r]=this.data[a]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}function V1(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function H1(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&z.ZERO.subTo(t,t)}function q1(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function K1(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Oe());var s=Oe(),a=this.s,o=e.s,l=this.DB-Js(n.data[n.t-1]);l>0?(n.lShiftTo(l,s),i.lShiftTo(l,r)):(n.copyTo(s),i.copyTo(r));var u=s.t,c=s.data[u-1];if(c!=0){var f=c*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),d=this.FV/f,p=(1<<this.F1)/f,g=1<<this.F2,A=r.t,_=A-u,T=t==null?Oe():t;for(s.dlShiftTo(_,T),r.compareTo(T)>=0&&(r.data[r.t++]=1,r.subTo(T,r)),z.ONE.dlShiftTo(u,T),T.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--_>=0;){var k=r.data[--A]==c?this.DM:Math.floor(r.data[A]*d+(r.data[A-1]+g)*p);if((r.data[A]+=s.am(0,k,r,_,0,u))<k)for(s.dlShiftTo(_,T),r.subTo(T,r);r.data[A]<--k;)r.subTo(T,r)}t!=null&&(r.drShiftTo(u,t),a!=o&&z.ZERO.subTo(t,t)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),a<0&&z.ZERO.subTo(r,r)}}}function G1(e){var t=Oe();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(z.ZERO)>0&&e.subTo(t,t),t}function En(e){this.m=e}function Q1(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function j1(e){return e}function $1(e){e.divRemTo(this.m,null,e)}function z1(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function J1(e,t){e.squareTo(t),this.reduce(t)}En.prototype.convert=Q1;En.prototype.revert=j1;En.prototype.reduce=$1;En.prototype.mulTo=z1;En.prototype.sqrTo=J1;function W1(){if(this.t<1)return 0;var e=this.data[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Sn(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Y1(e){var t=Oe();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(z.ZERO)>0&&this.m.subTo(t,t),t}function X1(e){var t=Oe();return e.copyTo(t),this.reduce(t),t}function Z1(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function eC(e,t){e.squareTo(t),this.reduce(t)}function tC(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Sn.prototype.convert=Y1;Sn.prototype.revert=X1;Sn.prototype.reduce=Z1;Sn.prototype.mulTo=tC;Sn.prototype.sqrTo=eC;function rC(){return(this.t>0?this.data[0]&1:this.s)==0}function nC(e,t){if(e>4294967295||e<1)return z.ONE;var r=Oe(),n=Oe(),i=t.convert(this),s=Js(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else{var a=r;r=n,n=a}return t.revert(r)}function iC(e,t){var r;return e<256||t.isEven()?r=new En(t):r=new Sn(t),this.exp(e,r)}z.prototype.copyTo=x1;z.prototype.fromInt=I1;z.prototype.fromString=B1;z.prototype.clamp=k1;z.prototype.dlShiftTo=O1;z.prototype.drShiftTo=U1;z.prototype.lShiftTo=P1;z.prototype.rShiftTo=F1;z.prototype.subTo=V1;z.prototype.multiplyTo=H1;z.prototype.squareTo=q1;z.prototype.divRemTo=K1;z.prototype.invDigit=W1;z.prototype.isEven=rC;z.prototype.exp=nC;z.prototype.toString=R1;z.prototype.negate=D1;z.prototype.abs=L1;z.prototype.compareTo=N1;z.prototype.bitLength=M1;z.prototype.mod=G1;z.prototype.modPowInt=iC;z.ZERO=jr(0);z.ONE=jr(1);function sC(){var e=Oe();return this.copyTo(e),e}function aC(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function oC(){return this.t==0?this.s:this.data[0]<<24>>24}function lC(){return this.t==0?this.s:this.data[0]<<16>>16}function uC(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function cC(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function fC(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=jr(r),i=Oe(),s=Oe(),a="";for(this.divRemTo(n,i,s);i.signum()>0;)a=(r+s.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(e)+a}function hC(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,a=0,o=0;o<e.length;++o){var l=sf(e,o);if(l<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}a=t*a+l,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(a,0)),i&&z.ZERO.subTo(this,this)}function dC(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(z.ONE.shiftLeft(e-1),Vo,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(z.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function pC(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function gC(e){return this.compareTo(e)==0}function mC(e){return this.compareTo(e)<0?this:e}function AC(e){return this.compareTo(e)>0?this:e}function yC(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function vC(e,t){return e&t}function CC(e){var t=Oe();return this.bitwiseTo(e,vC,t),t}function Vo(e,t){return e|t}function bC(e){var t=Oe();return this.bitwiseTo(e,Vo,t),t}function af(e,t){return e^t}function EC(e){var t=Oe();return this.bitwiseTo(e,af,t),t}function of(e,t){return e&~t}function SC(e){var t=Oe();return this.bitwiseTo(e,of,t),t}function wC(){for(var e=Oe(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function _C(e){var t=Oe();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function TC(e){var t=Oe();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function xC(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function IC(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+xC(this.data[e]);return this.s<0?this.t*this.DB:-1}function BC(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function kC(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=BC(this.data[r]^t);return e}function RC(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function DC(e,t){var r=z.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function LC(e){return this.changeBit(e,Vo)}function NC(e){return this.changeBit(e,of)}function MC(e){return this.changeBit(e,af)}function OC(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function UC(e){var t=Oe();return this.addTo(e,t),t}function PC(e){var t=Oe();return this.subTo(e,t),t}function FC(e){var t=Oe();return this.multiplyTo(e,t),t}function VC(e){var t=Oe();return this.divRemTo(e,t,null),t}function HC(e){var t=Oe();return this.divRemTo(e,null,t),t}function qC(e){var t=Oe(),r=Oe();return this.divRemTo(e,t,r),new Array(t,r)}function KC(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function GC(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Mi(){}function lf(e){return e}function QC(e,t,r){e.multiplyTo(t,r)}function jC(e,t){e.squareTo(t)}Mi.prototype.convert=lf;Mi.prototype.revert=lf;Mi.prototype.mulTo=QC;Mi.prototype.sqrTo=jC;function $C(e){return this.exp(e,new Mi)}function zC(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function JC(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function ti(e){this.r2=Oe(),this.q3=Oe(),z.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function WC(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Oe();return e.copyTo(t),this.reduce(t),t}function YC(e){return e}function XC(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function ZC(e,t){e.squareTo(t),this.reduce(t)}function eb(e,t,r){e.multiplyTo(t,r),this.reduce(r)}ti.prototype.convert=WC;ti.prototype.revert=YC;ti.prototype.reduce=XC;ti.prototype.mulTo=eb;ti.prototype.sqrTo=ZC;function tb(e,t){var r=e.bitLength(),n,i=jr(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new En(t):t.isEven()?s=new ti(t):s=new Sn(t);var a=new Array,o=3,l=n-1,u=(1<<n)-1;if(a[1]=s.convert(this),n>1){var c=Oe();for(s.sqrTo(a[1],c);o<=u;)a[o]=Oe(),s.mulTo(c,a[o-2],a[o]),o+=2}var f=e.t-1,d,p=!0,g=Oe(),A;for(r=Js(e.data[f])-1;f>=0;){for(r>=l?d=e.data[f]>>r-l&u:(d=(e.data[f]&(1<<r+1)-1)<<l-r,f>0&&(d|=e.data[f-1]>>this.DB+r-l)),o=n;(d&1)==0;)d>>=1,--o;if((r-=o)<0&&(r+=this.DB,--f),p)a[d].copyTo(i),p=!1;else{for(;o>1;)s.sqrTo(i,g),s.sqrTo(g,i),o-=2;o>0?s.sqrTo(i,g):(A=i,i=g,g=A),s.mulTo(g,a[d],i)}for(;f>=0&&(e.data[f]&1<<r)==0;)s.sqrTo(i,g),A=i,i=g,g=A,--r<0&&(r=this.DB-1,--f)}return s.revert(i)}function rb(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function nb(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function ib(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return z.ZERO;for(var r=e.clone(),n=this.clone(),i=jr(1),s=jr(0),a=jr(0),o=jr(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(a,i),s.subTo(o,s)):(n.subTo(r,n),t&&a.subTo(i,a),o.subTo(s,o))}if(n.compareTo(z.ONE)!=0)return z.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var nr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],sb=(1<<26)/nr[nr.length-1];function ab(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=nr[nr.length-1]){for(t=0;t<nr.length;++t)if(r.data[0]==nr[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<nr.length;){for(var n=nr[t],i=t+1;i<nr.length&&n<sb;)n*=nr[i++];for(n=r.modInt(n);t<i;)if(n%nr[t++]==0)return!1}return r.millerRabin(e)}function ob(e){var t=this.subtract(z.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=lb(),s,a=0;a<e;++a){do s=new z(this.bitLength(),i);while(s.compareTo(z.ONE)<=0||s.compareTo(t)>=0);var o=s.modPow(n,this);if(o.compareTo(z.ONE)!=0&&o.compareTo(t)!=0){for(var l=1;l++<r&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(z.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function lb(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}z.prototype.chunkSize=uC;z.prototype.toRadix=fC;z.prototype.fromRadix=hC;z.prototype.fromNumber=dC;z.prototype.bitwiseTo=yC;z.prototype.changeBit=DC;z.prototype.addTo=OC;z.prototype.dMultiply=KC;z.prototype.dAddOffset=GC;z.prototype.multiplyLowerTo=zC;z.prototype.multiplyUpperTo=JC;z.prototype.modInt=nb;z.prototype.millerRabin=ob;z.prototype.clone=sC;z.prototype.intValue=aC;z.prototype.byteValue=oC;z.prototype.shortValue=lC;z.prototype.signum=cC;z.prototype.toByteArray=pC;z.prototype.equals=gC;z.prototype.min=mC;z.prototype.max=AC;z.prototype.and=CC;z.prototype.or=bC;z.prototype.xor=EC;z.prototype.andNot=SC;z.prototype.not=wC;z.prototype.shiftLeft=_C;z.prototype.shiftRight=TC;z.prototype.getLowestSetBit=IC;z.prototype.bitCount=kC;z.prototype.testBit=RC;z.prototype.setBit=LC;z.prototype.clearBit=NC;z.prototype.flipBit=MC;z.prototype.add=UC;z.prototype.subtract=PC;z.prototype.multiply=FC;z.prototype.divide=VC;z.prototype.remainder=HC;z.prototype.divideAndRemainder=qC;z.prototype.modPow=tb;z.prototype.modInverse=ib;z.prototype.pow=$C;z.prototype.gcd=rb;z.prototype.isProbablePrime=ab;var pr=_e,uf=pr.sha1=pr.sha1||{};pr.md.sha1=pr.md.algorithms.sha1=uf;uf.create=function(){cf||ub();var e=null,t=pr.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=pr.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=pr.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),tu(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=pr.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(Va.substr(0,n.blockLength-a));for(var o,l,u=n.fullMessageLength[0]*8,c=0;c<n.fullMessageLength.length-1;++c)o=n.fullMessageLength[c+1]*8,l=o/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};tu(f,r,i);var d=pr.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d},n};var Va=null,cf=!1;function ub(){Va=String.fromCharCode(128),Va+=pr.util.fillString(String.fromCharCode(0),64),cf=!0}function tu(e,t,r){for(var n,i,s,a,o,l,u,c,f=r.length();f>=64;){for(i=e.h0,s=e.h1,a=e.h2,o=e.h3,l=e.h4,c=0;c<16;++c)n=r.getInt32(),t[c]=n,u=o^s&(a^o),n=(i<<5|i>>>27)+u+l+1518500249+n,l=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<20;++c)n=t[c-3]^t[c-8]^t[c-14]^t[c-16],n=n<<1|n>>>31,t[c]=n,u=o^s&(a^o),n=(i<<5|i>>>27)+u+l+1518500249+n,l=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<32;++c)n=t[c-3]^t[c-8]^t[c-14]^t[c-16],n=n<<1|n>>>31,t[c]=n,u=s^a^o,n=(i<<5|i>>>27)+u+l+1859775393+n,l=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<40;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,u=s^a^o,n=(i<<5|i>>>27)+u+l+1859775393+n,l=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<60;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,u=s&a|o&(s^a),n=(i<<5|i>>>27)+u+l+2400959708+n,l=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<80;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,u=s^a^o,n=(i<<5|i>>>27)+u+l+3395469782+n,l=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+a|0,e.h3=e.h3+o|0,e.h4=e.h4+l|0,f-=64}}var gr=_e,ff=gr.pkcs1=gr.pkcs1||{};ff.encode_rsa_oaep=function(e,t,r){var n,i,s,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),s?s.start():s=gr.md.sha1.create(),a||(a=s);var o=Math.ceil(e.n.bitLength()/8),l=o-2*s.digestLength-2;if(t.length>l){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=t.length,u.maxLength=l,u}n||(n=""),s.update(n,"raw");for(var c=s.digest(),f="",d=l-t.length,p=0;p<d;p++)f+="\0";var g=c.getBytes()+f+""+t;if(!i)i=gr.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=s.digestLength,u}var A=Es(i,o-s.digestLength-1,a),_=gr.util.xorBytes(g,A,g.length),T=Es(_,s.digestLength,a),k=gr.util.xorBytes(i,T,i.length);return"\0"+k+_};ff.decode_rsa_oaep=function(e,t,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a){var _=new Error("RSAES-OAEP encoded message length is invalid.");throw _.length=t.length,_.expectedLength=a,_}if(i===void 0?i=gr.md.sha1.create():i.start(),s||(s=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var o=i.digest().getBytes(),l=t.charAt(0),u=t.substring(1,i.digestLength+1),c=t.substring(1+i.digestLength),f=Es(c,i.digestLength,s),d=gr.util.xorBytes(u,f,u.length),p=Es(d,a-i.digestLength-1,s),g=gr.util.xorBytes(c,p,c.length),A=g.substring(0,i.digestLength),_=l!=="\0",T=0;T<i.digestLength;++T)_|=o.charAt(T)!==A.charAt(T);for(var k=1,y=i.digestLength,w=i.digestLength;w<g.length;w++){var S=g.charCodeAt(w),x=S&1^1,I=k?65534:0;_|=S&I,k=k&x,y+=k}if(_||g.charCodeAt(y)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(y+1)};function Es(e,t,r){r||(r=gr.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(e+a),n+=r.digest().getBytes()}return n.substring(0,t)}var Pr=_e;(function(){if(Pr.prime){Pr.prime;return}var e=Pr.prime=Pr.prime||{},t=Pr.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(f,d){return f|d};e.generateProbablePrime=function(f,d,p){typeof d=="function"&&(p=d,d={}),d=d||{};var g=d.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var A=d.prng||Pr.random,_={nextBytes:function(T){for(var k=A.getBytesSync(T.length),y=0;y<T.length;++y)T[y]=k.charCodeAt(y)}};if(g.name==="PRIMEINC")return s(f,_,g.options,p);throw new Error("Invalid prime generation algorithm: "+g.name)};function s(f,d,p,g){return"workers"in p?l(f,d,p,g):a(f,d,p,g)}function a(f,d,p,g){var A=u(f,d),_=0,T=c(A.bitLength());"millerRabinTests"in p&&(T=p.millerRabinTests);var k=10;"maxBlockTime"in p&&(k=p.maxBlockTime),o(A,f,d,_,T,k,g)}function o(f,d,p,g,A,_,T){var k=+new Date;do{if(f.bitLength()>d&&(f=u(d,p)),f.isProbablePrime(A))return T(null,f);f.dAddOffset(r[g++%8],0)}while(_<0||+new Date-k<_);Pr.util.setImmediate(function(){o(f,d,p,g,A,_,T)})}function l(f,d,p,g){if(typeof Worker>"u")return a(f,d,p,g);var A=u(f,d),_=p.workers,T=p.workLoad||100,k=T*30/8,y=p.workerScript||"forge/prime.worker.js";if(_===-1)return Pr.util.estimateCores(function(S,x){S&&(x=2),_=x-1,w()});w();function w(){_=Math.max(1,_);for(var S=[],x=0;x<_;++x)S[x]=new Worker(y);for(var x=0;x<_;++x)S[x].addEventListener("message",U);var I=!1;function U(H){if(!I){var D=H.data;if(D.found){for(var M=0;M<S.length;++M)S[M].terminate();return I=!0,g(null,new t(D.prime,16))}A.bitLength()>f&&(A=u(f,d));var q=A.toString(16);H.target.postMessage({hex:q,workLoad:T}),A.dAddOffset(k,0)}}}}function u(f,d){var p=new t(f,d),g=f-1;return p.testBit(g)||p.bitwiseTo(t.ONE.shiftLeft(g),i,p),p.dAddOffset(31-p.mod(n).byteValue(),0),p}function c(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})();var fe=_e;if(typeof Me>"u")var Me=fe.jsbn.BigInteger;var Ha=fe.util.isNodejs?Po:null,V=fe.asn1,Xt=fe.util;fe.pki=fe.pki||{};fe.pki.rsa=fe.rsa=fe.rsa||{};var ye=fe.pki,cb=[6,4,2,4,2,4,6,2],fb={name:"PrivateKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},hb={name:"RSAPrivateKey",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},db={name:"RSAPublicKey",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},pb=fe.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},gb={name:"DigestInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:V.Class.UNIVERSAL,type:V.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},mb=function(e){var t;if(e.algorithm in ye.oids)t=ye.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=V.oidToDer(t).getBytes(),i=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),s=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);s.value.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,n)),s.value.push(V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,""));var a=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(a),V.toDer(i).getBytes()},hf=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(Me.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(Me.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new Me(fe.util.bytesToHex(fe.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(Me.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var a=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return a=a.multiply(n.modInverse(t.n)).mod(t.n),a};ye.rsa.encrypt=function(e,t,r){var n=r,i,s=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=df(e,t,r)):(i=fe.util.createBuffer(),i.putBytes(e));for(var a=new Me(i.toHex(),16),o=hf(a,t,n),l=o.toString(16),u=fe.util.createBuffer(),c=s-Math.ceil(l.length/2);c>0;)u.putByte(0),--c;return u.putBytes(fe.util.hexToBytes(l)),u.getBytes()};ye.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var a=new Me(fe.util.createBuffer(e).toHex(),16);if(a.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=hf(a,t,r),l=o.toString(16),u=fe.util.createBuffer(),c=i-Math.ceil(l.length/2);c>0;)u.putByte(0),--c;return u.putBytes(fe.util.hexToBytes(l)),n!==!1?Ss(u.getBytes(),t,r):u.getBytes()};ye.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||fe.random,i={nextBytes:function(o){for(var l=n.getBytesSync(o.length),u=0;u<o.length;++u)o[u]=l.charCodeAt(u)}},s=r.algorithm||"PRIMEINC",a;if(s==="PRIMEINC")a={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new Me(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+s);return a};ye.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new Me(null);r.fromInt(30);for(var n=0,i=function(f,d){return f|d},s=+new Date,a,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var l=e.p===null?e.pBits:e.qBits,u=l-1;e.pqState===0?(e.num=new Me(l,e.rng),e.num.testBit(u)||e.num.bitwiseTo(Me.ONE.shiftLeft(u),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>l?e.pqState=0:e.num.isProbablePrime(yb(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(cb[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(Me.ONE).gcd(e.e).compareTo(Me.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(Me.ONE),e.q1=e.q.subtract(Me.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(Me.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var c=e.e.modInverse(e.phi);e.keys={privateKey:ye.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:ye.rsa.setPublicKey(e.n,e.e)}}a=+new Date,o+=a-s,s=a}return e.keys!==null};ye.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!fe.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(ru("generateKeyPair"))return Ha.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,l,u){if(o)return n(o);n(null,{privateKey:ye.privateKeyFromPem(u),publicKey:ye.publicKeyFromPem(l)})});if(nu("generateKey")&&nu("exportKey"))return Xt.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:su(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return Xt.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o)}).then(function(o){if(o){var l=ye.privateKeyFromAsn1(V.fromDer(fe.util.createBuffer(o)));n(null,{privateKey:l,publicKey:ye.setRsaPublicKey(l.n,l.e)})}});if(iu("generateKey")&&iu("exportKey")){var i=Xt.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:su(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var l=o.target.result,u=Xt.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);u.oncomplete=function(c){var f=c.target.result,d=ye.privateKeyFromAsn1(V.fromDer(fe.util.createBuffer(f)));n(null,{privateKey:d,publicKey:ye.setRsaPublicKey(d.n,d.e)})},u.onerror=function(c){n(c)}},i.onerror=function(o){n(o)};return}}else if(ru("generateKeyPairSync")){var s=Ha.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:ye.privateKeyFromPem(s.privateKey),publicKey:ye.publicKeyFromPem(s.publicKey)}}}var a=ye.rsa.createKeyPairGenerationState(e,t,r);if(!n)return ye.rsa.stepKeyPairGenerationState(a,0),a.keys;Ab(a,r,n)};ye.setRsaPublicKey=ye.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,l,u){return df(o,l,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,l){return fe.pkcs1.encode_rsa_oaep(l,o,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return ye.rsa.encrypt(a,r,!0)},r.verify=function(n,i,s,a){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(l,u){u=Ss(u,r,!0);var c=V.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),f={},d=[];if(!V.validate(c,gb,f,d)){var p=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw p.errors=d,p}var g=V.derToOid(f.algorithmIdentifier);if(!(g===fe.oids.md2||g===fe.oids.md5||g===fe.oids.sha1||g===fe.oids.sha224||g===fe.oids.sha256||g===fe.oids.sha384||g===fe.oids.sha512||g===fe.oids["sha512-224"]||g===fe.oids["sha512-256"])){var p=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw p.oid=g,p}if((g===fe.oids.md2||g===fe.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===f.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(l,u){return u=Ss(u,r,!0),l===u}});var o=ye.rsa.decrypt(i,r,!0,!1);return s.verify(n,o,r.n.bitLength())},r};ye.setRsaPrivateKey=ye.rsa.setPrivateKey=function(e,t,r,n,i,s,a,o){var l={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:a,qInv:o};return l.decrypt=function(u,c,f){typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSAES-PKCS1-V1_5");var d=ye.rsa.decrypt(u,l,!1,!1);if(c==="RSAES-PKCS1-V1_5")c={decode:Ss};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={decode:function(p,g){return fe.pkcs1.decode_rsa_oaep(g,p,f)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+c+'".');return c.decode(d,l,!1)},l.sign=function(u,c){var f=!1;typeof c=="string"&&(c=c.toUpperCase()),c===void 0||c==="RSASSA-PKCS1-V1_5"?(c={encode:mb},f=1):(c==="NONE"||c==="NULL"||c===null)&&(c={encode:function(){return u}},f=1);var d=c.encode(u,l.n.bitLength());return ye.rsa.encrypt(d,l,f)},l};ye.wrapRsaPrivateKey=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(0).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(ye.oids.rsaEncryption).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,V.toDer(e).getBytes())])};ye.privateKeyFromAsn1=function(e){var t={},r=[];if(V.validate(e,fb,t,r)&&(e=V.fromDer(fe.util.createBuffer(t.privateKey))),t={},r=[],!V.validate(e,hb,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,a,o,l,u,c,f;return i=fe.util.createBuffer(t.privateKeyModulus).toHex(),s=fe.util.createBuffer(t.privateKeyPublicExponent).toHex(),a=fe.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=fe.util.createBuffer(t.privateKeyPrime1).toHex(),l=fe.util.createBuffer(t.privateKeyPrime2).toHex(),u=fe.util.createBuffer(t.privateKeyExponent1).toHex(),c=fe.util.createBuffer(t.privateKeyExponent2).toHex(),f=fe.util.createBuffer(t.privateKeyCoefficient).toHex(),ye.setRsaPrivateKey(new Me(i,16),new Me(s,16),new Me(a,16),new Me(o,16),new Me(l,16),new Me(u,16),new Me(c,16),new Me(f,16))};ye.privateKeyToAsn1=ye.privateKeyToRSAPrivateKey=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(0).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,ur(e.n)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,ur(e.e)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,ur(e.d)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,ur(e.p)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,ur(e.q)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,ur(e.dP)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,ur(e.dQ)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,ur(e.qInv))])};ye.publicKeyFromAsn1=function(e){var t={},r=[];if(V.validate(e,pb,t,r)){var n=V.derToOid(t.publicKeyOid);if(n!==ye.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!V.validate(e,db,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=fe.util.createBuffer(t.publicKeyModulus).toHex(),a=fe.util.createBuffer(t.publicKeyExponent).toHex();return ye.setRsaPublicKey(new Me(s,16),new Me(a,16))};ye.publicKeyToAsn1=ye.publicKeyToSubjectPublicKeyInfo=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(ye.oids.rsaEncryption).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,[ye.publicKeyToRSAPublicKey(e)])])};ye.publicKeyToRSAPublicKey=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,ur(e.n)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,ur(e.e))])};function df(e,t,r){var n=fe.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var a=i-3-e.length,o;if(r===0||r===1){o=r===0?0:255;for(var l=0;l<a;++l)n.putByte(o)}else for(;a>0;){for(var u=0,c=fe.random.getBytes(a),l=0;l<a;++l)o=c.charCodeAt(l),o===0?++u:n.putByte(o);a=u}return n.putByte(0),n.putBytes(e),n}function Ss(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),s=fe.util.createBuffer(e),a=s.getByte(),o=s.getByte();if(a!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(o===0){l=i-3-n;for(var u=0;u<l;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(l=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++l}else if(o===2)for(l=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++l}var c=s.getByte();if(c!==0||l!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function Ab(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){s(e.pBits,function(o,l){if(o)return r(o);if(e.p=l,e.q!==null)return a(o,e.q);s(e.qBits,a)})}function s(o,l){fe.prime.generateProbablePrime(o,n,l)}function a(o,l){if(o)return r(o);if(e.q=l,e.p.compareTo(e.q)<0){var u=e.p;e.p=e.q,e.q=u}if(e.p.subtract(Me.ONE).gcd(e.e).compareTo(Me.ONE)!==0){e.p=null,i();return}if(e.q.subtract(Me.ONE).gcd(e.e).compareTo(Me.ONE)!==0){e.q=null,s(e.qBits,a);return}if(e.p1=e.p.subtract(Me.ONE),e.q1=e.q.subtract(Me.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(Me.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,s(e.qBits,a);return}var c=e.e.modInverse(e.phi);e.keys={privateKey:ye.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:ye.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function ur(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=fe.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function yb(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function ru(e){return fe.util.isNodejs&&typeof Ha[e]=="function"}function nu(e){return typeof Xt.globalScope<"u"&&typeof Xt.globalScope.crypto=="object"&&typeof Xt.globalScope.crypto.subtle=="object"&&typeof Xt.globalScope.crypto.subtle[e]=="function"}function iu(e){return typeof Xt.globalScope<"u"&&typeof Xt.globalScope.msCrypto=="object"&&typeof Xt.globalScope.msCrypto.subtle=="object"&&typeof Xt.globalScope.msCrypto.subtle[e]=="function"}function su(e){for(var t=fe.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}var ae=_e;if(typeof vb>"u")var vb=ae.jsbn.BigInteger;var j=ae.asn1,Ee=ae.pki=ae.pki||{};Ee.pbe=ae.pbe=ae.pbe||{};var nn=Ee.oids,Cb={name:"EncryptedPrivateKeyInfo",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:j.Class.UNIVERSAL,type:j.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},bb={name:"PBES2Algorithms",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:j.Class.UNIVERSAL,type:j.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:j.Class.UNIVERSAL,type:j.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Eb={name:"pkcs-12PbeParams",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:j.Class.UNIVERSAL,type:j.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"iterations"}]};Ee.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=ae.random.getBytesSync(r.saltSize),i=r.count,s=j.integerToDer(i),a,o,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,c,f;switch(r.algorithm){case"aes128":a=16,u=16,c=nn["aes128-CBC"],f=ae.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,c=nn["aes192-CBC"],f=ae.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,c=nn["aes256-CBC"],f=ae.aes.createEncryptionCipher;break;case"des":a=8,u=8,c=nn.desCBC,f=ae.des.createEncryptionCipher;break;default:var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),g=gf(p),A=ae.pkcs5.pbkdf2(t,n,i,a,g),_=ae.random.getBytesSync(u),T=f(A);T.start(_),T.update(j.toDer(e)),T.finish(),l=T.output.getBytes();var k=Sb(n,s,a,p);o=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(nn.pkcs5PBES2).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(nn.pkcs5PBKDF2).getBytes()),k]),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(c).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,_)])])])}else if(r.algorithm==="3des"){a=24;var y=new ae.util.ByteBuffer(n),A=Ee.pbe.generatePkcs12Key(t,y,1,i,a),_=Ee.pbe.generatePkcs12Key(t,y,2,i,a),T=ae.des.createEncryptionCipher(A);T.start(_),T.update(j.toDer(e)),T.finish(),l=T.output.getBytes(),o=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(nn["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,n),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,s.getBytes())])])}else{var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var w=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[o,j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,l)]);return w};Ee.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!j.validate(e,Cb,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=j.derToOid(n.encryptionOid),o=Ee.pbe.getCipher(a,n.encryptionParams,t),l=ae.util.createBuffer(n.encryptedData);return o.update(l),o.finish()&&(r=j.fromDer(o.output)),r};Ee.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:j.toDer(e).getBytes()};return ae.pem.encode(r,{maxline:t})};Ee.encryptedPrivateKeyFromPem=function(e){var t=ae.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return j.fromDer(t.body)};Ee.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=Ee.wrapRsaPrivateKey(Ee.privateKeyToAsn1(e));return n=Ee.encryptPrivateKeyInfo(n,t,r),Ee.encryptedPrivateKeyToPem(n)}var i,s,a,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,s=ae.random.getBytesSync(16),o=ae.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,s=ae.random.getBytesSync(16),o=ae.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,s=ae.random.getBytesSync(16),o=ae.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,s=ae.random.getBytesSync(8),o=ae.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,s=ae.random.getBytesSync(8),o=ae.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var u=ae.pbe.opensslDeriveBytes(t,s.substr(0,8),a),c=o(u);c.start(s),c.update(j.toDer(Ee.privateKeyToAsn1(e))),c.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:ae.util.bytesToHex(s).toUpperCase()},body:c.output.getBytes()};return ae.pem.encode(f)};Ee.decryptRsaPrivateKey=function(e,t){var r=null,n=ae.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,a;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,a=ae.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,a=ae.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,a=ae.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,a=ae.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,a=ae.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,a=function(f){return ae.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":s=8,a=function(f){return ae.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":s=16,a=function(f){return ae.rc2.createDecryptionCipher(f,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var o=ae.util.hexToBytes(n.dekInfo.parameters),l=ae.pbe.opensslDeriveBytes(t,o.substr(0,8),s),u=a(l);if(u.start(o),u.update(ae.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Ee.decryptPrivateKeyInfo(j.fromDer(r),t):r=j.fromDer(r),r!==null&&(r=Ee.privateKeyFromAsn1(r)),r};Ee.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var a,o;if(typeof s>"u"||s===null){if(!("sha1"in ae.md))throw new Error('"sha1" hash algorithm unavailable.');s=ae.md.sha1.create()}var l=s.digestLength,u=s.blockLength,c=new ae.util.ByteBuffer,f=new ae.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)f.putInt16(e.charCodeAt(o));f.putInt16(0)}var d=f.length(),p=t.length(),g=new ae.util.ByteBuffer;g.fillWithByte(r,u);var A=u*Math.ceil(p/u),_=new ae.util.ByteBuffer;for(o=0;o<A;o++)_.putByte(t.at(o%p));var T=u*Math.ceil(d/u),k=new ae.util.ByteBuffer;for(o=0;o<T;o++)k.putByte(f.at(o%d));var y=_;y.putBuffer(k);for(var w=Math.ceil(i/l),S=1;S<=w;S++){var x=new ae.util.ByteBuffer;x.putBytes(g.bytes()),x.putBytes(y.bytes());for(var I=0;I<n;I++)s.start(),s.update(x.getBytes()),x=s.digest();var U=new ae.util.ByteBuffer;for(o=0;o<u;o++)U.putByte(x.at(o%l));var H=Math.ceil(p/u)+Math.ceil(d/u),D=new ae.util.ByteBuffer;for(a=0;a<H;a++){var M=new ae.util.ByteBuffer(y.getBytes(u)),q=511;for(o=U.length()-1;o>=0;o--)q=q>>8,q+=U.at(o)+M.at(o),M.setAt(o,q&255);D.putBuffer(M)}y=D,c.putBuffer(x)}return c.truncate(c.length()-i),c};Ee.pbe.getCipher=function(e,t,r){switch(e){case Ee.oids.pkcs5PBES2:return Ee.pbe.getCipherForPBES2(e,t,r);case Ee.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Ee.oids["pbewithSHAAnd40BitRC2-CBC"]:return Ee.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Ee.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!j.validate(t,bb,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(e=j.derToOid(n.kdfOid),e!==Ee.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=e,s.supportedOids=["pkcs5PBKDF2"],s}if(e=j.derToOid(n.encOid),e!==Ee.oids["aes128-CBC"]&&e!==Ee.oids["aes192-CBC"]&&e!==Ee.oids["aes256-CBC"]&&e!==Ee.oids["des-EDE3-CBC"]&&e!==Ee.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=e,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var a=n.kdfSalt,o=ae.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var l,u;switch(Ee.oids[e]){case"aes128-CBC":l=16,u=ae.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,u=ae.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,u=ae.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,u=ae.des.createDecryptionCipher;break;case"desCBC":l=8,u=ae.des.createDecryptionCipher;break}var c=pf(n.prfOid),f=ae.pkcs5.pbkdf2(r,a,o,l,c),d=n.encIv,p=u(f);return p.start(d),p};Ee.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!j.validate(t,Eb,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=ae.util.createBuffer(n.salt),o=ae.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var l,u,c;switch(e){case Ee.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,u=8,c=ae.des.startDecrypting;break;case Ee.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,u=8,c=function(A,_){var T=ae.rc2.createDecryptionCipher(A,40);return T.start(_,null),T};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=e,s}var f=pf(n.prfOid),d=Ee.pbe.generatePkcs12Key(r,a,1,o,l,f);f.start();var p=Ee.pbe.generatePkcs12Key(r,a,2,o,u,f);return c(d,p)};Ee.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in ae.md))throw new Error('"md5" hash algorithm unavailable.');n=ae.md.md5.create()}t===null&&(t="");for(var i=[au(n,e+t)],s=16,a=1;s<r;++a,s+=16)i.push(au(n,i[a-1]+e+t));return i.join("").substr(0,r)};function au(e,t){return e.start().update(t).digest().getBytes()}function pf(e){var t;if(!e)t="hmacWithSHA1";else if(t=Ee.oids[j.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return gf(t)}function gf(e){var t=ae.md;switch(e){case"hmacWithSHA224":t=ae.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function Sb(e,t,r,n){var i=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,e),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,ae.util.hexToBytes(r.toString(16))),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(Ee.oids[n]).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])),i}var Gn=_e,se=Gn.asn1,ri=Gn.pkcs7asn1=Gn.pkcs7asn1||{};Gn.pkcs7=Gn.pkcs7||{};Gn.pkcs7.asn1=ri;var mf={name:"ContentInfo",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:se.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};ri.contentInfoValidator=mf;var Af={name:"EncryptedContentInfo",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:se.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:se.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};ri.envelopedDataValidator={name:"EnvelopedData",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:se.Class.UNIVERSAL,type:se.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Af)};ri.encryptedDataValidator={name:"EncryptedData",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"version"}].concat(Af)};var wb={name:"SignerInfo",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:se.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:se.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:se.Class.UNIVERSAL,type:se.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:se.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};ri.signedDataValidator={name:"SignedData",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:se.Class.UNIVERSAL,type:se.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},mf,{name:"SignedData.Certificates",tagClass:se.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:se.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:se.Class.UNIVERSAL,type:se.Type.SET,capture:"signerInfos",optional:!0,value:[wb]}]};ri.recipientInfoValidator={name:"RecipientInfo",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:se.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:se.Class.UNIVERSAL,type:se.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};var hn=_e;hn.mgf=hn.mgf||{};var _b=hn.mgf.mgf1=hn.mgf1=hn.mgf1||{};_b.create=function(e){var t={generate:function(r,n){for(var i=new hn.util.ByteBuffer,s=Math.ceil(n/e.digestLength),a=0;a<s;a++){var o=new hn.util.ByteBuffer;o.putInt32(a),e.start(),e.update(r+o.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}};return t};var ws=_e;ws.mgf=ws.mgf||{};ws.mgf.mgf1=ws.mgf1;var sn=_e,Tb=sn.pss=sn.pss||{};Tb.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=sn.util.createBuffer(i));var s;if("saltLength"in e)s=e.saltLength;else if(i!==null)s=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==s)throw new Error("Given salt length does not match length of given salt.");var a=e.prng||sn.random,o={};return o.encode=function(l,u){var c,f=u-1,d=Math.ceil(f/8),p=l.digest().getBytes();if(d<n+s+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(s):g=i.bytes();var A=new sn.util.ByteBuffer;A.fillWithByte(0,8),A.putBytes(p),A.putBytes(g),t.start(),t.update(A.getBytes());var _=t.digest().getBytes(),T=new sn.util.ByteBuffer;T.fillWithByte(0,d-s-n-2),T.putByte(1),T.putBytes(g);var k=T.getBytes(),y=d-n-1,w=r.generate(_,y),S="";for(c=0;c<y;c++)S+=String.fromCharCode(k.charCodeAt(c)^w.charCodeAt(c));var x=65280>>8*d-f&255;return S=String.fromCharCode(S.charCodeAt(0)&~x)+S.substr(1),S+_+String.fromCharCode(188)},o.verify=function(l,u,c){var f,d=c-1,p=Math.ceil(d/8);if(u=u.substr(-p),p<n+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(p-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=p-n-1,A=u.substr(0,g),_=u.substr(g,n),T=65280>>8*p-d&255;if((A.charCodeAt(0)&T)!==0)throw new Error("Bits beyond keysize not zero as expected.");var k=r.generate(_,g),y="";for(f=0;f<g;f++)y+=String.fromCharCode(A.charCodeAt(f)^k.charCodeAt(f));y=String.fromCharCode(y.charCodeAt(0)&~T)+y.substr(1);var w=p-n-s-2;for(f=0;f<w;f++)if(y.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(y.charCodeAt(w)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var S=y.substr(-s),x=new sn.util.ByteBuffer;x.fillWithByte(0,8),x.putBytes(l),x.putBytes(S),t.start(),t.update(x.getBytes());var I=t.digest().getBytes();return _===I},o};var de=_e,C=de.asn1,Z=de.pki=de.pki||{},Ne=Z.oids,gt={};gt.CN=Ne.commonName;gt.commonName="CN";gt.C=Ne.countryName;gt.countryName="C";gt.L=Ne.localityName;gt.localityName="L";gt.ST=Ne.stateOrProvinceName;gt.stateOrProvinceName="ST";gt.O=Ne.organizationName;gt.organizationName="O";gt.OU=Ne.organizationalUnitName;gt.organizationalUnitName="OU";gt.E=Ne.emailAddress;gt.emailAddress="E";var yf=de.pki.rsa.publicKeyValidator,xb={name:"Certificate",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:C.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:C.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:C.Class.UNIVERSAL,type:C.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:C.Class.UNIVERSAL,type:C.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:C.Class.UNIVERSAL,type:C.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:C.Class.UNIVERSAL,type:C.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},yf,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:C.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:C.Class.UNIVERSAL,type:C.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:C.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:C.Class.UNIVERSAL,type:C.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:C.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:C.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:C.Class.UNIVERSAL,type:C.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},Ib={name:"rsapss",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:C.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:C.Class.UNIVERSAL,type:C.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:C.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:C.Class.UNIVERSAL,type:C.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:C.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:C.Class.UNIVERSAL,type:C.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:C.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:C.Class.UNIVERSAL,type:C.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},Bb={name:"CertificationRequestInfo",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},yf,{name:"CertificationRequestInfo.attributes",tagClass:C.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:C.Class.UNIVERSAL,type:C.Type.SET,constructed:!0}]}]}]},kb={name:"CertificationRequest",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[Bb,{name:"CertificationRequest.signatureAlgorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:C.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:C.Class.UNIVERSAL,type:C.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Z.RDNAttributesAsArray=function(e,t){for(var r=[],n,i,s,a=0;a<e.value.length;++a){n=e.value[a];for(var o=0;o<n.value.length;++o)s={},i=n.value[o],s.type=C.derToOid(i.value[0].value),s.value=i.value[1].value,s.valueTagClass=i.value[1].type,s.type in Ne&&(s.name=Ne[s.type],s.name in gt&&(s.shortName=gt[s.name])),t&&(t.update(s.type),t.update(s.value)),r.push(s)}return r};Z.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=C.derToOid(n.value[0].value),s=n.value[1].value,a=0;a<s.length;++a){var o={};if(o.type=i,o.value=s[a].value,o.valueTagClass=s[a].type,o.type in Ne&&(o.name=Ne[o.type],o.name in gt&&(o.shortName=gt[o.name])),o.type===Ne.extensionRequest){o.extensions=[];for(var l=0;l<o.value.length;++l)o.extensions.push(Z.certificateExtensionFromAsn1(o.value[l]))}t.push(o)}return t};function Zr(e,t){typeof t=="string"&&(t={shortName:t});for(var r=null,n,i=0;r===null&&i<e.attributes.length;++i)n=e.attributes[i],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}var _s=function(e,t,r){var n={};if(e!==Ne["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Ne.sha1},mgf:{algorithmOid:Ne.mgf1,hash:{algorithmOid:Ne.sha1}},saltLength:20});var i={},s=[];if(!C.validate(t,Ib,i,s)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=s,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=C.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=C.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=C.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},Ws=function(e){switch(Ne[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return de.md.sha1.create();case"md5WithRSAEncryption":return de.md.md5.create();case"sha256WithRSAEncryption":return de.md.sha256.create();case"sha384WithRSAEncryption":return de.md.sha384.create();case"sha512WithRSAEncryption":return de.md.sha512.create();case"RSASSA-PSS":return de.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},vf=function(e){var t=e.certificate,r;switch(t.signatureOid){case Ne.sha1WithRSAEncryption:case Ne.sha1WithRSASignature:break;case Ne["RSASSA-PSS"]:var n,i;if(n=Ne[t.signatureParameters.mgf.hash.algorithmOid],n===void 0||de.md[n]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=t.signatureParameters.mgf.hash.algorithmOid,s.name=n,s}if(i=Ne[t.signatureParameters.mgf.algorithmOid],i===void 0||de.mgf[i]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=t.signatureParameters.mgf.algorithmOid,s.name=i,s}if(i=de.mgf[i].create(de.md[n].create()),n=Ne[t.signatureParameters.hash.algorithmOid],n===void 0||de.md[n]===void 0){var s=new Error("Unsupported RSASSA-PSS hash function.");throw s.oid=t.signatureParameters.hash.algorithmOid,s.name=n,s}r=de.pss.create(de.md[n].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,r)};Z.certificateFromPem=function(e,t,r){var n=de.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=C.fromDer(n.body,r);return Z.certificateFromAsn1(s,t)};Z.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:C.toDer(Z.certificateToAsn1(e)).getBytes()};return de.pem.encode(r,{maxline:t})};Z.publicKeyFromPem=function(e){var t=de.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=C.fromDer(t.body);return Z.publicKeyFromAsn1(n)};Z.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:C.toDer(Z.publicKeyToAsn1(e)).getBytes()};return de.pem.encode(r,{maxline:t})};Z.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:C.toDer(Z.publicKeyToRSAPublicKey(e)).getBytes()};return de.pem.encode(r,{maxline:t})};Z.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||de.md.sha1.create(),n=t.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=C.toDer(Z.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=C.toDer(Z.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}r.start(),r.update(i);var s=r.digest();if(t.encoding==="hex"){var a=s.toHex();return t.delimiter?a.match(/.{2}/g).join(t.delimiter):a}else{if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};Z.certificationRequestFromPem=function(e,t,r){var n=de.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=C.fromDer(n.body,r);return Z.certificationRequestFromAsn1(s,t)};Z.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:C.toDer(Z.certificationRequestToAsn1(e)).getBytes()};return de.pem.encode(r,{maxline:t})};Z.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return Zr(e.issuer,t)},e.issuer.addField=function(t){Zt([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return Zr(e.subject,t)},e.subject.addField=function(t){Zt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){Zt(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){Zt(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)Cf(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r=null,n,i=0;r===null&&i<e.extensions.length;++i)n=e.extensions[i],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,r){e.md=r||de.md.sha1.create();var n=Ne[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=Z.getTBSCertificate(e);var s=C.toDer(e.tbsCertificate);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=i.attributes,s.actualIssuer=n.attributes,s}var a=t.md;if(a===null){a=Ws({signatureOid:t.signatureOid,type:"certificate"});var o=t.tbsCertificate||Z.getTBSCertificate(t),l=C.toDer(o);a.update(l.getBytes())}return a!==null&&(r=vf({certificate:e,md:a,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var s,a,o=0;r&&o<n.attributes.length;++o)s=n.attributes[o],a=i.attributes[o],(s.type!==a.type||s.value!==a.value)&&(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return Z.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=Ne.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return de.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},e};Z.certificateFromAsn1=function(e,t){var r={},n=[];if(!C.validate(e,xb,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var s=C.derToOid(r.publicKeyOid);if(s!==Z.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Z.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var o=de.util.createBuffer(r.certSerialNumber);a.serialNumber=o.toHex(),a.signatureOid=de.asn1.derToOid(r.certSignatureOid),a.signatureParameters=_s(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=de.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=_s(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(C.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(C.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(C.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(C.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=l[0],a.validity.notAfter=l[1],a.tbsCertificate=r.tbsCertificate,t){a.md=Ws({signatureOid:a.signatureOid,type:"certificate"});var u=C.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var c=de.md.sha1.create(),f=C.toDer(r.certIssuer);c.update(f.getBytes()),a.issuer.getField=function(g){return Zr(a.issuer,g)},a.issuer.addField=function(g){Zt([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Z.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=c.digest().toHex();var d=de.md.sha1.create(),p=C.toDer(r.certSubject);return d.update(p.getBytes()),a.subject.getField=function(g){return Zr(a.subject,g)},a.subject.addField=function(g){Zt([g]),a.subject.attributes.push(g)},a.subject.attributes=Z.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=d.digest().toHex(),r.certExtensions?a.extensions=Z.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=Z.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};Z.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(Z.certificateExtensionFromAsn1(n.value[i]));return t};Z.certificateExtensionFromAsn1=function(e){var t={};if(t.id=C.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===C.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in Ne){if(t.name=Ne[t.id],t.name==="keyUsage"){var r=C.fromDer(t.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=(n&128)===128,t.nonRepudiation=(n&64)===64,t.keyEncipherment=(n&32)===32,t.dataEncipherment=(n&16)===16,t.keyAgreement=(n&8)===8,t.keyCertSign=(n&4)===4,t.cRLSign=(n&2)===2,t.encipherOnly=(n&1)===1,t.decipherOnly=(i&128)===128}else if(t.name==="basicConstraints"){var r=C.fromDer(t.value);r.value.length>0&&r.value[0].type===C.Type.BOOLEAN?t.cA=r.value[0].value.charCodeAt(0)!==0:t.cA=!1;var s=null;r.value.length>0&&r.value[0].type===C.Type.INTEGER?s=r.value[0].value:r.value.length>1&&(s=r.value[1].value),s!==null&&(t.pathLenConstraint=C.derToInteger(s))}else if(t.name==="extKeyUsage")for(var r=C.fromDer(t.value),a=0;a<r.value.length;++a){var o=C.derToOid(r.value[a].value);o in Ne?t[Ne[o]]=!0:t[o]=!0}else if(t.name==="nsCertType"){var r=C.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=(n&128)===128,t.server=(n&64)===64,t.email=(n&32)===32,t.objsign=(n&16)===16,t.reserved=(n&8)===8,t.sslCA=(n&4)===4,t.emailCA=(n&2)===2,t.objCA=(n&1)===1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var l,r=C.fromDer(t.value),u=0;u<r.value.length;++u){l=r.value[u];var c={type:l.type,value:l.value};switch(t.altNames.push(c),l.type){case 1:case 2:case 6:break;case 7:c.ip=de.util.bytesToIP(l.value);break;case 8:c.oid=C.derToOid(l.value);break}}}else if(t.name==="subjectKeyIdentifier"){var r=C.fromDer(t.value);t.subjectKeyIdentifier=de.util.bytesToHex(r.value)}}return t};Z.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!C.validate(e,kb,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var s=C.derToOid(r.publicKeyOid);if(s!==Z.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Z.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=de.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=_s(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=de.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=_s(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,t){a.md=Ws({signatureOid:a.signatureOid,type:"certification request"});var o=C.toDer(a.certificationRequestInfo);a.md.update(o.getBytes())}var l=de.md.sha1.create();return a.subject.getField=function(u){return Zr(a.subject,u)},a.subject.addField=function(u){Zt([u]),a.subject.attributes.push(u)},a.subject.attributes=Z.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),a.subject.hash=l.digest().toHex(),a.publicKey=Z.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(u){return Zr(a,u)},a.addAttribute=function(u){Zt([u]),a.attributes.push(u)},a.attributes=Z.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};Z.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return Zr(e.subject,t)},e.subject.addField=function(t){Zt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return Zr(e,t)},e.addAttribute=function(t){Zt([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){Zt(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){Zt(t),e.attributes=t},e.sign=function(t,r){e.md=r||de.md.sha1.create();var n=Ne[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=Z.getCertificationRequestInfo(e);var s=C.toDer(e.certificationRequestInfo);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(r===null){r=Ws({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||Z.getCertificationRequestInfo(e),i=C.toDer(n);r.update(i.getBytes())}return r!==null&&(t=vf({certificate:e,md:r,signature:e.signature})),t},e};function Qn(e){for(var t=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]),r,n,i=e.attributes,s=0;s<i.length;++s){r=i[s];var a=r.value,o=C.Type.PRINTABLESTRING;"valueTagClass"in r&&(o=r.valueTagClass,o===C.Type.UTF8&&(a=de.util.encodeUtf8(a))),n=C.create(C.Class.UNIVERSAL,C.Type.SET,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(r.type).getBytes()),C.create(C.Class.UNIVERSAL,o,!1,a)])]),t.value.push(n)}return t}function Zt(e){for(var t,r=0;r<e.length;++r){if(t=e[r],typeof t.name>"u"&&(t.type&&t.type in Z.oids?t.name=Z.oids[t.type]:t.shortName&&t.shortName in gt&&(t.name=Z.oids[gt[t.shortName]])),typeof t.type>"u")if(t.name&&t.name in Z.oids)t.type=Z.oids[t.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=t,n}if(typeof t.shortName>"u"&&t.name&&t.name in gt&&(t.shortName=gt[t.name]),t.type===Ne.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=C.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(Z.certificateExtensionToAsn1(Cf(t.extensions[i])))}if(typeof t.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function Cf(e,t){if(t=t||{},typeof e.name>"u"&&e.id&&e.id in Z.oids&&(e.name=Z.oids[e.id]),typeof e.id>"u")if(e.name&&e.name in Z.oids)e.id=Z.oids[e.name];else{var r=new Error("Extension ID not specified.");throw r.extension=e,r}if(typeof e.value<"u")return e;if(e.name==="keyUsage"){var n=0,i=0,s=0;e.digitalSignature&&(i|=128,n=7),e.nonRepudiation&&(i|=64,n=6),e.keyEncipherment&&(i|=32,n=5),e.dataEncipherment&&(i|=16,n=4),e.keyAgreement&&(i|=8,n=3),e.keyCertSign&&(i|=4,n=2),e.cRLSign&&(i|=2,n=1),e.encipherOnly&&(i|=1,n=0),e.decipherOnly&&(s|=128,n=7);var a=String.fromCharCode(n);s!==0?a+=String.fromCharCode(i)+String.fromCharCode(s):i!==0&&(a+=String.fromCharCode(i)),e.value=C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,a)}else if(e.name==="basicConstraints")e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(C.create(C.Class.UNIVERSAL,C.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var l in e)e[l]===!0&&(l in Ne?o.push(C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(Ne[l]).getBytes())):l.indexOf(".")!==-1&&o.push(C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(l).getBytes())))}else if(e.name==="nsCertType"){var n=0,i=0;e.client&&(i|=128,n=7),e.server&&(i|=64,n=6),e.email&&(i|=32,n=5),e.objsign&&(i|=16,n=4),e.reserved&&(i|=8,n=3),e.sslCA&&(i|=4,n=2),e.emailCA&&(i|=2,n=1),e.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),e.value=C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,a)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);for(var u,c=0;c<e.altNames.length;++c){u=e.altNames[c];var a=u.value;if(u.type===7&&u.ip){if(a=de.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else u.type===8&&(u.oid?a=C.oidToDer(C.oidToDer(u.oid)):a=C.oidToDer(a));e.value.value.push(C.create(C.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=C.create(C.Class.UNIVERSAL,C.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,f.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);var o=e.value.value;if(e.keyIdentifier){var d=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(C.create(C.Class.CONTEXT_SPECIFIC,0,!1,d))}if(e.authorityCertIssuer){var p=[C.create(C.Class.CONTEXT_SPECIFIC,4,!0,[Qn(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(C.create(C.Class.CONTEXT_SPECIFIC,1,!0,p))}if(e.serialNumber){var g=de.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(C.create(C.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(e.name==="cRLDistributionPoints"){e.value=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);for(var o=e.value.value,A=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]),_=C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[]),u,c=0;c<e.altNames.length;++c){u=e.altNames[c];var a=u.value;if(u.type===7&&u.ip){if(a=de.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else u.type===8&&(u.oid?a=C.oidToDer(C.oidToDer(u.oid)):a=C.oidToDer(a));_.value.push(C.create(C.Class.CONTEXT_SPECIFIC,u.type,!1,a))}A.value.push(C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[_])),o.push(A)}if(typeof e.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function Ho(e,t){switch(e){case Ne["RSASSA-PSS"]:var r=[];return t.hash.algorithmOid!==void 0&&r.push(C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(t.hash.algorithmOid).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(C.create(C.Class.CONTEXT_SPECIFIC,1,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(t.mgf.algorithmOid).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(t.mgf.hash.algorithmOid).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(C.create(C.Class.CONTEXT_SPECIFIC,2,!0,[C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(t.saltLength).getBytes())])),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,r);default:return C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")}}function Rb(e){var t=C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],s=i.value,a=C.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===C.Type.UTF8&&(s=de.util.encodeUtf8(s));var o=!1;"valueConstructed"in i&&(o=i.valueConstructed);var l=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(i.type).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SET,!0,[C.create(C.Class.UNIVERSAL,a,o,s)])]);t.value.push(l)}return t}var Db=new Date("1950-01-01T00:00:00Z"),Lb=new Date("2050-01-01T00:00:00Z");function ou(e){return e>=Db&&e<Lb?C.create(C.Class.UNIVERSAL,C.Type.UTCTIME,!1,C.dateToUtcTime(e)):C.create(C.Class.UNIVERSAL,C.Type.GENERALIZEDTIME,!1,C.dateToGeneralizedTime(e))}Z.getTBSCertificate=function(e){var t=ou(e.validity.notBefore),r=ou(e.validity.notAfter),n=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(e.version).getBytes())]),C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,de.util.hexToBytes(e.serialNumber)),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(e.siginfo.algorithmOid).getBytes()),Ho(e.siginfo.algorithmOid,e.siginfo.parameters)]),Qn(e.issuer),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[t,r]),Qn(e.subject),Z.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(C.create(C.Class.CONTEXT_SPECIFIC,1,!0,[C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(C.create(C.Class.CONTEXT_SPECIFIC,2,!0,[C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(Z.certificateExtensionsToAsn1(e.extensions)),n};Z.getCertificationRequestInfo=function(e){var t=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(e.version).getBytes()),Qn(e.subject),Z.publicKeyToAsn1(e.publicKey),Rb(e)]);return t};Z.distinguishedNameToAsn1=function(e){return Qn(e)};Z.certificateToAsn1=function(e){var t=e.tbsCertificate||Z.getTBSCertificate(e);return C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[t,C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(e.signatureOid).getBytes()),Ho(e.signatureOid,e.signatureParameters)]),C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};Z.certificateExtensionsToAsn1=function(e){var t=C.create(C.Class.CONTEXT_SPECIFIC,3,!0,[]),r=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(Z.certificateExtensionToAsn1(e[n]));return t};Z.certificateExtensionToAsn1=function(e){var t=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[]);t.value.push(C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(e.id).getBytes())),e.critical&&t.value.push(C.create(C.Class.UNIVERSAL,C.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return typeof e.value!="string"&&(r=C.toDer(r).getBytes()),t.value.push(C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,r)),t};Z.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||Z.getCertificationRequestInfo(e);return C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[t,C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(e.signatureOid).getBytes()),Ho(e.signatureOid,e.signatureParameters)]),C.create(C.Class.UNIVERSAL,C.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};Z.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(a){var o=r(a.issuer);return o},t.addCertificate=function(a){if(typeof a=="string"&&(a=de.pki.certificateFromPem(a)),n(a.subject),!t.hasCertificate(a))if(a.subject.hash in t.certs){var o=t.certs[a.subject.hash];de.util.isArray(o)||(o=[o]),o.push(a),t.certs[a.subject.hash]=o}else t.certs[a.subject.hash]=a},t.hasCertificate=function(a){typeof a=="string"&&(a=de.pki.certificateFromPem(a));var o=r(a.subject);if(!o)return!1;de.util.isArray(o)||(o=[o]);for(var l=C.toDer(Z.certificateToAsn1(a)).getBytes(),u=0;u<o.length;++u){var c=C.toDer(Z.certificateToAsn1(o[u])).getBytes();if(l===c)return!0}return!1},t.listAllCertificates=function(){var a=[];for(var o in t.certs)if(t.certs.hasOwnProperty(o)){var l=t.certs[o];if(!de.util.isArray(l))a.push(l);else for(var u=0;u<l.length;++u)a.push(l[u])}return a},t.removeCertificate=function(a){var o;if(typeof a=="string"&&(a=de.pki.certificateFromPem(a)),n(a.subject),!t.hasCertificate(a))return null;var l=r(a.subject);if(!de.util.isArray(l))return o=t.certs[a.subject.hash],delete t.certs[a.subject.hash],o;for(var u=C.toDer(Z.certificateToAsn1(a)).getBytes(),c=0;c<l.length;++c){var f=C.toDer(Z.certificateToAsn1(l[c])).getBytes();u===f&&(o=l[c],l.splice(c,1))}return l.length===0&&delete t.certs[a.subject.hash],o};function r(a){return n(a),t.certs[a.hash]||null}function n(a){if(!a.hash){var o=de.md.sha1.create();a.attributes=Z.RDNAttributesAsArray(Qn(a),o),a.hash=o.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var s=e[i];t.addCertificate(s)}return t};Z.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Z.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{},t=t.slice(0);var n=t.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var s=!0,a=null,o=0;do{var l=t.shift(),u=null,c=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Z.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),a===null){if(u=t[0]||e.getIssuer(l),u===null&&l.isIssuer(l)&&(c=!0,u=l),u){var f=u;de.util.isArray(f)||(f=[f]);for(var d=!1;!d&&f.length>0;){u=f.shift();try{d=u.verify(l)}catch{}}d||(a={message:"Certificate signature is invalid.",error:Z.certificateError.bad_certificate})}a===null&&(!u||c)&&!e.hasCertificate(l)&&(a={message:"Certificate is not trusted.",error:Z.certificateError.unknown_ca})}if(a===null&&u&&!l.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Z.certificateError.bad_certificate}),a===null)for(var p={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<l.extensions.length;++g){var A=l.extensions[g];A.critical&&!(A.name in p)&&(a={message:"Certificate has an unsupported critical extension.",error:Z.certificateError.unsupported_certificate})}if(a===null&&(!s||t.length===0&&(!u||c))){var _=l.getExtension("basicConstraints"),T=l.getExtension("keyUsage");if(T!==null&&(!T.keyCertSign||_===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Z.certificateError.bad_certificate}),a===null&&_!==null&&!_.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Z.certificateError.bad_certificate}),a===null&&T!==null&&"pathLenConstraint"in _){var k=o-1;k>_.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Z.certificateError.bad_certificate})}}var y=a===null?!0:a.error,w=r.verify?r.verify(y,o,n):y;if(w===!0)a=null;else throw y===!0&&(a={message:"The application rejected the certificate.",error:Z.certificateError.bad_certificate}),(w||w===0)&&(typeof w=="object"&&!de.util.isArray(w)?(w.message&&(a.message=w.message),w.error&&(a.error=w.error)):typeof w=="string"&&(a.error=w)),a;s=!1,++o}while(t.length>0);return!0};var ze=_e,R=ze.asn1,xe=ze.pki,xi=ze.pkcs12=ze.pkcs12||{},bf={name:"ContentInfo",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:R.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},Nb={name:"PFX",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,capture:"version"},bf,{name:"PFX.macData",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:R.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},Mb={name:"SafeBag",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:R.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:R.Class.UNIVERSAL,type:R.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},Ob={name:"Attribute",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:R.Class.UNIVERSAL,type:R.Type.SET,constructed:!0,capture:"values"}]},Ub={name:"CertBag",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:R.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:R.Class.UNIVERSAL,type:R.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function ai(e,t,r,n){for(var i=[],s=0;s<e.length;s++)for(var a=0;a<e[s].safeBags.length;a++){var o=e[s].safeBags[a];if(!(n!==void 0&&o.type!==n)){if(t===null){i.push(o);continue}o.attributes[t]!==void 0&&o.attributes[t].indexOf(r)>=0&&i.push(o)}}return i}xi.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={},i=[];if(!R.validate(e,Nb,n,i)){var s=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw s.errors=s,s}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:function(_){var T={},k;return"localKeyId"in _?k=_.localKeyId:"localKeyIdHex"in _&&(k=ze.util.hexToBytes(_.localKeyIdHex)),k===void 0&&!("friendlyName"in _)&&"bagType"in _&&(T[_.bagType]=ai(a.safeContents,null,null,_.bagType)),k!==void 0&&(T.localKeyId=ai(a.safeContents,"localKeyId",k,_.bagType)),"friendlyName"in _&&(T.friendlyName=ai(a.safeContents,"friendlyName",_.friendlyName,_.bagType)),T},getBagsByFriendlyName:function(_,T){return ai(a.safeContents,"friendlyName",_,T)},getBagsByLocalKeyId:function(_,T){return ai(a.safeContents,"localKeyId",_,T)}};if(n.version.charCodeAt(0)!==3){var s=new Error("PKCS#12 PFX of version other than 3 not supported.");throw s.version=n.version.charCodeAt(0),s}if(R.derToOid(n.contentType)!==xe.oids.data){var s=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw s.oid=R.derToOid(n.contentType),s}var o=n.content.value[0];if(o.tagClass!==R.Class.UNIVERSAL||o.type!==R.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=qo(o),n.mac){var l=null,u=0,c=R.derToOid(n.macAlgorithm);switch(c){case xe.oids.sha1:l=ze.md.sha1.create(),u=20;break;case xe.oids.sha256:l=ze.md.sha256.create(),u=32;break;case xe.oids.sha384:l=ze.md.sha384.create(),u=48;break;case xe.oids.sha512:l=ze.md.sha512.create(),u=64;break;case xe.oids.md5:l=ze.md.md5.create(),u=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+c);var f=new ze.util.ByteBuffer(n.macSalt),d="macIterations"in n?parseInt(ze.util.bytesToHex(n.macIterations),16):1,p=xi.generateKey(r,f,3,d,u,l),g=ze.hmac.create();g.start(l,p),g.update(o.value);var A=g.getMac();if(A.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return Pb(a,o.value,t,r),a};function qo(e){if(e.composed||e.constructed){for(var t=ze.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function Pb(e,t,r,n){if(t=R.fromDer(t,r),t.tagClass!==R.Class.UNIVERSAL||t.type!==R.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var s=t.value[i],a={},o=[];if(!R.validate(s,bf,a,o)){var l=new Error("Cannot read ContentInfo.");throw l.errors=o,l}var u={encrypted:!1},c=null,f=a.content.value[0];switch(R.derToOid(a.contentType)){case xe.oids.data:if(f.tagClass!==R.Class.UNIVERSAL||f.type!==R.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");c=qo(f).value;break;case xe.oids.encryptedData:c=Fb(f,n),u.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=R.derToOid(a.contentType),l}u.safeBags=Vb(c,r,n),e.safeContents.push(u)}}function Fb(e,t){var r={},n=[];if(!R.validate(e,ze.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var s=R.derToOid(r.contentType);if(s!==xe.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=s,i}s=R.derToOid(r.encAlgorithm);var a=xe.pbe.getCipher(s,r.encParameter,t),o=qo(r.encryptedContentAsn1),l=ze.util.createBuffer(o.value);if(a.update(l),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}function Vb(e,t,r){if(!t&&e.length===0)return[];if(e=R.fromDer(e,t),e.tagClass!==R.Class.UNIVERSAL||e.type!==R.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var s=e.value[i],a={},o=[];if(!R.validate(s,Mb,a,o)){var l=new Error("Cannot read SafeBag.");throw l.errors=o,l}var u={type:R.derToOid(a.bagId),attributes:Hb(a.bagAttributes)};n.push(u);var c,f,d=a.bagValue.value[0];switch(u.type){case xe.oids.pkcs8ShroudedKeyBag:if(d=xe.decryptPrivateKeyInfo(d,r),d===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case xe.oids.keyBag:try{u.key=xe.privateKeyFromAsn1(d)}catch{u.key=null,u.asn1=d}continue;case xe.oids.certBag:c=Ub,f=function(){if(R.derToOid(a.certId)!==xe.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=R.derToOid(a.certId),g}var A=R.fromDer(a.cert,t);try{u.cert=xe.certificateFromAsn1(A,!0)}catch{u.cert=null,u.asn1=A}};break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=u.type,l}if(c!==void 0&&!R.validate(d,c,a,o)){var l=new Error("Cannot read PKCS#12 "+c.name);throw l.errors=o,l}f()}return n}function Hb(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},i=[];if(!R.validate(e[r],Ob,n,i)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=i,s}var a=R.derToOid(n.oid);if(xe.oids[a]!==void 0){t[xe.oids[a]]=[];for(var o=0;o<n.values.length;++o)t[xe.oids[a]].push(n.values[o].value)}}return t}xi.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,s;if(i!==null)i=ze.util.hexToBytes(i);else if(n.generateLocalKeyId)if(t){var a=ze.util.isArray(t)?t[0]:t;typeof a=="string"&&(a=xe.certificateFromPem(a));var o=ze.md.sha1.create();o.update(R.toDer(xe.certificateToAsn1(a)).getBytes()),i=o.digest().getBytes()}else i=ze.random.getBytes(20);var l=[];i!==null&&l.push(R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.localKeyId).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.SET,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push(R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.friendlyName).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.SET,!0,[R.create(R.Class.UNIVERSAL,R.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(s=R.create(R.Class.UNIVERSAL,R.Type.SET,!0,l));var u=[],c=[];t!==null&&(ze.util.isArray(t)?c=t:c=[t]);for(var f=[],d=0;d<c.length;++d){t=c[d],typeof t=="string"&&(t=xe.certificateFromPem(t));var p=d===0?s:void 0,g=xe.certificateToAsn1(t),A=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.certBag).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.x509Certificate).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,R.toDer(g).getBytes())])])]),p]);f.push(A)}if(f.length>0){var _=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,f),T=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.data).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,R.toDer(_).getBytes())])]);u.push(T)}var k=null;if(e!==null){var y=xe.wrapRsaPrivateKey(xe.privateKeyToAsn1(e));r===null?k=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.keyBag).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[y]),s]):k=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.pkcs8ShroudedKeyBag).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[xe.encryptPrivateKeyInfo(y,r,n)]),s]);var w=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[k]),S=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.data).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,R.toDer(w).getBytes())])]);u.push(S)}var x=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,u),I;if(n.useMac){var o=ze.md.sha1.create(),U=new ze.util.ByteBuffer(ze.random.getBytes(n.saltSize)),H=n.count,e=xi.generateKey(r,U,3,H,20),D=ze.hmac.create();D.start(o,e),D.update(R.toDer(x).getBytes());var M=D.getMac();I=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.sha1).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.NULL,!1,"")]),R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,M.getBytes())]),R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,U.getBytes()),R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,R.integerToDer(H).getBytes())])}return R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,R.integerToDer(3).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(xe.oids.data).getBytes()),R.create(R.Class.CONTEXT_SPECIFIC,0,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,R.toDer(x).getBytes())])]),I])};xi.generateKey=ze.pbe.generatePkcs12Key;var en=_e,Ko=en.asn1,jn=en.pki=en.pki||{};jn.pemToDer=function(e){var t=en.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return en.util.createBuffer(t.body)};jn.privateKeyFromPem=function(e){var t=en.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Ko.fromDer(t.body);return jn.privateKeyFromAsn1(n)};jn.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:Ko.toDer(jn.privateKeyToAsn1(e)).getBytes()};return en.pem.encode(r,{maxline:t})};jn.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:Ko.toDer(e).getBytes()};return en.pem.encode(r,{maxline:t})};var $=_e,Ys=function(e,t,r,n){var i=$.util.createBuffer(),s=e.length>>1,a=s+(e.length&1),o=e.substr(0,a),l=e.substr(s,a),u=$.util.createBuffer(),c=$.hmac.create();r=t+r;var f=Math.ceil(n/16),d=Math.ceil(n/20);c.start("MD5",o);var p=$.util.createBuffer();u.putBytes(r);for(var g=0;g<f;++g)c.start(null,null),c.update(u.getBytes()),u.putBuffer(c.digest()),c.start(null,null),c.update(u.bytes()+r),p.putBuffer(c.digest());c.start("SHA1",l);var A=$.util.createBuffer();u.clear(),u.putBytes(r);for(var g=0;g<d;++g)c.start(null,null),c.update(u.getBytes()),u.putBuffer(c.digest()),c.start(null,null),c.update(u.bytes()+r),A.putBuffer(c.digest());return i.putBytes($.util.xorBytes(p.getBytes(),A.getBytes(),n)),i},qb=function(e,t,r){var n=$.hmac.create();n.start("SHA1",e);var i=$.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},Kb=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=$.util.createBuffer(i),t.length=i.length,n=!0}catch{}return n},Gb=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=$.util.createBuffer(i),t.length=i.length,n=!0}catch{}return n},qt=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32();break}return $.util.createBuffer(e.getBytes(r))},zt=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},E={};E.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};E.SupportedVersions=[E.Versions.TLS_1_1,E.Versions.TLS_1_0];E.Version=E.SupportedVersions[0];E.MaxFragment=16384-1024;E.ConnectionEnd={server:0,client:1};E.PRFAlgorithm={tls_prf_sha256:0};E.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};E.CipherType={stream:0,block:1,aead:2};E.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};E.CompressionMethod={none:0,deflate:1};E.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};E.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};E.Alert={};E.Alert.Level={warning:1,fatal:2};E.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};E.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};E.CipherSuites={};E.getCipherSuite=function(e){var t=null;for(var r in E.CipherSuites){var n=E.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t};E.handleUnexpected=function(e,t){var r=!e.open&&e.entity===E.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.unexpected_message}})};E.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(E.queue(e,E.createAlert(e,{level:E.Alert.Level.warning,description:E.Alert.Description.no_renegotiation})),E.flush(e)),e.process()};E.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===E.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.illegal_parameter}});else{var s=t.fragment,a=s.length();if(n={version:{major:s.getByte(),minor:s.getByte()},random:$.util.createBuffer(s.getBytes(32)),session_id:qt(s,1),extensions:[]},i?(n.cipher_suite=s.getBytes(2),n.compression_method=s.getByte()):(n.cipher_suites=qt(s,2),n.compression_methods=qt(s,1)),a=r-(a-s.length()),a>0){for(var o=qt(s,2);o.length()>0;)n.extensions.push({type:[o.getByte(),o.getByte()],data:qt(o,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var u=n.extensions[l];if(u.type[0]===0&&u.type[1]===0)for(var c=qt(u.data,2);c.length()>0;){var f=c.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(qt(c,2).getBytes())}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=E.getCipherSuite(n.cipher_suite);else for(var d=$.util.createBuffer(n.cipher_suites.bytes());d.length()>0&&(e.session.cipherSuite=E.getCipherSuite(d.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.handshake_failure},cipherSuite:$.util.bytesToHex(n.cipher_suite)});i?e.session.compressionMethod=n.compression_method:e.session.compressionMethod=E.CompressionMethod.none}return n};E.createSecurityParameters=function(e,t){var r=e.entity===E.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,s=r?n:E.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:E.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:s}};E.handleServerHello=function(e,t,r){var n=E.parseHelloMessage(e,t,r);if(!e.fail){if(n.version.minor<=e.version.minor)e.version.minor=n.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.protocol_version}});e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=Ef,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=jb,e.session.resuming=!1,E.createSecurityParameters(e,n)),e.session.id=i,e.process()}};E.handleClientHello=function(e,t,r){var n=E.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),s=null;if(e.sessionCache&&(s=e.sessionCache.getSession(i),s===null?i="":(s.version.major!==n.version.major||s.version.minor>n.version.minor)&&(s=null,i="")),i.length===0&&(i=$.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},s)e.version=e.session.version=s.version,e.session.sp=s.sp;else{for(var a,o=1;o<E.SupportedVersions.length&&(a=E.SupportedVersions[o],!(a.minor<=n.version.minor));++o);e.version={major:a.major,minor:a.minor},e.session.version=e.version}s!==null?(e.expect=Go,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?Zb:qa,e.session.resuming=!1,E.createSecurityParameters(e,n)),e.open=!0,E.queue(e,E.createRecord(e,{type:E.ContentType.handshake,data:E.createServerHello(e)})),e.session.resuming?(E.queue(e,E.createRecord(e,{type:E.ContentType.change_cipher_spec,data:E.createChangeCipherSpec()})),e.state.pending=E.createConnectionState(e),e.state.current.write=e.state.pending.write,E.queue(e,E.createRecord(e,{type:E.ContentType.handshake,data:E.createFinished(e)}))):(E.queue(e,E.createRecord(e,{type:E.ContentType.handshake,data:E.createCertificate(e)})),e.fail||(E.queue(e,E.createRecord(e,{type:E.ContentType.handshake,data:E.createServerKeyExchange(e)})),e.verifyClient!==!1&&E.queue(e,E.createRecord(e,{type:E.ContentType.handshake,data:E.createCertificateRequest(e)})),E.queue(e,E.createRecord(e,{type:E.ContentType.handshake,data:E.createServerHelloDone(e)})))),E.flush(e),e.process()}};E.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_list:qt(n,3)},s,a,o=[];try{for(;i.certificate_list.length()>0;)s=qt(i.certificate_list,3),a=$.asn1.fromDer(s),s=$.pki.certificateFromAsn1(a,!0),o.push(s)}catch(u){return e.error(e,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.bad_certificate}})}var l=e.entity===E.ConnectionEnd.client;(l||e.verifyClient===!0)&&o.length===0?e.error(e,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.illegal_parameter}}):o.length===0?e.expect=l?lu:qa:(l?e.session.serverCertificate=o[0]:e.session.clientCertificate=o[0],E.verifyCertificateChain(e,o)&&(e.expect=l?lu:qa)),e.process()};E.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.unsupported_certificate}});e.expect=$b,e.process()};E.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:qt(n,2).getBytes()},s=null;if(e.getPrivateKey)try{s=e.getPrivateKey(e,e.session.serverCertificate),s=$.pki.privateKeyFromPem(s)}catch(l){e.error(e,{message:"Could not get private key.",cause:l,send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.internal_error}})}if(s===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.internal_error}});try{var a=e.session.sp;a.pre_master_secret=s.decrypt(i.enc_pre_master_secret);var o=e.session.clientHelloVersion;if(o.major!==a.pre_master_secret.charCodeAt(0)||o.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=$.random.getBytes(48)}e.expect=Go,e.session.clientCertificate!==null&&(e.expect=eE),e.process()};E.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:qt(n,1),certificate_authorities:qt(n,2)};e.session.certificateRequest=i,e.expect=zb,e.process()};E.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s={signature:qt(n,2).getBytes()},a=$.util.createBuffer();a.putBuffer(e.session.md5.digest()),a.putBuffer(e.session.sha1.digest()),a=a.getBytes();try{var o=e.session.clientCertificate;if(!o.publicKey.verify(a,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.handshake_failure}})}e.expect=Go,e.process()};E.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.insufficient_security}},i=0,s=e.verify(e,n.alert.description,i,[]);if(s!==!0)return(s||s===0)&&(typeof s=="object"&&!$.util.isArray(s)?(s.message&&(n.message=s.message),s.alert&&(n.alert.description=s.alert)):typeof s=="number"&&(n.alert.description=s)),e.error(e,n)}e.session.certificateRequest!==null&&(t=E.createRecord(e,{type:E.ContentType.handshake,data:E.createCertificate(e)}),E.queue(e,t)),t=E.createRecord(e,{type:E.ContentType.handshake,data:E.createClientKeyExchange(e)}),E.queue(e,t),e.expect=Yb;var a=function(o,l){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&E.queue(o,E.createRecord(o,{type:E.ContentType.handshake,data:E.createCertificateVerify(o,l)})),E.queue(o,E.createRecord(o,{type:E.ContentType.change_cipher_spec,data:E.createChangeCipherSpec()})),o.state.pending=E.createConnectionState(o),o.state.current.write=o.state.pending.write,E.queue(o,E.createRecord(o,{type:E.ContentType.handshake,data:E.createFinished(o)})),o.expect=Ef,E.flush(o),o.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return a(e,null);E.getClientSignature(e,a)};E.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.illegal_parameter}});var r=e.entity===E.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=E.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?Jb:tE,e.process()};E.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s=t.fragment.getBytes();n=$.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var a=e.entity===E.ConnectionEnd.client,o=a?"server finished":"client finished",l=e.session.sp,u=12,c=Ys;if(n=c(l.master_secret,o,n.getBytes(),u),n.getBytes()!==s)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&a||!e.session.resuming&&!a)&&(E.queue(e,E.createRecord(e,{type:E.ContentType.change_cipher_spec,data:E.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,E.queue(e,E.createRecord(e,{type:E.ContentType.handshake,data:E.createFinished(e)}))),e.expect=a?Wb:rE,e.handshaking=!1,++e.handshakes,e.peerCertificate=a?e.session.serverCertificate:e.session.clientCertificate,E.flush(e),e.isConnected=!0,e.connected(e),e.process()};E.handleAlert=function(e,t){var r=t.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case E.Alert.Description.close_notify:i="Connection closed.";break;case E.Alert.Description.unexpected_message:i="Unexpected message.";break;case E.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case E.Alert.Description.decryption_failed:i="Decryption failed.";break;case E.Alert.Description.record_overflow:i="Record overflow.";break;case E.Alert.Description.decompression_failure:i="Decompression failed.";break;case E.Alert.Description.handshake_failure:i="Handshake failure.";break;case E.Alert.Description.bad_certificate:i="Bad certificate.";break;case E.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case E.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case E.Alert.Description.certificate_expired:i="Certificate expired.";break;case E.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case E.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case E.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case E.Alert.Description.access_denied:i="Access denied.";break;case E.Alert.Description.decode_error:i="Decode error.";break;case E.Alert.Description.decrypt_error:i="Decrypt error.";break;case E.Alert.Description.export_restriction:i="Export restriction.";break;case E.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case E.Alert.Description.insufficient_security:i="Insufficient security.";break;case E.Alert.Description.internal_error:i="Internal error.";break;case E.Alert.Description.user_canceled:i="User canceled.";break;case E.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===E.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===E.ConnectionEnd.client?"server":"client",alert:n}),e.process()};E.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=$.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var s=r.bytes(i+4);r.read+=4,n in Ts[e.entity][e.expect]?(e.entity===E.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:$.md.md5.create(),sha1:$.md.sha1.create()}),n!==E.HandshakeType.hello_request&&n!==E.HandshakeType.certificate_verify&&n!==E.HandshakeType.finished&&(e.session.md5.update(s),e.session.sha1.update(s)),Ts[e.entity][e.expect][n](e,t,i)):E.handleUnexpected(e,t)};E.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};E.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),s=r.getBytes(i);if(n===E.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>s.length)return e.process();E.queue(e,E.createRecord(e,{type:E.ContentType.heartbeat,data:E.createHeartbeat(E.HeartbeatMessageType.heartbeat_response,s)})),E.flush(e)}else if(n===E.HeartbeatMessageType.heartbeat_response){if(s!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,$.util.createBuffer(s))}e.process()};var Qb=0,jb=1,lu=2,$b=3,zb=4,Ef=5,Jb=6,Wb=7,Yb=8,Xb=0,Zb=1,qa=2,eE=3,Go=4,tE=5,rE=6,b=E.handleUnexpected,Sf=E.handleChangeCipherSpec,Bt=E.handleAlert,Ut=E.handleHandshake,wf=E.handleApplicationData,kt=E.handleHeartbeat,Qo=[];Qo[E.ConnectionEnd.client]=[[b,Bt,Ut,b,kt],[b,Bt,Ut,b,kt],[b,Bt,Ut,b,kt],[b,Bt,Ut,b,kt],[b,Bt,Ut,b,kt],[Sf,Bt,b,b,kt],[b,Bt,Ut,b,kt],[b,Bt,Ut,wf,kt],[b,Bt,Ut,b,kt]];Qo[E.ConnectionEnd.server]=[[b,Bt,Ut,b,kt],[b,Bt,Ut,b,kt],[b,Bt,Ut,b,kt],[b,Bt,Ut,b,kt],[Sf,Bt,b,b,kt],[b,Bt,Ut,b,kt],[b,Bt,Ut,wf,kt],[b,Bt,Ut,b,kt]];var Fr=E.handleHelloRequest,nE=E.handleServerHello,_f=E.handleCertificate,uu=E.handleServerKeyExchange,ga=E.handleCertificateRequest,Ki=E.handleServerHelloDone,Tf=E.handleFinished,Ts=[];Ts[E.ConnectionEnd.client]=[[b,b,nE,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[Fr,b,b,b,b,b,b,b,b,b,b,_f,uu,ga,Ki,b,b,b,b,b,b],[Fr,b,b,b,b,b,b,b,b,b,b,b,uu,ga,Ki,b,b,b,b,b,b],[Fr,b,b,b,b,b,b,b,b,b,b,b,b,ga,Ki,b,b,b,b,b,b],[Fr,b,b,b,b,b,b,b,b,b,b,b,b,b,Ki,b,b,b,b,b,b],[Fr,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[Fr,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,Tf],[Fr,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[Fr,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b]];var iE=E.handleClientHello,sE=E.handleClientKeyExchange,aE=E.handleCertificateVerify;Ts[E.ConnectionEnd.server]=[[b,iE,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,_f,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,sE,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,aE,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,Tf],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b]];E.generateKeys=function(e,t){var r=Ys,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,s=e.version.major===E.Versions.TLS_1_0.major&&e.version.minor===E.Versions.TLS_1_0.minor;s&&(i+=2*t.fixed_iv_length);var a=r(t.master_secret,"key expansion",n,i),o={client_write_MAC_key:a.getBytes(t.mac_key_length),server_write_MAC_key:a.getBytes(t.mac_key_length),client_write_key:a.getBytes(t.enc_key_length),server_write_key:a.getBytes(t.enc_key_length)};return s&&(o.client_write_IV=a.getBytes(t.fixed_iv_length),o.server_write_IV=a.getBytes(t.fixed_iv_length)),o};E.createConnectionState=function(e){var t=e.entity===E.ConnectionEnd.client,r=function(){var s={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(a){return!0},compressionState:null,compressFunction:function(a){return!0},updateSequenceNumber:function(){s.sequenceNumber[1]===4294967295?(s.sequenceNumber[1]=0,++s.sequenceNumber[0]):++s.sequenceNumber[1]}};return s},n={read:r(),write:r()};if(n.read.update=function(s,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(s,a,n.read)||s.error(s,{message:"Could not decompress record.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.decompression_failure}}):s.error(s,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.bad_record_mac}}),!s.fail},n.write.update=function(s,a){return n.write.compressFunction(s,a,n.write)?n.write.cipherFunction(a,n.write)||s.error(s,{message:"Could not encrypt record.",send:!1,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.internal_error}}):s.error(s,{message:"Could not compress record.",send:!1,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.internal_error}}),!s.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=E.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case E.CompressionMethod.none:break;case E.CompressionMethod.deflate:n.read.compressFunction=Gb,n.write.compressFunction=Kb;break;default:throw new Error("Unsupported compression algorithm.")}}return n};E.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,r=$.util.createBuffer();return r.putInt32(t),r.putBytes($.random.getBytes(28)),r};E.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r};E.createAlert=function(e,t){var r=$.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),E.createRecord(e,{type:E.ContentType.alert,data:r})};E.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=$.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var i=t.length(),s=$.util.createBuffer();s.putByte(E.CompressionMethod.none);var a=s.length(),o=$.util.createBuffer();if(e.virtualHost){var l=$.util.createBuffer();l.putByte(0),l.putByte(0);var u=$.util.createBuffer();u.putByte(0),zt(u,2,$.util.createBuffer(e.virtualHost));var c=$.util.createBuffer();zt(c,2,u),zt(l,2,c),o.putBuffer(l)}var f=o.length();f>0&&(f+=2);var d=e.session.id,p=d.length+1+2+4+28+2+i+1+a+f,g=$.util.createBuffer();return g.putByte(E.HandshakeType.client_hello),g.putInt24(p),g.putByte(e.version.major),g.putByte(e.version.minor),g.putBytes(e.session.sp.client_random),zt(g,1,$.util.createBuffer(d)),zt(g,2,t),zt(g,1,s),f>0&&zt(g,2,o),g};E.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=$.util.createBuffer();return n.putByte(E.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),zt(n,1,$.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n};E.createCertificate=function(e){var t=e.entity===E.ConnectionEnd.client,r=null;if(e.getCertificate){var n;t?n=e.session.certificateRequest:n=e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n)}var i=$.util.createBuffer();if(r!==null)try{$.util.isArray(r)||(r=[r]);for(var s=null,a=0;a<r.length;++a){var o=$.pem.decode(r[a])[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=o.type,l}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=$.util.createBuffer(o.body);s===null&&(s=$.asn1.fromDer(u.bytes(),!1));var c=$.util.createBuffer();zt(c,3,u),i.putBuffer(c)}r=$.pki.certificateFromAsn1(s),t?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(p){return e.error(e,{message:"Could not send certificate list.",cause:p,send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.bad_certificate}})}var f=3+i.length(),d=$.util.createBuffer();return d.putByte(E.HandshakeType.certificate),d.putInt24(f),zt(d,3,i),d};E.createClientKeyExchange=function(e){var t=$.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes($.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var i=t.length+2,s=$.util.createBuffer();return s.putByte(E.HandshakeType.client_key_exchange),s.putInt24(i),s.putInt16(t.length),s.putBytes(t),s};E.createServerKeyExchange=function(e){var t=$.util.createBuffer();return t};E.getClientSignature=function(e,t){var r=$.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,i,s){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=$.pki.privateKeyFromPem(a)}catch(o){n.error(n,{message:"Could not get private key.",cause:o,send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.internal_error}}):i=a.sign(i,null),s(n,i)},e.getSignature(e,r,t)};E.createCertificateVerify=function(e,t){var r=t.length+2,n=$.util.createBuffer();return n.putByte(E.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n};E.createCertificateRequest=function(e){var t=$.util.createBuffer();t.putByte(1);var r=$.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],s=$.pki.distinguishedNameToAsn1(i.subject),a=$.asn1.toDer(s);r.putInt16(a.length()),r.putBuffer(a)}var o=1+t.length()+2+r.length(),l=$.util.createBuffer();return l.putByte(E.HandshakeType.certificate_request),l.putInt24(o),zt(l,1,t),zt(l,2,r),l};E.createServerHelloDone=function(e){var t=$.util.createBuffer();return t.putByte(E.HandshakeType.server_hello_done),t.putInt24(0),t};E.createChangeCipherSpec=function(){var e=$.util.createBuffer();return e.putByte(1),e};E.createFinished=function(e){var t=$.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===E.ConnectionEnd.client,n=e.session.sp,i=12,s=Ys,a=r?"client finished":"server finished";t=s(n.master_secret,a,t.getBytes(),i);var o=$.util.createBuffer();return o.putByte(E.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o};E.createHeartbeat=function(e,t,r){typeof r>"u"&&(r=t.length);var n=$.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),s=Math.max(16,i-r-3);return n.putBytes($.random.getBytes(s)),n};E.queue=function(e,t){if(!!t&&!(t.fragment.length()===0&&(t.type===E.ContentType.handshake||t.type===E.ContentType.alert||t.type===E.ContentType.change_cipher_spec))){if(t.type===E.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=E.MaxFragment)n=[t];else{n=[];for(var i=t.fragment.bytes();i.length>E.MaxFragment;)n.push(E.createRecord(e,{type:t.type,data:$.util.createBuffer(i.slice(0,E.MaxFragment))})),i=i.slice(E.MaxFragment);i.length>0&&n.push(E.createRecord(e,{type:t.type,data:$.util.createBuffer(i)}))}for(var s=0;s<n.length&&!e.fail;++s){var a=n[s],o=e.state.current.write;o.update(e,a)&&e.records.push(a)}}};E.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var ma=function(e){switch(e){case!0:return!0;case $.pki.certificateError.bad_certificate:return E.Alert.Description.bad_certificate;case $.pki.certificateError.unsupported_certificate:return E.Alert.Description.unsupported_certificate;case $.pki.certificateError.certificate_revoked:return E.Alert.Description.certificate_revoked;case $.pki.certificateError.certificate_expired:return E.Alert.Description.certificate_expired;case $.pki.certificateError.certificate_unknown:return E.Alert.Description.certificate_unknown;case $.pki.certificateError.unknown_ca:return E.Alert.Description.unknown_ca;default:return E.Alert.Description.bad_certificate}},oE=function(e){switch(e){case!0:return!0;case E.Alert.Description.bad_certificate:return $.pki.certificateError.bad_certificate;case E.Alert.Description.unsupported_certificate:return $.pki.certificateError.unsupported_certificate;case E.Alert.Description.certificate_revoked:return $.pki.certificateError.certificate_revoked;case E.Alert.Description.certificate_expired:return $.pki.certificateError.certificate_expired;case E.Alert.Description.certificate_unknown:return $.pki.certificateError.certificate_unknown;case E.Alert.Description.unknown_ca:return $.pki.certificateError.unknown_ca;default:return $.pki.certificateError.bad_certificate}};E.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(s,a,o){var l=ma(s),u=e.verify(e,s,a,o);if(u!==!0){if(typeof u=="object"&&!$.util.isArray(u)){var c=new Error("The application rejected the certificate.");throw c.send=!0,c.alert={level:E.Alert.Level.fatal,description:E.Alert.Description.bad_certificate},u.message&&(c.message=u.message),u.alert&&(c.alert.description=u.alert),c}u!==s&&(u=oE(u))}return u},$.pki.verifyCertificateChain(e.caStore,t,r)}catch(s){var i=s;(typeof i!="object"||$.util.isArray(i))&&(i={send:!0,alert:{level:E.Alert.Level.fatal,description:ma(s)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:E.Alert.Level.fatal,description:ma(i.error)}),e.error(e,i)}return!e.fail};E.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var n in e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(i){var s=null,a=null;if(i?a=$.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){s=r.cache[a],delete r.cache[a];for(var o in r.order)if(r.order[o]===a){r.order.splice(o,1);break}}return s},r.setSession=function(i,s){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=$.util.bytesToHex(i);r.order.push(a),r.cache[a]=s}}return r};E.createConnection=function(e){var t=null;e.caStore?$.util.isArray(e.caStore)?t=$.pki.createCaStore(e.caStore):t=e.caStore:t=$.pki.createCaStore();var r=e.cipherSuites||null;if(r===null){r=[];for(var n in E.CipherSuites)r.push(E.CipherSuites[n])}var i=e.server?E.ConnectionEnd.server:E.ConnectionEnd.client,s=e.sessionCache?E.createSessionCache(e.sessionCache):null,a={version:{major:E.Version.major,minor:E.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:s,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(c,f,d,p){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:$.util.createBuffer(),tlsData:$.util.createBuffer(),data:$.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(c,f){f.origin=f.origin||(c.entity===E.ConnectionEnd.client?"client":"server"),f.send&&(E.queue(c,E.createAlert(c,f.alert)),E.flush(c));var d=f.fatal!==!1;d&&(c.fail=!0),e.error(c,f),d&&c.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};a.reset=function(c){a.version={major:E.Version.major,minor:E.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===E.ConnectionEnd.client?Qb:Xb,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(c||typeof c>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=E.createConnectionState(a)},a.reset();var o=function(c,f){var d=f.type-E.ContentType.change_cipher_spec,p=Qo[c.entity][c.expect];d in p?p[d](c,f):E.handleUnexpected(c,f)},l=function(c){var f=0,d=c.input,p=d.length();if(p<5)f=5-p;else{c.record={type:d.getByte(),version:{major:d.getByte(),minor:d.getByte()},length:d.getInt16(),fragment:$.util.createBuffer(),ready:!1};var g=c.record.version.major===c.version.major;g&&c.session&&c.session.version&&(g=c.record.version.minor===c.version.minor),g||c.error(c,{message:"Incompatible TLS version.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.protocol_version}})}return f},u=function(c){var f=0,d=c.input,p=d.length();if(p<c.record.length)f=c.record.length-p;else{c.record.fragment.putBytes(d.getBytes(c.record.length)),d.compact();var g=c.state.current.read;g.update(c,c.record)&&(c.fragmented!==null&&(c.fragmented.type===c.record.type?(c.fragmented.fragment.putBuffer(c.record.fragment),c.record=c.fragmented):c.error(c,{message:"Invalid fragmented record.",send:!0,alert:{level:E.Alert.Level.fatal,description:E.Alert.Description.unexpected_message}})),c.record.ready=!0)}return f};return a.handshake=function(c){if(a.entity!==E.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,c=c||"";var f=null;c.length>0&&(a.sessionCache&&(f=a.sessionCache.getSession(c)),f===null&&(c="")),c.length===0&&a.sessionCache&&(f=a.sessionCache.getSession(),f!==null&&(c=f.id)),a.session={id:c,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:$.md.md5.create(),sha1:$.md.sha1.create()},f&&(a.version=f.version,a.session.sp=f.sp),a.session.sp.client_random=E.createRandom().getBytes(),a.open=!0,E.queue(a,E.createRecord(a,{type:E.ContentType.handshake,data:E.createClientHello(a)})),E.flush(a)}},a.process=function(c){var f=0;return c&&a.input.putBytes(c),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(f=l(a)),!a.fail&&a.record!==null&&!a.record.ready&&(f=u(a)),!a.fail&&a.record!==null&&a.record.ready&&o(a,a.record)),f},a.prepare=function(c){return E.queue(a,E.createRecord(a,{type:E.ContentType.application_data,data:$.util.createBuffer(c)})),E.flush(a)},a.prepareHeartbeatRequest=function(c,f){return c instanceof $.util.ByteBuffer&&(c=c.bytes()),typeof f>"u"&&(f=c.length),a.expectedHeartbeatPayload=c,E.queue(a,E.createRecord(a,{type:E.ContentType.heartbeat,data:E.createHeartbeat(E.HeartbeatMessageType.heartbeat_request,c,f)})),E.flush(a)},a.close=function(c){if(!a.fail&&a.sessionCache&&a.session){var f={id:a.session.id,version:a.session.version,sp:a.session.sp};f.sp.keys=null,a.sessionCache.setSession(f.id,f)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,E.queue(a,E.createAlert(a,{level:E.Alert.Level.warning,description:E.Alert.Description.close_notify})),E.flush(a)),a.closed(a)),a.reset(c)},a};$.tls=$.tls||{};for(var Aa in E)typeof E[Aa]!="function"&&($.tls[Aa]=E[Aa]);$.tls.prf_tls1=Ys;$.tls.hmac_sha1=qb;$.tls.createSessionCache=E.createSessionCache;$.tls.createConnection=E.createConnection;var Jr=_e,er=Jr.tls;er.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=er.BulkCipherAlgorithm.aes,e.cipher_type=er.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=er.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:xf};er.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=er.BulkCipherAlgorithm.aes,e.cipher_type=er.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=er.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:xf};function xf(e,t,r){var n=t.entity===Jr.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:Jr.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:Jr.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=fE,e.write.cipherFunction=lE,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=er.hmac_sha1}function lE(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var i;e.version.minor===er.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=Jr.random.getBytesSync(16),t.cipherState.init=!0;var s=t.cipherState.cipher;return s.start({iv:i}),e.version.minor>=er.Versions.TLS_1_1.minor&&s.output.putBytes(i),s.update(e.fragment),s.finish(uE)&&(e.fragment=s.output,e.length=e.fragment.length(),r=!0),r}function uE(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function cE(e,t,r){var n=!0;if(r){for(var i=t.length(),s=t.last(),a=i-1-s;a<i-1;++a)n=n&&t.at(a)==s;n&&t.truncate(s+1)}return n}function fE(e,t){var r=!1,n;e.version.minor===er.Versions.TLS_1_0.minor?n=t.cipherState.init?null:t.cipherState.iv:n=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:n}),i.update(e.fragment),r=i.finish(cE);var s=t.macLength,a=Jr.random.getBytesSync(s),o=i.output.length();o>=s?(e.fragment=i.output.getBytes(o-s),a=i.output.getBytes(s)):e.fragment=i.output.getBytes(),e.fragment=Jr.util.createBuffer(e.fragment),e.length=e.fragment.length();var l=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=hE(t.macKey,a,l)&&r,r}function hE(e,t,r){var n=Jr.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}var rt=_e,Oi=rt.sha512=rt.sha512||{};rt.md.sha512=rt.md.algorithms.sha512=Oi;var If=rt.sha384=rt.sha512.sha384=rt.sha512.sha384||{};If.create=function(){return Oi.create("SHA-384")};rt.md.sha384=rt.md.algorithms.sha384=If;rt.sha512.sha256=rt.sha512.sha256||{create:function(){return Oi.create("SHA-512/256")}};rt.md["sha512/256"]=rt.md.algorithms["sha512/256"]=rt.sha512.sha256;rt.sha512.sha224=rt.sha512.sha224||{create:function(){return Oi.create("SHA-512/224")}};rt.md["sha512/224"]=rt.md.algorithms["sha512/224"]=rt.sha512.sha224;Oi.create=function(e){if(Bf||dE(),typeof e>"u"&&(e="SHA-512"),!(e in an))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=an[e],r=null,n=rt.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var a=64;switch(e){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var l=o.messageLengthSize/4,u=0;u<l;++u)o.fullMessageLength.push(0);n=rt.util.createBuffer(),r=new Array(t.length);for(var u=0;u<t.length;++u)r[u]=t[u].slice(0);return o},o.start(),o.update=function(l,u){u==="utf8"&&(l=rt.util.encodeUtf8(l));var c=l.length;o.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var f=o.fullMessageLength.length-1;f>=0;--f)o.fullMessageLength[f]+=c[1],c[1]=c[0]+(o.fullMessageLength[f]/4294967296>>>0),o.fullMessageLength[f]=o.fullMessageLength[f]>>>0,c[0]=c[1]/4294967296>>>0;return n.putBytes(l),cu(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var l=rt.util.createBuffer();l.putBytes(n.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,c=u&o.blockLength-1;l.putBytes(Ka.substr(0,o.blockLength-c));for(var f,d,p=o.fullMessageLength[0]*8,g=0;g<o.fullMessageLength.length-1;++g)f=o.fullMessageLength[g+1]*8,d=f/4294967296>>>0,p+=d,l.putInt32(p>>>0),p=f>>>0;l.putInt32(p);for(var A=new Array(r.length),g=0;g<r.length;++g)A[g]=r[g].slice(0);cu(A,i,l);var _=rt.util.createBuffer(),T;e==="SHA-512"?T=A.length:e==="SHA-384"?T=A.length-2:T=A.length-4;for(var g=0;g<T;++g)_.putInt32(A[g][0]),(g!==T-1||e!=="SHA-512/224")&&_.putInt32(A[g][1]);return _},o};var Ka=null,Bf=!1,Ga=null,an=null;function dE(){Ka=String.fromCharCode(128),Ka+=rt.util.fillString(String.fromCharCode(0),128),Ga=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],an={},an["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],an["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],an["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],an["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Bf=!0}function cu(e,t,r){for(var n,i,s,a,o,l,u,c,f,d,p,g,A,_,T,k,y,w,S,x,I,U,H,D,M,q,K,ie,X,ue,te,ft,pe,Ge,Ue,Ve=r.length();Ve>=128;){for(X=0;X<16;++X)t[X][0]=r.getInt32()>>>0,t[X][1]=r.getInt32()>>>0;for(;X<80;++X)ft=t[X-2],ue=ft[0],te=ft[1],n=((ue>>>19|te<<13)^(te>>>29|ue<<3)^ue>>>6)>>>0,i=((ue<<13|te>>>19)^(te<<3|ue>>>29)^(ue<<26|te>>>6))>>>0,Ge=t[X-15],ue=Ge[0],te=Ge[1],s=((ue>>>1|te<<31)^(ue>>>8|te<<24)^ue>>>7)>>>0,a=((ue<<31|te>>>1)^(ue<<24|te>>>8)^(ue<<25|te>>>7))>>>0,pe=t[X-7],Ue=t[X-16],te=i+pe[1]+a+Ue[1],t[X][0]=n+pe[0]+s+Ue[0]+(te/4294967296>>>0)>>>0,t[X][1]=te>>>0;for(A=e[0][0],_=e[0][1],T=e[1][0],k=e[1][1],y=e[2][0],w=e[2][1],S=e[3][0],x=e[3][1],I=e[4][0],U=e[4][1],H=e[5][0],D=e[5][1],M=e[6][0],q=e[6][1],K=e[7][0],ie=e[7][1],X=0;X<80;++X)u=((I>>>14|U<<18)^(I>>>18|U<<14)^(U>>>9|I<<23))>>>0,c=((I<<18|U>>>14)^(I<<14|U>>>18)^(U<<23|I>>>9))>>>0,f=(M^I&(H^M))>>>0,d=(q^U&(D^q))>>>0,o=((A>>>28|_<<4)^(_>>>2|A<<30)^(_>>>7|A<<25))>>>0,l=((A<<4|_>>>28)^(_<<30|A>>>2)^(_<<25|A>>>7))>>>0,p=(A&T|y&(A^T))>>>0,g=(_&k|w&(_^k))>>>0,te=ie+c+d+Ga[X][1]+t[X][1],n=K+u+f+Ga[X][0]+t[X][0]+(te/4294967296>>>0)>>>0,i=te>>>0,te=l+g,s=o+p+(te/4294967296>>>0)>>>0,a=te>>>0,K=M,ie=q,M=H,q=D,H=I,D=U,te=x+i,I=S+n+(te/4294967296>>>0)>>>0,U=te>>>0,S=y,x=w,y=T,w=k,T=A,k=_,te=i+a,A=n+s+(te/4294967296>>>0)>>>0,_=te>>>0;te=e[0][1]+_,e[0][0]=e[0][0]+A+(te/4294967296>>>0)>>>0,e[0][1]=te>>>0,te=e[1][1]+k,e[1][0]=e[1][0]+T+(te/4294967296>>>0)>>>0,e[1][1]=te>>>0,te=e[2][1]+w,e[2][0]=e[2][0]+y+(te/4294967296>>>0)>>>0,e[2][1]=te>>>0,te=e[3][1]+x,e[3][0]=e[3][0]+S+(te/4294967296>>>0)>>>0,e[3][1]=te>>>0,te=e[4][1]+U,e[4][0]=e[4][0]+I+(te/4294967296>>>0)>>>0,e[4][1]=te>>>0,te=e[5][1]+D,e[5][0]=e[5][0]+H+(te/4294967296>>>0)>>>0,e[5][1]=te>>>0,te=e[6][1]+q,e[6][0]=e[6][0]+M+(te/4294967296>>>0)>>>0,e[6][1]=te>>>0,te=e[7][1]+ie,e[7][0]=e[7][0]+K+(te/4294967296>>>0)>>>0,e[7][1]=te>>>0,Ve-=128}}var jo={},pE=_e,Et=pE.asn1;jo.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Et.Class.UNIVERSAL,type:Et.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Et.Class.UNIVERSAL,type:Et.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Et.Class.UNIVERSAL,type:Et.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Et.Class.UNIVERSAL,type:Et.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Et.Class.UNIVERSAL,type:Et.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};jo.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Et.Class.UNIVERSAL,type:Et.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Et.Class.UNIVERSAL,type:Et.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Et.Class.UNIVERSAL,type:Et.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Et.Class.UNIVERSAL,type:Et.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};var Dt=_e,kf=jo,gE=kf.publicKeyValidator,mE=kf.privateKeyValidator;if(typeof AE>"u")var AE=Dt.jsbn.BigInteger;var Qa=Dt.util.ByteBuffer,Ht=typeof Buffer>"u"?Uint8Array:Buffer;Dt.pki=Dt.pki||{};Dt.pki.ed25519=Dt.ed25519=Dt.ed25519||{};var Ie=Dt.ed25519;Ie.constants={};Ie.constants.PUBLIC_KEY_BYTE_LENGTH=32;Ie.constants.PRIVATE_KEY_BYTE_LENGTH=64;Ie.constants.SEED_BYTE_LENGTH=32;Ie.constants.SIGN_BYTE_LENGTH=64;Ie.constants.HASH_BYTE_LENGTH=64;Ie.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=Dt.random.getBytesSync(Ie.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==Ie.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Ie.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Dr({message:t,encoding:"binary"});for(var r=new Ht(Ie.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Ht(Ie.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=t[i];return bE(r,n),{publicKey:r,privateKey:n}};Ie.privateKeyFromAsn1=function(e){var t={},r=[],n=Dt.asn1.validate(e,mE,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=Dt.asn1.derToOid(t.privateKeyOid),a=Dt.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var o=t.privateKey,l=Dr({message:Dt.asn1.fromDer(o).value,encoding:"binary"});return{privateKeyBytes:l}};Ie.publicKeyFromAsn1=function(e){var t={},r=[],n=Dt.asn1.validate(e,gE,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=Dt.asn1.derToOid(t.publicKeyOid),a=Dt.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var o=t.ed25519PublicKey;if(o.length!==Ie.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Dr({message:o,encoding:"binary"})};Ie.publicKeyFromPrivateKey=function(e){e=e||{};var t=Dr({message:e.privateKey,encoding:"binary"});if(t.length!==Ie.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Ie.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Ht(Ie.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r};Ie.sign=function(e){e=e||{};var t=Dr(e),r=Dr({message:e.privateKey,encoding:"binary"});if(r.length===Ie.constants.SEED_BYTE_LENGTH){var n=Ie.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Ie.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Ie.constants.SEED_BYTE_LENGTH+" or "+Ie.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Ht(Ie.constants.SIGN_BYTE_LENGTH+t.length);EE(i,t,t.length,r);for(var s=new Ht(Ie.constants.SIGN_BYTE_LENGTH),a=0;a<s.length;++a)s[a]=i[a];return s};Ie.verify=function(e){e=e||{};var t=Dr(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Dr({message:e.signature,encoding:"binary"});if(r.length!==Ie.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Ie.constants.SIGN_BYTE_LENGTH);var n=Dr({message:e.publicKey,encoding:"binary"});if(n.length!==Ie.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Ie.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Ht(Ie.constants.SIGN_BYTE_LENGTH+t.length),s=new Ht(Ie.constants.SIGN_BYTE_LENGTH+t.length),a;for(a=0;a<Ie.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<t.length;++a)i[a+Ie.constants.SIGN_BYTE_LENGTH]=t[a];return SE(s,i,i.length,n)>=0};function Dr(e){var t=e.message;if(t instanceof Uint8Array||t instanceof Ht)return t;var r=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.from(t,r);t=new Qa(t,r)}else if(!(t instanceof Qa))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Ht(t.length()),i=0;i<n.length;++i)n[i]=t.at(i);return n}var ja=ge(),xs=ge([1]),yE=ge([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),vE=ge([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),fu=ge([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),hu=ge([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),ya=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),CE=ge([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function mi(e,t){var r=Dt.md.sha512.create(),n=new Qa(e);r.update(n.getBytes(t),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var s=new Ht(Ie.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)s[a]=i.charCodeAt(a);return s}function bE(e,t){var r=[ge(),ge(),ge(),ge()],n,i=mi(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,zo(r,i),$o(e,r),n=0;n<32;++n)t[n+32]=e[n];return 0}function EE(e,t,r,n){var i,s,a=new Float64Array(64),o=[ge(),ge(),ge(),ge()],l=mi(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var u=r+64;for(i=0;i<r;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=l[32+i];var c=mi(e.subarray(32),r+32);for($a(c),zo(o,c),$o(e,o),i=32;i<64;++i)e[i]=n[i];var f=mi(e,r+64);for($a(f),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=c[i];for(i=0;i<32;++i)for(s=0;s<32;s++)a[i+s]+=f[i]*l[s];return Rf(e.subarray(32),a),u}function SE(e,t,r,n){var i,s,a=new Ht(32),o=[ge(),ge(),ge(),ge()],l=[ge(),ge(),ge(),ge()];if(s=-1,r<64||wE(l,n))return-1;for(i=0;i<r;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=n[i];var u=mi(e,r);if($a(u),Nf(o,l,u),zo(l,t.subarray(32)),za(o,l),$o(a,o),r-=64,Df(t,0,a,0)){for(i=0;i<r;++i)e[i]=0;return-1}for(i=0;i<r;++i)e[i]=t[i+64];return s=r,s}function Rf(e,t){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*ya[i-(n-32)],r=t[i]+128>>8,t[i]-=r*256;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*ya[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*ya[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=t[n]&255}function $a(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;Rf(e,t)}function za(e,t){var r=ge(),n=ge(),i=ge(),s=ge(),a=ge(),o=ge(),l=ge(),u=ge(),c=ge();Dn(r,e[1],e[0]),Dn(c,t[1],t[0]),Qe(r,r,c),Bn(n,e[0],e[1]),Bn(c,t[0],t[1]),Qe(n,n,c),Qe(i,e[3],t[3]),Qe(i,i,vE),Qe(s,e[2],t[2]),Bn(s,s,s),Dn(a,n,r),Dn(o,s,i),Bn(l,s,i),Bn(u,n,r),Qe(e[0],a,o),Qe(e[1],u,l),Qe(e[2],l,o),Qe(e[3],a,u)}function du(e,t,r){for(var n=0;n<4;++n)Mf(e[n],t[n],r)}function $o(e,t){var r=ge(),n=ge(),i=ge();IE(i,t[2]),Qe(r,t[0],i),Qe(n,t[1],i),Is(e,n),e[31]^=Lf(r)<<7}function Is(e,t){var r,n,i,s=ge(),a=ge();for(r=0;r<16;++r)a[r]=t[r];for(va(a),va(a),va(a),n=0;n<2;++n){for(s[0]=a[0]-65517,r=1;r<15;++r)s[r]=a[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,Mf(a,s,1-i)}for(r=0;r<16;r++)e[2*r]=a[r]&255,e[2*r+1]=a[r]>>8}function wE(e,t){var r=ge(),n=ge(),i=ge(),s=ge(),a=ge(),o=ge(),l=ge();return $r(e[2],xs),_E(e[1],t),on(i,e[1]),Qe(s,i,yE),Dn(i,i,e[2]),Bn(s,e[2],s),on(a,s),on(o,a),Qe(l,o,a),Qe(r,l,i),Qe(r,r,s),TE(r,r),Qe(r,r,i),Qe(r,r,s),Qe(r,r,s),Qe(e[0],r,s),on(n,e[0]),Qe(n,n,s),pu(n,i)&&Qe(e[0],e[0],CE),on(n,e[0]),Qe(n,n,s),pu(n,i)?-1:(Lf(e[0])===t[31]>>7&&Dn(e[0],ja,e[0]),Qe(e[3],e[0],e[1]),0)}function _E(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function TE(e,t){var r=ge(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)on(r,r),n!==1&&Qe(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function pu(e,t){var r=new Ht(32),n=new Ht(32);return Is(r,e),Is(n,t),Df(r,0,n,0)}function Df(e,t,r,n){return xE(e,t,r,n,32)}function xE(e,t,r,n,i){var s,a=0;for(s=0;s<i;++s)a|=e[t+s]^r[n+s];return(1&a-1>>>8)-1}function Lf(e){var t=new Ht(32);return Is(t,e),t[0]&1}function Nf(e,t,r){var n,i;for($r(e[0],ja),$r(e[1],xs),$r(e[2],xs),$r(e[3],ja),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,du(e,t,n),za(t,e),za(e,e),du(e,t,n)}function zo(e,t){var r=[ge(),ge(),ge(),ge()];$r(r[0],fu),$r(r[1],hu),$r(r[2],xs),Qe(r[3],fu,hu),Nf(e,r,t)}function $r(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0}function IE(e,t){var r=ge(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)on(r,r),n!==2&&n!==4&&Qe(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function va(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-n*65536;e[0]+=n-1+37*(n-1)}function Mf(e,t,r){for(var n,i=~(r-1),s=0;s<16;++s)n=i&(e[s]^t[s]),e[s]^=n,t[s]^=n}function ge(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function Bn(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function Dn(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function on(e,t){Qe(e,t,t)}function Qe(e,t,r){var n,i,s=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,g=0,A=0,_=0,T=0,k=0,y=0,w=0,S=0,x=0,I=0,U=0,H=0,D=0,M=0,q=0,K=0,ie=0,X=0,ue=0,te=0,ft=0,pe=0,Ge=r[0],Ue=r[1],Ve=r[2],we=r[3],Ae=r[4],He=r[5],Ye=r[6],Xe=r[7],ht=r[8],nt=r[9],it=r[10],dt=r[11],Ze=r[12],qe=r[13],Ke=r[14],P=r[15];n=t[0],s+=n*Ge,a+=n*Ue,o+=n*Ve,l+=n*we,u+=n*Ae,c+=n*He,f+=n*Ye,d+=n*Xe,p+=n*ht,g+=n*nt,A+=n*it,_+=n*dt,T+=n*Ze,k+=n*qe,y+=n*Ke,w+=n*P,n=t[1],a+=n*Ge,o+=n*Ue,l+=n*Ve,u+=n*we,c+=n*Ae,f+=n*He,d+=n*Ye,p+=n*Xe,g+=n*ht,A+=n*nt,_+=n*it,T+=n*dt,k+=n*Ze,y+=n*qe,w+=n*Ke,S+=n*P,n=t[2],o+=n*Ge,l+=n*Ue,u+=n*Ve,c+=n*we,f+=n*Ae,d+=n*He,p+=n*Ye,g+=n*Xe,A+=n*ht,_+=n*nt,T+=n*it,k+=n*dt,y+=n*Ze,w+=n*qe,S+=n*Ke,x+=n*P,n=t[3],l+=n*Ge,u+=n*Ue,c+=n*Ve,f+=n*we,d+=n*Ae,p+=n*He,g+=n*Ye,A+=n*Xe,_+=n*ht,T+=n*nt,k+=n*it,y+=n*dt,w+=n*Ze,S+=n*qe,x+=n*Ke,I+=n*P,n=t[4],u+=n*Ge,c+=n*Ue,f+=n*Ve,d+=n*we,p+=n*Ae,g+=n*He,A+=n*Ye,_+=n*Xe,T+=n*ht,k+=n*nt,y+=n*it,w+=n*dt,S+=n*Ze,x+=n*qe,I+=n*Ke,U+=n*P,n=t[5],c+=n*Ge,f+=n*Ue,d+=n*Ve,p+=n*we,g+=n*Ae,A+=n*He,_+=n*Ye,T+=n*Xe,k+=n*ht,y+=n*nt,w+=n*it,S+=n*dt,x+=n*Ze,I+=n*qe,U+=n*Ke,H+=n*P,n=t[6],f+=n*Ge,d+=n*Ue,p+=n*Ve,g+=n*we,A+=n*Ae,_+=n*He,T+=n*Ye,k+=n*Xe,y+=n*ht,w+=n*nt,S+=n*it,x+=n*dt,I+=n*Ze,U+=n*qe,H+=n*Ke,D+=n*P,n=t[7],d+=n*Ge,p+=n*Ue,g+=n*Ve,A+=n*we,_+=n*Ae,T+=n*He,k+=n*Ye,y+=n*Xe,w+=n*ht,S+=n*nt,x+=n*it,I+=n*dt,U+=n*Ze,H+=n*qe,D+=n*Ke,M+=n*P,n=t[8],p+=n*Ge,g+=n*Ue,A+=n*Ve,_+=n*we,T+=n*Ae,k+=n*He,y+=n*Ye,w+=n*Xe,S+=n*ht,x+=n*nt,I+=n*it,U+=n*dt,H+=n*Ze,D+=n*qe,M+=n*Ke,q+=n*P,n=t[9],g+=n*Ge,A+=n*Ue,_+=n*Ve,T+=n*we,k+=n*Ae,y+=n*He,w+=n*Ye,S+=n*Xe,x+=n*ht,I+=n*nt,U+=n*it,H+=n*dt,D+=n*Ze,M+=n*qe,q+=n*Ke,K+=n*P,n=t[10],A+=n*Ge,_+=n*Ue,T+=n*Ve,k+=n*we,y+=n*Ae,w+=n*He,S+=n*Ye,x+=n*Xe,I+=n*ht,U+=n*nt,H+=n*it,D+=n*dt,M+=n*Ze,q+=n*qe,K+=n*Ke,ie+=n*P,n=t[11],_+=n*Ge,T+=n*Ue,k+=n*Ve,y+=n*we,w+=n*Ae,S+=n*He,x+=n*Ye,I+=n*Xe,U+=n*ht,H+=n*nt,D+=n*it,M+=n*dt,q+=n*Ze,K+=n*qe,ie+=n*Ke,X+=n*P,n=t[12],T+=n*Ge,k+=n*Ue,y+=n*Ve,w+=n*we,S+=n*Ae,x+=n*He,I+=n*Ye,U+=n*Xe,H+=n*ht,D+=n*nt,M+=n*it,q+=n*dt,K+=n*Ze,ie+=n*qe,X+=n*Ke,ue+=n*P,n=t[13],k+=n*Ge,y+=n*Ue,w+=n*Ve,S+=n*we,x+=n*Ae,I+=n*He,U+=n*Ye,H+=n*Xe,D+=n*ht,M+=n*nt,q+=n*it,K+=n*dt,ie+=n*Ze,X+=n*qe,ue+=n*Ke,te+=n*P,n=t[14],y+=n*Ge,w+=n*Ue,S+=n*Ve,x+=n*we,I+=n*Ae,U+=n*He,H+=n*Ye,D+=n*Xe,M+=n*ht,q+=n*nt,K+=n*it,ie+=n*dt,X+=n*Ze,ue+=n*qe,te+=n*Ke,ft+=n*P,n=t[15],w+=n*Ge,S+=n*Ue,x+=n*Ve,I+=n*we,U+=n*Ae,H+=n*He,D+=n*Ye,M+=n*Xe,q+=n*ht,K+=n*nt,ie+=n*it,X+=n*dt,ue+=n*Ze,te+=n*qe,ft+=n*Ke,pe+=n*P,s+=38*S,a+=38*x,o+=38*I,l+=38*U,u+=38*H,c+=38*D,f+=38*M,d+=38*q,p+=38*K,g+=38*ie,A+=38*X,_+=38*ue,T+=38*te,k+=38*ft,y+=38*pe,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=T+i+65535,i=Math.floor(n/65536),T=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,s+=i-1+37*(i-1),e[0]=s,e[1]=a,e[2]=o,e[3]=l,e[4]=u,e[5]=c,e[6]=f,e[7]=d,e[8]=p,e[9]=g,e[10]=A,e[11]=_,e[12]=T,e[13]=k,e[14]=y,e[15]=w}var Kt=_e;Kt.kem=Kt.kem||{};var gu=Kt.jsbn.BigInteger;Kt.kem.rsa={};Kt.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||Kt.random,n={};return n.encrypt=function(i,s){var a=Math.ceil(i.n.bitLength()/8),o;do o=new gu(Kt.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(o.compareTo(gu.ONE)<=0);o=Kt.util.hexToBytes(o.toString(16));var l=a-o.length;l>0&&(o=Kt.util.fillString(String.fromCharCode(0),l)+o);var u=i.encrypt(o,"NONE"),c=e.generate(o,s);return{encapsulation:u,key:c}},n.decrypt=function(i,s,a){var o=i.decrypt(s,"NONE");return e.generate(o,a)},n};Kt.kem.kdf1=function(e,t){Of(this,e,0,t||e.digestLength)};Kt.kem.kdf2=function(e,t){Of(this,e,1,t||e.digestLength)};function Of(e,t,r,n){e.generate=function(i,s){for(var a=new Kt.util.ByteBuffer,o=Math.ceil(s/n)+r,l=new Kt.util.ByteBuffer,u=r;u<o;++u){l.putInt32(u),t.start(),t.update(i+l.getBytes());var c=t.digest();a.putBytes(c.getBytes(n))}return a.truncate(a.length()-s),a.getBytes()}}var De=_e;De.log=De.log||{};De.log.levels=["none","error","warning","info","debug","verbose","max"];var Bs={},Ja=[],Ai=null;De.log.LEVEL_LOCKED=1<<1;De.log.NO_LEVEL_CHECK=1<<2;De.log.INTERPOLATE=1<<3;for(var zr=0;zr<De.log.levels.length;++zr){var mu=De.log.levels[zr];Bs[mu]={index:zr,name:mu.toUpperCase()}}De.log.logMessage=function(e){for(var t=Bs[e.level].index,r=0;r<Ja.length;++r){var n=Ja[r];if(n.flags&De.log.NO_LEVEL_CHECK)n.f(e);else{var i=Bs[n.level].index;t<=i&&n.f(n,e)}}};De.log.prepareStandard=function(e){"standard"in e||(e.standard=Bs[e.level].name+" ["+e.category+"] "+e.message)};De.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=De.util.format.apply(this,t)}};De.log.prepareStandardFull=function(e){"standardFull"in e||(De.log.prepareStandard(e),e.standardFull=e.standard)};for(var Au=["error","warning","info","debug","verbose"],zr=0;zr<Au.length;++zr)(function(t){De.log[t]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),s={timestamp:new Date,level:t,category:r,message:n,arguments:i};De.log.logMessage(s)}})(Au[zr]);De.log.makeLogger=function(e){var t={flags:0,f:e};return De.log.setLevel(t,"none"),t};De.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&De.log.LEVEL_LOCKED))for(var n=0;n<De.log.levels.length;++n){var i=De.log.levels[n];if(t==i){e.level=t,r=!0;break}}return r};De.log.lock=function(e,t){typeof t>"u"||t?e.flags|=De.log.LEVEL_LOCKED:e.flags&=~De.log.LEVEL_LOCKED};De.log.addLogger=function(e){Ja.push(e)};if(typeof console<"u"&&"log"in console){var oi;if(console.error&&console.warn&&console.info&&console.debug){var BE={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Jo=function(e,t){De.log.prepareStandard(t);var r=BE[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)};oi=De.log.makeLogger(Jo)}else{var Jo=function(t,r){De.log.prepareStandardFull(r),console.log(r.standardFull)};oi=De.log.makeLogger(Jo)}De.log.setLevel(oi,"debug"),De.log.addLogger(oi),Ai=oi}else console={log:function(){}};if(Ai!==null&&typeof window<"u"&&window.location){var Gi=new URL(window.location.href).searchParams;if(Gi.has("console.level")&&De.log.setLevel(Ai,Gi.get("console.level").slice(-1)[0]),Gi.has("console.lock")){var kE=Gi.get("console.lock").slice(-1)[0];kE=="true"&&De.log.lock(Ai)}}De.log.consoleLogger=Ai;var RE={exports:{}};(function(e){e.exports=i1})(RE);var ee=_e,L=ee.asn1,Pt=ee.pkcs7=ee.pkcs7||{};Pt.messageFromPem=function(e){var t=ee.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=L.fromDer(t.body);return Pt.messageFromAsn1(n)};Pt.messageToPem=function(e,t){var r={type:"PKCS7",body:L.toDer(e.toAsn1()).getBytes()};return ee.pem.encode(r,{maxline:t})};Pt.messageFromAsn1=function(e){var t={},r=[];if(!L.validate(e,Pt.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=L.derToOid(t.contentType),s;switch(i){case ee.pki.oids.envelopedData:s=Pt.createEnvelopedData();break;case ee.pki.oids.encryptedData:s=Pt.createEncryptedData();break;case ee.pki.oids.signedData:s=Pt.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return s.fromAsn1(t.content.value[0]),s};Pt.createSignedData=function(){var e=null;return e={type:ee.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(Wo(e,n,Pt.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,s=0;s<i.length;++s)e.certificates.push(ee.pki.certificateFromAsn1(i[s]))},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],i=0;i<e.certificates.length;++i)n.push(ee.pki.certificateToAsn1(e.certificates[i]));var s=[],a=L.create(L.Class.CONTEXT_SPECIFIC,0,!0,[L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,L.integerToDer(e.version).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&a.value[0].value.push(L.create(L.Class.CONTEXT_SPECIFIC,0,!0,n)),s.length>0&&a.value[0].value.push(L.create(L.Class.CONTEXT_SPECIFIC,1,!0,s)),a.value[0].value.push(L.create(L.Class.UNIVERSAL,L.Type.SET,!0,e.signerInfos)),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.type).getBytes()),a])},addSigner:function(n){var i=n.issuer,s=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=ee.pki.certificateFromPem(a)),i=a.issuer.attributes,s=a.serialNumber}var o=n.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=ee.pki.privateKeyFromPem(o));var l=n.digestAlgorithm||ee.pki.oids.sha1;switch(l){case ee.pki.oids.sha1:case ee.pki.oids.sha256:case ee.pki.oids.sha384:case ee.pki.oids.sha512:case ee.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var c=!1,f=!1,d=0;d<u.length;++d){var p=u[d];if(!c&&p.type===ee.pki.oids.contentType){if(c=!0,f)break;continue}if(!f&&p.type===ee.pki.oids.messageDigest){if(f=!0,c)break;continue}}if(!c||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:i,serialNumber:s,digestAlgorithm:l,signatureAlgorithm:ee.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(ee.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof ee.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=ee.util.encodeUtf8(e.content)),n.detached?e.detachedContent=L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(L.create(L.Class.CONTEXT_SPECIFIC,0,!0,[L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var s=t();r(s)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=ee.pki.certificateFromPem(n)),e.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var n={},i=0;i<e.signers.length;++i){var s=e.signers[i],a=s.digestAlgorithm;a in n||(n[a]=ee.md[ee.pki.oids[a]].create()),s.authenticatedAttributes.length===0?s.md=n[a]:s.md=ee.md[ee.pki.oids[a]].create()}e.digestAlgorithmIdentifiers=[];for(var a in n)e.digestAlgorithmIdentifiers.push(L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(a).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.NULL,!1,"")]));return n}function r(n){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=L.derToOid(e.contentInfo.value[0].value),a=L.toDer(i);a.getByte(),L.getBerValueLength(a),a=a.getBytes();for(var o in n)n[o].start().update(a);for(var l=new Date,u=0;u<e.signers.length;++u){var c=e.signers[u];if(c.authenticatedAttributes.length===0){if(s!==ee.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{c.authenticatedAttributesAsn1=L.create(L.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=L.create(L.Class.UNIVERSAL,L.Type.SET,!0,[]),d=0;d<c.authenticatedAttributes.length;++d){var p=c.authenticatedAttributes[d];p.type===ee.pki.oids.messageDigest?p.value=n[c.digestAlgorithm].digest():p.type===ee.pki.oids.signingTime&&(p.value||(p.value=l)),f.value.push(Wa(p)),c.authenticatedAttributesAsn1.value.push(Wa(p))}a=L.toDer(f).getBytes(),c.md.start().update(a)}c.signature=c.key.sign(c.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=UE(e.signers)}};Pt.createEncryptedData=function(){var e=null;return e={type:ee.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:ee.pki.oids["aes256-CBC"]},fromAsn1:function(t){Wo(e,t,Pt.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),Uf(e)}},e};Pt.createEnvelopedData=function(){var e=null;return e={type:ee.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:ee.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=Wo(e,t,Pt.asn1.envelopedDataValidator);e.recipients=NE(r.recipientInfos.value)},toAsn1:function(){return L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.type).getBytes()),L.create(L.Class.CONTEXT_SPECIFIC,0,!0,[L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,L.integerToDer(e.version).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SET,!0,ME(e.recipients)),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,PE(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var a=!0,o=0;o<r.length;++o)if(s[o].type!==r[o].type||s[o].value!==r[o].value){a=!1;break}if(a)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case ee.pki.oids.rsaEncryption:case ee.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=ee.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}Uf(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:ee.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===void 0){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,i,s;switch(r){case ee.pki.oids["aes128-CBC"]:n=16,i=16,s=ee.aes.createEncryptionCipher;break;case ee.pki.oids["aes192-CBC"]:n=24,i=16,s=ee.aes.createEncryptionCipher;break;case ee.pki.oids["aes256-CBC"]:n=32,i=16,s=ee.aes.createEncryptionCipher;break;case ee.pki.oids["des-EDE3-CBC"]:n=24,i=8,s=ee.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=ee.util.createBuffer(ee.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=ee.util.createBuffer(ee.random.getBytes(i));var a=s(t);if(a.start(e.encryptedContent.parameter.copy()),a.update(e.content),!a.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=a.output}for(var o=0;o<e.recipients.length;++o){var l=e.recipients[o];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case ee.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}}},e};function DE(e){var t={},r=[];if(!L.validate(e,Pt.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:ee.pki.RDNAttributesAsArray(t.issuer),serialNumber:ee.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:L.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function LE(e){return L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,L.integerToDer(e.version).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[ee.pki.distinguishedNameToAsn1({attributes:e.issuer}),L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,ee.util.hexToBytes(e.serialNumber))]),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.encryptedContent.algorithm).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.NULL,!1,"")]),L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function NE(e){for(var t=[],r=0;r<e.length;++r)t.push(DE(e[r]));return t}function ME(e){for(var t=[],r=0;r<e.length;++r)t.push(LE(e[r]));return t}function OE(e){var t=L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,L.integerToDer(e.version).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[ee.pki.distinguishedNameToAsn1({attributes:e.issuer}),L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,ee.util.hexToBytes(e.serialNumber))]),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.digestAlgorithm).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.signatureAlgorithm).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.NULL,!1,"")])),t.value.push(L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=L.create(L.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(Wa(i))}t.value.push(r)}return t}function UE(e){for(var t=[],r=0;r<e.length;++r)t.push(OE(e[r]));return t}function Wa(e){var t;if(e.type===ee.pki.oids.contentType)t=L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.value).getBytes());else if(e.type===ee.pki.oids.messageDigest)t=L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===ee.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var s=Date.parse(i);isNaN(s)?i.length===13?i=L.utcTimeToDate(i):i=L.generalizedTimeToDate(i):i=new Date(s)}i>=r&&i<n?t=L.create(L.Class.UNIVERSAL,L.Type.UTCTIME,!1,L.dateToUtcTime(i)):t=L.create(L.Class.UNIVERSAL,L.Type.GENERALIZEDTIME,!1,L.dateToGeneralizedTime(i))}return L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.type).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SET,!0,[t])])}function PE(e){return[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(ee.pki.oids.data).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.algorithm).getBytes()),e.parameter?L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),L.create(L.Class.CONTEXT_SPECIFIC,0,!0,[L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,e.content.getBytes())])]}function Wo(e,t,r){var n={},i=[];if(!L.validate(t,r,n,i)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var a=L.derToOid(n.contentType);if(a!==ee.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var o="";if(ee.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==L.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=n.encryptedContent[l].value}else o=n.encryptedContent;e.encryptedContent={algorithm:L.derToOid(n.encAlgorithm),parameter:ee.util.createBuffer(n.encParameter.value),content:ee.util.createBuffer(o)}}if(n.content){var o="";if(ee.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==L.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=n.content[l].value}else o=n.content;e.content=ee.util.createBuffer(o)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function Uf(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case ee.pki.oids["aes128-CBC"]:case ee.pki.oids["aes192-CBC"]:case ee.pki.oids["aes256-CBC"]:t=ee.aes.createDecryptionCipher(e.encryptedContent.key);break;case ee.pki.oids.desCBC:case ee.pki.oids["des-EDE3-CBC"]:t=ee.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}var mt=_e,Xs=mt.ssh=mt.ssh||{};Xs.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var n="ssh-rsa",i=t===""?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: "+n+`\r
`;s+="Encryption: "+i+`\r
`,s+="Comment: "+r+`\r
`;var a=mt.util.createBuffer();Ln(a,n),fr(a,e.e),fr(a,e.n);var o=mt.util.encode64(a.bytes(),64),l=Math.floor(o.length/66)+1;s+="Public-Lines: "+l+`\r
`,s+=o;var u=mt.util.createBuffer();fr(u,e.d),fr(u,e.p),fr(u,e.q),fr(u,e.qInv);var c;if(!t)c=mt.util.encode64(u.bytes(),64);else{var f=u.length()+16-1;f-=f%16;var d=Qi(u.bytes());d.truncate(d.length()-f+u.length()),u.putBuffer(d);var p=mt.util.createBuffer();p.putBuffer(Qi("\0\0\0\0",t)),p.putBuffer(Qi("\0\0\0",t));var g=mt.aes.createEncryptionCipher(p.truncate(8),"CBC");g.start(mt.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var A=g.output;A.truncate(16),c=mt.util.encode64(A.bytes(),64)}l=Math.floor(c.length/66)+1,s+=`\r
Private-Lines: `+l+`\r
`,s+=c;var _=Qi("putty-private-key-file-mac-key",t),T=mt.util.createBuffer();Ln(T,n),Ln(T,i),Ln(T,r),T.putInt32(a.length()),T.putBuffer(a),T.putInt32(u.length()),T.putBuffer(u);var k=mt.hmac.create();return k.start("sha1",_),k.update(T.bytes()),s+=`\r
Private-MAC: `+k.digest().toHex()+`\r
`,s};Xs.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=mt.util.createBuffer();return Ln(n,r),fr(n,e.e),fr(n,e.n),r+" "+mt.util.encode64(n.bytes())+" "+t};Xs.privateKeyToOpenSSH=function(e,t){return t?mt.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):mt.pki.privateKeyToPem(e)};Xs.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||mt.md.md5.create(),n="ssh-rsa",i=mt.util.createBuffer();Ln(i,n),fr(i,e.e),fr(i,e.n),r.start(),r.update(i.getBytes());var s=r.digest();if(t.encoding==="hex"){var a=s.toHex();return t.delimiter?a.match(/.{2}/g).join(t.delimiter):a}else{if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};function fr(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=mt.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function Ln(e,t){e.putInt32(t.length),e.putString(t)}function Qi(){for(var e=mt.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}(function(e){e.exports=_e})(jc);const $n=Zf(jc.exports),FE={peerOpts:{config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"}]}}},Ya=e=>{const t=$n.util.createBuffer();return t.putBytes($n.util.hexToBytes(e)),t},Pf=e=>{const t=e.substring(0,32),r=e.substring(32);return{key:Ya(t),iv:Ya(r)}},VE=(e,t)=>{const{key:r,iv:n}=Pf(t),i=$n.cipher.createCipher("AES-CBC",r);return i.start({iv:n}),i.update($n.util.createBuffer(e)),i.finish(),i.output.toHex()},yu=(e,t)=>{const{key:r,iv:n}=Pf(t),i=$n.cipher.createDecipher("AES-CBC",r);return i.start({iv:n}),i.update(Ya(e)),i.finish()?i.output.toString():null};class HE{constructor(t){this.name=t,this.session=null}isEntered(){return this.session!==null}enter(t,r,n,i,s){const a=$n.md.sha512.create().update(this.name).digest().toHex(),o=new Yn,l=o.getMap("nav");l.observe(f=>i(l.get("state")));const u=o.getArray("chat");u.observe(f=>{for(const d of[...f.changes.delta[0].insert].reverse()){const p=yu(d.encryptedMessage,this.session.secret);p!==null&&s({username:d.username,message:p})}});const c=new zv(a.substring(0,a.length-64),o,FE);return this.session={secret:a.substring(a.length-64),ydoc:o,awareness:c.awareness},this.session.awareness.on("change",f=>n(this.session.awareness.getStates())),this.session.awareness.setLocalStateField("username",t),this.session.awareness.setLocalStateField("navControl",r),{clientID:this.session.awareness.clientID,messages:u.toArray().map(f=>{const d=yu(f.encryptedMessage,this.session.secret);return d!==null?{username:f.username,message:d}:null})}}leave(){!this.isEntered()||(this.session.ydoc.destroy(),this.session=null)}setNavControl(t){!this.isEntered()||this.session.awareness.setLocalStateField("navControl",t)}navigate(t){if(!this.isEntered())return;this.session.ydoc.getMap("nav").set("state",t)}send(t){if(!this.isEntered())return;const r=this.session.ydoc.getArray("chat");r.insert(0,[{username:this.session.awareness.getLocalState().username,encryptedMessage:VE(t,this.session.secret)}]),r.delete(100,r.length-100)}}function vu(e,t,r){const n=e.slice();return n[16]=t[r],n}function qE(e){let t,r,n,i,s,a,o,l,u,c,f,d,p,g,A,_,T,k,y,w,S,x,I;function U(K,ie){return K[6]?QE:GE}let H=U(e),D=H(e);s=new Ft({props:{id:"logout"}}),k=new Ft({props:{id:"send"}});let M=e[3].chat,q=[];for(let K=0;K<M.length;K+=1)q[K]=Cu(vu(e,M,K));return{c(){t=oe("div"),r=oe("button"),D.c(),n=Pe(),i=oe("button"),ct(s.$$.fragment),a=Pe(),o=oe("p"),l=je("Praying in "),u=oe("em"),c=je(e[0]),f=je(" (private) "),d=je(e[5]),p=Pe(),g=oe("div"),A=oe("input"),_=Pe(),T=oe("button"),ct(k.$$.fragment),y=Pe();for(let K=0;K<q.length;K+=1)q[K].c();w=Rs(),re(r,"class","svelte-1689pjd"),re(i,"class","svelte-1689pjd"),re(t,"class","action svelte-1689pjd"),re(o,"class","svelte-1689pjd"),re(A,"type","text"),re(A,"placeholder","Your prayer intention"),re(A,"class","svelte-1689pjd"),re(T,"class","svelte-1689pjd"),re(g,"class","action svelte-1689pjd")},m(K,ie){Se(K,t,ie),W(t,r),D.m(r,null),W(t,n),W(t,i),at(s,i,null),Se(K,a,ie),Se(K,o,ie),W(o,l),W(o,u),W(u,c),W(o,f),W(o,d),Se(K,p,ie),Se(K,g,ie),W(g,A),kn(A,e[4]),W(g,_),W(g,T),at(k,T,null),Se(K,y,ie);for(let X=0;X<q.length;X+=1)q[X].m(K,ie);Se(K,w,ie),S=!0,x||(I=[Rt(r,"click",e[10]),Rt(i,"click",e[8]),Rt(A,"input",e[13]),Rt(T,"click",e[9])],x=!0)},p(K,ie){if(H!==(H=U(K))&&(D.d(1),D=H(K),D&&(D.c(),D.m(r,null))),(!S||ie&1)&&jt(c,K[0]),(!S||ie&32)&&jt(d,K[5]),ie&16&&A.value!==K[4]&&kn(A,K[4]),ie&8){M=K[3].chat;let X;for(X=0;X<M.length;X+=1){const ue=vu(K,M,X);q[X]?q[X].p(ue,ie):(q[X]=Cu(ue),q[X].c(),q[X].m(w.parentNode,w))}for(;X<q.length;X+=1)q[X].d(1);q.length=M.length}},i(K){S||(me(s.$$.fragment,K),me(k.$$.fragment,K),S=!0)},o(K){be(s.$$.fragment,K),be(k.$$.fragment,K),S=!1},d(K){K&&Ce(t),D.d(),ot(s),K&&Ce(a),K&&Ce(o),K&&Ce(p),K&&Ce(g),ot(k),K&&Ce(y),dn(q,K),K&&Ce(w),x=!1,Sr(I)}}}function KE(e){let t,r,n,i,s,a,o,l,u,c,f,d;return u=new Ft({props:{id:"login"}}),{c(){t=oe("h1"),t.textContent="Private groups",r=Pe(),n=oe("input"),i=Pe(),s=oe("div"),a=oe("input"),o=Pe(),l=oe("button"),ct(u.$$.fragment),re(t,"class","svelte-1689pjd"),re(n,"type","text"),re(n,"placeholder","Your name"),re(n,"class","svelte-1689pjd"),re(a,"type","text"),re(a,"placeholder","Name of a private group"),re(a,"class","svelte-1689pjd"),re(l,"class","svelte-1689pjd"),re(s,"class","action svelte-1689pjd")},m(p,g){Se(p,t,g),Se(p,r,g),Se(p,n,g),kn(n,e[1]),Se(p,i,g),Se(p,s,g),W(s,a),kn(a,e[0]),W(s,o),W(s,l),at(u,l,null),c=!0,f||(d=[Rt(n,"input",e[11]),Rt(a,"input",e[12]),Rt(l,"click",e[7])],f=!0)},p(p,g){g&2&&n.value!==p[1]&&kn(n,p[1]),g&1&&a.value!==p[0]&&kn(a,p[0])},i(p){c||(me(u.$$.fragment,p),c=!0)},o(p){be(u.$$.fragment,p),c=!1},d(p){p&&Ce(t),p&&Ce(r),p&&Ce(n),p&&Ce(i),p&&Ce(s),ot(u),f=!1,Sr(d)}}}function GE(e){let t;return{c(){t=je("Lead this group")},m(r,n){Se(r,t,n)},d(r){r&&Ce(t)}}}function QE(e){let t;return{c(){t=je("Stop leading this group")},m(r,n){Se(r,t,n)},d(r){r&&Ce(t)}}}function Cu(e){let t,r,n=e[16].username+"",i,s,a=e[16].message+"",o;return{c(){t=oe("p"),r=oe("em"),i=je(n),s=je(": "),o=je(a),re(t,"class","svelte-1689pjd")},m(l,u){Se(l,t,u),W(t,r),W(r,i),W(t,s),W(t,o)},p(l,u){u&8&&n!==(n=l[16].username+"")&&jt(i,n),u&8&&a!==(a=l[16].message+"")&&jt(o,a)},d(l){l&&Ce(t)}}}function bu(e){let t,r,n,i,s,a;const o=[KE,qE],l=[];function u(c,f){return c[2]===null?0:1}return r=u(e),n=l[r]=o[r](e),{c(){t=oe("div"),n.c(),re(t,"class","svelte-1689pjd")},m(c,f){Se(c,t,f),l[r].m(t,null),a=!0},p(c,f){let d=r;r=u(c),r===d?l[r].p(c,f):(Nr(),be(l[d],1,1,()=>{l[d]=null}),Mr(),n=l[r],n?n.p(c,f):(n=l[r]=o[r](c),n.c()),me(n,1),n.m(t,null))},i(c){a||(me(n),Wr(()=>{s&&s.end(1),i=to(t,Pn,{delay:75,duration:75}),i.start()}),a=!0)},o(c){be(n),i&&i.invalidate(),s=ro(t,Pn,{duration:75}),a=!1},d(c){c&&Ce(t),l[r].d(),c&&s&&s.end()}}}function jE(e){let t,r=e[2],n,i=bu(e);return{c(){t=oe("div"),i.c(),re(t,"class","groups svelte-1689pjd")},m(s,a){Se(s,t,a),i.m(t,null),n=!0},p(s,[a]){a&4&&Nt(r,r=s[2])?(Nr(),be(i,1,1,We),Mr(),i=bu(s),i.c(),me(i,1),i.m(t,null)):i.p(s,a)},i(s){n||(me(i),n=!0)},o(s){be(i),n=!1},d(s){s&&Ce(t),i.d(s)}}}function $E(e,t,r){let n,i,s;tt(e,_t,y=>r(14,n=y)),tt(e,ln,y=>r(6,i=y)),tt(e,ui,y=>r(1,s=y));let a=null,o={},l="",u="",c="";const f=()=>{if(l.length==0||(ui.update(w=>w.trim()),s.length==0))return;ln.set(!1),r(2,a=new HE(l)),r(3,o.awareness=[],o),r(3,o.chat=[],o);const y=a.enter(s,i,w=>{r(3,o.awareness=[...w],o),r(5,c=A())},w=>{(n.prayer!=w.prayer||n.lang!=w.lang||n.stage!=w.stage||n.step!=w.step)&&_t.update(S=>(S.prayer=w.prayer,S.lang=w.lang,S.stage=w.stage,S.step=w.step,S.conf=w.conf,S))},w=>{r(3,o.chat=[w,...o.chat.slice(0,99)],o)});r(3,o.clientID=y.clientID,o),r(3,o.chat=y.messages.filter(w=>w!==null),o),r(4,u="")},d=()=>{a.leave(),r(2,a=null),r(3,o={}),ln.set(!0)},p=()=>{r(4,u=u.trim()),u.length!=0&&(a.send(u),r(4,u=""))},g=()=>{ln.update(y=>!y),a.setNavControl(i),i&&a.navigate(n)},A=()=>{const y=o.awareness.length-1;return y==0?"":"with "+y+" "+(y==1?"friend":"friends")+": "+o.awareness.filter(w=>w[0]!=o.clientID).map(w=>w[1].username+(w[1].navControl?" (leader)":"")).join(", ")};_t.subscribe(y=>{a!==null&&a.navigate(y)});function _(){s=this.value,ui.set(s)}function T(){l=this.value,r(0,l)}function k(){u=this.value,r(4,u)}return e.$$.update=()=>{e.$$.dirty&1&&r(0,l=l.toLowerCase().replace(RegExp(/[^\p{L}0-9\-]/,"gu"),"")),e.$$.dirty&2&&Hf(ui,s=s.replace(RegExp(/[^\p{L} \.\-]/,"gu"),""),s)},[l,s,a,o,u,c,i,f,d,p,g,_,T,k]}class zE extends or{constructor(t){super(),ar(this,t,$E,jE,Nt,{})}}function JE(e){let t,r,n,i,s,a,o,l,u,c,f,d,p,g,A,_,T,k,y,w,S;return a=new Ft({props:{id:"menu",small:!0}}),l=new Ft({props:{id:"import_contacts",small:!0}}),A=new Ft({props:{id:"groups",small:!0}}),{c(){t=oe("div"),r=oe("h1"),r.textContent="Pray alone",n=Pe(),i=oe("p"),s=je("Use the first tab "),ct(a.$$.fragment),o=je(" to choose the language and start the prayer. Read it in the second tab "),ct(l.$$.fragment),u=je("."),c=Pe(),f=oe("h1"),f.textContent="Pray with friends",d=Pe(),p=oe("p"),g=je("In the third tab "),ct(A.$$.fragment),_=je(", type the name of your private group. Then you can choose if you want to lead the group or just automatically follow what everyone is praying."),T=Pe(),k=oe("p"),k.textContent="You can also share prayer intentions with the group. Currently you cannot edit an intention after you've sent it.",y=Pe(),w=oe("p"),w.textContent="If you're starting a new private group, please choose a group name that won't be used by other people. Anyone who knows the name is allowed to lead the group as well as read prayer intentions in it.",re(r,"class","svelte-lfk3kv"),re(i,"class","svelte-lfk3kv"),re(f,"class","svelte-lfk3kv"),re(p,"class","svelte-lfk3kv"),re(k,"class","svelte-lfk3kv"),re(w,"class","svelte-lfk3kv"),re(t,"class","help svelte-lfk3kv")},m(x,I){Se(x,t,I),W(t,r),W(t,n),W(t,i),W(i,s),at(a,i,null),W(i,o),at(l,i,null),W(i,u),W(t,c),W(t,f),W(t,d),W(t,p),W(p,g),at(A,p,null),W(p,_),W(t,T),W(t,k),W(t,y),W(t,w),S=!0},p:We,i(x){S||(me(a.$$.fragment,x),me(l.$$.fragment,x),me(A.$$.fragment,x),S=!0)},o(x){be(a.$$.fragment,x),be(l.$$.fragment,x),be(A.$$.fragment,x),S=!1},d(x){x&&Ce(t),ot(a),ot(l),ot(A)}}}class WE extends or{constructor(t){super(),ar(this,t,null,JE,Nt,{})}}_t.subscribe(e=>{localStorage.setItem("state",JSON.stringify(e))});ui.subscribe(e=>{localStorage.setItem("privateName",e)});function YE(e){let t,r,n,i,s,a,o,l,u,c,f,d,p,g,A,_,T,k,y,w,S,x;return n=new Tm({}),l=new Dm({}),f=new Jm({}),g=new zE({}),T=new WE({}),S=new Bm({}),{c(){t=oe("div"),r=oe("header"),ct(n.$$.fragment),i=Pe(),s=oe("main"),a=oe("div"),o=oe("div"),ct(l.$$.fragment),u=Pe(),c=oe("div"),ct(f.$$.fragment),d=Pe(),p=oe("div"),ct(g.$$.fragment),A=Pe(),_=oe("div"),ct(T.$$.fragment),y=Pe(),w=oe("footer"),ct(S.$$.fragment),re(r,"class","svelte-zqxb60"),re(o,"data-tab","menu"),re(o,"class","svelte-zqxb60"),re(c,"data-tab","prayer"),re(c,"class","svelte-zqxb60"),re(p,"data-tab","groups"),re(p,"class","svelte-zqxb60"),re(_,"data-tab","help"),re(_,"class","svelte-zqxb60"),re(a,"class",k=Xo("tab-"+e[0])+" svelte-zqxb60"),re(s,"class","svelte-zqxb60"),re(w,"class","svelte-zqxb60"),re(t,"class","container svelte-zqxb60")},m(I,U){Se(I,t,U),W(t,r),at(n,r,null),W(t,i),W(t,s),W(s,a),W(a,o),at(l,o,null),W(a,u),W(a,c),at(f,c,null),W(a,d),W(a,p),at(g,p,null),W(a,A),W(a,_),at(T,_,null),W(t,y),W(t,w),at(S,w,null),x=!0},p(I,[U]){(!x||U&1&&k!==(k=Xo("tab-"+I[0])+" svelte-zqxb60"))&&re(a,"class",k)},i(I){x||(me(n.$$.fragment,I),me(l.$$.fragment,I),me(f.$$.fragment,I),me(g.$$.fragment,I),me(T.$$.fragment,I),me(S.$$.fragment,I),x=!0)},o(I){be(n.$$.fragment,I),be(l.$$.fragment,I),be(f.$$.fragment,I),be(g.$$.fragment,I),be(T.$$.fragment,I),be(S.$$.fragment,I),x=!1},d(I){I&&Ce(t),ot(n),ot(l),ot(f),ot(g),ot(T),ot(S)}}}function XE(e,t,r){let n;tt(e,is,a=>r(0,n=a)),is.subscribe(a=>{for(const o of document.querySelectorAll("[data-tab]"))a==o.dataset.tab?o.scrollTo({top:0}):o.scrollTo({top:0,behavior:"smooth"})});const i=new sh,s=()=>{document.removeEventListener("click",s,!1),document.removeEventListener("mousemove",s,!1),document.removeEventListener("touchmove",s,!1),i.enable()};return document.addEventListener("click",s,!1),document.addEventListener("mousemove",s,!1),document.addEventListener("touchmove",s,!1),[n]}class ZE extends or{constructor(t){super(),ar(this,t,XE,YE,Nt,{})}}new ZE({target:document.getElementById("app")});
